{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/mdui.jq/es/$.js","webpack:///./node_modules/mdclub-sdk-js/es/util/requestHandler.js","webpack:///./node_modules/mdui.jq/es/utils.js","webpack:///./node_modules/mdui/es/mdui.js","webpack:///./node_modules/mdclub-sdk-js/es/util/requestAlias.js","webpack:///./node_modules/mdui/es/utils/dom.js","webpack:///./src/utils/errorHandler.js","webpack:///./node_modules/mdui.jq/es/functions/each.js","webpack:///./node_modules/mdclub-sdk-js/es/UserApi.js","webpack:///./node_modules/mdui.jq/es/JQ.js","webpack:///./node_modules/mdclub-sdk-js/es/defaults.js","webpack:///./src/components/user-popover/actions.js","webpack:///./node_modules/mdclub-sdk-js/es/util/requestMethod.js","webpack:///./src/utils/func.js","webpack:///./node_modules/highlight.js/lib/core.js","webpack:///./node_modules/sha-1/dist/sha1.umd.js","webpack:///./node_modules/time-stamp/index.js","webpack:///./node_modules/mdui.jq/es/functions/param.js","webpack:///./node_modules/highlight.js/lib/languages/xml.js","webpack:///./node_modules/highlight.js/lib/languages/css.js","webpack:///./node_modules/highlight.js/lib/languages/javascript.js","webpack:///./node_modules/highlight.js/lib/languages/json.js","webpack:///./node_modules/highlight.js/lib/languages/php.js","webpack:///./node_modules/mdn-polyfills/MouseEvent.js","webpack:///./node_modules/mdn-polyfills/CustomEvent.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./node_modules/promise-polyfill/src/polyfill.js","webpack:///./node_modules/hyperapp/src/index.js","webpack:///./node_modules/hyperapp-router/src/Link.js","webpack:///./node_modules/hyperapp-router/src/parseRoute.js","webpack:///./node_modules/hyperapp-router/src/Route.js","webpack:///./node_modules/hyperapp-router/src/location.js","webpack:///./src/utils/pubsub.js","webpack:///./node_modules/mdui.jq/es/methods/each.js","webpack:///./node_modules/mdui.jq/es/methods/addClass.js","webpack:///./node_modules/mdui.jq/es/methods/insertBefore.js","webpack:///./node_modules/mdui.jq/es/functions/map.js","webpack:///./node_modules/mdui.jq/es/methods/map.js","webpack:///./node_modules/mdui.jq/es/methods/is.js","webpack:///./node_modules/mdui.jq/es/methods/remove.js","webpack:///./node_modules/mdui.jq/es/methods/appendTo.js","webpack:///./node_modules/mdui.jq/es/functions/unique.js","webpack:///./node_modules/mdui.jq/es/methods/children.js","webpack:///./node_modules/mdui.jq/es/methods/clone.js","webpack:///./node_modules/mdui.jq/es/functions/utils/data.js","webpack:///./node_modules/mdui.jq/es/functions/data.js","webpack:///./node_modules/mdui.jq/es/methods/data.js","webpack:///./node_modules/mdui.jq/es/functions/merge.js","webpack:///./node_modules/mdui.jq/es/methods/utils/dir.js","webpack:///./node_modules/mdui.jq/es/methods/get.js","webpack:///./node_modules/mdui.jq/es/methods/find.js","webpack:///./node_modules/mdui.jq/es/methods/next.js","webpack:///./node_modules/mdui.jq/es/functions/contains.js","webpack:///./node_modules/mdui.jq/es/methods/utils/event.js","webpack:///./node_modules/mdui.jq/es/methods/off.js","webpack:///./node_modules/mdui.jq/es/methods/on.js","webpack:///./node_modules/mdui.jq/es/methods/parent.js","webpack:///./node_modules/mdui.jq/es/methods/val.js","webpack:///./node_modules/mdui.jq/es/methods/serializeArray.js","webpack:///./node_modules/mdui.jq/es/methods/show.js","webpack:///./node_modules/mdui.jq/es/methods/width.js","webpack:///./node_modules/mdui.jq/es/methods/trigger.js","webpack:///./node_modules/mdui.jq/es/methods/attr.js","webpack:///./node_modules/mdui/es/jq_extends/methods/reflow.js","webpack:///./node_modules/mdui/es/jq_extends/methods/transitionEnd.js","webpack:///./node_modules/mdui/es/utils/mutation.js","webpack:///./node_modules/mdui/es/jq_extends/methods/mutation.js","webpack:///./node_modules/mdui/es/jq_extends/static/showOverlay.js","webpack:///./node_modules/mdui/es/jq_extends/static/hideOverlay.js","webpack:///./node_modules/mdui/es/jq_extends/static/lockScreen.js","webpack:///./node_modules/mdui/es/jq_extends/static/unlockScreen.js","webpack:///./node_modules/mdui/es/global/mutation.js","webpack:///./node_modules/mdui.jq/es/functions/extend.js","webpack:///./node_modules/mdui/es/utils/componentEvent.js","webpack:///./node_modules/mdui.jq/es/methods/slice.js","webpack:///./node_modules/mdui.jq/es/methods/eq.js","webpack:///./node_modules/mdui.jq/es/methods/first.js","webpack:///./node_modules/mdui.jq/es/methods/hasClass.js","webpack:///./node_modules/mdui/es/components/headroom/index.js","webpack:///./node_modules/mdui.jq/es/methods/position.js","webpack:///./node_modules/mdui.jq/es/methods/offset.js","webpack:///./node_modules/mdui.jq/es/methods/offsetParent.js","webpack:///./node_modules/mdui/es/jq_extends/methods/transform.js","webpack:///./node_modules/mdui/es/utils/touchHandler.js","webpack:///./node_modules/mdui/es/components/ripple/index.js","webpack:///./node_modules/mdui/es/components/textfield/index.js","webpack:///./node_modules/mdui/es/components/appbar/index.js","webpack:///./node_modules/mdui.jq/es/methods/hide.js","webpack:///./node_modules/mdui.jq/es/methods/index.js","webpack:///./node_modules/mdui/es/jq_extends/static/throttle.js","webpack:///./node_modules/mdui/es/components/tab/index.js","webpack:///./node_modules/mdui/es/utils/parseOptions.js","webpack:///./node_modules/mdui/es/components/tab/customAttr.js","webpack:///./node_modules/mdui.jq/es/methods/one.js","webpack:///./node_modules/mdui/es/components/drawer/index.js","webpack:///./node_modules/mdui.jq/es/methods/before.js","webpack:///./node_modules/mdui/es/components/drawer/customAttr.js","webpack:///./node_modules/mdui.jq/es/methods/append.js","webpack:///./node_modules/mdui/es/utils/queue.js","webpack:///./node_modules/mdui/es/components/dialog/class.js","webpack:///./node_modules/mdui/es/components/dialog/index.js","webpack:///./node_modules/mdui/es/components/dialog/dialog.js","webpack:///./node_modules/mdui/es/components/dialog/confirm.js","webpack:///./node_modules/mdui/es/jq_extends/methods/transformOrigin.js","webpack:///./node_modules/mdui/es/jq_extends/static/guid.js","webpack:///./node_modules/mdui/es/components/tooltip/index.js","webpack:///./node_modules/mdui/es/components/tooltip/customAttr.js","webpack:///./node_modules/mdui/es/components/snackbar/index.js","webpack:///./node_modules/mdui/es/components/progress/spinner.js","webpack:///./node_modules/mdui/es/components/menu/index.js","webpack:///./node_modules/mdui/es/components/menu/customAttr.js","webpack:///./node_modules/mdui.jq/es/functions/utils/ajax.js","webpack:///./node_modules/mdui.jq/es/functions/ajax.js","webpack:///./node_modules/mdclub-sdk-js/es/adapter/abstract/Browser.js","webpack:///./node_modules/mdclub-sdk-js/es/adapter/BrowserAdapter.js","webpack:///./src/utils/cookie.js","webpack:///./src/initializer/index.js","webpack:///./node_modules/mdclub-sdk-js/es/TopicApi.js","webpack:///./node_modules/mdclub-sdk-js/es/QuestionApi.js","webpack:///./node_modules/mdclub-sdk-js/es/ArticleApi.js","webpack:///./src/utils/currentUser.js","webpack:///./src/pages/index/actions.js","webpack:///./src/components/follow/actions.js","webpack:///./src/utils/actionsAbstract.js","webpack:///./src/components/editor/actions.js","webpack:///./src/components/editor/components/topic-selector/actions.js","webpack:///./src/components/editor/state.js","webpack:///./src/components/editor/components/topic-selector/state.js","webpack:///./src/pages/questions/state.js","webpack:///./src/utils/path.js","webpack:///./src/utils/time.js","webpack:///./src/pages/questions/actions.js","webpack:///./node_modules/mdclub-sdk-js/es/errors.js","webpack:///./node_modules/html-escaper/esm/index.js","webpack:///./node_modules/mdclub-sdk-js/es/AnswerApi.js","webpack:///./node_modules/mdclub-sdk-js/es/CommentApi.js","webpack:///./src/components/vote/actions.js","webpack:///./src/pages/question/stateDefault.js","webpack:///./src/pages/question/actions.js","webpack:///./src/pages/articles/state.js","webpack:///./src/pages/articles/actions.js","webpack:///./src/pages/article/stateDefault.js","webpack:///./src/pages/article/actions.js","webpack:///./src/pages/topics/state.js","webpack:///./src/pages/topics/actions.js","webpack:///./src/pages/topic/stateDefault.js","webpack:///./src/pages/topic/actions.js","webpack:///./src/pages/users/state.js","webpack:///./src/pages/users/actions.js","webpack:///./src/pages/user/stateDefault.js","webpack:///./src/pages/user/actions.js","webpack:///./src/components/login/actions.js","webpack:///./src/components/register/actions.js","webpack:///./src/components/reset/actions.js","webpack:///./src/components/users-dialog/actions.js","webpack:///./src/components/comments/actions.js","webpack:///./src/components/report-dialog/actions.js","webpack:///./src/components/share-dialog/actions.js","webpack:///./node_modules/mdclub-sdk-js/es/NotificationApi.js","webpack:///./src/pages/notifications/actions.js","webpack:///./node_modules/mdclub-sdk-js/es/CaptchaApi.js","webpack:///./node_modules/mdclub-sdk-js/es/TokenApi.js","webpack:///./src/components/users-dialog/stateDefault.js","webpack:///./src/components/comments/stateDefault.js","webpack:///./src/components/report-dialog/stateDefault.js","webpack:///./node_modules/mdclub-sdk-js/es/ReportApi.js","webpack:///./src/initializer/actions.js","webpack:///./src/components/theme/actions.js","webpack:///./src/pages/index/state.js","webpack:///./src/pages/index/components/topics/state.js","webpack:///./src/pages/question/questionState.js","webpack:///./src/pages/question/answerState.js","webpack:///./src/pages/article/state.js","webpack:///./src/pages/topic/state.js","webpack:///./src/pages/user/state.js","webpack:///./src/components/theme/state.js","webpack:///./src/components/users-dialog/state.js","webpack:///./src/components/comments/state.js","webpack:///./src/components/report-dialog/state.js","webpack:///./src/initializer/state.js","webpack:///./src/pages/notifications/state.js","webpack:///./src/components/login/state.js","webpack:///./src/components/register/state.js","webpack:///./src/components/reset/state.js","webpack:///./src/components/share-dialog/state.js","webpack:///./node_modules/classcat/src/index.js","webpack:///./src/pages/index/components/header/view.jsx","webpack:///./src/utils/scroll.js","webpack:///./src/components/loading/view.jsx","webpack:///./src/vendor/highlight/index.js","webpack:///./src/utils/html.js","webpack:///./src/components/icon-button/view.jsx","webpack:///./src/components/follow/view.jsx","webpack:///./src/components/topic-item/view.jsx","webpack:///./src/pages/index/components/topics/view.jsx","webpack:///./src/components/options-button/view.jsx","webpack:///./src/components/user-popover/view.jsx","webpack:///./src/pages/index/components/items/view.jsx","webpack:///./src/components/loaded/view.jsx","webpack:///./src/components/empty/view.jsx","webpack:///./node_modules/mdui.jq/es/methods/last.js","webpack:///./node_modules/mdui.editor/es/abstracts/commonAbstract.js","webpack:///./node_modules/mdui.editor/es/command/index.js","webpack:///./node_modules/mdui.editor/es/abstracts/menuAbstract.js","webpack:///./node_modules/mdui.editor/es/abstracts/menuNativeAbstract.js","webpack:///./node_modules/mdui.editor/es/menus/bold.js","webpack:///./node_modules/mdui.editor/es/menus/clear_drafts.js","webpack:///./node_modules/mdui.editor/es/utils/str.js","webpack:///./node_modules/mdui.jq/es/methods/add.js","webpack:///./node_modules/mdui.editor/es/menus/code.js","webpack:///./node_modules/mdui.editor/es/menus/head.js","webpack:///./node_modules/mdui/es/components/dialog/alert.js","webpack:///./node_modules/mdui.editor/es/menus/image.js","webpack:///./node_modules/mdui.editor/es/utils/format.js","webpack:///./node_modules/mdui.editor/es/menus/italic.js","webpack:///./node_modules/mdui/es/components/dialog/prompt.js","webpack:///./node_modules/mdui.editor/es/menus/link.js","webpack:///./node_modules/mdui.jq/es/methods/prev.js","webpack:///./node_modules/mdui.editor/es/abstracts/menuListAbstract.js","webpack:///./node_modules/mdui.editor/es/menus/ol.js","webpack:///./node_modules/mdui.editor/es/menus/ul.js","webpack:///./node_modules/mdui.editor/es/menus/index.js","webpack:///./node_modules/mdui.editor/es/selection/index.js","webpack:///./node_modules/mdui.editor/es/utils/ua.js","webpack:///./node_modules/mdui.editor/es/utils/paste.js","webpack:///./node_modules/mdui.editor/es/index.js","webpack:///./node_modules/mdui.editor/es/utils/purifier.js","webpack:///./src/components/editor/components/topic-chip/view.jsx","webpack:///./src/components/editor/view.jsx","webpack:///./src/components/list-item/view.jsx","webpack:///./src/components/editor/components/topic-selector/view.jsx","webpack:///./src/pages/questions/view.jsx","webpack:///./src/components/user-line/view.jsx","webpack:///./src/components/topics-bar/view.jsx","webpack:///./src/components/list-header/view.jsx","webpack:///./src/components/nav/view.jsx","webpack:///./src/components/vote/view.jsx","webpack:///./src/pages/question/components/comment-button/view.jsx","webpack:///./src/pages/question/components/answer-item/view.jsx","webpack:///./src/pages/question/view.jsx","webpack:///./src/pages/articles/view.jsx","webpack:///./src/components/comments/components/new-comment/view.jsx","webpack:///./src/components/comments/components/reply/view.jsx","webpack:///./src/components/comments/components/item/view.jsx","webpack:///./src/components/comments/view.jsx","webpack:///./src/components/comments/page.jsx","webpack:///./src/pages/article/view.jsx","webpack:///./src/pages/topics/view.jsx","webpack:///./src/pages/topic/components/topic/view.jsx","webpack:///./src/components/tab/view.jsx","webpack:///./src/pages/topic/components/contexts/view.jsx","webpack:///./src/pages/topic/view.jsx","webpack:///./src/pages/users/components/item/view.jsx","webpack:///./src/pages/users/view.jsx","webpack:///./src/utils/loading.js","webpack:///./src/components/appbar/components/toolbar/components/avatar/view.jsx","webpack:///./src/components/appbar/components/toolbar/components/search-bar/view.jsx","webpack:///./src/components/avatar-upload/view.jsx","webpack:///./src/components/cover-upload/view.jsx","webpack:///./src/pages/user/components/user/view.jsx","webpack:///./src/pages/user/components/edit-info/view.jsx","webpack:///./src/pages/user/components/contexts/view.jsx","webpack:///./src/pages/user/view.jsx","webpack:///./src/components/Loading/view.jsx","webpack:///./src/pages/notifications/components/item/view.jsx","webpack:///./src/pages/notifications/view.jsx","webpack:///./src/components/appbar/components/toolbar/components/notification/view.jsx","webpack:///./src/components/appbar/components/toolbar/components/search-icon/view.jsx","webpack:///./src/components/appbar/components/toolbar/view.jsx","webpack:///./src/components/appbar/components/tabbar/view.jsx","webpack:///./src/components/appbar/view.jsx","webpack:///./src/components/drawer/view.jsx","webpack:///./src/common/account/components/close.jsx","webpack:///./src/common/account/components/title.jsx","webpack:///./src/common/account/components/field-name.jsx","webpack:///./src/common/account/components/field-password.jsx","webpack:///./src/common/account/components/field-captcha.jsx","webpack:///./src/common/account/components/submit.jsx","webpack:///./src/components/login/components/actions.jsx","webpack:///./src/components/login/view.jsx","webpack:///./src/common/account/components/avatar.jsx","webpack:///./src/common/account/components/field-email.jsx","webpack:///./src/common/account/components/field-email-code.jsx","webpack:///./src/components/register/components/send-actions.jsx","webpack:///./src/components/register/components/register-actions.jsx","webpack:///./src/components/register/view.jsx","webpack:///./src/components/reset/components/verify-actions.jsx","webpack:///./src/components/reset/components/reset-actions.jsx","webpack:///./src/components/reset/view.jsx","webpack:///./src/components/users-dialog/view.jsx","webpack:///./src/components/report-dialog/view.jsx","webpack:///./src/components/share-dialog/view.jsx","webpack:///./src/svg/weibo.svg","webpack:///./src/svg/facebook.svg","webpack:///./src/svg/twitter.svg","webpack:///./src/components/comments/dialog.jsx","webpack:///./src/initializer/view.jsx","webpack:///./src/pages/index/view.jsx","webpack:///./src/initializer/listener.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","const","$","selector","test","document","readyState","body","addEventListener","html","trim","length","let","toCreate","li","tr","td","th","tbody","option","childTag","parentTag","indexOf","match","querySelectorAll","element","getElementById","slice","fn","get$","buildURL","path","params","queryParamNames","url","replace","pathParamName","substr","Error","String","queryObj","forEach","queryString","buildRequestBody","requestBodyNames","requestBody","isFunction","target","isString","isNumber","isBoolean","isUndefined","isNull","isWindow","Window","isDocument","Document","isElement","Element","isNode","Node","isIE","window","documentMode","isArrayLike","isObjectLike","toElement","documentElement","toCamelCase","string","_","letter","toUpperCase","toKebabCase","replacer","toLowerCase","getComputedStyleValue","getComputedStyle","getPropertyValue","isBorderBox","getExtraWidth","direction","extra","position","reduce","prev","index","prop","parseFloat","getStyle","valueNumber","getBoundingClientRect","getChildNodesArray","parent","tempParent","createElement","innerHTML","childNodes","returnFalse","cssNumber","setTimeout","addClass","mdui","adapter","requestHandle","method","data","headers","methodOverride","accepts","map","toDataURL","push","join","request","getRequest","postRequest","patchRequest","putRequest","deleteRequest","$document","$window","$body","apiCatch","response","message","code","snackbar","callback","keys","addFollow","deleteFollow","deleteMyAvatar","deleteMyCover","getAnswers","getArticles","getFollowees","getFollowers","getList","getMyFollowees","getMyFollowers","getMyFollowingArticles","getMyFollowingQuestions","getMyFollowingTopics","getQuestions","register","password","sendPasswordResetEmail","sendRegisterEmail","updateMine","updatePassword","uploadMyAvatar","formData","FormData","append","avatar","uploadMyCover","cover","JQ","arr","this","item","apiPath","timeout","onUserPopoverCreate","state","actions","timeoutId","$element","$trigger","find","$popover","menu","Menu","on","open","loadUserForUserPopover","dataName","primaryKey","primaryValue","clearTimeout","close","eval","user_id","relationships","user","include","then","setState","catch","GET","POST","PUT","PATCH","DELETE","findIndex","items","result","deepFreeze","obj","freeze","objIsFunction","getOwnPropertyNames","isFrozen","Response","undefined","ignore","escapeHTML","inherit","original","objects","tag","node","nodeName","utils","__proto__","nodeStream","_nodeStream","offset","child","firstChild","nextSibling","nodeType","nodeValue","event","mergeStreams","highlighted","processed","nodeStack","selectStream","attributes","attr","render","stream","substring","reverse","splice","pop","emitsWrappingTags","kind","HTMLRenderer","parseTree","options","buffer","classPrefix","walk","text","className","sublanguage","span","TokenTree","rootNode","children","stack","top","add","closeNode","JSON","stringify","builder","constructor","_walk","addText","openNode","every","el","_collapse","TokenTreeEmitter","super","emitter","root","source","re","C_NUMBER_RE","BACKSLASH_ESCAPE","begin","relevance","APOS_STRING_MODE","end","illegal","contains","QUOTE_STRING_MODE","PHRASAL_WORDS_MODE","COMMENT","modeOptions","C_LINE_COMMENT_MODE","C_BLOCK_COMMENT_MODE","HASH_COMMENT_MODE","NUMBER_MODE","C_NUMBER_MODE","BINARY_NUMBER_MODE","CSS_NUMBER_MODE","NUMBER_RE","REGEXP_MODE","TITLE_MODE","UNDERSCORE_TITLE_MODE","METHOD_GUARD","MODES","IDENT_RE","UNDERSCORE_IDENT_RE","BINARY_NUMBER_RE","RE_STARTERS_RE","SHEBANG","opts","beginShebang","binary","args","x","concat","resp","ignoreMatch","END_SAME_AS_BEGIN","assign","_beginMatch","COMMON_KEYWORDS","split","compileLanguage","language","langRe","global","RegExp","case_insensitive","MultiRegex","matchIndexes","regexes","matchAt","toString","exec","countMatchGroups","terminators","matcherRe","regexps","separator","backreferenceRe","numCaptures","ret","Number","lastIndex","matchData","ResumableMultiRegex","rules","multiRegexes","count","regexIndex","matcher","addRule","compile","type","getMatcher","skipIfhasPrecedingOrTrailingDot","before","input","after","includes","compileMode","cmode","compiled","__beforeBegin","keywords","beginKeywords","kw_pattern","$pattern","rawKeywords","compiled_keywords","splitAndCompile","keywordList","keyword","pair","scoreForKeyword","compileKeywords","lexemes","keywordPatternRe","beginRe","endSameAsBegin","endsWithParent","endRe","terminator_end","illegalRe","variants","cached_variants","variant","dependencyOnParent","starts","expand_or_clone_mode","mm","term","rule","buildModeRegex","providedScore","commonKeyword","escape$1","inherit$1","nodeStream$1","mergeStreams$1","NO_MATCH","highlight","hljs","ArrayProto","languages","aliases","plugins","SAFE_MODE","fixMarkupRe","LANGUAGE_NOT_FOUND","PLAINTEXT_LANGUAGE","disableAutodetect","noHighlightRe","languageDetectRe","tabReplace","useBR","__emitter","shouldNotHighlight","languageName","ignoreIllegals","continuation","context","fire","_highlight","codeToHighlight","keywordData","matchText","processBuffer","subLanguage","mode_buffer","continuations","highlightAuto","addSublanguage","processSubLanguage","last_index","buf","keywordRelevance","addKeyword","processKeywords","startNewMode","doIgnore","lexeme","continueScanAtSamePosition","doBeginMatch","new_mode","beforeCallbacks","cb","skip","excludeBegin","returnBegin","doEndMatch","matchPlusRemainder","end_mode","endOfMode","matched","startsWith","endsParent","origin","returnEnd","excludeEnd","lastMatch","processLexeme","textBeforeMatch","err","badRule","iterations","getLanguage","console","error","md","list","current","unshift","processContinuations","considerAll","processedCount","closeAllNodes","finalize","toHTML","illegalBy","msg","sofar","errorRaised","languageSubset","justTextHighlightResult","secondBest","filter","autoDetection","second_best","fixMarkup","highlightBlock","block","classes","parentNode","warn","_class","blockLanguage","textContent","originalStream","resultNode","prevClassName","currentLang","resultLang","buildClassName","relavance","initHighlighting","called","blocks","registerAliases","aliasList","alias","lang","plugin","configure","userOptions","initHighlightingOnLoad","registerLanguage","languageDefinition","rawDefinition","listLanguages","requireLanguage","addPlugin","debugMode","safeMode","versionString","HLJS","ft","b","kt","modPlus","y","low","cyclicShift","num","k","binArray","str","charAt","binToHex","blockArray","olda","oldb","oldc","oldd","olde","j","w","a","e","core","blockAmount","charCodeAt","fillString","factory","dateRegex","timespan","YYYY","YY","MM","DD","HH","ss","ms","timestamp","date","utc","Date","rest","chars","Array","isArray","destructure","keyTmp","v","encodeURIComponent","XML_ENTITIES","XML_META_KEYWORDS","XML_META_PAR_KEYWORDS","APOS_META_STRING_MODE","QUOTE_META_STRING_MODE","TAG_INTERNALS","RULE","KEYWORDS","LITERALS","BUILT_INS","lookahead","IDENT_RE$1","FRAGMENT","XML_TAG","KEYWORDS$1","literal","built_in","NUMBER","SUBST","HTML_TEMPLATE","CSS_TEMPLATE","TEMPLATE_STRING","PARAMS_CONTAINS","PARAMS","ALLOWED_COMMENTS","TYPES","VALUE_CONTAINER","OBJECT","ARRAY","VARIABLE","PREPROCESSOR","STRING","MouseEvent","bubbles","cancelable","createEvent","initMouseEvent","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","Event","detail","initCustomEvent","CustomEvent","resolve","reason","reject","setTimeoutFunc","Boolean","noop","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","self","deferred","_immediateFn","onFulfilled","onRejected","promise","newValue","finale","thisArg","apply","arguments","_unhandledRejectionFn","len","Handler","done","ex","prom","all","remaining","res","val","race","setImmediate","globalNS","h","view","container","skipRender","rootElement","oldNode","recycleElement","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","action","getPartialState","scheduleRender","setPartialState","resolveNode","patch","isSvg","newElement","createTextNode","createElementNS","oncreate","appendChild","updateAttribute","insertBefore","removeElement","oldAttributes","onupdate","updateElement","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","newKey","keyedNode","out","eventListener","currentTarget","events","oldValue","style","cssText","setProperty","removeEventListener","setAttribute","removeAttribute","removeChild","removeChildren","ondestroy","onremove","props","to","location","onclick","href","defaultPrevented","preventDefault","pathname","history","pushState","createMatch","isExact","trimTrailingSlash","decodeParam","decodeURIComponent","Route","exact","paths","urls","parseRoute","Promise","previous","go","set","subscribe","handleLocationChange","unwrap","next","title","dispatchEvent","emit","trigger","each","getAttribute","cls","classList","nameIndex","$target","newItem","cloneNode","existingItem","elements","is","isMatched","matches","msMatchesSelector","$compareWith","compare","remove","extraChilds","childLength","$result","__","childNode","setObjectToElement","rbrace","dataAttr","parse","getData","resultData","attrs","first","second","dir","$elements","foundElements","handlers","mduiElementId","getElementId","parts","sort","matcherFor","types","func","handlersInElement","removeEvent","handler","id","proxy","getHandlers","off","one","_this","origCallback","elementId","useCapture","proxyFn","callFn","elem","_detail","stopPropagation","_ns","_data","propName","0","1","2","firstElement","outerHTML","computedValue","selected","checked","serializeArray","HTMLFormElement","disabled","elementDisplay","handleExtraWidth","funcIndex","includeMargin","multiply","getExtraWidthValue","clientProp","scrollProp","offsetProp","innerProp","doc","Math","max","elementIndex","dimension","css","suffix","show","display","extraParameters","eventObject","eventParams","funcName","margin","isSet","reflow","clientLeft","transitionEnd","that","fireCallback","entries","mutation","apiInit","selectors","$this","showOverlay","zIndex","$overlay","appendTo","level","hideOverlay","force","removeClass","lockScreen","newBodyWidth","width","unlockScreen","object1","objectN","componentEvent","eventName","componentName","instance","parameters","inst","fullEventName","jQuery","eq","hasClass","DEFAULT_OPTIONS","tolerance","initialClass","pinnedClass","unpinnedClass","isEnable","lastScrollY","rafId","down","up","enable","floatStyle","getClientRects","left","rect","win","ownerDocument","defaultView","pageYOffset","pageXOffset","currentTop","currentLeft","currentOffset","currentTopString","currentLeftString","currentPosition","onScroll","requestAnimationFrame","currentScrollY","toleranceExceeded","abs","unpin","pin","triggerEvent","disable","cancelAnimationFrame","getState","Headroom","offsetParent","parentOffset","$offsetParent","transform","webkitTransform","startEvent","touches","isAllow","$ripple","touchPosition","TouchEvent","touchStartX","pageX","touchStartY","pageY","height","innerHeight","innerWidth","center","diameter","pow","translate","prependTo","wave","$wave","removeTimer","removeRipple","showRipple","parents","hidden","timer","hideRipple","defaultData","reInit","domLoadedEvent","inputEvent","$input","eventType","inputType","$textfield","validity","valid","inputValue","hasExtraSpace","outerHeight","scrollHeight","maxLength","focus","updateTextFields","hide","throttle","delay","loop","activeIndex","$tabs","$indicator","hash","tab","setActive","setIndicatorPosition","bindTabEvent","parseOptions","Function","isDisabled","$tab","clickEvent","targetId","$activeTab","activeTabOffset","scrollLeft","handleUpdate","$oldTabs","$newTabs","oldTabsElement","newTabsElement","Tab","overlay","swipe","isDesktop","swipeSupport","openNavEventHandler","swipeStartX","swiping","maybeSwiping","setPosition","translateX","transformCSS","cleanPosition","transition","webkitTransition","getMaxTranslateX","getTranslateX","currentX","min","onBodyTouchEnd","touchX","changedTouches","translateRatio","swipingState","touchmove","onBodyTouchMove","touchend","touchcancel","touchY","dXAbs","dYAbs","onBodyTouchStart","isOpen","toggle","Drawer","isPlainText","$drawer","targets","contents","content","queue","dequeue","shift","modal","closeOnEsc","closeOnCancel","closeOnConfirm","destroyOnClosed","currentInst","queueName","isLockScreen","cancel","confirm","readjust","$title","$content","$actions","elementHeight","hashchangeEvent","overlayClick","destroy","doOpen","historyBack","back","keyCode","Dialog","DEFAULT_BUTTON","bold","onClick","buttons","stackedButtons","cssClass","onOpen","onOpened","onClose","onClosed","dialog","_a","_b","buttonsHTML","HTML","confirmText","cancelText","onConfirm","onCancel","transformOrigin","webkitTransformOrigin","GUID","guid","s4","floor","random","marginLeft","marginTop","targetProps","targetMargin","tooltipWidth","offsetWidth","tooltipHeight","offsetHeight","targetOffset","oldOptions","Tooltip","buttonText","buttonColor","closeOnButtonClick","closeOnOutsideClick","onButtonClick","buttonColorStyle","buttonColorClass","layerHTML","fillHTML","spinner","$spinner","layer","translateY","snackbarHeight","clientHeight","updateSpinners","align","gutter","fixed","covered","subMenuTrigger","subMenuDelay","anchorSelector","menuSelector","$anchor","isCascade","isCovered","$item","bindSubMenuEvent","menuLeft","menuTop","transformOriginX","transformOriginY","windowHeight","windowWidth","isFixed","menuWidth","menuHeight","anchorRect","anchorTop","anchorLeft","anchorHeight","anchorWidth","anchorBottom","anchorRight","anchorOffsetTop","offsetTop","anchorOffsetLeft","offsetLeft","menuHeightTemp","menuWidthTemp","readjustSubmenu","$submenu","submenuTop","submenuLeft","submenuWidth","submenuHeight","itemRect","itemWidth","itemHeight","itemLeft","itemTop","openSubMenu","closeSubMenu","$subSubmenu","toggleSubMenu","$tmpSubmenu","timeoutOpen","$relatedTarget","tmpClose","tmpOpen","submenu","globalOptions","ajaxEvents","isQueryStringData","appendQuery","query","textStatus","isCanceled","mergedOptions","defaults","processData","async","cache","username","xhrFields","statusCode","dataType","contentType","mergeOptions","result1","result2","ArrayBuffer","Blob","param","now","xhrTimeout","xhr","XMLHttpRequest","setRequestHeader","$2","host","onload","responseData","isHttpStatusSuccess","status","responseText","responseType","onerror","statusText","onabort","abort","send","getStorage","localStorage","getItem","setStorage","setItem","removeStorage","removeItem","isFormData","token","beforeSend","success","complete","setCookie","expire","setTime","getTime","cookie","toUTCString","G_API","log","createComment","currentUser","app","scroll_position","getAddFollowFunction","getDeleteFollowFunction","toggleFollow","field","field_id","following_field","changeFollow","is_following","followParams","finally","follower_count","toggleOne","users","tabs","tabIndex","topics","users_dialog","index_topics","dataField","fieldId","toggleInList","toggleUserInRelationships","comments","isFollowing","toggleUserInRelationshipsInList","setTitle","metaTitle","G_OPTIONS","site_name","site_description","onCreate","topics_pagination","loadData","localParamName","fieldPrefix","order","per_page","questions_recent_pagination","questions_popular_pagination","articles_recent_pagination","articles_popular_pagination","scrollTo","onDestroy","pagination","loadFromServer","afterItemClick","topic_id","question_id","article_id","G_ARTICLE","G_QUESTION","G_TOPIC","editorOpen","editor_selected_topics","editor_selected_topic_ids","topic","editor_open","editorUpdateOverlay","editorClose","editorMinimize","editor_minimize","editorMaximize","editor_maximize","topicSelectorOpen","topics_data","topics_loading","loaded","infiniteLoad","page","pages","scrollTop","topicSelectorChange","isChecked","topics_max_selectable","selectedTopicsResult","dataIndex","selectedIndex","resultIndex","saveToLocalStorage","topicSelectorRemoveOne","current_tab","publishing","last_visit_id","auto_save_key","tabName","fullPath","G_ROOT","matchString","matchRegular","regular","isPathIndex","isPathArticle","isPathArticles","isPathQuestion","isPathQuestions","isPathTopic","isPathTopics","isPathUser","isPathUsers","isPathNotifications","timeFormat","ts","format","timeFriendly","timeDifference","parseInt","setHours","getFullYear","currentTimestamp","is_updated","last_update_time","replaceState","afterChangeTab","TAB_NAME","toRecent","toPopular","toFolliwing","followUpdate","questionUpdate","question","questions","hasUpdate","_question","publish","topic_ids","content_rendered","values","errors","es","unes","cape","un","commentIndex","voting","article","isDelete","answer_data","answer","answer_id","comments_data","comment","comment_id","replies_data","reply","getIdValue","voteUp","voteDown","loading","following_question","answer_order","answer_pagination","answer_loading","answer_publishing","route","stateDefault","loadQuestion","loadAnswer","loadAnswers","infiniteLoadAnswers","G_ANSWER","changeOrder","answers","G_QUESTION_ANSWERS","publishAnswer","answer_count","articleUpdate","articles","_article","following_article","loadArticle","getTopics","loadStart","loadEnd","toRecommended","toFollowing","following_topic","last_visit_article_id","last_visit_question_id","getContexts","loadTopic","getUsers","G_INTERVIEWEE","interviewee","following_interviewee","edit_info_submitting","profile_fold","last_visit_answer_id","editInfoDialog","$name","$password","$captchaCode","$email","$emailCode","$username","$passwordRepeat","$commentsWrapper","interviewee_id","loadInterviewee","deleteAvatar","deleteCover","updateUserInfo","$dialog","updateData","transformData","is_loaded_detail","is_show_detail","content_detail","updateCount","deleteOne","notification","notification_id","toggleDetail","content_deleted","generate","login","onInput","toRegister","toReset","refreshCaptcha","captcha_token","captcha_image","captcha_code","submitting","loginData","device","navigator","userAgent","reload","name_msg","password_msg","captcha_code_msg","email_valid","toLogin","countdown","resend_countdown","show_resend_countdown","sendCountdown","sendEmail","sending","email","email_code","email_code_msg","email_msg","prevStep","nextStep","verifying","registerData","username_msg","submit","password_repeat","password_repeat_msg","service","followees","followers","topic_followers","question_followers","article_followers","paramField","onItemClick","commentable_type","commentable_id","open_dialog","show_replies","show_new_reply","reply_submitting","replies_loading","replies_pagination","isInDialog","infiniteLoadInPage","doCloseDialog","openDialog","infiniteLoadInDialog","closeDialog","onSubmit","funcMaps","$newComment","$textarea","isLoadedAll","total","G_COMMENTS","loadFromPage","toggleState","fieldName","loadReplies","isLoaded","submitReply","createReply","reply_count","$customReason","customReason","reportable_type","reportable_id","getReportableId","onChange","shareToWeibo","shareToFacebook","shareToTwitter","notifications","theme","setLayout","layout","reset","usersDialog","reportDialog","shareDialog","questions_recent_data","questions_recent_loading","questions_popular_data","questions_popular_loading","articles_recent_data","articles_recent_loading","articles_popular_data","articles_popular_loading","topics_show_arrow_left","topics_show_arrow_right","cc","tmp","class","easeInOutQuad","richText","summaryText","plainText","active","tooltip","badge","toFixed","badgeFormat","iconActive","icon","backgroundImage","jumpEnd","scrollWidth","jumpTo","isLeft","timeStart","timeElapsed","duration","start","timeCurrent","scrollHorizontal","Arrow","copy","textArea","range","createRange","selectNodeContents","selection","getSelection","removeAllRanges","addRange","setSelectionRange","select","selectText","execCommand","copyToClipboard","Item","extraOptions","StatItem","label","headline","article_count","site_static_url","description","action_text","last","editor","$toolbar","$container","command","do","getRange","restore","customName","menus","changeStatus","saveRange","change","insertHTML","queryCommandSupported","insertNode","deleteContents","pasteHTML","replaceRoot","$oldElem","getRootElem","$newElem","insertAfter","createRangeByElem","insertAfterRoot","appendHTML","insertElem","$elem","$button","isActive","isSelectionEmpty","isEmpty","createEmptyRange","getElementName","getCommandName","collapseRange","queryCommandState","Bold","setHTML","autoSave","autoSaveKey","onClearDrafts","replaceHtmlSymbol","init","startOffset","getContainerElem","$rootElem","textArray","line","collapsed","isInRange","$linesRemove","$line","startContainer","endContainer","alert","inputID","suffixs","setAccepts","setInput","bindInputChange","bindKeyboardEvent","$curElem","$nextElem","imageUploadSuffix","png","jpg","gif","files","upload","file","size","imageUploadMaxSize","memory","pos","loadingDialog","uploadTime","uploadTimeInterval","imageUploadName","imageUploadUrl","setInterval","$progress","onprogress","clearInterval","imageUploadResponseTransform","rootHTML","imgHTML","Italic","maxlength","defaultValue","confirmOnEnter","prompt","defaultUrl","getName","moveListToRoot","$list","ol","$parent","moveElemToP","curElem","Ol","Ul","MenuConstructors","clear_drafts","head","image","italic","link","ul","MenuConstructor","disableMenus","currentRange","rangeCount","rangeAt","getRangeAt","$containerElem","toStart","collapse","getText","commonAncestorContainer","parentsUntil","endOffset","setEnd","isContent","selectNode","getPasteData","clipboardData","originalEvent","pasteText","pasteHtml","getPasteText","onchange","onchangeTimeout","placeholder","tagsWhiteList","toolbar","contenteditable","initSelection","bindEvent","newLine","$children","$last","updatePlaceholder","getHTML","setText","clear","compositionEnd","bindChange","saveRangeRealTime","pasteHandler","deleteHandler","containerClickHandler","dragHandler","undoHandler","onchangeTimeoutId","beforeChangeHTML","currentHTML","$selectionElem","src","small","onRemove","HeaderIcon","iconTitle","maximize","minimize","withTitle","withTopics","release","oninput","Wrapper","Avatar","snippet","updateTime","updateTimeDesc","replys","QuestionItem","answer_time","create_time","ArticleItem","AnswerItem","selected_ids","isLoading","time","closeBtnClick","orders","currentOrder","onChangeOrder","vote_up_count","vote_down_count","comment_count","AllAnswersLink","isRepliesLoaded","isRepliesLoading","globalActions","following_data","question_count","centered","is_me","$searchbar","extra_message","accept","MetaItem","contentFunc","multiLine","large","fold","blog","company","bio","followee_count","Textfield","Actions","Title","Content","More","Delete","ReplyWrapper","content_summary","CommentDeletedWrapper","UserLink","sender","QuestionLink","ArticleLink","Button","middle","Popover","onFocus","onBlur","clearInput","onBack","getFormAction","search_type","search_third","ua","onsubmit","onfocus","onblur","LoginBtn","RegisterBtn","drawer","$appbar","headroom","updateHeadroom","scrollY","distance","scrollToTop","site_icp_beian","site_gongan_beian","site_gongan_beian_code","required","autocomplete","onRefresh","onSend","sendText","svg","layoutMedia","matchMedia","changeLayout","addListener","loadNotificationCount","drawerInstance","G_USER"],"mappings":"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oBAGT,CACElC,UAAW,kBACX4B,MAAO,kCAKT,CACEA,MAAO,oBACP+F,QAzCc,WA0CdZ,SAAU,oBAEZ,CACEnF,MAAO,IAAKG,IAAK,OAIjBC,QAAS,IACToK,aAAa,EACbnK,SAAU,CACR,CACEjC,UAAW,UACX4B,MApDW,uBAsDb,CACEA,MAAO,KAAMmG,gBAAgB,EAAM+E,YAAY,EAC/CjL,UAAW,EACXkF,SA1DS,kBA2DT9E,SAAU,CACR,CACEL,MAAO,WACP5B,UAAU,aAEZqJ,EAAKvH,iBACLuH,EAAKnH,kBACLmH,EAAKzG,oBAKb,CACE5C,UAAW,eAAgB4B,MAtElB,0BAuETC,UAAW,GAEb,CACED,MAAO,IAAKG,IAAK,IACjBC,QAAS,KACTC,SAAU,CACRoH,EAAK9G,qBACLiS,Q,cC9HV,MACMC,EAAW,CACf,KACA,KACA,KACA,KACA,MACA,QACA,UACA,MACA,MACA,WACA,KACA,SACA,OACA,OACA,QACA,QACA,aACA,OACA,QACA,OACA,UACA,MACA,SACA,WACA,SACA,SACA,MACA,QACA,QACA,QAIA,WACA,QACA,QACA,SACA,SACA,OACA,SACA,WAEIC,EAAW,CACf,OACA,QACA,OACA,YACA,MACA,YAiFIC,EAAY,GAAG9Q,OAlCI,CACvB,cACA,aACA,gBACA,eAEA,UACA,UAEA,OACA,WACA,QACA,aACA,WACA,YACA,qBACA,YACA,qBACA,SACA,YAGyB,CACzB,YACA,OACA,QACA,UACA,SACA,WACA,eACA,SACA,UA3EY,CACZ,OACA,WACA,SACA,OACA,OACA,SACA,SACA,SACA,WACA,UACA,QACA,SACA,MACA,MACA,UACA,UACA,QACA,UACA,OACA,UACA,eACA,aACA,aACA,YACA,cACA,cACA,eACA,QACA,aACA,oBACA,eAGkB,CAClB,YACA,gBACA,aACA,iBACA,cACA,YACA,aAgEF,SAAS+Q,EAAUnT,GACjB,OAAOoC,EAAO,MAAOpC,EAAI,KAO3B,SAASoC,KAAUF,GAEjB,OADeA,EAAKpM,IAAKqM,IAAMpC,OApBjBC,EAoBwBmC,GAlBpB,iBAAPnC,E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","file":"index.38dcdfb8.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 89);\n","import each from './functions/each';\nimport { JQ } from './JQ';\nimport { getChildNodesArray, isArrayLike, isFunction, isNode, isString } from './utils';\n\nfunction get$() {\n  const $ = function (selector) {\n    if (!selector) {\n      return new JQ();\n    } // JQ\n\n\n    if (selector instanceof JQ) {\n      return selector;\n    } // function\n\n\n    if (isFunction(selector)) {\n      if (/complete|loaded|interactive/.test(document.readyState) && document.body) {\n        selector.call(document, $);\n      } else {\n        document.addEventListener('DOMContentLoaded', () => selector.call(document, $), false);\n      }\n\n      return new JQ([document]);\n    } // String\n\n\n    if (isString(selector)) {\n      const html = selector.trim(); // 根据 HTML 字符串创建 JQ 对象\n\n      if (html[0] === '<' && html[html.length - 1] === '>') {\n        let toCreate = 'div';\n        const tags = {\n          li: 'ul',\n          tr: 'tbody',\n          td: 'tr',\n          th: 'tr',\n          tbody: 'table',\n          option: 'select'\n        };\n        each(tags, (childTag, parentTag) => {\n          if (html.indexOf(`<${childTag}`) === 0) {\n            toCreate = parentTag;\n            return false;\n          }\n\n          return;\n        });\n        return new JQ(getChildNodesArray(html, toCreate));\n      } // 根据 CSS 选择器创建 JQ 对象\n\n\n      const isIdSelector = selector[0] === '#' && !selector.match(/[ .<>:~]/);\n\n      if (!isIdSelector) {\n        return new JQ(document.querySelectorAll(selector));\n      }\n\n      const element = document.getElementById(selector.slice(1));\n\n      if (element) {\n        return new JQ([element]);\n      }\n\n      return new JQ();\n    }\n\n    if (isArrayLike(selector) && !isNode(selector)) {\n      return new JQ(selector);\n    }\n\n    return new JQ([selector]);\n  };\n\n  $.fn = JQ.prototype;\n  return $;\n}\n\nconst $ = get$();\nexport default $;","import param from 'mdui.jq/es/functions/param';\n/**\n * 替换 url 中的变量占位符，并添加 queryParam\n * @param path             含变量占位符的 url\n * @param params           含 path 参数、 query 参数、requestBody 参数的对象\n * @param queryParamNames  query 参数名数组\n */\n\nexport function buildURL(path, params = {}, queryParamNames = []) {\n  // 替换 path 参数\n  const url = path.replace(/({.*?})/g, match => {\n    const pathParamName = match.substr(1, match.length - 2);\n\n    if (params[pathParamName] == null) {\n      throw new Error(`Missing required parameter ${pathParamName}`);\n    }\n\n    return String(params[pathParamName]);\n  }); // 添加 query 参数\n\n  const queryObj = {};\n  queryParamNames.forEach(name => {\n    if (params[name] != null) {\n      queryObj[name] = String(params[name]);\n    }\n  });\n  const queryString = param(queryObj);\n  return queryString ? `${url}?${queryString}` : url;\n}\n/**\n * 生成 requestBody 参数\n * @param params           含 path 参数、 query 参数、requestBody 参数的对象\n * @param requestBodyNames requestBody 参数名数组\n */\n\nexport function buildRequestBody(params, requestBodyNames) {\n  const requestBody = {};\n  requestBodyNames.forEach(name => {\n    if (params[name] != null) {\n      requestBody[name] = params[name];\n    }\n  });\n  return requestBody;\n}","function isNodeName(element, name) {\n  return element.nodeName.toLowerCase() === name.toLowerCase();\n}\n\nfunction isFunction(target) {\n  return typeof target === 'function';\n}\n\nfunction isString(target) {\n  return typeof target === 'string';\n}\n\nfunction isNumber(target) {\n  return typeof target === 'number';\n}\n\nfunction isBoolean(target) {\n  return typeof target === 'boolean';\n}\n\nfunction isUndefined(target) {\n  return typeof target === 'undefined';\n}\n\nfunction isNull(target) {\n  return target === null;\n}\n\nfunction isWindow(target) {\n  return target instanceof Window;\n}\n\nfunction isDocument(target) {\n  return target instanceof Document;\n}\n\nfunction isElement(target) {\n  return target instanceof Element;\n}\n\nfunction isNode(target) {\n  return target instanceof Node;\n}\n/**\n * 是否是 IE 浏览器\n */\n\n\nfunction isIE() {\n  // @ts-ignore\n  return !!window.document.documentMode;\n}\n\nfunction isArrayLike(target) {\n  if (isFunction(target) || isWindow(target)) {\n    return false;\n  }\n\n  return isNumber(target.length);\n}\n\nfunction isObjectLike(target) {\n  return typeof target === 'object' && target !== null;\n}\n\nfunction toElement(target) {\n  return isDocument(target) ? target.documentElement : target;\n}\n/**\n * 把用 - 分隔的字符串转为驼峰（如 box-sizing 转换为 boxSizing）\n * @param string\n */\n\n\nfunction toCamelCase(string) {\n  return string.replace(/^-ms-/, 'ms-').replace(/-([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n/**\n * 把驼峰法转为用 - 分隔的字符串（如 boxSizing 转换为 box-sizing）\n * @param string\n */\n\n\nfunction toKebabCase(string) {\n  return string.replace(/[A-Z]/g, replacer => '-' + replacer.toLowerCase());\n}\n/**\n * 获取元素的样式值\n * @param element\n * @param name\n */\n\n\nfunction getComputedStyleValue(element, name) {\n  return window.getComputedStyle(element).getPropertyValue(toKebabCase(name));\n}\n/**\n * 检查元素的 box-sizing 是否是 border-box\n * @param element\n */\n\n\nfunction isBorderBox(element) {\n  return getComputedStyleValue(element, 'box-sizing') === 'border-box';\n}\n/**\n * 获取元素的 padding, border, margin 宽度（两侧宽度的和，单位为px）\n * @param element\n * @param direction\n * @param extra\n */\n\n\nfunction getExtraWidth(element, direction, extra) {\n  const position = direction === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n  return [0, 1].reduce((prev, _, index) => {\n    let prop = extra + position[index];\n\n    if (extra === 'border') {\n      prop += 'Width';\n    }\n\n    return prev + parseFloat(getComputedStyleValue(element, prop) || '0');\n  }, 0);\n}\n/**\n * 获取元素的样式值，对 width 和 height 进行过处理\n * @param element\n * @param name\n */\n\n\nfunction getStyle(element, name) {\n  // width、height 属性使用 getComputedStyle 得到的值不准确，需要使用 getBoundingClientRect 获取\n  if (name === 'width' || name === 'height') {\n    const valueNumber = element.getBoundingClientRect()[name];\n\n    if (isBorderBox(element)) {\n      return `${valueNumber}px`;\n    }\n\n    return `${valueNumber - getExtraWidth(element, name, 'border') - getExtraWidth(element, name, 'padding')}px`;\n  }\n\n  return getComputedStyleValue(element, name);\n}\n/**\n * 获取子节点组成的数组\n * @param target\n * @param parent\n */\n\n\nfunction getChildNodesArray(target, parent) {\n  const tempParent = document.createElement(parent);\n  tempParent.innerHTML = target;\n  return [].slice.call(tempParent.childNodes);\n}\n/**\n * 始终返回 false 的函数\n */\n\n\nfunction returnFalse() {\n  return false;\n}\n/**\n * 数值单位的 CSS 属性\n */\n\n\nconst cssNumber = ['animationIterationCount', 'columnCount', 'fillOpacity', 'flexGrow', 'flexShrink', 'fontWeight', 'gridArea', 'gridColumn', 'gridColumnEnd', 'gridColumnStart', 'gridRow', 'gridRowEnd', 'gridRowStart', 'lineHeight', 'opacity', 'order', 'orphans', 'widows', 'zIndex', 'zoom'];\nexport { isNodeName, isArrayLike, isObjectLike, isFunction, isString, isNumber, isBoolean, isUndefined, isNull, isWindow, isDocument, isElement, isNode, isIE, toElement, toCamelCase, toKebabCase, getComputedStyleValue, isBorderBox, getExtraWidth, getStyle, getChildNodesArray, returnFalse, cssNumber };","import $ from 'mdui.jq/es/$';\nimport { $body } from './utils/dom'; // 避免页面加载完后直接执行css动画\n// https://css-tricks.com/transitions-only-after-page-load/\n\nsetTimeout(() => $body.addClass('mdui-loaded'));\nconst mdui = {\n  $: $\n};\nexport default mdui;","import defaults from '../defaults';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport { GET, POST, PUT, PATCH, DELETE } from './requestMethod';\n\nif (isUndefined(defaults.adapter)) {\n  throw new Error('adapter must be set. e.g. new BrowserAdapter() or new MiniProgramAdapter()');\n}\n\nconst requestHandle = (method, url, data) => {\n  const headers = {};\n  const XHttpMethodOverride = 'X-Http-Method-Override';\n\n  if (defaults.methodOverride) {\n    if (method === PATCH || method === PUT) {\n      headers[XHttpMethodOverride] = method;\n      method = POST;\n    }\n\n    if (method === DELETE) {\n      headers[XHttpMethodOverride] = method;\n      method = GET;\n    }\n  } // header 中添加 accept\n\n\n  const accepts = ['application/json'];\n\n  if (typeof document !== 'undefined' && !![].map && document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') === 0) {\n    accepts.push('image/webp');\n  }\n\n  headers['Accept'] = accepts.join(', ');\n  return defaults.adapter.request({\n    method,\n    url,\n    data,\n    headers\n  });\n};\n\nexport const getRequest = (url, data) => requestHandle(GET, url, data);\nexport const postRequest = (url, data) => requestHandle(POST, url, data);\nexport const patchRequest = (url, data) => requestHandle(PATCH, url, data);\nexport const putRequest = (url, data) => requestHandle(PUT, url, data);\nexport const deleteRequest = (url, data) => requestHandle(DELETE, url, data);","import $ from 'mdui.jq/es/$';\nconst $document = $(document);\nconst $window = $(window);\nconst $body = $('body');\nexport { $document, $window, $body };","import mdui from 'mdui';\nexport default function apiCatch(response) {\n  let message;\n\n  if (response.code === 999999) {\n    message = '网络错误';\n  } else if (!response.message) {\n    message = '未知错误';\n  } else {\n    message = response.message;\n  }\n\n  mdui.snackbar(message);\n}","import { isArrayLike } from '../utils';\n\nfunction each(target, callback) {\n  if (isArrayLike(target)) {\n    for (let i = 0; i < target.length; i += 1) {\n      if (callback.call(target[i], i, target[i]) === false) {\n        return target;\n      }\n    }\n  } else {\n    const keys = Object.keys(target);\n\n    for (let i = 0; i < keys.length; i += 1) {\n      if (callback.call(target[keys[i]], keys[i], target[keys[i]]) === false) {\n        return target;\n      }\n    }\n  }\n\n  return target;\n}\n\nexport default each;","// @ts-ignore\nimport sha1 from 'sha-1';\nimport { getRequest, postRequest, putRequest, patchRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL, buildRequestBody } from './util/requestHandler';\n/**\n * 🔑添加关注\n *\n * 添加关注。\n */\n\nexport const addFollow = params => postRequest(buildURL('/users/{user_id}/followers', params));\n/**\n * 🔐删除指定用户的头像，并重置为默认头像\n *\n * 删除指定用户的头像，并重置为默认头像。\n */\n\nexport const deleteAvatar = params => deleteRequest(buildURL('/users/{user_id}/avatar', params));\n/**\n * 🔐删除指定用户的封面，并重置为默认封面\n *\n * 删除指定用户的封面，并重置为默认封面。\n */\n\nexport const deleteCover = params => deleteRequest(buildURL('/users/{user_id}/cover', params));\n/**\n * 🔑取消关注\n *\n * 取消关注。\n */\n\nexport const deleteFollow = params => deleteRequest(buildURL('/users/{user_id}/followers', params));\n/**\n * 🔑删除当前登录用户的头像，并重置为默认头像\n *\n * 删除当前登录用户的头像，并重置为默认头像。\n */\n\nexport const deleteMyAvatar = () => deleteRequest(buildURL('/user/avatar', {}));\n/**\n * 🔑删除当前登录用户的封面，并重置为默认封面\n *\n * 删除当前登录用户的封面，并重置为默认封面。\n */\n\nexport const deleteMyCover = () => deleteRequest(buildURL('/user/cover', {}));\n/**\n * 🔐禁用指定用户\n *\n * 禁用指定用户。\n */\n\nexport const disable = params => postRequest(buildURL('/users/{user_id}/disable', params, ['include']));\n/**\n * 🔐批量禁用用户\n *\n * 批量禁用用户。\n */\n\nexport const disableMultiple = params => postRequest(buildURL('/users/{user_ids}/disable', params, ['include']));\n/**\n * 🔐恢复指定用户\n *\n * 恢复指定用户。\n */\n\nexport const enable = params => postRequest(buildURL('/users/{user_id}/enable', params, ['include']));\n/**\n * 🔐批量恢复用户\n *\n * 批量恢复用户。\n */\n\nexport const enableMultiple = params => postRequest(buildURL('/users/{user_ids}/enable', params, ['include']));\n/**\n * 获取指定用户信息\n *\n * 若是管理员调用该接口、或当前登录用户读取自己的个人信息，将返回用户的所有信息。  其他情况仅返回部分字段（去掉了隐私信息，隐私字段已用 🔐 标明）\n */\n\nexport const get = params => getRequest(buildURL('/users/{user_id}', params, ['include']));\n/**\n * 获取指定用户发表的回答\n *\n * 获取指定用户发表的回答。\n */\n\nexport const getAnswers = params => getRequest(buildURL('/users/{user_id}/answers', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定用户发表的文章\n *\n * 获取指定用户发表的文章。\n */\n\nexport const getArticles = params => getRequest(buildURL('/users/{user_id}/articles', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定用户发表的评论\n *\n * 获取指定用户发表的评论。\n */\n\nexport const getComments = params => getRequest(buildURL('/users/{user_id}/comments', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定用户关注的用户列表\n *\n * 获取指定用户关注的用户列表。\n */\n\nexport const getFollowees = params => getRequest(buildURL('/users/{user_id}/followees', params, ['page', 'per_page', 'include']));\n/**\n * 获取指定用户的关注者\n *\n * 获取指定用户的关注者。\n */\n\nexport const getFollowers = params => getRequest(buildURL('/users/{user_id}/followers', params, ['page', 'per_page', 'include']));\n/**\n * 获取指定用户关注的文章列表\n *\n * 获取指定用户关注的文章列表。\n */\n\nexport const getFollowingArticles = params => getRequest(buildURL('/users/{user_id}/following_articles', params, ['page', 'per_page', 'include']));\n/**\n * 获取指定用户关注的提问列表\n *\n * 获取指定用户关注的提问列表。\n */\n\nexport const getFollowingQuestions = params => getRequest(buildURL('/users/{user_id}/following_questions', params, ['page', 'per_page', 'include']));\n/**\n * 获取指定用户关注的话题列表\n *\n * 获取指定用户关注的话题列表。\n */\n\nexport const getFollowingTopics = params => getRequest(buildURL('/users/{user_id}/following_topics', params, ['page', 'per_page', 'include']));\n/**\n * 获取用户列表\n *\n * 仅管理员可使用 email 参数进行搜索。  仅管理员可获取已禁用的用户列表。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/users', params, ['page', 'per_page', 'order', 'include', 'user_id', 'username', 'email', 'disabled']));\n/**\n * 🔑获取当前登录用户的信息\n *\n * 获取当前登录用户的信息。\n */\n\nexport const getMine = (params = {}) => getRequest(buildURL('/user', params, ['include']));\n/**\n * 🔑获取当前登录用户发表的回答\n *\n * 获取当前登录用户发表的回答。\n */\n\nexport const getMyAnswers = (params = {}) => getRequest(buildURL('/user/answers', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 🔑获取当前登录用户发表的文章\n *\n * 获取当前登录用户发表的文章。\n */\n\nexport const getMyArticles = (params = {}) => getRequest(buildURL('/user/articles', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 🔑获取当前登录用户发表的评论\n *\n * 获取当前登录用户发表的评论。\n */\n\nexport const getMyComments = (params = {}) => getRequest(buildURL('/user/comments', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 🔑获取当前登录用户关注的用户\n *\n * 获取当前登录用户关注的用户。\n */\n\nexport const getMyFollowees = (params = {}) => getRequest(buildURL('/user/followees', params, ['page', 'per_page', 'include']));\n/**\n * 🔑获取当前登录用户的关注者\n *\n * 获取当前登录用户的关注者。\n */\n\nexport const getMyFollowers = (params = {}) => getRequest(buildURL('/user/followers', params, ['page', 'per_page', 'include']));\n/**\n * 🔑获取登录用户关注的文章\n *\n * 获取登录用户关注的文章。\n */\n\nexport const getMyFollowingArticles = (params = {}) => getRequest(buildURL('/user/following_articles', params, ['page', 'per_page', 'include']));\n/**\n * 🔑获取登录用户关注的提问\n *\n * 获取登录用户关注的提问。\n */\n\nexport const getMyFollowingQuestions = (params = {}) => getRequest(buildURL('/user/following_questions', params, ['page', 'per_page', 'include']));\n/**\n * 🔑获取登录用户关注的话题\n *\n * 获取登录用户关注的话题。\n */\n\nexport const getMyFollowingTopics = (params = {}) => getRequest(buildURL('/user/following_topics', params, ['page', 'per_page', 'include']));\n/**\n * 🔑获取登录用户发表的提问\n *\n * 获取登录用户发表的提问。\n */\n\nexport const getMyQuestions = (params = {}) => getRequest(buildURL('/user/questions', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定用户发表的提问\n *\n * 获取指定用户发表的提问。\n */\n\nexport const getQuestions = params => getRequest(buildURL('/users/{user_id}/questions', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 验证邮箱并创建账号\n *\n * 返回用户信息。\n */\n\nexport const register = params => {\n  if (params.password) {\n    params.password = sha1(params.password);\n  }\n\n  return postRequest(buildURL('/users', params, ['include']), buildRequestBody(params, ['email', 'email_code', 'username', 'password']));\n};\n/**\n * 发送重置密码邮箱验证码\n *\n * 若返回参数中含参数 &#x60;captcha_token&#x60; 和 &#x60;captcha_image&#x60;，表示下次调用该接口时，需要用户输入图形验证码， 并把 &#x60;captcha_token&#x60; 和 &#x60;captcha_code&#x60; 参数传递到服务端。\n */\n\nexport const sendPasswordResetEmail = params => postRequest(buildURL('/user/password/email', params), buildRequestBody(params, ['email', 'captcha_token', 'captcha_code']));\n/**\n * 发送注册邮箱验证码\n *\n * 若返回信息中含参数 &#x60;captcha_token&#x60; 和 &#x60;captcha_image&#x60;，表示下次调用该接口时，需要用户输入图形验证码， 并把 &#x60;captcha_token&#x60; 和 &#x60;captcha_code&#x60; 参数传递到服务端。\n */\n\nexport const sendRegisterEmail = params => postRequest(buildURL('/user/register/email', params), buildRequestBody(params, ['email', 'captcha_token', 'captcha_code']));\n/**\n * 🔐更新指定用户信息\n *\n * 更新指定用户信息。\n */\n\nexport const update = params => patchRequest(buildURL('/users/{user_id}', params, ['include']), buildRequestBody(params, ['headline', 'bio', 'blog', 'company', 'location']));\n/**\n * 🔑更新当前登录用户信息\n *\n * 更新当前登录用户信息。\n */\n\nexport const updateMine = params => patchRequest(buildURL('/user', params, ['include']), buildRequestBody(params, ['headline', 'bio', 'blog', 'company', 'location']));\n/**\n * 验证邮箱并更新密码\n *\n * 验证邮箱并更新密码。\n */\n\nexport const updatePassword = params => {\n  if (params.password) {\n    params.password = sha1(params.password);\n  }\n\n  return putRequest(buildURL('/user/password', params), buildRequestBody(params, ['email', 'email_code', 'password']));\n};\n/**\n * 🔑上传当前登录用户的头像\n *\n * 上传当前登录用户的头像。\n */\n\nexport const uploadMyAvatar = params => {\n  const formData = new FormData();\n  formData.append('avatar', params.avatar);\n  return postRequest(buildURL('/user/avatar'), formData);\n};\n/**\n * 🔑上传当前登录用户的封面\n *\n * 上传当前登录用户的封面。\n */\n\nexport const uploadMyCover = params => {\n  const formData = new FormData();\n  formData.append('cover', params.cover);\n  return postRequest(buildURL('/user/cover'), formData);\n};","import each from './functions/each';\n/**\n * 为了使用模块扩充，这里不能使用默认导出\n */\n\nexport class JQ {\n  constructor(arr) {\n    this.length = 0;\n\n    if (!arr) {\n      return this;\n    }\n\n    each(arr, (i, item) => {\n      // @ts-ignore\n      this[i] = item;\n    });\n    this.length = arr.length;\n    return this;\n  }\n\n}","const defaults = {\n  apiPath: '/api',\n  methodOverride: false,\n  timeout: 30000\n};\nexport default defaults;","import $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport { get as getUserInfo } from 'mdclub-sdk-js/es/UserApi';\nimport { findIndex } from '~/utils/func';\nimport apiCatch from '~/utils/errorHandler';\nexport default {\n  /**\n   * @param element\n   * @param dataName 数据或数据列表的字段名\n   * @param primaryKey 若是数据列表，则需要提供主键字段名\n   * @param primaryValue 若是数据列表，则需要提供主键字段值\n   * @param actions\n   */\n  onUserPopoverCreate: ({\n    element,\n    dataName,\n    primaryKey = null,\n    primaryValue = null\n  }) => (state, actions) => {\n    const $element = $(element);\n    const $trigger = $element.find('.user-popover-trigger');\n    const $popover = $element.find('.popover');\n    const menu = new mdui.Menu($trigger, $popover);\n    let timeoutId;\n    $trigger.on('mouseenter', () => {\n      timeoutId = setTimeout(() => {\n        menu.open();\n        actions.loadUserForUserPopover({\n          dataName,\n          primaryKey,\n          primaryValue\n        });\n      }, 500);\n    }).on('mouseleave', () => {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    });\n    $popover.on('mouseleave', () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n\n      menu.close();\n    });\n  },\n\n  /**\n   * 加载用户详细信息\n   * @param dataName\n   * @param primaryKey\n   * @param primaryValue\n   */\n  loadUserForUserPopover: ({\n    dataName,\n    primaryKey,\n    primaryValue\n  }) => (state, actions) => {\n    // eslint-disable-next-line no-eval\n    const data = eval(`state.${dataName}`);\n    let index;\n    let item;\n\n    if (primaryKey) {\n      index = findIndex(data, primaryKey, primaryValue);\n      item = data[index];\n    }\n\n    const user_id = primaryKey ? item.relationships.user.user_id : data.relationships.user.user_id;\n    getUserInfo({\n      user_id,\n      include: ['is_followed', 'is_following', 'is_me']\n    }).then(response => {\n      if (primaryKey) {\n        data[index].relationships.user = response.data;\n      } else {\n        data.relationships.user = response.data;\n      }\n\n      actions.setState({\n        [dataName]: data\n      });\n    }).catch(apiCatch);\n  }\n};","const GET = 'GET';\nconst POST = 'POST';\nconst PUT = 'PUT';\nconst PATCH = 'PATCH';\nconst DELETE = 'DELETE';\nexport { GET, POST, PUT, PATCH, DELETE };","import each from 'mdui.jq/es/functions/each';\nexport const findIndex = (items, prop, value) => {\n  let result;\n  each(items, (index, item) => {\n    if (item[prop] === value) {\n      result = index;\n      return false;\n    }\n\n    return true;\n  });\n  return result;\n};\nexport const findItem = (items, prop, value) => {\n  const index = findIndex(items, prop, value);\n  return items[index];\n};","// https://github.com/substack/deep-freeze/blob/master/index.js\n/** @param {any} obj */\nfunction deepFreeze(obj) {\n  Object.freeze(obj);\n\n  var objIsFunction = typeof obj === 'function';\n\n  Object.getOwnPropertyNames(obj).forEach(function(prop) {\n    if (Object.hasOwnProperty.call(obj, prop)\n    && obj[prop] !== null\n    && (typeof obj[prop] === \"object\" || typeof obj[prop] === \"function\")\n    // IE11 fix: https://github.com/highlightjs/highlight.js/issues/2318\n    // TODO: remove in the future\n    && (objIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true)\n    && !Object.isFrozen(obj[prop])) {\n      deepFreeze(obj[prop]);\n    }\n  });\n\n  return obj;\n}\n\nclass Response {\n  /**\n   * @param {CompiledMode} mode\n   */\n  constructor(mode) {\n    // eslint-disable-next-line no-undefined\n    if (mode.data === undefined) mode.data = {};\n\n    this.data = mode.data;\n  }\n\n  ignoreMatch() {\n    this.ignore = true;\n  }\n}\n\n/**\n * @param {string} value\n * @returns {string}\n */\nfunction escapeHTML(value) {\n  return value\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n}\n\n/**\n * performs a shallow merge of multiple objects into one\n *\n * @template T\n * @param {T} original\n * @param {Record<string,any>[]} objects\n * @returns {T} a single new object\n */\nfunction inherit(original, ...objects) {\n  /** @type Record<string,any> */\n  var result = {};\n\n  for (const key in original) {\n    result[key] = original[key];\n  }\n  objects.forEach(function(obj) {\n    for (const key in obj) {\n      result[key] = obj[key];\n    }\n  });\n  return /** @type {T} */ (result);\n}\n\n/* Stream merging */\n\n/**\n * @typedef Event\n * @property {'start'|'stop'} event\n * @property {number} offset\n * @property {Node} node\n */\n\n/**\n * @param {Node} node\n */\nfunction tag(node) {\n  return node.nodeName.toLowerCase();\n}\n\n/**\n * @param {Node} node\n */\nfunction nodeStream(node) {\n  /** @type Event[] */\n  var result = [];\n  (function _nodeStream(node, offset) {\n    for (var child = node.firstChild; child; child = child.nextSibling) {\n      if (child.nodeType === 3) {\n        offset += child.nodeValue.length;\n      } else if (child.nodeType === 1) {\n        result.push({\n          event: 'start',\n          offset: offset,\n          node: child\n        });\n        offset = _nodeStream(child, offset);\n        // Prevent void elements from having an end tag that would actually\n        // double them in the output. There are more void elements in HTML\n        // but we list only those realistically expected in code display.\n        if (!tag(child).match(/br|hr|img|input/)) {\n          result.push({\n            event: 'stop',\n            offset: offset,\n            node: child\n          });\n        }\n      }\n    }\n    return offset;\n  })(node, 0);\n  return result;\n}\n\n/**\n * @param {any} original - the original stream\n * @param {any} highlighted - stream of the highlighted source\n * @param {string} value - the original source itself\n */\nfunction mergeStreams(original, highlighted, value) {\n  var processed = 0;\n  var result = '';\n  var nodeStack = [];\n\n  function selectStream() {\n    if (!original.length || !highlighted.length) {\n      return original.length ? original : highlighted;\n    }\n    if (original[0].offset !== highlighted[0].offset) {\n      return (original[0].offset < highlighted[0].offset) ? original : highlighted;\n    }\n\n    /*\n    To avoid starting the stream just before it should stop the order is\n    ensured that original always starts first and closes last:\n\n    if (event1 == 'start' && event2 == 'start')\n      return original;\n    if (event1 == 'start' && event2 == 'stop')\n      return highlighted;\n    if (event1 == 'stop' && event2 == 'start')\n      return original;\n    if (event1 == 'stop' && event2 == 'stop')\n      return highlighted;\n\n    ... which is collapsed to:\n    */\n    return highlighted[0].event === 'start' ? original : highlighted;\n  }\n\n  /**\n   * @param {Node} node\n   */\n  function open(node) {\n    /** @param {Attr} attr */\n    function attr_str(attr) {\n      return ' ' + attr.nodeName + '=\"' + escapeHTML(attr.value) + '\"';\n    }\n    // @ts-ignore\n    result += '<' + tag(node) + [].map.call(node.attributes, attr_str).join('') + '>';\n  }\n\n  /**\n   * @param {Node} node\n   */\n  function close(node) {\n    result += '</' + tag(node) + '>';\n  }\n\n  /**\n   * @param {Event} event\n   */\n  function render(event) {\n    (event.event === 'start' ? open : close)(event.node);\n  }\n\n  while (original.length || highlighted.length) {\n    var stream = selectStream();\n    result += escapeHTML(value.substring(processed, stream[0].offset));\n    processed = stream[0].offset;\n    if (stream === original) {\n      /*\n      On any opening or closing tag of the original markup we first close\n      the entire highlighted node stack, then render the original tag along\n      with all the following original tags at the same offset and then\n      reopen all the tags on the highlighted stack.\n      */\n      nodeStack.reverse().forEach(close);\n      do {\n        render(stream.splice(0, 1)[0]);\n        stream = selectStream();\n      } while (stream === original && stream.length && stream[0].offset === processed);\n      nodeStack.reverse().forEach(open);\n    } else {\n      if (stream[0].event === 'start') {\n        nodeStack.push(stream[0].node);\n      } else {\n        nodeStack.pop();\n      }\n      render(stream.splice(0, 1)[0]);\n    }\n  }\n  return result + escapeHTML(value.substr(processed));\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  escapeHTML: escapeHTML,\n  inherit: inherit,\n  nodeStream: nodeStream,\n  mergeStreams: mergeStreams\n});\n\n/**\n * @typedef {object} Renderer\n * @property {(text: string) => void} addText\n * @property {(node: Node) => void} openNode\n * @property {(node: Node) => void} closeNode\n * @property {() => string} value\n */\n\n/** @typedef {{kind?: string, sublanguage?: boolean}} Node */\n/** @typedef {{walk: (r: Renderer) => void}} Tree */\n/** */\n\nconst SPAN_CLOSE = '</span>';\n\n/**\n * Determines if a node needs to be wrapped in <span>\n *\n * @param {Node} node */\nconst emitsWrappingTags = (node) => {\n  return !!node.kind;\n};\n\n/** @type {Renderer} */\nclass HTMLRenderer {\n  /**\n   * Creates a new HTMLRenderer\n   *\n   * @param {Tree} parseTree - the parse tree (must support `walk` API)\n   * @param {{classPrefix: string}} options\n   */\n  constructor(parseTree, options) {\n    this.buffer = \"\";\n    this.classPrefix = options.classPrefix;\n    parseTree.walk(this);\n  }\n\n  /**\n   * Adds texts to the output stream\n   *\n   * @param {string} text */\n  addText(text) {\n    this.buffer += escapeHTML(text);\n  }\n\n  /**\n   * Adds a node open to the output stream (if needed)\n   *\n   * @param {Node} node */\n  openNode(node) {\n    if (!emitsWrappingTags(node)) return;\n\n    let className = node.kind;\n    if (!node.sublanguage) {\n      className = `${this.classPrefix}${className}`;\n    }\n    this.span(className);\n  }\n\n  /**\n   * Adds a node close to the output stream (if needed)\n   *\n   * @param {Node} node */\n  closeNode(node) {\n    if (!emitsWrappingTags(node)) return;\n\n    this.buffer += SPAN_CLOSE;\n  }\n\n  /**\n   * returns the accumulated buffer\n  */\n  value() {\n    return this.buffer;\n  }\n\n  // helpers\n\n  /**\n   * Builds a span element\n   *\n   * @param {string} className */\n  span(className) {\n    this.buffer += `<span class=\"${className}\">`;\n  }\n}\n\n/** @typedef {{kind?: string, sublanguage?: boolean, children: Node[]} | string} Node */\n/** @typedef {{kind?: string, sublanguage?: boolean, children: Node[]} } DataNode */\n/**  */\n\nclass TokenTree {\n  constructor() {\n    /** @type DataNode */\n    this.rootNode = { children: [] };\n    this.stack = [this.rootNode];\n  }\n\n  get top() {\n    return this.stack[this.stack.length - 1];\n  }\n\n  get root() { return this.rootNode; }\n\n  /** @param {Node} node */\n  add(node) {\n    this.top.children.push(node);\n  }\n\n  /** @param {string} kind */\n  openNode(kind) {\n    /** @type Node */\n    const node = { kind, children: [] };\n    this.add(node);\n    this.stack.push(node);\n  }\n\n  closeNode() {\n    if (this.stack.length > 1) {\n      return this.stack.pop();\n    }\n    // eslint-disable-next-line no-undefined\n    return undefined;\n  }\n\n  closeAllNodes() {\n    while (this.closeNode());\n  }\n\n  toJSON() {\n    return JSON.stringify(this.rootNode, null, 4);\n  }\n\n  /**\n   * @typedef { import(\"./html_renderer\").Renderer } Renderer\n   * @param {Renderer} builder\n   */\n  walk(builder) {\n    // this does not\n    return this.constructor._walk(builder, this.rootNode);\n    // this works\n    // return TokenTree._walk(builder, this.rootNode);\n  }\n\n  /**\n   * @param {Renderer} builder\n   * @param {Node} node\n   */\n  static _walk(builder, node) {\n    if (typeof node === \"string\") {\n      builder.addText(node);\n    } else if (node.children) {\n      builder.openNode(node);\n      node.children.forEach((child) => this._walk(builder, child));\n      builder.closeNode(node);\n    }\n    return builder;\n  }\n\n  /**\n   * @param {Node} node\n   */\n  static _collapse(node) {\n    if (typeof node === \"string\") return;\n    if (!node.children) return;\n\n    if (node.children.every(el => typeof el === \"string\")) {\n      // node.text = node.children.join(\"\");\n      // delete node.children;\n      node.children = [node.children.join(\"\")];\n    } else {\n      node.children.forEach((child) => {\n        TokenTree._collapse(child);\n      });\n    }\n  }\n}\n\n/**\n  Currently this is all private API, but this is the minimal API necessary\n  that an Emitter must implement to fully support the parser.\n\n  Minimal interface:\n\n  - addKeyword(text, kind)\n  - addText(text)\n  - addSublanguage(emitter, subLanguageName)\n  - finalize()\n  - openNode(kind)\n  - closeNode()\n  - closeAllNodes()\n  - toHTML()\n\n*/\n\n/**\n * @implements {Emitter}\n */\nclass TokenTreeEmitter extends TokenTree {\n  /**\n   * @param {*} options\n   */\n  constructor(options) {\n    super();\n    this.options = options;\n  }\n\n  /**\n   * @param {string} text\n   * @param {string} kind\n   */\n  addKeyword(text, kind) {\n    if (text === \"\") { return; }\n\n    this.openNode(kind);\n    this.addText(text);\n    this.closeNode();\n  }\n\n  /**\n   * @param {string} text\n   */\n  addText(text) {\n    if (text === \"\") { return; }\n\n    this.add(text);\n  }\n\n  /**\n   * @param {Emitter & {root: DataNode}} emitter\n   * @param {string} name\n   */\n  addSublanguage(emitter, name) {\n    /** @type DataNode */\n    const node = emitter.root;\n    node.kind = name;\n    node.sublanguage = true;\n    this.add(node);\n  }\n\n  toHTML() {\n    const renderer = new HTMLRenderer(this, this.options);\n    return renderer.value();\n  }\n\n  finalize() {\n    return true;\n  }\n}\n\n/**\n * @param {string} value\n * @returns {RegExp}\n * */\nfunction escape(value) {\n  return new RegExp(value.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'm');\n}\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction source(re) {\n  if (!re) return null;\n  if (typeof re === \"string\") return re;\n\n  return re.source;\n}\n\n/**\n * @param {...(RegExp | string) } args\n * @returns {string}\n */\nfunction concat(...args) {\n  const joined = args.map((x) => source(x)).join(\"\");\n  return joined;\n}\n\n/**\n * @param {RegExp} re\n * @returns {number}\n */\nfunction countMatchGroups(re) {\n  return (new RegExp(re.toString() + '|')).exec('').length - 1;\n}\n\n/**\n * Does lexeme start with a regular expression match at the beginning\n * @param {RegExp} re\n * @param {string} lexeme\n */\nfunction startsWith(re, lexeme) {\n  var match = re && re.exec(lexeme);\n  return match && match.index === 0;\n}\n\n// join logically computes regexps.join(separator), but fixes the\n// backreferences so they continue to match.\n// it also places each individual regular expression into it's own\n// match group, keeping track of the sequencing of those match groups\n// is currently an exercise for the caller. :-)\n/**\n * @param {(string | RegExp)[]} regexps\n * @param {string} separator\n * @returns {string}\n */\nfunction join(regexps, separator = \"|\") {\n  // backreferenceRe matches an open parenthesis or backreference. To avoid\n  // an incorrect parse, it additionally matches the following:\n  // - [...] elements, where the meaning of parentheses and escapes change\n  // - other escape sequences, so we do not misparse escape sequences as\n  //   interesting elements\n  // - non-matching or lookahead parentheses, which do not capture. These\n  //   follow the '(' with a '?'.\n  var backreferenceRe = /\\[(?:[^\\\\\\]]|\\\\.)*\\]|\\(\\??|\\\\([1-9][0-9]*)|\\\\./;\n  var numCaptures = 0;\n  var ret = '';\n  for (var i = 0; i < regexps.length; i++) {\n    numCaptures += 1;\n    var offset = numCaptures;\n    var re = source(regexps[i]);\n    if (i > 0) {\n      ret += separator;\n    }\n    ret += \"(\";\n    while (re.length > 0) {\n      var match = backreferenceRe.exec(re);\n      if (match == null) {\n        ret += re;\n        break;\n      }\n      ret += re.substring(0, match.index);\n      re = re.substring(match.index + match[0].length);\n      if (match[0][0] === '\\\\' && match[1]) {\n        // Adjust the backreference.\n        ret += '\\\\' + String(Number(match[1]) + offset);\n      } else {\n        ret += match[0];\n        if (match[0] === '(') {\n          numCaptures++;\n        }\n      }\n    }\n    ret += \")\";\n  }\n  return ret;\n}\n\n// Common regexps\nconst IDENT_RE = '[a-zA-Z]\\\\w*';\nconst UNDERSCORE_IDENT_RE = '[a-zA-Z_]\\\\w*';\nconst NUMBER_RE = '\\\\b\\\\d+(\\\\.\\\\d+)?';\nconst C_NUMBER_RE = '(-?)(\\\\b0[xX][a-fA-F0-9]+|(\\\\b\\\\d+(\\\\.\\\\d*)?|\\\\.\\\\d+)([eE][-+]?\\\\d+)?)'; // 0x..., 0..., decimal, float\nconst BINARY_NUMBER_RE = '\\\\b(0b[01]+)'; // 0b...\nconst RE_STARTERS_RE = '!|!=|!==|%|%=|&|&&|&=|\\\\*|\\\\*=|\\\\+|\\\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\\\?|\\\\[|\\\\{|\\\\(|\\\\^|\\\\^=|\\\\||\\\\|=|\\\\|\\\\||~';\n\n/**\n* @param { Partial<Mode> & {binary?: string | RegExp} } opts\n*/\nconst SHEBANG = (opts = {}) => {\n  const beginShebang = /^#![ ]*\\//;\n  if (opts.binary) {\n    opts.begin = concat(\n      beginShebang,\n      /.*\\b/,\n      opts.binary,\n      /\\b.*/);\n  }\n  return inherit({\n    className: 'meta',\n    begin: beginShebang,\n    end: /$/,\n    relevance: 0,\n    /** @type {ModeCallback} */\n    \"on:begin\": (m, resp) => {\n      if (m.index !== 0) resp.ignoreMatch();\n    }\n  }, opts);\n};\n\n// Common modes\nconst BACKSLASH_ESCAPE = {\n  begin: '\\\\\\\\[\\\\s\\\\S]', relevance: 0\n};\nconst APOS_STRING_MODE = {\n  className: 'string',\n  begin: '\\'',\n  end: '\\'',\n  illegal: '\\\\n',\n  contains: [BACKSLASH_ESCAPE]\n};\nconst QUOTE_STRING_MODE = {\n  className: 'string',\n  begin: '\"',\n  end: '\"',\n  illegal: '\\\\n',\n  contains: [BACKSLASH_ESCAPE]\n};\nconst PHRASAL_WORDS_MODE = {\n  begin: /\\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\\b/\n};\n/**\n * Creates a comment mode\n *\n * @param {string | RegExp} begin\n * @param {string | RegExp} end\n * @param {Mode | {}} [modeOptions]\n * @returns {Partial<Mode>}\n */\nconst COMMENT = function(begin, end, modeOptions = {}) {\n  var mode = inherit(\n    {\n      className: 'comment',\n      begin,\n      end,\n      contains: []\n    },\n    modeOptions\n  );\n  mode.contains.push(PHRASAL_WORDS_MODE);\n  mode.contains.push({\n    className: 'doctag',\n    begin: '(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):',\n    relevance: 0\n  });\n  return mode;\n};\nconst C_LINE_COMMENT_MODE = COMMENT('//', '$');\nconst C_BLOCK_COMMENT_MODE = COMMENT('/\\\\*', '\\\\*/');\nconst HASH_COMMENT_MODE = COMMENT('#', '$');\nconst NUMBER_MODE = {\n  className: 'number',\n  begin: NUMBER_RE,\n  relevance: 0\n};\nconst C_NUMBER_MODE = {\n  className: 'number',\n  begin: C_NUMBER_RE,\n  relevance: 0\n};\nconst BINARY_NUMBER_MODE = {\n  className: 'number',\n  begin: BINARY_NUMBER_RE,\n  relevance: 0\n};\nconst CSS_NUMBER_MODE = {\n  className: 'number',\n  begin: NUMBER_RE + '(' +\n    '%|em|ex|ch|rem' +\n    '|vw|vh|vmin|vmax' +\n    '|cm|mm|in|pt|pc|px' +\n    '|deg|grad|rad|turn' +\n    '|s|ms' +\n    '|Hz|kHz' +\n    '|dpi|dpcm|dppx' +\n    ')?',\n  relevance: 0\n};\nconst REGEXP_MODE = {\n  // this outer rule makes sure we actually have a WHOLE regex and not simply\n  // an expression such as:\n  //\n  //     3 / something\n  //\n  // (which will then blow up when regex's `illegal` sees the newline)\n  begin: /(?=\\/[^/\\n]*\\/)/,\n  contains: [{\n    className: 'regexp',\n    begin: /\\//,\n    end: /\\/[gimuy]*/,\n    illegal: /\\n/,\n    contains: [\n      BACKSLASH_ESCAPE,\n      {\n        begin: /\\[/,\n        end: /\\]/,\n        relevance: 0,\n        contains: [BACKSLASH_ESCAPE]\n      }\n    ]\n  }]\n};\nconst TITLE_MODE = {\n  className: 'title',\n  begin: IDENT_RE,\n  relevance: 0\n};\nconst UNDERSCORE_TITLE_MODE = {\n  className: 'title',\n  begin: UNDERSCORE_IDENT_RE,\n  relevance: 0\n};\nconst METHOD_GUARD = {\n  // excludes method names from keyword processing\n  begin: '\\\\.\\\\s*' + UNDERSCORE_IDENT_RE,\n  relevance: 0\n};\n\n/**\n * Adds end same as begin mechanics to a mode\n *\n * Your mode must include at least a single () match group as that first match\n * group is what is used for comparison\n * @param {Partial<Mode>} mode\n */\nconst END_SAME_AS_BEGIN = function(mode) {\n  return Object.assign(mode,\n    {\n      /** @type {ModeCallback} */\n      'on:begin': (m, resp) => { resp.data._beginMatch = m[1]; },\n      /** @type {ModeCallback} */\n      'on:end': (m, resp) => { if (resp.data._beginMatch !== m[1]) resp.ignoreMatch(); }\n    });\n};\n\nvar MODES = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  IDENT_RE: IDENT_RE,\n  UNDERSCORE_IDENT_RE: UNDERSCORE_IDENT_RE,\n  NUMBER_RE: NUMBER_RE,\n  C_NUMBER_RE: C_NUMBER_RE,\n  BINARY_NUMBER_RE: BINARY_NUMBER_RE,\n  RE_STARTERS_RE: RE_STARTERS_RE,\n  SHEBANG: SHEBANG,\n  BACKSLASH_ESCAPE: BACKSLASH_ESCAPE,\n  APOS_STRING_MODE: APOS_STRING_MODE,\n  QUOTE_STRING_MODE: QUOTE_STRING_MODE,\n  PHRASAL_WORDS_MODE: PHRASAL_WORDS_MODE,\n  COMMENT: COMMENT,\n  C_LINE_COMMENT_MODE: C_LINE_COMMENT_MODE,\n  C_BLOCK_COMMENT_MODE: C_BLOCK_COMMENT_MODE,\n  HASH_COMMENT_MODE: HASH_COMMENT_MODE,\n  NUMBER_MODE: NUMBER_MODE,\n  C_NUMBER_MODE: C_NUMBER_MODE,\n  BINARY_NUMBER_MODE: BINARY_NUMBER_MODE,\n  CSS_NUMBER_MODE: CSS_NUMBER_MODE,\n  REGEXP_MODE: REGEXP_MODE,\n  TITLE_MODE: TITLE_MODE,\n  UNDERSCORE_TITLE_MODE: UNDERSCORE_TITLE_MODE,\n  METHOD_GUARD: METHOD_GUARD,\n  END_SAME_AS_BEGIN: END_SAME_AS_BEGIN\n});\n\n// keywords that should have no default relevance value\nvar COMMON_KEYWORDS = 'of and for in not or if then'.split(' ');\n\n// compilation\n\n/**\n * Compiles a language definition result\n *\n * Given the raw result of a language definition (Language), compiles this so\n * that it is ready for highlighting code.\n * @param {Language} language\n * @returns {CompiledLanguage}\n */\nfunction compileLanguage(language) {\n  /**\n   * Builds a regex with the case sensativility of the current language\n   *\n   * @param {RegExp | string} value\n   * @param {boolean} [global]\n   */\n  function langRe(value, global) {\n    return new RegExp(\n      source(value),\n      'm' + (language.case_insensitive ? 'i' : '') + (global ? 'g' : '')\n    );\n  }\n\n  /**\n    Stores multiple regular expressions and allows you to quickly search for\n    them all in a string simultaneously - returning the first match.  It does\n    this by creating a huge (a|b|c) regex - each individual item wrapped with ()\n    and joined by `|` - using match groups to track position.  When a match is\n    found checking which position in the array has content allows us to figure\n    out which of the original regexes / match groups triggered the match.\n\n    The match object itself (the result of `Regex.exec`) is returned but also\n    enhanced by merging in any meta-data that was registered with the regex.\n    This is how we keep track of which mode matched, and what type of rule\n    (`illegal`, `begin`, end, etc).\n  */\n  class MultiRegex {\n    constructor() {\n      this.matchIndexes = {};\n      // @ts-ignore\n      this.regexes = [];\n      this.matchAt = 1;\n      this.position = 0;\n    }\n\n    // @ts-ignore\n    addRule(re, opts) {\n      opts.position = this.position++;\n      // @ts-ignore\n      this.matchIndexes[this.matchAt] = opts;\n      this.regexes.push([opts, re]);\n      this.matchAt += countMatchGroups(re) + 1;\n    }\n\n    compile() {\n      if (this.regexes.length === 0) {\n        // avoids the need to check length every time exec is called\n        // @ts-ignore\n        this.exec = () => null;\n      }\n      const terminators = this.regexes.map(el => el[1]);\n      this.matcherRe = langRe(join(terminators), true);\n      this.lastIndex = 0;\n    }\n\n    /** @param {string} s */\n    exec(s) {\n      this.matcherRe.lastIndex = this.lastIndex;\n      const match = this.matcherRe.exec(s);\n      if (!match) { return null; }\n\n      // eslint-disable-next-line no-undefined\n      const i = match.findIndex((el, i) => i > 0 && el !== undefined);\n      // @ts-ignore\n      const matchData = this.matchIndexes[i];\n      // trim off any earlier non-relevant match groups (ie, the other regex\n      // match groups that make up the multi-matcher)\n      match.splice(0, i);\n\n      return Object.assign(match, matchData);\n    }\n  }\n\n  /*\n    Created to solve the key deficiently with MultiRegex - there is no way to\n    test for multiple matches at a single location.  Why would we need to do\n    that?  In the future a more dynamic engine will allow certain matches to be\n    ignored.  An example: if we matched say the 3rd regex in a large group but\n    decided to ignore it - we'd need to started testing again at the 4th\n    regex... but MultiRegex itself gives us no real way to do that.\n\n    So what this class creates MultiRegexs on the fly for whatever search\n    position they are needed.\n\n    NOTE: These additional MultiRegex objects are created dynamically.  For most\n    grammars most of the time we will never actually need anything more than the\n    first MultiRegex - so this shouldn't have too much overhead.\n\n    Say this is our search group, and we match regex3, but wish to ignore it.\n\n      regex1 | regex2 | regex3 | regex4 | regex5    ' ie, startAt = 0\n\n    What we need is a new MultiRegex that only includes the remaining\n    possibilities:\n\n      regex4 | regex5                               ' ie, startAt = 3\n\n    This class wraps all that complexity up in a simple API... `startAt` decides\n    where in the array of expressions to start doing the matching. It\n    auto-increments, so if a match is found at position 2, then startAt will be\n    set to 3.  If the end is reached startAt will return to 0.\n\n    MOST of the time the parser will be setting startAt manually to 0.\n  */\n  class ResumableMultiRegex {\n    constructor() {\n      // @ts-ignore\n      this.rules = [];\n      // @ts-ignore\n      this.multiRegexes = [];\n      this.count = 0;\n\n      this.lastIndex = 0;\n      this.regexIndex = 0;\n    }\n\n    // @ts-ignore\n    getMatcher(index) {\n      if (this.multiRegexes[index]) return this.multiRegexes[index];\n\n      const matcher = new MultiRegex();\n      this.rules.slice(index).forEach(([re, opts]) => matcher.addRule(re, opts));\n      matcher.compile();\n      this.multiRegexes[index] = matcher;\n      return matcher;\n    }\n\n    considerAll() {\n      this.regexIndex = 0;\n    }\n\n    // @ts-ignore\n    addRule(re, opts) {\n      this.rules.push([re, opts]);\n      if (opts.type === \"begin\") this.count++;\n    }\n\n    /** @param {string} s */\n    exec(s) {\n      const m = this.getMatcher(this.regexIndex);\n      m.lastIndex = this.lastIndex;\n      const result = m.exec(s);\n      if (result) {\n        this.regexIndex += result.position + 1;\n        if (this.regexIndex === this.count) { // wrap-around\n          this.regexIndex = 0;\n        }\n      }\n\n      // this.regexIndex = 0;\n      return result;\n    }\n  }\n\n  /**\n   * Given a mode, builds a huge ResumableMultiRegex that can be used to walk\n   * the content and find matches.\n   *\n   * @param {CompiledMode} mode\n   * @returns {ResumableMultiRegex}\n   */\n  function buildModeRegex(mode) {\n    const mm = new ResumableMultiRegex();\n\n    mode.contains.forEach(term => mm.addRule(term.begin, { rule: term, type: \"begin\" }));\n\n    if (mode.terminator_end) {\n      mm.addRule(mode.terminator_end, { type: \"end\" });\n    }\n    if (mode.illegal) {\n      mm.addRule(mode.illegal, { type: \"illegal\" });\n    }\n\n    return mm;\n  }\n\n  // TODO: We need negative look-behind support to do this properly\n  /**\n   * Skip a match if it has a preceding or trailing dot\n   *\n   * This is used for `beginKeywords` to prevent matching expressions such as\n   * `bob.keyword.do()`. The mode compiler automatically wires this up as a\n   * special _internal_ 'on:begin' callback for modes with `beginKeywords`\n   * @param {RegExpMatchArray} match\n   * @param {CallbackResponse} response\n   */\n  function skipIfhasPrecedingOrTrailingDot(match, response) {\n    const before = match.input[match.index - 1];\n    const after = match.input[match.index + match[0].length];\n    if (before === \".\" || after === \".\") {\n      response.ignoreMatch();\n    }\n  }\n\n  /** skip vs abort vs ignore\n   *\n   * @skip   - The mode is still entered and exited normally (and contains rules apply),\n   *           but all content is held and added to the parent buffer rather than being\n   *           output when the mode ends.  Mostly used with `sublanguage` to build up\n   *           a single large buffer than can be parsed by sublanguage.\n   *\n   *             - The mode begin ands ends normally.\n   *             - Content matched is added to the parent mode buffer.\n   *             - The parser cursor is moved forward normally.\n   *\n   * @abort  - A hack placeholder until we have ignore.  Aborts the mode (as if it\n   *           never matched) but DOES NOT continue to match subsequent `contains`\n   *           modes.  Abort is bad/suboptimal because it can result in modes\n   *           farther down not getting applied because an earlier rule eats the\n   *           content but then aborts.\n   *\n   *             - The mode does not begin.\n   *             - Content matched by `begin` is added to the mode buffer.\n   *             - The parser cursor is moved forward accordingly.\n   *\n   * @ignore - Ignores the mode (as if it never matched) and continues to match any\n   *           subsequent `contains` modes.  Ignore isn't technically possible with\n   *           the current parser implementation.\n   *\n   *             - The mode does not begin.\n   *             - Content matched by `begin` is ignored.\n   *             - The parser cursor is not moved forward.\n   */\n\n  /**\n   * Compiles an individual mode\n   *\n   * This can raise an error if the mode contains certain detectable known logic\n   * issues.\n   * @param {Mode} mode\n   * @param {CompiledMode | null} [parent]\n   * @returns {CompiledMode | never}\n   */\n  function compileMode(mode, parent) {\n    const cmode = /** @type CompiledMode */ (mode);\n    if (mode.compiled) return cmode;\n    mode.compiled = true;\n\n    // __beforeBegin is considered private API, internal use only\n    mode.__beforeBegin = null;\n\n    mode.keywords = mode.keywords || mode.beginKeywords;\n\n    let kw_pattern = null;\n    if (typeof mode.keywords === \"object\") {\n      kw_pattern = mode.keywords.$pattern;\n      delete mode.keywords.$pattern;\n    }\n\n    if (mode.keywords) {\n      mode.keywords = compileKeywords(mode.keywords, language.case_insensitive);\n    }\n\n    // both are not allowed\n    if (mode.lexemes && kw_pattern) {\n      throw new Error(\"ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) \");\n    }\n\n    // `mode.lexemes` was the old standard before we added and now recommend\n    // using `keywords.$pattern` to pass the keyword pattern\n    cmode.keywordPatternRe = langRe(mode.lexemes || kw_pattern || /\\w+/, true);\n\n    if (parent) {\n      if (mode.beginKeywords) {\n        // for languages with keywords that include non-word characters checking for\n        // a word boundary is not sufficient, so instead we check for a word boundary\n        // or whitespace - this does no harm in any case since our keyword engine\n        // doesn't allow spaces in keywords anyways and we still check for the boundary\n        // first\n        mode.begin = '\\\\b(' + mode.beginKeywords.split(' ').join('|') + ')(?=\\\\b|\\\\s)';\n        mode.__beforeBegin = skipIfhasPrecedingOrTrailingDot;\n      }\n      if (!mode.begin) mode.begin = /\\B|\\b/;\n      cmode.beginRe = langRe(mode.begin);\n      if (mode.endSameAsBegin) mode.end = mode.begin;\n      if (!mode.end && !mode.endsWithParent) mode.end = /\\B|\\b/;\n      if (mode.end) cmode.endRe = langRe(mode.end);\n      cmode.terminator_end = source(mode.end) || '';\n      if (mode.endsWithParent && parent.terminator_end) {\n        cmode.terminator_end += (mode.end ? '|' : '') + parent.terminator_end;\n      }\n    }\n    if (mode.illegal) cmode.illegalRe = langRe(mode.illegal);\n    // eslint-disable-next-line no-undefined\n    if (mode.relevance === undefined) mode.relevance = 1;\n    if (!mode.contains) mode.contains = [];\n\n    mode.contains = [].concat(...mode.contains.map(function(c) {\n      return expand_or_clone_mode(c === 'self' ? mode : c);\n    }));\n    mode.contains.forEach(function(c) { compileMode(/** @type Mode */ (c), cmode); });\n\n    if (mode.starts) {\n      compileMode(mode.starts, parent);\n    }\n\n    cmode.matcher = buildModeRegex(cmode);\n    return cmode;\n  }\n\n  // self is not valid at the top-level\n  if (language.contains && language.contains.includes('self')) {\n    throw new Error(\"ERR: contains `self` is not supported at the top-level of a language.  See documentation.\");\n  }\n  return compileMode(/** @type Mode */ (language));\n}\n\n/**\n * Determines if a mode has a dependency on it's parent or not\n *\n * If a mode does have a parent dependency then often we need to clone it if\n * it's used in multiple places so that each copy points to the correct parent,\n * where-as modes without a parent can often safely be re-used at the bottom of\n * a mode chain.\n *\n * @param {Mode | null} mode\n * @returns {boolean} - is there a dependency on the parent?\n * */\nfunction dependencyOnParent(mode) {\n  if (!mode) return false;\n\n  return mode.endsWithParent || dependencyOnParent(mode.starts);\n}\n\n/**\n * Expands a mode or clones it if necessary\n *\n * This is necessary for modes with parental dependenceis (see notes on\n * `dependencyOnParent`) and for nodes that have `variants` - which must then be\n * exploded into their own individual modes at compile time.\n *\n * @param {Mode} mode\n * @returns {Mode | Mode[]}\n * */\nfunction expand_or_clone_mode(mode) {\n  if (mode.variants && !mode.cached_variants) {\n    mode.cached_variants = mode.variants.map(function(variant) {\n      return inherit(mode, { variants: null }, variant);\n    });\n  }\n\n  // EXPAND\n  // if we have variants then essentially \"replace\" the mode with the variants\n  // this happens in compileMode, where this function is called from\n  if (mode.cached_variants) {\n    return mode.cached_variants;\n  }\n\n  // CLONE\n  // if we have dependencies on parents then we need a unique\n  // instance of ourselves, so we can be reused with many\n  // different parents without issue\n  if (dependencyOnParent(mode)) {\n    return inherit(mode, { starts: mode.starts ? inherit(mode.starts) : null });\n  }\n\n  if (Object.isFrozen(mode)) {\n    return inherit(mode);\n  }\n\n  // no special dependency issues, just return ourselves\n  return mode;\n}\n\n/***********************************************\n  Keywords\n***********************************************/\n\n/**\n * Given raw keywords from a language definition, compile them.\n *\n * @param {string | Record<string,string>} rawKeywords\n * @param {boolean} case_insensitive\n */\nfunction compileKeywords(rawKeywords, case_insensitive) {\n  /** @type KeywordDict */\n  var compiled_keywords = {};\n\n  if (typeof rawKeywords === 'string') { // string\n    splitAndCompile('keyword', rawKeywords);\n  } else {\n    Object.keys(rawKeywords).forEach(function(className) {\n      splitAndCompile(className, rawKeywords[className]);\n    });\n  }\n  return compiled_keywords;\n\n  // ---\n\n  /**\n   * Compiles an individual list of keywords\n   *\n   * Ex: \"for if when while|5\"\n   *\n   * @param {string} className\n   * @param {string} keywordList\n   */\n  function splitAndCompile(className, keywordList) {\n    if (case_insensitive) {\n      keywordList = keywordList.toLowerCase();\n    }\n    keywordList.split(' ').forEach(function(keyword) {\n      var pair = keyword.split('|');\n      compiled_keywords[pair[0]] = [className, scoreForKeyword(pair[0], pair[1])];\n    });\n  }\n}\n\n/**\n * Returns the proper score for a given keyword\n *\n * Also takes into account comment keywords, which will be scored 0 UNLESS\n * another score has been manually assigned.\n * @param {string} keyword\n * @param {string} [providedScore]\n */\nfunction scoreForKeyword(keyword, providedScore) {\n  // manual scores always win over common keywords\n  // so you can force a score of 1 if you really insist\n  if (providedScore) {\n    return Number(providedScore);\n  }\n\n  return commonKeyword(keyword) ? 0 : 1;\n}\n\n/**\n * Determines if a given keyword is common or not\n *\n * @param {string} keyword */\nfunction commonKeyword(keyword) {\n  return COMMON_KEYWORDS.includes(keyword.toLowerCase());\n}\n\nvar version = \"10.1.2\";\n\n/*\nSyntax highlighting with language autodetection.\nhttps://highlightjs.org/\n*/\n\nconst escape$1 = escapeHTML;\nconst inherit$1 = inherit;\n\nconst { nodeStream: nodeStream$1, mergeStreams: mergeStreams$1 } = utils;\nconst NO_MATCH = Symbol(\"nomatch\");\n\n/**\n * @param {any} hljs - object that is extended (legacy)\n * @returns {HLJSApi}\n */\nconst HLJS = function(hljs) {\n  // Convenience variables for build-in objects\n  /** @type {unknown[]} */\n  var ArrayProto = [];\n\n  // Global internal variables used within the highlight.js library.\n  /** @type {Record<string, Language>} */\n  var languages = Object.create(null);\n  /** @type {Record<string, string>} */\n  var aliases = Object.create(null);\n  /** @type {HLJSPlugin[]} */\n  var plugins = [];\n\n  // safe/production mode - swallows more errors, tries to keep running\n  // even if a single syntax or parse hits a fatal error\n  var SAFE_MODE = true;\n  var fixMarkupRe = /(^(<[^>]+>|\\t|)+|\\n)/gm;\n  var LANGUAGE_NOT_FOUND = \"Could not find the language '{}', did you forget to load/include a language module?\";\n  /** @type {Language} */\n  const PLAINTEXT_LANGUAGE = { disableAutodetect: true, name: 'Plain text', contains: [] };\n\n  // Global options used when within external APIs. This is modified when\n  // calling the `hljs.configure` function.\n  /** @type HLJSOptions */\n  var options = {\n    noHighlightRe: /^(no-?highlight)$/i,\n    languageDetectRe: /\\blang(?:uage)?-([\\w-]+)\\b/i,\n    classPrefix: 'hljs-',\n    tabReplace: null,\n    useBR: false,\n    languages: null,\n    // beta configuration options, subject to change, welcome to discuss\n    // https://github.com/highlightjs/highlight.js/issues/1086\n    __emitter: TokenTreeEmitter\n  };\n\n  /* Utility functions */\n\n  /**\n   * Tests a language name to see if highlighting should be skipped\n   * @param {string} languageName\n   */\n  function shouldNotHighlight(languageName) {\n    return options.noHighlightRe.test(languageName);\n  }\n\n  /**\n   * @param {HighlightedHTMLElement} block - the HTML element to determine language for\n   */\n  function blockLanguage(block) {\n    var classes = block.className + ' ';\n\n    classes += block.parentNode ? block.parentNode.className : '';\n\n    // language-* takes precedence over non-prefixed class names.\n    const match = options.languageDetectRe.exec(classes);\n    if (match) {\n      var language = getLanguage(match[1]);\n      if (!language) {\n        console.warn(LANGUAGE_NOT_FOUND.replace(\"{}\", match[1]));\n        console.warn(\"Falling back to no-highlight mode for this block.\", block);\n      }\n      return language ? match[1] : 'no-highlight';\n    }\n\n    return classes\n      .split(/\\s+/)\n      .find((_class) => shouldNotHighlight(_class) || getLanguage(_class));\n  }\n\n  /**\n   * Core highlighting function.\n   *\n   * @param {string} languageName - the language to use for highlighting\n   * @param {string} code - the code to highlight\n   * @param {boolean} [ignoreIllegals] - whether to ignore illegal matches, default is to bail\n   * @param {Mode} [continuation] - current continuation mode, if any\n   *\n   * @returns {HighlightResult} Result - an object that represents the result\n   * @property {string} language - the language name\n   * @property {number} relevance - the relevance score\n   * @property {string} value - the highlighted HTML code\n   * @property {string} code - the original raw code\n   * @property {Mode} top - top of the current mode stack\n   * @property {boolean} illegal - indicates whether any illegal matches were found\n  */\n  function highlight(languageName, code, ignoreIllegals, continuation) {\n    /** @type {{ code: string, language: string, result?: any }} */\n    var context = {\n      code,\n      language: languageName\n    };\n    // the plugin can change the desired language or the code to be highlighted\n    // just be changing the object it was passed\n    fire(\"before:highlight\", context);\n\n    // a before plugin can usurp the result completely by providing it's own\n    // in which case we don't even need to call highlight\n    var result = context.result ?\n      context.result :\n      _highlight(context.language, context.code, ignoreIllegals, continuation);\n\n    result.code = context.code;\n    // the plugin can change anything in result to suite it\n    fire(\"after:highlight\", result);\n\n    return result;\n  }\n\n  /**\n   * private highlight that's used internally and does not fire callbacks\n   *\n   * @param {string} languageName - the language to use for highlighting\n   * @param {string} code - the code to highlight\n   * @param {boolean} [ignoreIllegals] - whether to ignore illegal matches, default is to bail\n   * @param {Mode} [continuation] - current continuation mode, if any\n  */\n  function _highlight(languageName, code, ignoreIllegals, continuation) {\n    var codeToHighlight = code;\n\n    /**\n     * Return keyword data if a match is a keyword\n     * @param {CompiledMode} mode - current mode\n     * @param {RegExpMatchArray} match - regexp match data\n     * @returns {KeywordData | false}\n     */\n    function keywordData(mode, match) {\n      var matchText = language.case_insensitive ? match[0].toLowerCase() : match[0];\n      return Object.prototype.hasOwnProperty.call(mode.keywords, matchText) && mode.keywords[matchText];\n    }\n\n    function processKeywords() {\n      if (!top.keywords) {\n        emitter.addText(mode_buffer);\n        return;\n      }\n\n      let last_index = 0;\n      top.keywordPatternRe.lastIndex = 0;\n      let match = top.keywordPatternRe.exec(mode_buffer);\n      let buf = \"\";\n\n      while (match) {\n        buf += mode_buffer.substring(last_index, match.index);\n        const data = keywordData(top, match);\n        if (data) {\n          const [kind, keywordRelevance] = data;\n          emitter.addText(buf);\n          buf = \"\";\n\n          relevance += keywordRelevance;\n          emitter.addKeyword(match[0], kind);\n        } else {\n          buf += match[0];\n        }\n        last_index = top.keywordPatternRe.lastIndex;\n        match = top.keywordPatternRe.exec(mode_buffer);\n      }\n      buf += mode_buffer.substr(last_index);\n      emitter.addText(buf);\n    }\n\n    function processSubLanguage() {\n      if (mode_buffer === \"\") return;\n      /** @type HighlightResult */\n      var result = null;\n\n      if (typeof top.subLanguage === 'string') {\n        if (!languages[top.subLanguage]) {\n          emitter.addText(mode_buffer);\n          return;\n        }\n        result = _highlight(top.subLanguage, mode_buffer, true, continuations[top.subLanguage]);\n        continuations[top.subLanguage] = result.top;\n      } else {\n        result = highlightAuto(mode_buffer, top.subLanguage.length ? top.subLanguage : null);\n      }\n\n      // Counting embedded language score towards the host language may be disabled\n      // with zeroing the containing mode relevance. Use case in point is Markdown that\n      // allows XML everywhere and makes every XML snippet to have a much larger Markdown\n      // score.\n      if (top.relevance > 0) {\n        relevance += result.relevance;\n      }\n      emitter.addSublanguage(result.emitter, result.language);\n    }\n\n    function processBuffer() {\n      if (top.subLanguage != null) {\n        processSubLanguage();\n      } else {\n        processKeywords();\n      }\n      mode_buffer = '';\n    }\n\n    /**\n     * @param {Mode} mode - new mode to start\n     */\n    function startNewMode(mode) {\n      if (mode.className) {\n        emitter.openNode(mode.className);\n      }\n      top = Object.create(mode, { parent: { value: top } });\n      return top;\n    }\n\n    /**\n     * @param {CompiledMode } mode - the mode to potentially end\n     * @param {RegExpMatchArray} match - the latest match\n     * @param {string} matchPlusRemainder - match plus remainder of content\n     * @returns {CompiledMode | void} - the next mode, or if void continue on in current mode\n     */\n    function endOfMode(mode, match, matchPlusRemainder) {\n      let matched = startsWith(mode.endRe, matchPlusRemainder);\n\n      if (matched) {\n        if (mode[\"on:end\"]) {\n          const resp = new Response(mode);\n          mode[\"on:end\"](match, resp);\n          if (resp.ignore) matched = false;\n        }\n\n        if (matched) {\n          while (mode.endsParent && mode.parent) {\n            mode = mode.parent;\n          }\n          return mode;\n        }\n      }\n      // even if on:end fires an `ignore` it's still possible\n      // that we might trigger the end node because of a parent mode\n      if (mode.endsWithParent) {\n        return endOfMode(mode.parent, match, matchPlusRemainder);\n      }\n    }\n\n    /**\n     * Handle matching but then ignoring a sequence of text\n     *\n     * @param {string} lexeme - string containing full match text\n     */\n    function doIgnore(lexeme) {\n      if (top.matcher.regexIndex === 0) {\n        // no more regexs to potentially match here, so we move the cursor forward one\n        // space\n        mode_buffer += lexeme[0];\n        return 1;\n      } else {\n        // no need to move the cursor, we still have additional regexes to try and\n        // match at this very spot\n        continueScanAtSamePosition = true;\n        return 0;\n      }\n    }\n\n    /**\n     * Handle the start of a new potential mode match\n     *\n     * @param {EnhancedMatch} match - the current match\n     * @returns {number} how far to advance the parse cursor\n     */\n    function doBeginMatch(match) {\n      var lexeme = match[0];\n      var new_mode = match.rule;\n\n      const resp = new Response(new_mode);\n      // first internal before callbacks, then the public ones\n      const beforeCallbacks = [new_mode.__beforeBegin, new_mode[\"on:begin\"]];\n      for (const cb of beforeCallbacks) {\n        if (!cb) continue;\n        cb(match, resp);\n        if (resp.ignore) return doIgnore(lexeme);\n      }\n\n      if (new_mode && new_mode.endSameAsBegin) {\n        new_mode.endRe = escape(lexeme);\n      }\n\n      if (new_mode.skip) {\n        mode_buffer += lexeme;\n      } else {\n        if (new_mode.excludeBegin) {\n          mode_buffer += lexeme;\n        }\n        processBuffer();\n        if (!new_mode.returnBegin && !new_mode.excludeBegin) {\n          mode_buffer = lexeme;\n        }\n      }\n      startNewMode(new_mode);\n      // if (mode[\"after:begin\"]) {\n      //   let resp = new Response(mode);\n      //   mode[\"after:begin\"](match, resp);\n      // }\n      return new_mode.returnBegin ? 0 : lexeme.length;\n    }\n\n    /**\n     * Handle the potential end of mode\n     *\n     * @param {RegExpMatchArray} match - the current match\n     */\n    function doEndMatch(match) {\n      var lexeme = match[0];\n      var matchPlusRemainder = codeToHighlight.substr(match.index);\n\n      var end_mode = endOfMode(top, match, matchPlusRemainder);\n      if (!end_mode) { return NO_MATCH; }\n\n      var origin = top;\n      if (origin.skip) {\n        mode_buffer += lexeme;\n      } else {\n        if (!(origin.returnEnd || origin.excludeEnd)) {\n          mode_buffer += lexeme;\n        }\n        processBuffer();\n        if (origin.excludeEnd) {\n          mode_buffer = lexeme;\n        }\n      }\n      do {\n        if (top.className) {\n          emitter.closeNode();\n        }\n        if (!top.skip && !top.subLanguage) {\n          relevance += top.relevance;\n        }\n        top = top.parent;\n      } while (top !== end_mode.parent);\n      if (end_mode.starts) {\n        if (end_mode.endSameAsBegin) {\n          end_mode.starts.endRe = end_mode.endRe;\n        }\n        startNewMode(end_mode.starts);\n      }\n      return origin.returnEnd ? 0 : lexeme.length;\n    }\n\n    function processContinuations() {\n      var list = [];\n      for (var current = top; current !== language; current = current.parent) {\n        if (current.className) {\n          list.unshift(current.className);\n        }\n      }\n      list.forEach(item => emitter.openNode(item));\n    }\n\n    /** @type {{type?: MatchType, index?: number, rule?: Mode}}} */\n    var lastMatch = {};\n\n    /**\n     *  Process an individual match\n     *\n     * @param {string} textBeforeMatch - text preceeding the match (since the last match)\n     * @param {EnhancedMatch} [match] - the match itself\n     */\n    function processLexeme(textBeforeMatch, match) {\n      var lexeme = match && match[0];\n\n      // add non-matched text to the current mode buffer\n      mode_buffer += textBeforeMatch;\n\n      if (lexeme == null) {\n        processBuffer();\n        return 0;\n      }\n\n      // we've found a 0 width match and we're stuck, so we need to advance\n      // this happens when we have badly behaved rules that have optional matchers to the degree that\n      // sometimes they can end up matching nothing at all\n      // Ref: https://github.com/highlightjs/highlight.js/issues/2140\n      if (lastMatch.type === \"begin\" && match.type === \"end\" && lastMatch.index === match.index && lexeme === \"\") {\n        // spit the \"skipped\" character that our regex choked on back into the output sequence\n        mode_buffer += codeToHighlight.slice(match.index, match.index + 1);\n        if (!SAFE_MODE) {\n          /** @type {AnnotatedError} */\n          const err = new Error('0 width match regex');\n          err.languageName = languageName;\n          err.badRule = lastMatch.rule;\n          throw err;\n        }\n        return 1;\n      }\n      lastMatch = match;\n\n      if (match.type === \"begin\") {\n        return doBeginMatch(match);\n      } else if (match.type === \"illegal\" && !ignoreIllegals) {\n        // illegal match, we do not continue processing\n        /** @type {AnnotatedError} */\n        const err = new Error('Illegal lexeme \"' + lexeme + '\" for mode \"' + (top.className || '<unnamed>') + '\"');\n        err.mode = top;\n        throw err;\n      } else if (match.type === \"end\") {\n        var processed = doEndMatch(match);\n        if (processed !== NO_MATCH) {\n          return processed;\n        }\n      }\n\n      // edge case for when illegal matches $ (end of line) which is technically\n      // a 0 width match but not a begin/end match so it's not caught by the\n      // first handler (when ignoreIllegals is true)\n      if (match.type === \"illegal\" && lexeme === \"\") {\n        // advance so we aren't stuck in an infinite loop\n        return 1;\n      }\n\n      // infinite loops are BAD, this is a last ditch catch all. if we have a\n      // decent number of iterations yet our index (cursor position in our\n      // parsing) still 3x behind our index then something is very wrong\n      // so we bail\n      if (iterations > 100000 && iterations > match.index * 3) {\n        const err = new Error('potential infinite loop, way more iterations than matches');\n        throw err;\n      }\n\n      /*\n      Why might be find ourselves here?  Only one occasion now.  An end match that was\n      triggered but could not be completed.  When might this happen?  When an `endSameasBegin`\n      rule sets the end rule to a specific match.  Since the overall mode termination rule that's\n      being used to scan the text isn't recompiled that means that any match that LOOKS like\n      the end (but is not, because it is not an exact match to the beginning) will\n      end up here.  A definite end match, but when `doEndMatch` tries to \"reapply\"\n      the end rule and fails to match, we wind up here, and just silently ignore the end.\n\n      This causes no real harm other than stopping a few times too many.\n      */\n\n      mode_buffer += lexeme;\n      return lexeme.length;\n    }\n\n    var language = getLanguage(languageName);\n    if (!language) {\n      console.error(LANGUAGE_NOT_FOUND.replace(\"{}\", languageName));\n      throw new Error('Unknown language: \"' + languageName + '\"');\n    }\n\n    var md = compileLanguage(language);\n    var result = '';\n    /** @type {CompiledMode} */\n    var top = continuation || md;\n    /** @type Record<string,Mode> */\n    var continuations = {}; // keep continuations for sub-languages\n    var emitter = new options.__emitter(options);\n    processContinuations();\n    var mode_buffer = '';\n    var relevance = 0;\n    var index = 0;\n    var iterations = 0;\n    var continueScanAtSamePosition = false;\n\n    try {\n      top.matcher.considerAll();\n\n      for (;;) {\n        iterations++;\n        if (continueScanAtSamePosition) {\n          // only regexes not matched previously will now be\n          // considered for a potential match\n          continueScanAtSamePosition = false;\n        } else {\n          top.matcher.lastIndex = index;\n          top.matcher.considerAll();\n        }\n        const match = top.matcher.exec(codeToHighlight);\n        // console.log(\"match\", match[0], match.rule && match.rule.begin)\n        if (!match) break;\n\n        const beforeMatch = codeToHighlight.substring(index, match.index);\n        const processedCount = processLexeme(beforeMatch, match);\n        index = match.index + processedCount;\n      }\n      processLexeme(codeToHighlight.substr(index));\n      emitter.closeAllNodes();\n      emitter.finalize();\n      result = emitter.toHTML();\n\n      return {\n        relevance: relevance,\n        value: result,\n        language: languageName,\n        illegal: false,\n        emitter: emitter,\n        top: top\n      };\n    } catch (err) {\n      if (err.message && err.message.includes('Illegal')) {\n        return {\n          illegal: true,\n          illegalBy: {\n            msg: err.message,\n            context: codeToHighlight.slice(index - 100, index + 100),\n            mode: err.mode\n          },\n          sofar: result,\n          relevance: 0,\n          value: escape$1(codeToHighlight),\n          emitter: emitter\n        };\n      } else if (SAFE_MODE) {\n        return {\n          illegal: false,\n          relevance: 0,\n          value: escape$1(codeToHighlight),\n          emitter: emitter,\n          language: languageName,\n          top: top,\n          errorRaised: err\n        };\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  /**\n   * returns a valid highlight result, without actually doing any actual work,\n   * auto highlight starts with this and it's possible for small snippets that\n   * auto-detection may not find a better match\n   * @param {string} code\n   * @returns {HighlightResult}\n   */\n  function justTextHighlightResult(code) {\n    const result = {\n      relevance: 0,\n      emitter: new options.__emitter(options),\n      value: escape$1(code),\n      illegal: false,\n      top: PLAINTEXT_LANGUAGE\n    };\n    result.emitter.addText(code);\n    return result;\n  }\n\n  /**\n  Highlighting with language detection. Accepts a string with the code to\n  highlight. Returns an object with the following properties:\n\n  - language (detected language)\n  - relevance (int)\n  - value (an HTML string with highlighting markup)\n  - second_best (object with the same structure for second-best heuristically\n    detected language, may be absent)\n\n    @param {string} code\n    @param {Array<string>} [languageSubset]\n    @returns {AutoHighlightResult}\n  */\n  function highlightAuto(code, languageSubset) {\n    languageSubset = languageSubset || options.languages || Object.keys(languages);\n    var result = justTextHighlightResult(code);\n    var secondBest = result;\n    languageSubset.filter(getLanguage).filter(autoDetection).forEach(function(name) {\n      var current = _highlight(name, code, false);\n      current.language = name;\n      if (current.relevance > secondBest.relevance) {\n        secondBest = current;\n      }\n      if (current.relevance > result.relevance) {\n        secondBest = result;\n        result = current;\n      }\n    });\n    if (secondBest.language) {\n      // second_best (with underscore) is the expected API\n      result.second_best = secondBest;\n    }\n    return result;\n  }\n\n  /**\n  Post-processing of the highlighted markup:\n\n  - replace TABs with something more useful\n  - replace real line-breaks with '<br>' for non-pre containers\n\n    @param {string} html\n    @returns {string}\n  */\n  function fixMarkup(html) {\n    if (!(options.tabReplace || options.useBR)) {\n      return html;\n    }\n\n    return html.replace(fixMarkupRe, match => {\n      if (match === '\\n') {\n        return options.useBR ? '<br>' : match;\n      } else if (options.tabReplace) {\n        return match.replace(/\\t/g, options.tabReplace);\n      }\n      return match;\n    });\n  }\n\n  /**\n   * Builds new class name for block given the language name\n   *\n   * @param {string} prevClassName\n   * @param {string} [currentLang]\n   * @param {string} [resultLang]\n   */\n  function buildClassName(prevClassName, currentLang, resultLang) {\n    var language = currentLang ? aliases[currentLang] : resultLang;\n    var result = [prevClassName.trim()];\n\n    if (!prevClassName.match(/\\bhljs\\b/)) {\n      result.push('hljs');\n    }\n\n    if (!prevClassName.includes(language)) {\n      result.push(language);\n    }\n\n    return result.join(' ').trim();\n  }\n\n  /**\n   * Applies highlighting to a DOM node containing code. Accepts a DOM node and\n   * two optional parameters for fixMarkup.\n   *\n   * @param {HighlightedHTMLElement} element - the HTML element to highlight\n  */\n  function highlightBlock(element) {\n    /** @type HTMLElement */\n    let node = null;\n    const language = blockLanguage(element);\n\n    if (shouldNotHighlight(language)) return;\n\n    fire(\"before:highlightBlock\",\n      { block: element, language: language });\n\n    if (options.useBR) {\n      node = document.createElement('div');\n      node.innerHTML = element.innerHTML.replace(/\\n/g, '').replace(/<br[ /]*>/g, '\\n');\n    } else {\n      node = element;\n    }\n    const text = node.textContent;\n    const result = language ? highlight(language, text, true) : highlightAuto(text);\n\n    const originalStream = nodeStream$1(node);\n    if (originalStream.length) {\n      const resultNode = document.createElement('div');\n      resultNode.innerHTML = result.value;\n      result.value = mergeStreams$1(originalStream, nodeStream$1(resultNode), text);\n    }\n    result.value = fixMarkup(result.value);\n\n    fire(\"after:highlightBlock\", { block: element, result: result });\n\n    element.innerHTML = result.value;\n    element.className = buildClassName(element.className, language, result.language);\n    element.result = {\n      language: result.language,\n      // TODO: remove with version 11.0\n      re: result.relevance,\n      relavance: result.relevance\n    };\n    if (result.second_best) {\n      element.second_best = {\n        language: result.second_best.language,\n        // TODO: remove with version 11.0\n        re: result.second_best.relevance,\n        relavance: result.second_best.relevance\n      };\n    }\n  }\n\n  /**\n   * Updates highlight.js global options with the passed options\n   *\n   * @param {{}} userOptions\n   */\n  function configure(userOptions) {\n    options = inherit$1(options, userOptions);\n  }\n\n  /**\n   * Highlights to all <pre><code> blocks on a page\n   *\n   * @type {Function & {called?: boolean}}\n   */\n  const initHighlighting = () => {\n    if (initHighlighting.called) return;\n    initHighlighting.called = true;\n\n    var blocks = document.querySelectorAll('pre code');\n    ArrayProto.forEach.call(blocks, highlightBlock);\n  };\n\n  // Higlights all when DOMContentLoaded fires\n  function initHighlightingOnLoad() {\n    // @ts-ignore\n    window.addEventListener('DOMContentLoaded', initHighlighting, false);\n  }\n\n  /**\n   * Register a language grammar module\n   *\n   * @param {string} languageName\n   * @param {LanguageFn} languageDefinition\n   */\n  function registerLanguage(languageName, languageDefinition) {\n    var lang = null;\n    try {\n      lang = languageDefinition(hljs);\n    } catch (error) {\n      console.error(\"Language definition for '{}' could not be registered.\".replace(\"{}\", languageName));\n      // hard or soft error\n      if (!SAFE_MODE) { throw error; } else { console.error(error); }\n      // languages that have serious errors are replaced with essentially a\n      // \"plaintext\" stand-in so that the code blocks will still get normal\n      // css classes applied to them - and one bad language won't break the\n      // entire highlighter\n      lang = PLAINTEXT_LANGUAGE;\n    }\n    // give it a temporary name if it doesn't have one in the meta-data\n    if (!lang.name) lang.name = languageName;\n    languages[languageName] = lang;\n    lang.rawDefinition = languageDefinition.bind(null, hljs);\n\n    if (lang.aliases) {\n      registerAliases(lang.aliases, { languageName });\n    }\n  }\n\n  /**\n   * @returns {string[]} List of language internal names\n   */\n  function listLanguages() {\n    return Object.keys(languages);\n  }\n\n  /**\n    intended usage: When one language truly requires another\n\n    Unlike `getLanguage`, this will throw when the requested language\n    is not available.\n\n    @param {string} name - name of the language to fetch/require\n    @returns {Language | never}\n  */\n  function requireLanguage(name) {\n    var lang = getLanguage(name);\n    if (lang) { return lang; }\n\n    var err = new Error('The \\'{}\\' language is required, but not loaded.'.replace('{}', name));\n    throw err;\n  }\n\n  /**\n   * @param {string} name - name of the language to retrieve\n   * @returns {Language | undefined}\n   */\n  function getLanguage(name) {\n    name = (name || '').toLowerCase();\n    return languages[name] || languages[aliases[name]];\n  }\n\n  /**\n   *\n   * @param {string|string[]} aliasList - single alias or list of aliases\n   * @param {{languageName: string}} opts\n   */\n  function registerAliases(aliasList, { languageName }) {\n    if (typeof aliasList === 'string') {\n      aliasList = [aliasList];\n    }\n    aliasList.forEach(alias => { aliases[alias] = languageName; });\n  }\n\n  /**\n   * Determines if a given language has auto-detection enabled\n   * @param {string} name - name of the language\n   */\n  function autoDetection(name) {\n    var lang = getLanguage(name);\n    return lang && !lang.disableAutodetect;\n  }\n\n  /**\n   * @param {HLJSPlugin} plugin\n   */\n  function addPlugin(plugin) {\n    plugins.push(plugin);\n  }\n\n  /**\n   *\n   * @param {PluginEvent} event\n   * @param {any} args\n   */\n  function fire(event, args) {\n    var cb = event;\n    plugins.forEach(function(plugin) {\n      if (plugin[cb]) {\n        plugin[cb](args);\n      }\n    });\n  }\n\n  /* Interface definition */\n\n  Object.assign(hljs, {\n    highlight,\n    highlightAuto,\n    fixMarkup,\n    highlightBlock,\n    configure,\n    initHighlighting,\n    initHighlightingOnLoad,\n    registerLanguage,\n    listLanguages,\n    getLanguage,\n    registerAliases,\n    requireLanguage,\n    autoDetection,\n    inherit: inherit$1,\n    addPlugin\n  });\n\n  hljs.debugMode = function() { SAFE_MODE = false; };\n  hljs.safeMode = function() { SAFE_MODE = true; };\n  hljs.versionString = version;\n\n  for (const key in MODES) {\n    // @ts-ignore\n    if (typeof MODES[key] === \"object\") {\n      // @ts-ignore\n      deepFreeze(MODES[key]);\n    }\n  }\n\n  // merge all the modes/regexs into our main object\n  Object.assign(hljs, MODES);\n\n  return hljs;\n};\n\n// export an \"instance\" of the highlighter\nvar highlight = HLJS({});\n\nmodule.exports = highlight;\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.sha1 = factory());\n}(this, (function () { 'use strict';\n\n  /**\n   * @file This is a SHA-1 hash generator by JavaScript.\n   * @author Hsun\n   * @description For your convenience, the code comments have been translated by Google.\n   ***/\n\n  // 消息填充位，补足长度。\n  // Message padding bits, complement the length.\n  function fillString(str) {\n    var blockAmount = ((str.length + 8) >> 6) + 1,\n      blocks = [],\n      i;\n\n    for (i = 0; i < blockAmount * 16; i++) {\n      blocks[i] = 0;\n    }\n    for (i = 0; i < str.length; i++) {\n      blocks[i >> 2] |= str.charCodeAt(i) << (24 - (i & 3) * 8);\n    }\n    blocks[i >> 2] |= 0x80 << (24 - (i & 3) * 8);\n    blocks[blockAmount * 16 - 1] = str.length * 8;\n\n    return blocks;\n  }\n\n  // 将输入的二进制数组转化为十六进制的字符串。\n  // Convert the input binary array to a hexadecimal string.\n  function binToHex(binArray) {\n    var hexString = \"0123456789abcdef\",\n      str = \"\",\n      i;\n\n    for (i = 0; i < binArray.length * 4; i++) {\n      str += hexString.charAt((binArray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) +\n        hexString.charAt((binArray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF);\n    }\n\n    return str;\n  }\n\n  // 核心函数，输出为长度为5的number数组，对应160位的消息摘要。\n  // The core function, the output is a number array with a length of 5,\n  // corresponding to a 160-bit message digest.\n  function core(blockArray) {\n    var w = [],\n      a = 0x67452301,\n      b = 0xEFCDAB89,\n      c = 0x98BADCFE,\n      d = 0x10325476,\n      e = 0xC3D2E1F0,\n      olda,\n      oldb,\n      oldc,\n      oldd,\n      olde,\n      t,\n      i,\n      j;\n\n    for (i = 0; i < blockArray.length; i += 16) {  //每次处理512位 16*32\n      olda = a;\n      oldb = b;\n      oldc = c;\n      oldd = d;\n      olde = e;\n\n      for (j = 0; j < 80; j++) {  //对每个512位进行80步操作\n        if (j < 16) {\n          w[j] = blockArray[i + j];\n        } else {\n          w[j] = cyclicShift(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n        }\n        t = modPlus(modPlus(cyclicShift(a, 5), ft(j, b, c, d)), modPlus(modPlus(e, w[j]), kt(j)));\n        e = d;\n        d = c;\n        c = cyclicShift(b, 30);\n        b = a;\n        a = t;\n      }\n\n      a = modPlus(a, olda);\n      b = modPlus(b, oldb);\n      c = modPlus(c, oldc);\n      d = modPlus(d, oldd);\n      e = modPlus(e, olde);\n    }\n\n    return [a, b, c, d, e];\n  }\n\n  // 根据t值返回相应得压缩函数中用到的f函数。\n  // According to the t value, return the corresponding f function used in\n  // the compression function.\n  function ft(t, b, c, d) {\n    if (t < 20) {\n      return (b & c) | ((~b) & d);\n    } else if (t < 40) {\n      return b ^ c ^ d;\n    } else if (t < 60) {\n      return (b & c) | (b & d) | (c & d);\n    } else {\n      return b ^ c ^ d;\n    }\n  }\n\n  // 根据t值返回相应得压缩函数中用到的K值。\n  // According to the t value, return the corresponding K value used in\n  // the compression function.\n  function kt(t) {\n    return (t < 20) ? 0x5A827999 :\n      (t < 40) ? 0x6ED9EBA1 :\n        (t < 60) ? 0x8F1BBCDC : 0xCA62C1D6;\n  }\n\n  // 模2的32次方加法，因为JavaScript的number是双精度浮点数表示，所以将32位数拆成高16位和低16位分别进行相加\n  // Modulo 2 to the 32nd power addition, because JavaScript's number is a\n  // double-precision floating-point number, so the 32-bit number is split\n  // into the upper 16 bits and the lower 16 bits are added separately.\n  function modPlus(x, y) {\n    var low = (x & 0xFFFF) + (y & 0xFFFF),\n      high = (x >> 16) + (y >> 16) + (low >> 16);\n\n    return (high << 16) | (low & 0xFFFF);\n  }\n\n  // 对输入的32位的num二进制数进行循环左移 ,因为JavaScript的number是双精度浮点数表示，所以移位需需要注意\n  // Rotate left of the input 32-bit num binary number, because JavaScript's\n  // number is a double-precision floating-point number, so you need to pay\n  //  attention to the shift.\n  function cyclicShift(num, k) {\n    return (num << k) | (num >>> (32 - k));\n  }\n\n  // 主函数根据输入的消息字符串计算消息摘要，返回十六进制表示的消息摘要\n  // The main function calculates the message digest based on the input message\n  // string and returns the message digest in hexadecimal.\n  function sha1(s) {\n    return binToHex(core(fillString(s)));\n  }\n\n  return sha1;\n\n})));\n","/*!\n * time-stamp <https://github.com/jonschlinkert/time-stamp>\n *\n * Copyright (c) 2015-2018, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar dateRegex = /(?=(YYYY|YY|MM|DD|HH|mm|ss|ms))\\1([:\\/]*)/g;\nvar timespan = {\n  YYYY: ['getFullYear', 4],\n  YY: ['getFullYear', 2],\n  MM: ['getMonth', 2, 1], // getMonth is zero-based, thus the extra increment field\n  DD: ['getDate', 2],\n  HH: ['getHours', 2],\n  mm: ['getMinutes', 2],\n  ss: ['getSeconds', 2],\n  ms: ['getMilliseconds', 3]\n};\n\nvar timestamp = function(str, date, utc) {\n  if (typeof str !== 'string') {\n    date = str;\n    str = 'YYYY-MM-DD';\n  }\n\n  if (!date) date = new Date();\n  return str.replace(dateRegex, function(match, key, rest) {\n    var args = timespan[key];\n    var name = args[0];\n    var chars = args[1];\n    if (utc === true) name = 'getUTC' + name.slice(3);\n    var val = '00' + String(date[name]() + (args[2] || 0));\n    return val.slice(-chars) + (rest || '');\n  });\n};\n\ntimestamp.utc = function(str, date) {\n  return timestamp(str, date, true);\n};\n\nmodule.exports = timestamp;\n","import { isObjectLike } from '../utils';\nimport each from './each';\n/**\n * 将数组或对象序列化，序列化后的字符串可作为 URL 查询字符串使用\n *\n * 若传入数组，则格式必须和 serializeArray 方法的返回值一样\n * @param obj 对象或数组\n * @example\n```js\nparam({ width: 1680, height: 1050 });\n// width=1680&height=1050\n```\n * @example\n```js\nparam({ foo: { one: 1, two: 2 }})\n// foo[one]=1&foo[two]=2\n```\n * @example\n```js\nparam({ids: [1, 2, 3]})\n// ids[]=1&ids[]=2&ids[]=3\n```\n * @example\n```js\nparam([\n  {\"name\":\"name\",\"value\":\"mdui\"},\n  {\"name\":\"password\",\"value\":\"123456\"}\n])\n// name=mdui&password=123456\n```\n */\n\nfunction param(obj) {\n  if (!isObjectLike(obj) && !Array.isArray(obj)) {\n    return '';\n  }\n\n  const args = [];\n\n  function destructure(key, value) {\n    let keyTmp;\n\n    if (isObjectLike(value)) {\n      each(value, (i, v) => {\n        if (Array.isArray(value) && !isObjectLike(v)) {\n          keyTmp = '';\n        } else {\n          keyTmp = i;\n        }\n\n        destructure(`${key}[${keyTmp}]`, v);\n      });\n    } else {\n      if (value == null || value === '') {\n        keyTmp = '=';\n      } else {\n        keyTmp = `=${encodeURIComponent(value)}`;\n      }\n\n      args.push(encodeURIComponent(key) + keyTmp);\n    }\n  }\n\n  if (Array.isArray(obj)) {\n    each(obj, function () {\n      destructure(this.name, this.value);\n    });\n  } else {\n    each(obj, destructure);\n  }\n\n  return args.join('&');\n}\n\nexport default param;","/*\nLanguage: HTML, XML\nWebsite: https://www.w3.org/XML/\nCategory: common\n*/\n\nfunction xml(hljs) {\n  var XML_IDENT_RE = '[A-Za-z0-9\\\\._:-]+';\n  var XML_ENTITIES = {\n    className: 'symbol',\n    begin: '&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;'\n  };\n  var XML_META_KEYWORDS = {\n\t  begin: '\\\\s',\n\t  contains:[\n\t    {\n\t      className: 'meta-keyword',\n\t      begin: '#?[a-z_][a-z1-9_-]+',\n\t      illegal: '\\\\n',\n      }\n\t  ]\n  };\n  var XML_META_PAR_KEYWORDS = hljs.inherit(XML_META_KEYWORDS, {begin: '\\\\(', end: '\\\\)'});\n  var APOS_META_STRING_MODE = hljs.inherit(hljs.APOS_STRING_MODE, {className: 'meta-string'});\n  var QUOTE_META_STRING_MODE = hljs.inherit(hljs.QUOTE_STRING_MODE, {className: 'meta-string'});\n  var TAG_INTERNALS = {\n    endsWithParent: true,\n    illegal: /</,\n    relevance: 0,\n    contains: [\n      {\n        className: 'attr',\n        begin: XML_IDENT_RE,\n        relevance: 0\n      },\n      {\n        begin: /=\\s*/,\n        relevance: 0,\n        contains: [\n          {\n            className: 'string',\n            endsParent: true,\n            variants: [\n              {begin: /\"/, end: /\"/, contains: [XML_ENTITIES]},\n              {begin: /'/, end: /'/, contains: [XML_ENTITIES]},\n              {begin: /[^\\s\"'=<>`]+/}\n            ]\n          }\n        ]\n      }\n    ]\n  };\n  return {\n    name: 'HTML, XML',\n    aliases: ['html', 'xhtml', 'rss', 'atom', 'xjb', 'xsd', 'xsl', 'plist', 'wsf', 'svg'],\n    case_insensitive: true,\n    contains: [\n      {\n        className: 'meta',\n        begin: '<![a-z]', end: '>',\n        relevance: 10,\n        contains: [\n\t\t\t\t  XML_META_KEYWORDS,\n\t\t\t\t  QUOTE_META_STRING_MODE,\n\t\t\t\t  APOS_META_STRING_MODE,\n\t\t\t\t\tXML_META_PAR_KEYWORDS,\n\t\t\t\t\t{\n\t\t\t\t\t  begin: '\\\\[', end: '\\\\]',\n\t\t\t\t\t  contains:[\n\t\t\t\t\t\t  {\n\t\t\t\t\t      className: 'meta',\n\t\t\t\t\t      begin: '<![a-z]', end: '>',\n\t\t\t\t\t      contains: [\n\t\t\t\t\t        XML_META_KEYWORDS,\n\t\t\t\t\t        XML_META_PAR_KEYWORDS,\n\t\t\t\t\t        QUOTE_META_STRING_MODE,\n\t\t\t\t\t        APOS_META_STRING_MODE\n\t\t\t\t\t\t    ]\n\t\t\t        }\n\t\t\t\t\t  ]\n\t\t\t\t  }\n\t\t\t\t]\n      },\n      hljs.COMMENT(\n        '<!--',\n        '-->',\n        {\n          relevance: 10\n        }\n      ),\n      {\n        begin: '<\\\\!\\\\[CDATA\\\\[', end: '\\\\]\\\\]>',\n        relevance: 10\n      },\n      XML_ENTITIES,\n      {\n        className: 'meta',\n        begin: /<\\?xml/, end: /\\?>/, relevance: 10\n      },\n      {\n        className: 'tag',\n        /*\n        The lookahead pattern (?=...) ensures that 'begin' only matches\n        '<style' as a single word, followed by a whitespace or an\n        ending braket. The '$' is needed for the lexeme to be recognized\n        by hljs.subMode() that tests lexemes outside the stream.\n        */\n        begin: '<style(?=\\\\s|>)', end: '>',\n        keywords: {name: 'style'},\n        contains: [TAG_INTERNALS],\n        starts: {\n          end: '</style>', returnEnd: true,\n          subLanguage: ['css', 'xml']\n        }\n      },\n      {\n        className: 'tag',\n        // See the comment in the <style tag about the lookahead pattern\n        begin: '<script(?=\\\\s|>)', end: '>',\n        keywords: {name: 'script'},\n        contains: [TAG_INTERNALS],\n        starts: {\n          end: '\\<\\/script\\>', returnEnd: true,\n          subLanguage: ['javascript', 'handlebars', 'xml']\n        }\n      },\n      {\n        className: 'tag',\n        begin: '</?', end: '/?>',\n        contains: [\n          {\n            className: 'name', begin: /[^\\/><\\s]+/, relevance: 0\n          },\n          TAG_INTERNALS\n        ]\n      }\n    ]\n  };\n}\n\nmodule.exports = xml;\n","/*\nLanguage: CSS\nCategory: common, css\nWebsite: https://developer.mozilla.org/en-US/docs/Web/CSS\n*/\n\n/** @type LanguageFn */\nfunction css(hljs) {\n  var FUNCTION_LIKE = {\n    begin: /[\\w-]+\\(/, returnBegin: true,\n    contains: [\n      {\n        className: 'built_in',\n        begin: /[\\w-]+/\n      },\n      {\n        begin: /\\(/, end: /\\)/,\n        contains: [\n          hljs.APOS_STRING_MODE,\n          hljs.QUOTE_STRING_MODE,\n          hljs.CSS_NUMBER_MODE,\n        ]\n      }\n    ]\n  };\n  var ATTRIBUTE = {\n    className: 'attribute',\n    begin: /\\S/, end: ':', excludeEnd: true,\n    starts: {\n      endsWithParent: true, excludeEnd: true,\n      contains: [\n        FUNCTION_LIKE,\n        hljs.CSS_NUMBER_MODE,\n        hljs.QUOTE_STRING_MODE,\n        hljs.APOS_STRING_MODE,\n        hljs.C_BLOCK_COMMENT_MODE,\n        {\n          className: 'number', begin: '#[0-9A-Fa-f]+'\n        },\n        {\n          className: 'meta', begin: '!important'\n        }\n      ]\n    }\n  };\n  var AT_IDENTIFIER = '@[a-z-]+'; // @font-face\n  var AT_MODIFIERS = \"and or not only\";\n  var AT_PROPERTY_RE = /@\\-?\\w[\\w]*(\\-\\w+)*/; // @-webkit-keyframes\n  var IDENT_RE = '[a-zA-Z-][a-zA-Z0-9_-]*';\n  var RULE = {\n    begin: /(?:[A-Z\\_\\.\\-]+|--[a-zA-Z0-9_-]+)\\s*:/, returnBegin: true, end: ';', endsWithParent: true,\n    contains: [\n      ATTRIBUTE\n    ]\n  };\n\n  return {\n    name: 'CSS',\n    case_insensitive: true,\n    illegal: /[=\\/|'\\$]/,\n    contains: [\n      hljs.C_BLOCK_COMMENT_MODE,\n      {\n        className: 'selector-id', begin: /#[A-Za-z0-9_-]+/\n      },\n      {\n        className: 'selector-class', begin: /\\.[A-Za-z0-9_-]+/\n      },\n      {\n        className: 'selector-attr',\n        begin: /\\[/, end: /\\]/,\n        illegal: '$',\n        contains: [\n          hljs.APOS_STRING_MODE,\n          hljs.QUOTE_STRING_MODE,\n        ]\n      },\n      {\n        className: 'selector-pseudo',\n        begin: /:(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\"'.]+/\n      },\n      // matching these here allows us to treat them more like regular CSS\n      // rules so everything between the {} gets regular rule highlighting,\n      // which is what we want for page and font-face\n      {\n        begin: '@(page|font-face)',\n        lexemes: AT_IDENTIFIER,\n        keywords: '@page @font-face'\n      },\n      {\n        begin: '@', end: '[{;]', // at_rule eating first \"{\" is a good thing\n                                 // because it doesn’t let it to be parsed as\n                                 // a rule set but instead drops parser into\n                                 // the default mode which is how it should be.\n        illegal: /:/, // break on Less variables @var: ...\n        returnBegin: true,\n        contains: [\n          {\n            className: 'keyword',\n            begin: AT_PROPERTY_RE\n          },\n          {\n            begin: /\\s/, endsWithParent: true, excludeEnd: true,\n            relevance: 0,\n            keywords: AT_MODIFIERS,\n            contains: [\n              {\n                begin: /[a-z-]+:/,\n                className:\"attribute\"\n              },\n              hljs.APOS_STRING_MODE,\n              hljs.QUOTE_STRING_MODE,\n              hljs.CSS_NUMBER_MODE\n            ]\n          }\n        ]\n      },\n      {\n        className: 'selector-tag', begin: IDENT_RE,\n        relevance: 0\n      },\n      {\n        begin: '{', end: '}',\n        illegal: /\\S/,\n        contains: [\n          hljs.C_BLOCK_COMMENT_MODE,\n          RULE,\n        ]\n      }\n    ]\n  };\n}\n\nmodule.exports = css;\n","const IDENT_RE = '[A-Za-z$_][0-9A-Za-z$_]*';\nconst KEYWORDS = [\n  \"as\", // for exports\n  \"in\",\n  \"of\",\n  \"if\",\n  \"for\",\n  \"while\",\n  \"finally\",\n  \"var\",\n  \"new\",\n  \"function\",\n  \"do\",\n  \"return\",\n  \"void\",\n  \"else\",\n  \"break\",\n  \"catch\",\n  \"instanceof\",\n  \"with\",\n  \"throw\",\n  \"case\",\n  \"default\",\n  \"try\",\n  \"switch\",\n  \"continue\",\n  \"typeof\",\n  \"delete\",\n  \"let\",\n  \"yield\",\n  \"const\",\n  \"class\",\n  // JS handles these with a special rule\n  // \"get\",\n  // \"set\",\n  \"debugger\",\n  \"async\",\n  \"await\",\n  \"static\",\n  \"import\",\n  \"from\",\n  \"export\",\n  \"extends\"\n];\nconst LITERALS = [\n  \"true\",\n  \"false\",\n  \"null\",\n  \"undefined\",\n  \"NaN\",\n  \"Infinity\"\n];\n\nconst TYPES = [\n  \"Intl\",\n  \"DataView\",\n  \"Number\",\n  \"Math\",\n  \"Date\",\n  \"String\",\n  \"RegExp\",\n  \"Object\",\n  \"Function\",\n  \"Boolean\",\n  \"Error\",\n  \"Symbol\",\n  \"Set\",\n  \"Map\",\n  \"WeakSet\",\n  \"WeakMap\",\n  \"Proxy\",\n  \"Reflect\",\n  \"JSON\",\n  \"Promise\",\n  \"Float64Array\",\n  \"Int16Array\",\n  \"Int32Array\",\n  \"Int8Array\",\n  \"Uint16Array\",\n  \"Uint32Array\",\n  \"Float32Array\",\n  \"Array\",\n  \"Uint8Array\",\n  \"Uint8ClampedArray\",\n  \"ArrayBuffer\"\n];\n\nconst ERROR_TYPES = [\n  \"EvalError\",\n  \"InternalError\",\n  \"RangeError\",\n  \"ReferenceError\",\n  \"SyntaxError\",\n  \"TypeError\",\n  \"URIError\"\n];\n\nconst BUILT_IN_GLOBALS = [\n  \"setInterval\",\n  \"setTimeout\",\n  \"clearInterval\",\n  \"clearTimeout\",\n\n  \"require\",\n  \"exports\",\n\n  \"eval\",\n  \"isFinite\",\n  \"isNaN\",\n  \"parseFloat\",\n  \"parseInt\",\n  \"decodeURI\",\n  \"decodeURIComponent\",\n  \"encodeURI\",\n  \"encodeURIComponent\",\n  \"escape\",\n  \"unescape\"\n];\n\nconst BUILT_IN_VARIABLES = [\n  \"arguments\",\n  \"this\",\n  \"super\",\n  \"console\",\n  \"window\",\n  \"document\",\n  \"localStorage\",\n  \"module\",\n  \"global\" // Node.js\n];\n\nconst BUILT_INS = [].concat(\n  BUILT_IN_GLOBALS,\n  BUILT_IN_VARIABLES,\n  TYPES,\n  ERROR_TYPES\n);\n\n/**\n * @param {string} value\n * @returns {RegExp}\n * */\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction source(re) {\n  if (!re) return null;\n  if (typeof re === \"string\") return re;\n\n  return re.source;\n}\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction lookahead(re) {\n  return concat('(?=', re, ')');\n}\n\n/**\n * @param {...(RegExp | string) } args\n * @returns {string}\n */\nfunction concat(...args) {\n  const joined = args.map((x) => source(x)).join(\"\");\n  return joined;\n}\n\n/*\nLanguage: JavaScript\nDescription: JavaScript (JS) is a lightweight, interpreted, or just-in-time compiled programming language with first-class functions.\nCategory: common, scripting\nWebsite: https://developer.mozilla.org/en-US/docs/Web/JavaScript\n*/\n\nfunction javascript(hljs) {\n  var IDENT_RE$1 = IDENT_RE;\n  var FRAGMENT = {\n    begin: '<>',\n    end: '</>'\n  };\n  var XML_TAG = {\n    begin: /<[A-Za-z0-9\\\\._:-]+/,\n    end: /\\/[A-Za-z0-9\\\\._:-]+>|\\/>/\n  };\n  var KEYWORDS$1 = {\n    $pattern: IDENT_RE,\n    keyword: KEYWORDS.join(\" \"),\n    literal: LITERALS.join(\" \"),\n    built_in: BUILT_INS.join(\" \")\n  };\n  var NUMBER = {\n    className: 'number',\n    variants: [\n      { begin: '\\\\b(0[bB][01]+)n?' },\n      { begin: '\\\\b(0[oO][0-7]+)n?' },\n      { begin: hljs.C_NUMBER_RE + 'n?' }\n    ],\n    relevance: 0\n  };\n  var SUBST = {\n    className: 'subst',\n    begin: '\\\\$\\\\{', end: '\\\\}',\n    keywords: KEYWORDS$1,\n    contains: []  // defined later\n  };\n  var HTML_TEMPLATE = {\n    begin: 'html`', end: '',\n    starts: {\n      end: '`', returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'xml',\n    }\n  };\n  var CSS_TEMPLATE = {\n    begin: 'css`', end: '',\n    starts: {\n      end: '`', returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'css',\n    }\n  };\n  var TEMPLATE_STRING = {\n    className: 'string',\n    begin: '`', end: '`',\n    contains: [\n      hljs.BACKSLASH_ESCAPE,\n      SUBST\n    ]\n  };\n  SUBST.contains = [\n    hljs.APOS_STRING_MODE,\n    hljs.QUOTE_STRING_MODE,\n    HTML_TEMPLATE,\n    CSS_TEMPLATE,\n    TEMPLATE_STRING,\n    NUMBER,\n    hljs.REGEXP_MODE\n  ];\n  var PARAMS_CONTAINS = SUBST.contains.concat([\n    // eat recursive parens in sub expressions\n    { begin: /\\(/, end: /\\)/,\n      contains: [\"self\"].concat(SUBST.contains, [hljs.C_BLOCK_COMMENT_MODE, hljs.C_LINE_COMMENT_MODE])\n    },\n    hljs.C_BLOCK_COMMENT_MODE,\n    hljs.C_LINE_COMMENT_MODE\n  ]);\n  var PARAMS = {\n    className: 'params',\n    begin: /\\(/, end: /\\)/,\n    excludeBegin: true,\n    excludeEnd: true,\n    contains: PARAMS_CONTAINS\n  };\n\n  return {\n    name: 'JavaScript',\n    aliases: ['js', 'jsx', 'mjs', 'cjs'],\n    keywords: KEYWORDS$1,\n    contains: [\n      hljs.SHEBANG({\n        binary: \"node\",\n        relevance: 5\n      }),\n      {\n        className: 'meta',\n        relevance: 10,\n        begin: /^\\s*['\"]use (strict|asm)['\"]/\n      },\n      hljs.APOS_STRING_MODE,\n      hljs.QUOTE_STRING_MODE,\n      HTML_TEMPLATE,\n      CSS_TEMPLATE,\n      TEMPLATE_STRING,\n      hljs.C_LINE_COMMENT_MODE,\n      hljs.COMMENT(\n        '/\\\\*\\\\*',\n        '\\\\*/',\n        {\n          relevance : 0,\n          contains : [\n            {\n              className : 'doctag',\n              begin : '@[A-Za-z]+',\n              contains : [\n                {\n                  className: 'type',\n                  begin: '\\\\{',\n                  end: '\\\\}',\n                  relevance: 0\n                },\n                {\n                  className: 'variable',\n                  begin: IDENT_RE$1 + '(?=\\\\s*(-)|$)',\n                  endsParent: true,\n                  relevance: 0\n                },\n                // eat spaces (not newlines) so we can find\n                // types or variables\n                {\n                  begin: /(?=[^\\n])\\s/,\n                  relevance: 0\n                },\n              ]\n            }\n          ]\n        }\n      ),\n      hljs.C_BLOCK_COMMENT_MODE,\n      NUMBER,\n      { // object attr container\n        begin: concat(/[{,\\n]\\s*/,\n          // we need to look ahead to make sure that we actually have an\n          // attribute coming up so we don't steal a comma from a potential\n          // \"value\" container\n          //\n          // NOTE: this might not work how you think.  We don't actually always\n          // enter this mode and stay.  Instead it might merely match `,\n          // <comments up next>` and then immediately end after the , because it\n          // fails to find any actual attrs. But this still does the job because\n          // it prevents the value contain rule from grabbing this instead and\n          // prevening this rule from firing when we actually DO have keys.\n          lookahead(concat(\n            // we also need to allow for multiple possible comments inbetween\n            // the first key:value pairing\n            /(((\\/\\/.*)|(\\/\\*(.|\\n)*\\*\\/))\\s*)*/,\n            IDENT_RE$1 + '\\\\s*:'))),\n        relevance: 0,\n        contains: [\n          {\n            className: 'attr',\n            begin: IDENT_RE$1 + lookahead('\\\\s*:'),\n            relevance: 0,\n          },\n        ]\n      },\n      { // \"value\" container\n        begin: '(' + hljs.RE_STARTERS_RE + '|\\\\b(case|return|throw)\\\\b)\\\\s*',\n        keywords: 'return throw case',\n        contains: [\n          hljs.C_LINE_COMMENT_MODE,\n          hljs.C_BLOCK_COMMENT_MODE,\n          hljs.REGEXP_MODE,\n          {\n            className: 'function',\n            // we have to count the parens to make sure we actually have the\n            // correct bounding ( ) before the =>.  There could be any number of\n            // sub-expressions inside also surrounded by parens.\n            begin: '(\\\\([^(]*' +\n              '(\\\\([^(]*' +\n                '(\\\\([^(]*' +\n                '\\\\))?' +\n              '\\\\))?' +\n            '\\\\)|' + hljs.UNDERSCORE_IDENT_RE + ')\\\\s*=>', returnBegin: true,\n            end: '\\\\s*=>',\n            contains: [\n              {\n                className: 'params',\n                variants: [\n                  {\n                    begin: hljs.UNDERSCORE_IDENT_RE\n                  },\n                  {\n                    className: null,\n                    begin: /\\(\\s*\\)/,\n                    skip: true\n                  },\n                  {\n                    begin: /\\(/, end: /\\)/,\n                    excludeBegin: true, excludeEnd: true,\n                    keywords: KEYWORDS$1,\n                    contains: PARAMS_CONTAINS\n                  }\n                ]\n              }\n            ]\n          },\n          { // could be a comma delimited list of params to a function call\n            begin: /,/, relevance: 0,\n          },\n          {\n            className: '',\n            begin: /\\s/,\n            end: /\\s*/,\n            skip: true,\n          },\n          { // JSX\n            variants: [\n              { begin: FRAGMENT.begin, end: FRAGMENT.end },\n              { begin: XML_TAG.begin, end: XML_TAG.end }\n            ],\n            subLanguage: 'xml',\n            contains: [\n              {\n                begin: XML_TAG.begin, end: XML_TAG.end, skip: true,\n                contains: ['self']\n              }\n            ]\n          },\n        ],\n        relevance: 0\n      },\n      {\n        className: 'function',\n        beginKeywords: 'function', end: /\\{/, excludeEnd: true,\n        contains: [\n          hljs.inherit(hljs.TITLE_MODE, {begin: IDENT_RE$1}),\n          PARAMS\n        ],\n        illegal: /\\[|%/\n      },\n      {\n        begin: /\\$[(.]/ // relevance booster for a pattern common to JS libs: `$(something)` and `$.something`\n      },\n\n      hljs.METHOD_GUARD,\n      { // ES6 class\n        className: 'class',\n        beginKeywords: 'class', end: /[{;=]/, excludeEnd: true,\n        illegal: /[:\"\\[\\]]/,\n        contains: [\n          {beginKeywords: 'extends'},\n          hljs.UNDERSCORE_TITLE_MODE\n        ]\n      },\n      {\n        beginKeywords: 'constructor', end: /\\{/, excludeEnd: true\n      },\n      {\n        begin: '(get|set)\\\\s+(?=' + IDENT_RE$1 + '\\\\()',\n        end: /{/,\n        keywords: \"get set\",\n        contains: [\n          hljs.inherit(hljs.TITLE_MODE, {begin: IDENT_RE$1}),\n          { begin: /\\(\\)/ }, // eat to avoid empty params\n          PARAMS\n        ]\n\n      }\n    ],\n    illegal: /#(?!!)/\n  };\n}\n\nmodule.exports = javascript;\n","/*\nLanguage: JSON\nDescription: JSON (JavaScript Object Notation) is a lightweight data-interchange format.\nAuthor: Ivan Sagalaev <maniac@softwaremaniacs.org>\nWebsite: http://www.json.org\nCategory: common, protocols\n*/\n\nfunction json(hljs) {\n  var LITERALS = {literal: 'true false null'};\n  var ALLOWED_COMMENTS = [\n    hljs.C_LINE_COMMENT_MODE,\n    hljs.C_BLOCK_COMMENT_MODE\n  ];\n  var TYPES = [\n    hljs.QUOTE_STRING_MODE,\n    hljs.C_NUMBER_MODE\n  ];\n  var VALUE_CONTAINER = {\n    end: ',', endsWithParent: true, excludeEnd: true,\n    contains: TYPES,\n    keywords: LITERALS\n  };\n  var OBJECT = {\n    begin: '{', end: '}',\n    contains: [\n      {\n        className: 'attr',\n        begin: /\"/, end: /\"/,\n        contains: [hljs.BACKSLASH_ESCAPE],\n        illegal: '\\\\n',\n      },\n      hljs.inherit(VALUE_CONTAINER, {begin: /:/})\n    ].concat(ALLOWED_COMMENTS),\n    illegal: '\\\\S'\n  };\n  var ARRAY = {\n    begin: '\\\\[', end: '\\\\]',\n    contains: [hljs.inherit(VALUE_CONTAINER)], // inherit is a workaround for a bug that makes shared modes with endsWithParent compile only the ending of one of the parents\n    illegal: '\\\\S'\n  };\n  TYPES.push(OBJECT, ARRAY);\n  ALLOWED_COMMENTS.forEach(function(rule) {\n    TYPES.push(rule);\n  });\n  return {\n    name: 'JSON',\n    contains: TYPES,\n    keywords: LITERALS,\n    illegal: '\\\\S'\n  };\n}\n\nmodule.exports = json;\n","/*\nLanguage: PHP\nAuthor: Victor Karamzin <Victor.Karamzin@enterra-inc.com>\nContributors: Evgeny Stepanischev <imbolk@gmail.com>, Ivan Sagalaev <maniac@softwaremaniacs.org>\nWebsite: https://www.php.net\nCategory: common\n*/\n\nfunction php(hljs) {\n  var VARIABLE = {\n    begin: '\\\\$+[a-zA-Z_\\x7f-\\xff][a-zA-Z0-9_\\x7f-\\xff]*'\n  };\n  var PREPROCESSOR = {\n    className: 'meta',\n    variants: [\n      { begin: /<\\?php/, relevance: 10 }, // boost for obvious PHP\n      { begin: /<\\?[=]?/ },\n      { begin: /\\?>/ } // end php tag\n    ]\n  };\n  var STRING = {\n    className: 'string',\n    contains: [hljs.BACKSLASH_ESCAPE, PREPROCESSOR],\n    variants: [\n      {\n        begin: 'b\"', end: '\"'\n      },\n      {\n        begin: 'b\\'', end: '\\''\n      },\n      hljs.inherit(hljs.APOS_STRING_MODE, {illegal: null}),\n      hljs.inherit(hljs.QUOTE_STRING_MODE, {illegal: null})\n    ]\n  };\n  var NUMBER = {variants: [hljs.BINARY_NUMBER_MODE, hljs.C_NUMBER_MODE]};\n  var KEYWORDS = {\n    keyword:\n    // Magic constants:\n    // <https://www.php.net/manual/en/language.constants.predefined.php>\n    '__CLASS__ __DIR__ __FILE__ __FUNCTION__ __LINE__ __METHOD__ __NAMESPACE__ __TRAIT__ ' +\n    // Function that look like language construct or language construct that look like function:\n    // List of keywords that may not require parenthesis\n    'die echo exit include include_once print require require_once ' +\n    // These are not language construct (function) but operate on the currently-executing function and can access the current symbol table\n    // 'compact extract func_get_arg func_get_args func_num_args get_called_class get_parent_class ' +\n    // Other keywords:\n    // <https://www.php.net/manual/en/reserved.php>\n    // <https://www.php.net/manual/en/language.types.type-juggling.php>\n    'array abstract and as binary bool boolean break callable case catch class clone const continue declare default do double else elseif empty enddeclare endfor endforeach endif endswitch endwhile eval extends final finally float for foreach from global goto if implements instanceof insteadof int integer interface isset iterable list new object or private protected public real return string switch throw trait try unset use var void while xor yield',\n    literal: 'false null true',\n    built_in:\n    // Standard PHP library:\n    // <https://www.php.net/manual/en/book.spl.php>\n    'Error|0 ' + // error is too common a name esp since PHP is case in-sensitive\n    'AppendIterator ArgumentCountError ArithmeticError ArrayIterator ArrayObject AssertionError BadFunctionCallException BadMethodCallException CachingIterator CallbackFilterIterator CompileError Countable DirectoryIterator DivisionByZeroError DomainException EmptyIterator ErrorException Exception FilesystemIterator FilterIterator GlobIterator InfiniteIterator InvalidArgumentException IteratorIterator LengthException LimitIterator LogicException MultipleIterator NoRewindIterator OutOfBoundsException OutOfRangeException OuterIterator OverflowException ParentIterator ParseError RangeException RecursiveArrayIterator RecursiveCachingIterator RecursiveCallbackFilterIterator RecursiveDirectoryIterator RecursiveFilterIterator RecursiveIterator RecursiveIteratorIterator RecursiveRegexIterator RecursiveTreeIterator RegexIterator RuntimeException SeekableIterator SplDoublyLinkedList SplFileInfo SplFileObject SplFixedArray SplHeap SplMaxHeap SplMinHeap SplObjectStorage SplObserver SplObserver SplPriorityQueue SplQueue SplStack SplSubject SplSubject SplTempFileObject TypeError UnderflowException UnexpectedValueException ' +\n    // Reserved interfaces:\n    // <https://www.php.net/manual/en/reserved.interfaces.php>\n    'ArrayAccess Closure Generator Iterator IteratorAggregate Serializable Throwable Traversable WeakReference ' +\n    // Reserved classes:\n    // <https://www.php.net/manual/en/reserved.classes.php>\n    'Directory __PHP_Incomplete_Class parent php_user_filter self static stdClass'\n  };\n  return {\n    aliases: ['php', 'php3', 'php4', 'php5', 'php6', 'php7'],\n    case_insensitive: true,\n    keywords: KEYWORDS,\n    contains: [\n      hljs.HASH_COMMENT_MODE,\n      hljs.COMMENT('//', '$', {contains: [PREPROCESSOR]}),\n      hljs.COMMENT(\n        '/\\\\*',\n        '\\\\*/',\n        {\n          contains: [\n            {\n              className: 'doctag',\n              begin: '@[A-Za-z]+'\n            }\n          ]\n        }\n      ),\n      hljs.COMMENT(\n        '__halt_compiler.+?;',\n        false,\n        {\n          endsWithParent: true,\n          keywords: '__halt_compiler'\n        }\n      ),\n      {\n        className: 'string',\n        begin: /<<<['\"]?\\w+['\"]?$/, end: /^\\w+;?$/,\n        contains: [\n          hljs.BACKSLASH_ESCAPE,\n          {\n            className: 'subst',\n            variants: [\n              {begin: /\\$\\w+/},\n              {begin: /\\{\\$/, end: /\\}/}\n            ]\n          }\n        ]\n      },\n      PREPROCESSOR,\n      {\n        className: 'keyword', begin: /\\$this\\b/\n      },\n      VARIABLE,\n      {\n        // swallow composed identifiers to avoid parsing them as keywords\n        begin: /(::|->)+[a-zA-Z_\\x7f-\\xff][a-zA-Z0-9_\\x7f-\\xff]*/\n      },\n      {\n        className: 'function',\n        beginKeywords: 'fn function', end: /[;{]/, excludeEnd: true,\n        illegal: '[$%\\\\[]',\n        contains: [\n          hljs.UNDERSCORE_TITLE_MODE,\n          {\n            className: 'params',\n            begin: '\\\\(', end: '\\\\)',\n            excludeBegin: true,\n            excludeEnd: true,\n            keywords: KEYWORDS,\n            contains: [\n              'self',\n              VARIABLE,\n              hljs.C_BLOCK_COMMENT_MODE,\n              STRING,\n              NUMBER\n            ]\n          }\n        ]\n      },\n      {\n        className: 'class',\n        beginKeywords: 'class interface', end: '{', excludeEnd: true,\n        illegal: /[:\\(\\$\"]/,\n        contains: [\n          {beginKeywords: 'extends implements'},\n          hljs.UNDERSCORE_TITLE_MODE\n        ]\n      },\n      {\n        beginKeywords: 'namespace', end: ';',\n        illegal: /[\\.']/,\n        contains: [hljs.UNDERSCORE_TITLE_MODE]\n      },\n      {\n        beginKeywords: 'use', end: ';',\n        contains: [hljs.UNDERSCORE_TITLE_MODE]\n      },\n      {\n        begin: '=>' // No markup, just a relevance booster\n      },\n      STRING,\n      NUMBER\n    ]\n  };\n}\n\nmodule.exports = php;\n","!function(){try{return new MouseEvent(\"test\")}catch(e){}var e=function(e,t){t=t||{bubbles:!1,cancelable:!1};var n=document.createEvent(\"MouseEvent\");return n.initMouseEvent(e,t.bubbles,t.cancelable,window,0,t.screenX||0,t.screenY||0,t.clientX||0,t.clientY||0,t.ctrlKey||!1,t.altKey||!1,t.shiftKey||!1,t.metaKey||!1,t.button||0,t.relatedTarget||null),n};e.prototype=Event.prototype,window.MouseEvent=e}();\n","!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent(\"CustomEvent\");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}\"function\"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t)}();\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!('Promise' in globalNS)) {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","import { h } from \"hyperapp\"\n\nexport function Link(props, children) {\n  return function(state, actions) {\n    var to = props.to\n    var location = state.location\n    var onclick = props.onclick\n    delete props.to\n    delete props.location\n\n    props.href = to\n    props.onclick = function(e) {\n      if (onclick) {\n        onclick(e)\n      }\n      if (\n        e.defaultPrevented ||\n        e.button !== 0 ||\n        e.altKey ||\n        e.metaKey ||\n        e.ctrlKey ||\n        e.shiftKey ||\n        props.target === \"_blank\"\n      ) {\n      } else {\n        e.preventDefault()\n\n        if (to !== location.pathname) {\n          history.pushState(location.pathname, \"\", to)\n        }\n      }\n    }\n\n    return h(\"a\", props, children)\n  }\n}\n","function createMatch(isExact, path, url, params) {\n  return {\n    isExact: isExact,\n    path: path,\n    url: url,\n    params: params\n  }\n}\n\nfunction trimTrailingSlash(url) {\n  for (var len = url.length; \"/\" === url[--len]; );\n  return url.slice(0, len + 1)\n}\n\nfunction decodeParam(val) {\n  try {\n    return decodeURIComponent(val)\n  } catch (e) {\n    return val\n  }\n}\n\nexport function parseRoute(path, url, options) {\n  if (path === url || !path) {\n    return createMatch(path === url, path, url)\n  }\n\n  var exact = options && options.exact\n  var paths = trimTrailingSlash(path).split(\"/\")\n  var urls = trimTrailingSlash(url).split(\"/\")\n\n  if (paths.length > urls.length || (exact && paths.length < urls.length)) {\n    return\n  }\n\n  for (var i = 0, params = {}, len = paths.length, url = \"\"; i < len; i++) {\n    if (\":\" === paths[i][0]) {\n      params[paths[i].slice(1)] = urls[i] = decodeParam(urls[i])\n    } else if (paths[i] !== urls[i]) {\n      return\n    }\n    url += urls[i] + \"/\"\n  }\n\n  return createMatch(false, path, url.slice(0, -1), params)\n}\n","import { parseRoute } from \"./parseRoute\"\n\nexport function Route(props) {\n  return function(state, actions) {\n    var location = state.location\n    var match = parseRoute(props.path, location.pathname, {\n      exact: !props.parent\n    })\n\n    return (\n      match &&\n      props.render({\n        match: match,\n        location: location\n      })\n    )\n  }\n}\n","function wrapHistory(keys) {\n  return keys.reduce(function(next, key) {\n    var fn = history[key]\n\n    history[key] = function(data, title, url) {\n      fn.call(this, data, title, url)\n      dispatchEvent(new CustomEvent(\"pushstate\", { detail: data }))\n    }\n\n    return function() {\n      history[key] = fn\n      next && next()\n    }\n  }, null)\n}\n\nexport var location = {\n  state: {\n    pathname: window.location.pathname,\n    previous: window.location.pathname\n  },\n  actions: {\n    go: function(pathname) {\n      history.pushState(null, \"\", pathname)\n    },\n    set: function(data) {\n      return data\n    }\n  },\n  subscribe: function(actions) {\n    function handleLocationChange(e) {\n      actions.set({\n        pathname: window.location.pathname,\n        previous: e.detail\n          ? (window.location.previous = e.detail)\n          : window.location.previous\n      })\n    }\n\n    var unwrap = wrapHistory([\"pushState\", \"replaceState\"])\n\n    addEventListener(\"pushstate\", handleLocationChange)\n    addEventListener(\"popstate\", handleLocationChange)\n\n    return function() {\n      removeEventListener(\"pushstate\", handleLocationChange)\n      removeEventListener(\"popstate\", handleLocationChange)\n      unwrap()\n    }\n  }\n}\n","import { $document } from 'mdui/es/utils/dom';\n/**\n * 订阅事件\n * @param name\n * @param fn\n */\n\nexport function subscribe(name, fn) {\n  $document.on(name, (_, data) => {\n    fn(data);\n  });\n}\n/**\n * 触发事件\n * @param name\n * @param data\n */\n\nexport function emit(name, data = '') {\n  $document.trigger(name, data);\n}","import $ from '../$';\nimport each from '../functions/each';\n\n$.fn.each = function (callback) {\n  return each(this, callback);\n};","import $ from '../$';\nimport each from '../functions/each';\nimport { isElement, isFunction } from '../utils';\nimport './each';\neach(['add', 'remove', 'toggle'], (_, name) => {\n  $.fn[`${name}Class`] = function (className) {\n    if (name === 'remove' && !arguments.length) {\n      return this.each((_, element) => {\n        element.setAttribute('class', '');\n      });\n    }\n\n    return this.each((i, element) => {\n      if (!isElement(element)) {\n        return;\n      }\n\n      const classes = (isFunction(className) ? className.call(element, i, element.getAttribute('class') || '') : className).split(' ').filter(name => name);\n      each(classes, (_, cls) => {\n        element.classList[name](cls);\n      });\n    });\n  };\n});","import $ from '../$';\nimport each from '../functions/each';\nimport './each';\neach(['insertBefore', 'insertAfter'], (nameIndex, name) => {\n  $.fn[name] = function (target) {\n    const $element = nameIndex ? $(this.get().reverse()) : this; // 顺序和 jQuery 保持一致\n\n    const $target = $(target);\n    const result = [];\n    $target.each((index, target) => {\n      if (!target.parentNode) {\n        return;\n      }\n\n      $element.each((_, element) => {\n        const newItem = index ? element.cloneNode(true) : element;\n        const existingItem = nameIndex ? target.nextSibling : target;\n        result.push(newItem);\n        target.parentNode.insertBefore(newItem, existingItem);\n      });\n    });\n    return $(nameIndex ? result.reverse() : result);\n  };\n});","import each from './each';\n\nfunction map(elements, callback) {\n  let value;\n  const ret = [];\n  each(elements, (i, element) => {\n    value = callback.call(window, element, i);\n\n    if (value != null) {\n      ret.push(value);\n    }\n  });\n  return [].concat(...ret);\n}\n\nexport default map;","import $ from '../$';\nimport map from '../functions/map';\nimport { JQ } from '../JQ';\n\n$.fn.map = function (callback) {\n  return new JQ(map(this, (element, i) => callback.call(element, i, element)));\n};","import $ from '../$';\nimport { isDocument, isFunction, isString, isWindow } from '../utils';\nimport './each';\n\n$.fn.is = function (selector) {\n  let isMatched = false;\n\n  if (isFunction(selector)) {\n    this.each((index, element) => {\n      if (selector.call(element, index, element)) {\n        isMatched = true;\n      }\n    });\n    return isMatched;\n  }\n\n  if (isString(selector)) {\n    this.each((_, element) => {\n      if (isDocument(element) || isWindow(element)) {\n        return;\n      } // @ts-ignore\n\n\n      const matches = element.matches || element.msMatchesSelector;\n\n      if (matches.call(element, selector)) {\n        isMatched = true;\n      }\n    });\n    return isMatched;\n  }\n\n  const $compareWith = $(selector);\n  this.each((_, element) => {\n    $compareWith.each((_, compare) => {\n      if (element === compare) {\n        isMatched = true;\n      }\n    });\n  });\n  return isMatched;\n};","import $ from '../$';\nimport './each';\nimport './is';\n\n$.fn.remove = function (selector) {\n  return this.each((_, element) => {\n    if (element.parentNode && (!selector || $(element).is(selector))) {\n      element.parentNode.removeChild(element);\n    }\n  });\n};","import $ from '../$';\nimport each from '../functions/each';\nimport './insertAfter';\nimport './insertBefore';\nimport './map';\nimport './remove';\neach(['appendTo', 'prependTo'], (nameIndex, name) => {\n  $.fn[name] = function (target) {\n    const extraChilds = [];\n    const $target = $(target).map((_, element) => {\n      const childNodes = element.childNodes;\n      const childLength = childNodes.length;\n\n      if (childLength) {\n        return childNodes[nameIndex ? 0 : childLength - 1];\n      }\n\n      const child = document.createElement('div');\n      element.appendChild(child);\n      extraChilds.push(child);\n      return child;\n    });\n    const $result = this[nameIndex ? 'insertBefore' : 'insertAfter']($target);\n    $(extraChilds).remove();\n    return $result;\n  };\n});","import each from './each';\n/**\n * 过滤掉数组中的重复元素\n * @param arr 数组\n * @example\n```js\nunique([1, 2, 12, 3, 2, 1, 2, 1, 1]);\n// [1, 2, 12, 3]\n```\n */\n\nfunction unique(arr) {\n  const result = [];\n  each(arr, (_, val) => {\n    if (result.indexOf(val) === -1) {\n      result.push(val);\n    }\n  });\n  return result;\n}\n\nexport default unique;","import $ from '../$';\nimport each from '../functions/each';\nimport unique from '../functions/unique';\nimport { JQ } from '../JQ';\nimport { isElement } from '../utils';\nimport './each';\nimport './is';\n\n$.fn.children = function (selector) {\n  const children = [];\n  this.each((_, element) => {\n    each(element.childNodes, (__, childNode) => {\n      if (!isElement(childNode)) {\n        return;\n      }\n\n      if (!selector || $(childNode).is(selector)) {\n        children.push(childNode);\n      }\n    });\n  });\n  return new JQ(unique(children));\n};","import $ from '../$';\nimport './map';\n\n$.fn.clone = function () {\n  return this.map(function () {\n    return this.cloneNode(true);\n  });\n};","const dataNS = '_mduiElementDataStorage';\nexport default dataNS;","import { isObjectLike, isUndefined, toCamelCase } from '../utils';\nimport each from './each';\nimport dataNS from './utils/data';\n/**\n * 在元素上设置键值对数据\n * @param element\n * @param object\n */\n\nfunction setObjectToElement(element, object) {\n  // @ts-ignore\n  if (!element[dataNS]) {\n    // @ts-ignore\n    element[dataNS] = {};\n  }\n\n  each(object, (key, value) => {\n    // @ts-ignore\n    element[dataNS][toCamelCase(key)] = value;\n  });\n}\n\nfunction data(element, key, value) {\n  // 根据键值对设置值\n  // data(element, { 'key' : 'value' })\n  if (isObjectLike(key)) {\n    setObjectToElement(element, key);\n    return key;\n  } // 根据 key、value 设置值\n  // data(element, 'key', 'value')\n\n\n  if (!isUndefined(value)) {\n    setObjectToElement(element, {\n      [key]: value\n    });\n    return value;\n  } // 获取所有值\n  // data(element)\n\n\n  if (isUndefined(key)) {\n    // @ts-ignore\n    return element[dataNS] ? element[dataNS] : {};\n  } // 从 dataNS 中获取指定值\n  // data(element, 'key')\n\n\n  key = toCamelCase(key); // @ts-ignore\n\n  if (element[dataNS] && key in element[dataNS]) {\n    // @ts-ignore\n    return element[dataNS][key];\n  }\n\n  return undefined;\n}\n\nexport default data;","import $ from '../$';\nimport data from '../functions/data';\nimport { isObjectLike, isString, isUndefined, toCamelCase, toKebabCase } from '../utils';\nimport './each';\nconst rbrace = /^(?:{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/; // 从 `data-*` 中获取的值，需要经过该函数转换\n\nfunction getData(value) {\n  if (value === 'true') {\n    return true;\n  }\n\n  if (value === 'false') {\n    return false;\n  }\n\n  if (value === 'null') {\n    return null;\n  }\n\n  if (value === +value + '') {\n    return +value;\n  }\n\n  if (rbrace.test(value)) {\n    return JSON.parse(value);\n  }\n\n  return value;\n} // 若 value 不存在，则从 `data-*` 中获取值\n\n\nfunction dataAttr(element, key, value) {\n  if (isUndefined(value) && element.nodeType === 1) {\n    const name = 'data-' + toKebabCase(key);\n    value = element.getAttribute(name);\n\n    if (isString(value)) {\n      try {\n        value = getData(value);\n      } catch (e) {}\n    } else {\n      value = undefined;\n    }\n  }\n\n  return value;\n}\n\n$.fn.data = function (key, value) {\n  // 获取所有值\n  if (isUndefined(key)) {\n    if (!this.length) {\n      return undefined;\n    }\n\n    const element = this[0];\n    const resultData = data(element); // window, document 上不存在 `data-*` 属性\n\n    if (element.nodeType !== 1) {\n      return resultData;\n    } // 从 `data-*` 中获取值\n\n\n    const attrs = element.attributes;\n    let i = attrs.length;\n\n    while (i--) {\n      if (attrs[i]) {\n        let name = attrs[i].name;\n\n        if (name.indexOf('data-') === 0) {\n          name = toCamelCase(name.slice(5));\n          resultData[name] = dataAttr(element, name, resultData[name]);\n        }\n      }\n    }\n\n    return resultData;\n  } // 同时设置多个值\n\n\n  if (isObjectLike(key)) {\n    return this.each(function () {\n      data(this, key);\n    });\n  } // value 传入了 undefined\n\n\n  if (arguments.length === 2 && isUndefined(value)) {\n    return this;\n  } // 设置值\n\n\n  if (!isUndefined(value)) {\n    return this.each(function () {\n      data(this, key, value);\n    });\n  } // 获取值\n\n\n  if (!this.length) {\n    return undefined;\n  }\n\n  return dataAttr(this[0], key, data(this[0], key));\n};","import each from './each';\n/**\n * 把第二个数组的元素追加到第一个数组中，并返回合并后的数组\n * @param first 第一个数组\n * @param second 该数组的元素将被追加到第一个数组中\n * @example\n```js\nmerge( [ 0, 1, 2 ], [ 2, 3, 4 ] )\n// [ 0, 1, 2, 2, 3, 4 ]\n```\n */\n\nfunction merge(first, second) {\n  each(second, (_, value) => {\n    first.push(value);\n  });\n  return first;\n}\n\nexport default merge;","import $ from '../../$';\nimport unique from '../../functions/unique';\nimport { JQ } from '../../JQ';\nimport { isElement } from '../../utils';\nimport '../each';\nimport '../is';\nexport default function dir($elements, nameIndex, node, selector, filter) {\n  const ret = [];\n  let target;\n  $elements.each((_, element) => {\n    target = element[node]; // 不能包含最顶层的 document 元素\n\n    while (target && isElement(target)) {\n      // prevUntil, nextUntil, parentsUntil\n      if (nameIndex === 2) {\n        if (selector && $(target).is(selector)) {\n          break;\n        }\n\n        if (!filter || $(target).is(filter)) {\n          ret.push(target);\n        }\n      } // prev, next, parent\n      else if (nameIndex === 0) {\n          if (!selector || $(target).is(selector)) {\n            ret.push(target);\n          }\n\n          break;\n        } // prevAll, nextAll, parents\n        else {\n            if (!selector || $(target).is(selector)) {\n              ret.push(target);\n            }\n          } // @ts-ignore\n\n\n      target = target[node];\n    }\n  });\n  return new JQ(unique(ret));\n}","import $ from '../$';\n\n$.fn.get = function (index) {\n  return index === undefined ? [].slice.call(this) : this[index >= 0 ? index : index + this.length];\n};","import $ from '../$';\nimport merge from '../functions/merge';\nimport { JQ } from '../JQ';\nimport './each';\nimport './get';\n\n$.fn.find = function (selector) {\n  const foundElements = [];\n  this.each((_, element) => {\n    merge(foundElements, $(element.querySelectorAll(selector)).get());\n  });\n  return new JQ(foundElements);\n};","import $ from '../$';\nimport each from '../functions/each';\nimport dir from './utils/dir';\neach(['', 'All', 'Until'], (nameIndex, name) => {\n  $.fn[`next${name}`] = function (selector, filter) {\n    return dir(this, nameIndex, 'nextElementSibling', selector, filter);\n  };\n});","import { toElement } from '../utils';\n/**\n * 检查 container 元素内是否包含 contains 元素\n * @param container 父元素\n * @param contains 子元素\n * @example\n```js\ncontains( document, document.body ); // true\ncontains( document.getElementById('test'), document ); // false\ncontains( $('.container').get(0), $('.contains').get(0) ); // false\n```\n */\n\nfunction contains(container, contains) {\n  return container !== contains && toElement(container).contains(contains);\n}\n\nexport default contains;","import $ from '../../$';\nimport contains from '../../functions/contains';\nimport { isObjectLike } from '../../utils';\nimport '../find'; // 存储事件\n\nconst handlers = {}; // 元素ID\n\nlet mduiElementId = 1;\n/**\n * 为元素赋予一个唯一的ID\n */\n\nfunction getElementId(element) {\n  const key = '_mduiEventId'; // @ts-ignore\n\n  if (!element[key]) {\n    // @ts-ignore\n    element[key] = ++mduiElementId;\n  } // @ts-ignore\n\n\n  return element[key];\n}\n/**\n * 解析事件名中的命名空间\n */\n\n\nfunction parse(type) {\n  const parts = type.split('.');\n  return {\n    type: parts[0],\n    ns: parts.slice(1).sort().join(' ')\n  };\n}\n/**\n * 命名空间匹配规则\n */\n\n\nfunction matcherFor(ns) {\n  return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)');\n}\n/**\n * 获取匹配的事件\n * @param element\n * @param type\n * @param func\n * @param selector\n */\n\n\nfunction getHandlers(element, type, func, selector) {\n  const event = parse(type);\n  return (handlers[getElementId(element)] || []).filter(handler => handler && (!event.type || handler.type === event.type) && (!event.ns || matcherFor(event.ns).test(handler.ns)) && (!func || getElementId(handler.func) === getElementId(func)) && (!selector || handler.selector === selector));\n}\n/**\n * 添加事件监听\n * @param element\n * @param types\n * @param func\n * @param data\n * @param selector\n */\n\n\nfunction add(element, types, func, data, selector) {\n  const elementId = getElementId(element);\n\n  if (!handlers[elementId]) {\n    handlers[elementId] = [];\n  } // 传入 data.useCapture 来设置 useCapture: true\n\n\n  let useCapture = false;\n\n  if (isObjectLike(data) && data.useCapture) {\n    useCapture = true;\n  }\n\n  types.split(' ').forEach(type => {\n    if (!type) {\n      return;\n    }\n\n    const event = parse(type);\n\n    function callFn(e, elem) {\n      // 因为鼠标事件模拟事件的 detail 属性是只读的，因此在 e._detail 中存储参数\n      const result = func.apply(elem, // @ts-ignore\n      e._detail === undefined ? [e] : [e].concat(e._detail));\n\n      if (result === false) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n\n    function proxyFn(e) {\n      // @ts-ignore\n      if (e._ns && !matcherFor(e._ns).test(event.ns)) {\n        return;\n      } // @ts-ignore\n\n\n      e._data = data;\n\n      if (selector) {\n        // 事件代理\n        $(element).find(selector).get().reverse().forEach(elem => {\n          if (elem === e.target || contains(elem, e.target)) {\n            callFn(e, elem);\n          }\n        });\n      } else {\n        // 不使用事件代理\n        callFn(e, element);\n      }\n    }\n\n    const handler = {\n      type: event.type,\n      ns: event.ns,\n      func,\n      selector,\n      id: handlers[elementId].length,\n      proxy: proxyFn\n    };\n    handlers[elementId].push(handler);\n    element.addEventListener(handler.type, proxyFn, useCapture);\n  });\n}\n/**\n * 移除事件监听\n * @param element\n * @param types\n * @param func\n * @param selector\n */\n\n\nfunction remove(element, types, func, selector) {\n  const handlersInElement = handlers[getElementId(element)] || [];\n\n  const removeEvent = handler => {\n    delete handlersInElement[handler.id];\n    element.removeEventListener(handler.type, handler.proxy, false);\n  };\n\n  if (!types) {\n    handlersInElement.forEach(handler => removeEvent(handler));\n  } else {\n    types.split(' ').forEach(type => {\n      if (type) {\n        getHandlers(element, type, func, selector).forEach(handler => removeEvent(handler));\n      }\n    });\n  }\n}\n\nexport { parse, add, remove };","import $ from '../$';\nimport each from '../functions/each';\nimport { isFunction, isObjectLike, returnFalse } from '../utils';\nimport './each';\nimport { remove } from './utils/event';\n\n$.fn.off = function (types, selector, callback) {\n  // types 是对象\n  if (isObjectLike(types)) {\n    each(types, (type, fn) => {\n      // this.off('click', undefined, function () {})\n      // this.off('click', '.box', function () {})\n      this.off(type, selector, fn);\n    });\n    return this;\n  } // selector 不存在\n\n\n  if (selector === false || isFunction(selector)) {\n    callback = selector;\n    selector = undefined; // this.off('click', undefined, function () {})\n  } // callback 传入 `false`，相当于 `return false`\n\n\n  if (callback === false) {\n    callback = returnFalse;\n  }\n\n  return this.each(function () {\n    remove(this, types, callback, selector);\n  });\n};","import $ from '../$';\nimport each from '../functions/each';\nimport { isObjectLike, isString, returnFalse } from '../utils';\nimport './each';\nimport './off';\nimport { add } from './utils/event';\n\n$.fn.on = function (types, selector, data, callback, one) {\n  // types 可以是 type/func 对象\n  if (isObjectLike(types)) {\n    // (types-Object, selector, data)\n    if (!isString(selector)) {\n      // (types-Object, data)\n      data = data || selector;\n      selector = undefined;\n    }\n\n    each(types, (type, fn) => {\n      // selector 和 data 都可能是 undefined\n      // @ts-ignore\n      this.on(type, selector, data, fn, one);\n    });\n    return this;\n  }\n\n  if (data == null && callback == null) {\n    // (types, fn)\n    callback = selector;\n    data = selector = undefined;\n  } else if (callback == null) {\n    if (isString(selector)) {\n      // (types, selector, fn)\n      callback = data;\n      data = undefined;\n    } else {\n      // (types, data, fn)\n      callback = data;\n      data = selector;\n      selector = undefined;\n    }\n  }\n\n  if (callback === false) {\n    callback = returnFalse;\n  } else if (!callback) {\n    return this;\n  } // $().one()\n\n\n  if (one) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const _this = this;\n\n    const origCallback = callback;\n\n    callback = function (event) {\n      _this.off(event.type, selector, callback); // eslint-disable-next-line prefer-rest-params\n\n\n      return origCallback.apply(this, arguments);\n    };\n  }\n\n  return this.each(function () {\n    add(this, types, callback, data, selector);\n  });\n};","import $ from '../$';\nimport each from '../functions/each';\nimport './get';\nimport dir from './utils/dir';\neach(['', 's', 'sUntil'], (nameIndex, name) => {\n  $.fn[`parent${name}`] = function (selector, filter) {\n    // parents、parentsUntil 需要把元素的顺序反向处理，以便和 jQuery 的结果一致\n    const $nodes = !nameIndex ? this : $(this.get().reverse());\n    return dir($nodes, nameIndex, 'parentNode', selector, filter);\n  };\n});","import $ from '../$';\nimport each from '../functions/each';\nimport map from '../functions/map';\nimport { isElement, isFunction, isUndefined, toElement } from '../utils';\nimport './each';\nimport './is';\neach(['val', 'html', 'text'], (nameIndex, name) => {\n  const props = {\n    0: 'value',\n    1: 'innerHTML',\n    2: 'textContent'\n  };\n  const propName = props[nameIndex];\n\n  function get($elements) {\n    // text() 获取所有元素的文本\n    if (nameIndex === 2) {\n      // @ts-ignore\n      return map($elements, element => toElement(element)[propName]).join('');\n    } // 空集合时，val() 和 html() 返回 undefined\n\n\n    if (!$elements.length) {\n      return undefined;\n    } // val() 和 html() 仅获取第一个元素的内容\n\n\n    const firstElement = $elements[0]; // select multiple 返回数组\n\n    if (nameIndex === 0 && $(firstElement).is('select[multiple]')) {\n      return map($(firstElement).find('option:checked'), element => element.value);\n    } // @ts-ignore\n\n\n    return firstElement[propName];\n  }\n\n  function set(element, value) {\n    // text() 和 html() 赋值为 undefined，则保持原内容不变\n    // val() 赋值为 undefined 则赋值为空\n    if (isUndefined(value)) {\n      if (nameIndex !== 0) {\n        return;\n      }\n\n      value = '';\n    }\n\n    if (nameIndex === 1 && isElement(value)) {\n      value = value.outerHTML;\n    } // @ts-ignore\n\n\n    element[propName] = value;\n  }\n\n  $.fn[name] = function (value) {\n    // 获取值\n    if (!arguments.length) {\n      return get(this);\n    } // 设置值\n\n\n    return this.each((i, element) => {\n      const computedValue = isFunction(value) ? value.call(element, i, get($(element))) : value; // value 是数组，则选中数组中的元素，反选不在数组中的元素\n\n      if (nameIndex === 0 && Array.isArray(computedValue)) {\n        // select[multiple]\n        if ($(element).is('select[multiple]')) {\n          map($(element).find('option'), option => option.selected = computedValue.indexOf(option.value) > -1);\n        } // 其他 checkbox, radio 等元素\n        else {\n            element.checked = computedValue.indexOf(element.value) > -1;\n          }\n      } else {\n        set(element, computedValue);\n      }\n    });\n  };\n});","import $ from '../$';\nimport './each';\nimport './val';\n/**\n * 将表单元素的值组合成键值对数组\n * @returns {Array}\n */\n\n$.fn.serializeArray = function () {\n  const result = [];\n  this.each((_, element) => {\n    const elements = element instanceof HTMLFormElement ? element.elements : [element];\n    $(elements).each((_, element) => {\n      const $element = $(element);\n      const type = element.type;\n      const nodeName = element.nodeName.toLowerCase();\n\n      if (nodeName !== 'fieldset' && element.name && !element.disabled && ['input', 'select', 'textarea', 'keygen'].indexOf(nodeName) > -1 && ['submit', 'button', 'image', 'reset', 'file'].indexOf(type) === -1 && (['radio', 'checkbox'].indexOf(type) === -1 || element.checked)) {\n        const value = $element.val();\n        const valueArr = Array.isArray(value) ? value : [value];\n        valueArr.forEach(value => {\n          result.push({\n            name: element.name,\n            value\n          });\n        });\n      }\n    });\n  });\n  return result;\n};","import $ from '../$';\nimport { getStyle } from '../utils';\nimport './each';\nconst elementDisplay = {};\n/**\n * 获取元素的初始 display 值，用于 .show() 方法\n * @param nodeName\n */\n\nfunction defaultDisplay(nodeName) {\n  let element;\n  let display;\n\n  if (!elementDisplay[nodeName]) {\n    element = document.createElement(nodeName);\n    document.body.appendChild(element);\n    display = getStyle(element, 'display');\n    element.parentNode.removeChild(element);\n\n    if (display === 'none') {\n      display = 'block';\n    }\n\n    elementDisplay[nodeName] = display;\n  }\n\n  return elementDisplay[nodeName];\n}\n/**\n * 显示指定元素\n * @returns {JQ}\n */\n\n\n$.fn.show = function () {\n  return this.each(function () {\n    if (this.style.display === 'none') {\n      this.style.display = '';\n    }\n\n    if (getStyle(this, 'display') === 'none') {\n      this.style.display = defaultDisplay(this.nodeName);\n    }\n  });\n};","import $ from '../$';\nimport each from '../functions/each';\nimport { isBoolean, isDocument, isFunction, isWindow, toElement, isBorderBox, getExtraWidth, getComputedStyleValue, isIE } from '../utils';\nimport './css';\nimport './each';\n/**\n * 值上面的 padding、border、margin 处理\n * @param element\n * @param name\n * @param value\n * @param funcIndex\n * @param includeMargin\n * @param multiply\n */\n\nfunction handleExtraWidth(element, name, value, funcIndex, includeMargin, multiply) {\n  // 获取元素的 padding, border, margin 宽度（两侧宽度的和）\n  const getExtraWidthValue = extra => {\n    return getExtraWidth(element, name.toLowerCase(), extra) * multiply;\n  };\n\n  if (funcIndex === 2 && includeMargin) {\n    value += getExtraWidthValue('margin');\n  }\n\n  if (isBorderBox(element)) {\n    // IE 为 box-sizing: border-box 时，得到的值不含 border 和 padding，这里先修复\n    // 仅获取时需要处理，multiply === 1 为 get\n    if (isIE() && multiply === 1) {\n      value += getExtraWidthValue('border');\n      value += getExtraWidthValue('padding');\n    }\n\n    if (funcIndex === 0) {\n      value -= getExtraWidthValue('border');\n    }\n\n    if (funcIndex === 1) {\n      value -= getExtraWidthValue('border');\n      value -= getExtraWidthValue('padding');\n    }\n  } else {\n    if (funcIndex === 0) {\n      value += getExtraWidthValue('padding');\n    }\n\n    if (funcIndex === 2) {\n      value += getExtraWidthValue('border');\n      value += getExtraWidthValue('padding');\n    }\n  }\n\n  return value;\n}\n/**\n * 获取元素的样式值\n * @param element\n * @param name\n * @param funcIndex 0: innerWidth, innerHeight; 1: width, height; 2: outerWidth, outerHeight\n * @param includeMargin\n */\n\n\nfunction get(element, name, funcIndex, includeMargin) {\n  const clientProp = `client${name}`;\n  const scrollProp = `scroll${name}`;\n  const offsetProp = `offset${name}`;\n  const innerProp = `inner${name}`; // $(window).width()\n\n  if (isWindow(element)) {\n    // outerWidth, outerHeight 需要包含滚动条的宽度\n    return funcIndex === 2 ? element[innerProp] : toElement(document)[clientProp];\n  } // $(document).width()\n\n\n  if (isDocument(element)) {\n    const doc = toElement(element);\n    return Math.max( // @ts-ignore\n    element.body[scrollProp], doc[scrollProp], // @ts-ignore\n    element.body[offsetProp], doc[offsetProp], doc[clientProp]);\n  }\n\n  const value = parseFloat(getComputedStyleValue(element, name.toLowerCase()) || '0');\n  return handleExtraWidth(element, name, value, funcIndex, includeMargin, 1);\n}\n/**\n * 设置元素的样式值\n * @param element\n * @param elementIndex\n * @param name\n * @param funcIndex 0: innerWidth, innerHeight; 1: width, height; 2: outerWidth, outerHeight\n * @param includeMargin\n * @param value\n */\n\n\nfunction set(element, elementIndex, name, funcIndex, includeMargin, value) {\n  let computedValue = isFunction(value) ? value.call(element, elementIndex, get(element, name, funcIndex, includeMargin)) : value;\n\n  if (computedValue == null) {\n    return;\n  }\n\n  const $element = $(element);\n  const dimension = name.toLowerCase(); // 特殊的值，不需要计算 padding、border、margin\n\n  if (['auto', 'inherit', ''].indexOf(computedValue) > -1) {\n    $element.css(dimension, computedValue);\n    return;\n  } // 其他值保留原始单位。注意：如果不使用 px 作为单位，则算出的值一般是不准确的\n\n\n  const suffix = computedValue.toString().replace(/\\b[0-9.]*/, '');\n  const numerical = parseFloat(computedValue);\n  computedValue = handleExtraWidth(element, name, numerical, funcIndex, includeMargin, -1) + (suffix || 'px');\n  $element.css(dimension, computedValue);\n}\n\neach(['Width', 'Height'], (_, name) => {\n  each([`inner${name}`, name.toLowerCase(), `outer${name}`], (funcIndex, funcName) => {\n    $.fn[funcName] = function (margin, value) {\n      // 是否是赋值操作\n      const isSet = arguments.length && (funcIndex < 2 || !isBoolean(margin));\n      const includeMargin = margin === true || value === true; // 获取第一个元素的值\n\n      if (!isSet) {\n        return this.length ? get(this[0], name, funcIndex, includeMargin) : undefined;\n      } // 设置每个元素的值\n\n\n      return this.each((index, element) => set(element, index, name, funcIndex, includeMargin, margin));\n    };\n  });\n});","import $ from '../$';\nimport './each';\nimport { parse } from './utils/event';\n\n$.fn.trigger = function (type, extraParameters) {\n  const event = parse(type);\n  let eventObject;\n  const eventParams = {\n    bubbles: true,\n    cancelable: true\n  };\n  const isMouseEvent = ['click', 'mousedown', 'mouseup', 'mousemove'].indexOf(event.type) > -1;\n\n  if (isMouseEvent) {\n    // Note: MouseEvent 无法传入 detail 参数\n    eventObject = new MouseEvent(event.type, eventParams);\n  } else {\n    eventParams.detail = extraParameters;\n    eventObject = new CustomEvent(event.type, eventParams);\n  } // @ts-ignore\n\n\n  eventObject._detail = extraParameters; // @ts-ignore\n\n  eventObject._ns = event.ns;\n  return this.each(function () {\n    this.dispatchEvent(eventObject);\n  });\n};","import $ from '../$';\nimport each from '../functions/each';\nimport { cssNumber, getStyle, isElement, isFunction, isNull, isNumber, isObjectLike, isUndefined, toCamelCase } from '../utils';\nimport './each';\neach(['attr', 'prop', 'css'], (nameIndex, name) => {\n  function set(element, key, value) {\n    // 值为 undefined 时，不修改\n    if (isUndefined(value)) {\n      return;\n    }\n\n    switch (nameIndex) {\n      // attr\n      case 0:\n        if (isNull(value)) {\n          element.removeAttribute(key);\n        } else {\n          element.setAttribute(key, value);\n        }\n\n        break;\n      // prop\n\n      case 1:\n        // @ts-ignore\n        element[key] = value;\n        break;\n      // css\n\n      default:\n        key = toCamelCase(key); // @ts-ignore\n\n        element.style[key] = isNumber(value) ? `${value}${cssNumber.indexOf(key) > -1 ? '' : 'px'}` : value;\n        break;\n    }\n  }\n\n  function get(element, key) {\n    switch (nameIndex) {\n      // attr\n      case 0:\n        // 属性不存在时，原生 getAttribute 方法返回 null，而 jquery 返回 undefined。这里和 jquery 保持一致\n        const value = element.getAttribute(key);\n        return isNull(value) ? undefined : value;\n      // prop\n\n      case 1:\n        // @ts-ignore\n        return element[key];\n      // css\n\n      default:\n        return getStyle(element, key);\n    }\n  }\n\n  $.fn[name] = function (key, value) {\n    if (isObjectLike(key)) {\n      each(key, (k, v) => {\n        // @ts-ignore\n        this[name](k, v);\n      });\n      return this;\n    }\n\n    if (arguments.length === 1) {\n      const element = this[0];\n      return isElement(element) ? get(element, key) : undefined;\n    }\n\n    return this.each((i, element) => {\n      set(element, key, isFunction(value) ? value.call(element, i, get(element, key)) : value);\n    });\n  };\n});","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/each';\n\n$.fn.reflow = function () {\n  return this.each(function () {\n    return this.clientLeft;\n  });\n};","import $ from 'mdui.jq/es/$';\nimport each from 'mdui.jq/es/functions/each';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/off';\n\n$.fn.transitionEnd = function (callback) {\n  // eslint-disable-next-line @typescript-eslint/no-this-alias\n  const that = this;\n  const events = ['webkitTransitionEnd', 'transitionend'];\n\n  function fireCallback(e) {\n    if (e.target !== this) {\n      return;\n    } // @ts-ignore\n\n\n    callback.call(this, e);\n    each(events, (_, event) => {\n      that.off(event, fireCallback);\n    });\n  }\n\n  each(events, (_, event) => {\n    that.on(event, fireCallback);\n  });\n  return this;\n};","import data from 'mdui.jq/es/functions/data';\n/**\n * CSS 选择器和初始化函数组成的对象\n */\n\nconst entries = {};\n/**\n * 注册并执行初始化函数\n * @param selector CSS 选择器\n * @param apiInit 初始化函数\n * @param i 元素索引\n * @param element 元素\n */\n\nfunction mutation(selector, apiInit, i, element) {\n  let selectors = data(element, '_mdui_mutation');\n\n  if (!selectors) {\n    selectors = [];\n    data(element, '_mdui_mutation', selectors);\n  }\n\n  if (selectors.indexOf(selector) === -1) {\n    selectors.push(selector);\n    apiInit.call(element, i, element);\n  }\n}\n\nexport { entries, mutation };","import $ from 'mdui.jq/es/$';\nimport each from 'mdui.jq/es/functions/each';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/is';\nimport { entries, mutation } from '../../utils/mutation';\n\n$.fn.mutation = function () {\n  return this.each((i, element) => {\n    const $this = $(element);\n    each(entries, (selector, apiInit) => {\n      if ($this.is(selector)) {\n        mutation(selector, apiInit, i, element);\n      }\n\n      $this.find(selector).each((i, element) => {\n        mutation(selector, apiInit, i, element);\n      });\n    });\n  });\n};","import $ from 'mdui.jq/es/$';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/css';\nimport 'mdui.jq/es/methods/appendTo';\nimport 'mdui.jq/es/methods/addClass';\nimport '../methods/reflow';\n\n$.showOverlay = function (zIndex) {\n  let $overlay = $('.mdui-overlay');\n\n  if ($overlay.length) {\n    $overlay.data('_overlay_is_deleted', false);\n\n    if (!isUndefined(zIndex)) {\n      $overlay.css('z-index', zIndex);\n    }\n  } else {\n    if (isUndefined(zIndex)) {\n      zIndex = 2000;\n    }\n\n    $overlay = $('<div class=\"mdui-overlay\">').appendTo(document.body).reflow().css('z-index', zIndex);\n  }\n\n  let level = $overlay.data('_overlay_level') || 0;\n  return $overlay.data('_overlay_level', ++level).addClass('mdui-overlay-show');\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/remove';\nimport '../methods/transitionEnd';\n\n$.hideOverlay = function (force = false) {\n  const $overlay = $('.mdui-overlay');\n\n  if (!$overlay.length) {\n    return;\n  }\n\n  let level = force ? 1 : $overlay.data('_overlay_level');\n\n  if (level > 1) {\n    $overlay.data('_overlay_level', --level);\n    return;\n  }\n\n  $overlay.data('_overlay_level', 0).removeClass('mdui-overlay-show').data('_overlay_is_deleted', true).transitionEnd(() => {\n    if ($overlay.data('_overlay_is_deleted')) {\n      $overlay.remove();\n    }\n  });\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/width';\nimport { $body } from '../../utils/dom';\n\n$.lockScreen = function () {\n  // 不直接把 body 设为 box-sizing: border-box，避免污染全局样式\n  const newBodyWidth = $body.width();\n  let level = $body.data('_lockscreen_level') || 0;\n  $body.addClass('mdui-locked').width(newBodyWidth).data('_lockscreen_level', ++level);\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/width';\nimport { $body } from '../../utils/dom';\n\n$.unlockScreen = function (force = false) {\n  let level = force ? 1 : $body.data('_lockscreen_level');\n\n  if (level > 1) {\n    $body.data('_lockscreen_level', --level);\n    return;\n  }\n\n  $body.data('_lockscreen_level', 0).removeClass('mdui-locked').width('');\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/each';\nimport mdui from '../mdui';\nimport '../jq_extends/methods/mutation';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport { entries, mutation } from '../utils/mutation';\n\nmdui.mutation = function (selector, apiInit) {\n  if (isUndefined(selector) || isUndefined(apiInit)) {\n    $(document).mutation();\n    return;\n  }\n\n  entries[selector] = apiInit;\n  $(selector).each((i, element) => mutation(selector, apiInit, i, element));\n};","import each from '../functions/each';\nimport { isUndefined } from '../utils';\n\nfunction extend(target, object1, ...objectN) {\n  objectN.unshift(object1);\n  each(objectN, (_, object) => {\n    each(object, (prop, value) => {\n      if (!isUndefined(value)) {\n        target[prop] = value;\n      }\n    });\n  });\n  return target;\n}\n\nexport default extend;","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/trigger';\n/**\n * 触发组件上的事件\n * @param eventName 事件名\n * @param componentName 组件名\n * @param target 在该元素上触发事件\n * @param instance 组件实例\n * @param parameters 事件参数\n */\n\nfunction componentEvent(eventName, componentName, target, instance, parameters) {\n  if (!parameters) {\n    parameters = {};\n  } // @ts-ignore\n\n\n  parameters.inst = instance;\n  const fullEventName = `${eventName}.mdui.${componentName}`; // jQuery 事件\n  // @ts-ignore\n\n  if (typeof jQuery !== 'undefined') {\n    // @ts-ignore\n    jQuery(target).trigger(fullEventName, parameters);\n  }\n\n  const $target = $(target); // mdui.jq 事件\n\n  $target.trigger(fullEventName, parameters);\n  const eventParams = {\n    bubbles: true,\n    cancelable: true,\n    detail: parameters\n  };\n  const eventObject = new CustomEvent(fullEventName, eventParams); // @ts-ignore\n\n  eventObject._detail = parameters;\n  $target[0].dispatchEvent(eventObject);\n}\n\nexport { componentEvent };","import $ from '../$';\nimport { JQ } from '../JQ';\n\n$.fn.slice = function (...args) {\n  return new JQ([].slice.apply(this, args));\n};","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './slice';\n\n$.fn.eq = function (index) {\n  const ret = index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n  return new JQ(ret);\n};","import $ from '../$';\nimport './eq';\n\n$.fn.first = function () {\n  return this.eq(0);\n};","import $ from '../$';\n\n$.fn.hasClass = function (className) {\n  return this[0].classList.contains(className);\n};","import $ from 'mdui.jq/es/$';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/removeClass';\nimport { isNumber } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport '../../jq_extends/methods/transitionEnd';\nimport { componentEvent } from '../../utils/componentEvent';\nimport { $window } from '../../utils/dom';\nconst DEFAULT_OPTIONS = {\n  tolerance: 5,\n  offset: 0,\n  initialClass: 'mdui-headroom',\n  pinnedClass: 'mdui-headroom-pinned-top',\n  unpinnedClass: 'mdui-headroom-unpinned-top'\n};\n\nclass Headroom {\n  constructor(selector, options = {}) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 当前 headroom 的状态\n     */\n\n    this.state = 'pinned';\n    /**\n     * 当前是否启用\n     */\n\n    this.isEnable = false;\n    /**\n     * 上次滚动后，垂直方向的距离\n     */\n\n    this.lastScrollY = 0;\n    /**\n     * AnimationFrame ID\n     */\n\n    this.rafId = 0;\n    this.$element = $(selector).first();\n    extend(this.options, options); // tolerance 参数若为数值，转换为对象\n\n    const tolerance = this.options.tolerance;\n\n    if (isNumber(tolerance)) {\n      this.options.tolerance = {\n        down: tolerance,\n        up: tolerance\n      };\n    }\n\n    this.enable();\n  }\n  /**\n   * 滚动时的处理\n   */\n\n\n  onScroll() {\n    this.rafId = window.requestAnimationFrame(() => {\n      const currentScrollY = window.pageYOffset;\n      const direction = currentScrollY > this.lastScrollY ? 'down' : 'up';\n      const tolerance = this.options.tolerance[direction];\n      const scrolled = Math.abs(currentScrollY - this.lastScrollY);\n      const toleranceExceeded = scrolled >= tolerance;\n\n      if (currentScrollY > this.lastScrollY && currentScrollY >= this.options.offset && toleranceExceeded) {\n        this.unpin();\n      } else if (currentScrollY < this.lastScrollY && toleranceExceeded || currentScrollY <= this.options.offset) {\n        this.pin();\n      }\n\n      this.lastScrollY = currentScrollY;\n    });\n  }\n  /**\n   * 触发组件事件\n   * @param name\n   */\n\n\n  triggerEvent(name) {\n    componentEvent(name, 'headroom', this.$element, this);\n  }\n  /**\n   * 动画结束的回调\n   */\n\n\n  transitionEnd() {\n    if (this.state === 'pinning') {\n      this.state = 'pinned';\n      this.triggerEvent('pinned');\n    }\n\n    if (this.state === 'unpinning') {\n      this.state = 'unpinned';\n      this.triggerEvent('unpinned');\n    }\n  }\n  /**\n   * 使元素固定住\n   */\n\n\n  pin() {\n    if (this.state === 'pinning' || this.state === 'pinned' || !this.$element.hasClass(this.options.initialClass)) {\n      return;\n    }\n\n    this.triggerEvent('pin');\n    this.state = 'pinning';\n    this.$element.removeClass(this.options.unpinnedClass).addClass(this.options.pinnedClass).transitionEnd(() => this.transitionEnd());\n  }\n  /**\n   * 使元素隐藏\n   */\n\n\n  unpin() {\n    if (this.state === 'unpinning' || this.state === 'unpinned' || !this.$element.hasClass(this.options.initialClass)) {\n      return;\n    }\n\n    this.triggerEvent('unpin');\n    this.state = 'unpinning';\n    this.$element.removeClass(this.options.pinnedClass).addClass(this.options.unpinnedClass).transitionEnd(() => this.transitionEnd());\n  }\n  /**\n   * 启用 headroom 插件\n   */\n\n\n  enable() {\n    if (this.isEnable) {\n      return;\n    }\n\n    this.isEnable = true;\n    this.state = 'pinned';\n    this.$element.addClass(this.options.initialClass).removeClass(this.options.pinnedClass).removeClass(this.options.unpinnedClass);\n    this.lastScrollY = window.pageYOffset;\n    $window.on('scroll', () => this.onScroll());\n  }\n  /**\n   * 禁用 headroom 插件\n   */\n\n\n  disable() {\n    if (!this.isEnable) {\n      return;\n    }\n\n    this.isEnable = false;\n    this.$element.removeClass(this.options.initialClass).removeClass(this.options.pinnedClass).removeClass(this.options.unpinnedClass);\n    $window.off('scroll', () => this.onScroll());\n    window.cancelAnimationFrame(this.rafId);\n  }\n  /**\n   * 获取当前状态。共包含四种状态：`pinning`、`pinned`、`unpinning`、`unpinned`\n   */\n\n\n  getState() {\n    return this.state;\n  }\n\n}\n\nmdui.Headroom = Headroom;","import $ from '../$';\nimport './css';\nimport './eq';\nimport './offset';\nimport './offsetParent';\n\nfunction floatStyle($element, name) {\n  return parseFloat($element.css(name));\n}\n\n$.fn.position = function () {\n  if (!this.length) {\n    return undefined;\n  }\n\n  const $element = this.eq(0);\n  let currentOffset;\n  let parentOffset = {\n    left: 0,\n    top: 0\n  };\n\n  if ($element.css('position') === 'fixed') {\n    currentOffset = $element[0].getBoundingClientRect();\n  } else {\n    currentOffset = $element.offset();\n    const $offsetParent = $element.offsetParent();\n    parentOffset = $offsetParent.offset();\n    parentOffset.top += floatStyle($offsetParent, 'border-top-width');\n    parentOffset.left += floatStyle($offsetParent, 'border-left-width');\n  }\n\n  return {\n    top: currentOffset.top - parentOffset.top - floatStyle($element, 'margin-top'),\n    left: currentOffset.left - parentOffset.left - floatStyle($element, 'margin-left')\n  };\n};","import $ from '../$';\nimport extend from '../functions/extend';\nimport { isFunction } from '../utils';\nimport './css';\nimport './each';\nimport './position';\n\nfunction get(element) {\n  if (!element.getClientRects().length) {\n    return {\n      top: 0,\n      left: 0\n    };\n  }\n\n  const rect = element.getBoundingClientRect();\n  const win = element.ownerDocument.defaultView;\n  return {\n    top: rect.top + win.pageYOffset,\n    left: rect.left + win.pageXOffset\n  };\n}\n\nfunction set(element, value, index) {\n  const $element = $(element);\n  const position = $element.css('position');\n\n  if (position === 'static') {\n    $element.css('position', 'relative');\n  }\n\n  const currentOffset = get(element);\n  const currentTopString = $element.css('top');\n  const currentLeftString = $element.css('left');\n  let currentTop;\n  let currentLeft;\n  const calculatePosition = (position === 'absolute' || position === 'fixed') && (currentTopString + currentLeftString).indexOf('auto') > -1;\n\n  if (calculatePosition) {\n    const currentPosition = $element.position();\n    currentTop = currentPosition.top;\n    currentLeft = currentPosition.left;\n  } else {\n    currentTop = parseFloat(currentTopString);\n    currentLeft = parseFloat(currentLeftString);\n  }\n\n  const computedValue = isFunction(value) ? value.call(element, index, extend({}, currentOffset)) : value;\n  $element.css({\n    top: computedValue.top != null ? computedValue.top - currentOffset.top + currentTop : undefined,\n    left: computedValue.left != null ? computedValue.left - currentOffset.left + currentLeft : undefined\n  });\n}\n\n$.fn.offset = function (value) {\n  // 获取坐标\n  if (!arguments.length) {\n    if (!this.length) {\n      return undefined;\n    }\n\n    return get(this[0]);\n  } // 设置坐标\n\n\n  return this.each(function (index) {\n    set(this, value, index);\n  });\n};","import $ from '../$';\nimport './css';\nimport './map';\n/**\n * 返回最近的用于定位的父元素\n */\n\n$.fn.offsetParent = function () {\n  return this.map(function () {\n    let offsetParent = this.offsetParent;\n\n    while (offsetParent && $(offsetParent).css('position') === 'static') {\n      offsetParent = offsetParent.offsetParent;\n    }\n\n    return offsetParent || document.documentElement;\n  });\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/each';\n\n$.fn.transform = function (transform) {\n  return this.each(function () {\n    this.style.webkitTransform = transform;\n    this.style.transform = transform;\n  });\n};","/**\n * touch 事件后的 500ms 内禁用 mousedown 事件\n *\n * 不支持触控的屏幕上事件顺序为 mousedown -> mouseup -> click\n * 支持触控的屏幕上事件顺序为 touchstart -> touchend -> mousedown -> mouseup -> click\n *\n * 在每一个事件中都使用 TouchHandler.isAllow(event) 判断事件是否可执行\n * 在 touchstart 和 touchmove、touchend、touchcancel\n *\n * (function () {\n *   $document\n *     .on(start, function (e) {\n *       if (!isAllow(e)) {\n *         return;\n *       }\n *       register(e);\n *       console.log(e.type);\n *     })\n *     .on(move, function (e) {\n *       if (!isAllow(e)) {\n *         return;\n *       }\n *       console.log(e.type);\n *     })\n *     .on(end, function (e) {\n *       if (!isAllow(e)) {\n *         return;\n *       }\n *       console.log(e.type);\n *     })\n *     .on(unlock, register);\n * })();\n */\nconst startEvent = 'touchstart mousedown';\nconst moveEvent = 'touchmove mousemove';\nconst endEvent = 'touchend mouseup';\nconst cancelEvent = 'touchcancel mouseleave';\nconst unlockEvent = 'touchend touchmove touchcancel';\nlet touches = 0;\n/**\n * 该事件是否被允许，在执行事件前调用该方法判断事件是否可以执行\n * 若已触发 touch 事件，则阻止之后的鼠标事件\n * @param event\n */\n\nfunction isAllow(event) {\n  return !(touches && ['mousedown', 'mouseup', 'mousemove', 'click', 'mouseover', 'mouseout', 'mouseenter', 'mouseleave'].indexOf(event.type) > -1);\n}\n/**\n * 在 touchstart 和 touchmove、touchend、touchcancel 事件中调用该方法注册事件\n * @param event\n */\n\n\nfunction register(event) {\n  if (event.type === 'touchstart') {\n    // 触发了 touch 事件\n    touches += 1;\n  } else if (['touchmove', 'touchend', 'touchcancel'].indexOf(event.type) > -1) {\n    // touch 事件结束 500ms 后解除对鼠标事件的阻止\n    setTimeout(function () {\n      if (touches) {\n        touches -= 1;\n      }\n    }, 500);\n  }\n}\n\nexport { startEvent, moveEvent, endEvent, cancelEvent, unlockEvent, isAllow, register };","/**\n * Inspired by https://github.com/nolimits4web/Framework7/blob/master/src/js/fast-clicks.js\n * https://github.com/nolimits4web/Framework7/blob/master/LICENSE\n *\n * Inspired by https://github.com/fians/Waves\n */\nimport $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/attr';\nimport 'mdui.jq/es/methods/children';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/innerHeight';\nimport 'mdui.jq/es/methods/innerWidth';\nimport 'mdui.jq/es/methods/off';\nimport 'mdui.jq/es/methods/offset';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/parents';\nimport 'mdui.jq/es/methods/prependTo';\nimport 'mdui.jq/es/methods/prop';\nimport 'mdui.jq/es/methods/remove';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport '../../jq_extends/methods/reflow';\nimport '../../jq_extends/methods/transform';\nimport '../../jq_extends/methods/transitionEnd';\nimport { $document } from '../../utils/dom';\nimport { cancelEvent, endEvent, isAllow, moveEvent, register, startEvent, unlockEvent } from '../../utils/touchHandler';\n/**\n * 显示涟漪动画\n * @param event\n * @param $ripple\n */\n\nfunction show(event, $ripple) {\n  // 鼠标右键不产生涟漪\n  if (event instanceof MouseEvent && event.button === 2) {\n    return;\n  } // 点击位置坐标\n\n\n  const touchPosition = typeof TouchEvent !== 'undefined' && event instanceof TouchEvent && event.touches.length ? event.touches[0] : event;\n  const touchStartX = touchPosition.pageX;\n  const touchStartY = touchPosition.pageY; // 涟漪位置\n\n  const offset = $ripple.offset();\n  const height = $ripple.innerHeight();\n  const width = $ripple.innerWidth();\n  const center = {\n    x: touchStartX - offset.left,\n    y: touchStartY - offset.top\n  };\n  const diameter = Math.max(Math.pow(Math.pow(height, 2) + Math.pow(width, 2), 0.5), 48); // 涟漪扩散动画\n\n  const translate = `translate3d(${-center.x + width / 2}px,` + `${-center.y + height / 2}px, 0) scale(1)`; // 涟漪的 DOM 结构，并缓存动画效果\n\n  $(`<div class=\"mdui-ripple-wave\" ` + `style=\"width:${diameter}px;height:${diameter}px;` + `margin-top:-${diameter / 2}px;margin-left:-${diameter / 2}px;` + `left:${center.x}px;top:${center.y}px;\"></div>`).data('_ripple_wave_translate', translate).prependTo($ripple).reflow().transform(translate);\n}\n/**\n * 隐藏并移除涟漪\n * @param $wave\n */\n\n\nfunction removeRipple($wave) {\n  if (!$wave.length || $wave.data('_ripple_wave_removed')) {\n    return;\n  }\n\n  $wave.data('_ripple_wave_removed', true);\n  let removeTimer = setTimeout(() => $wave.remove(), 400);\n  const translate = $wave.data('_ripple_wave_translate');\n  $wave.addClass('mdui-ripple-wave-fill').transform(translate.replace('scale(1)', 'scale(1.01)')).transitionEnd(() => {\n    clearTimeout(removeTimer);\n    $wave.addClass('mdui-ripple-wave-out').transform(translate.replace('scale(1)', 'scale(1.01)'));\n    removeTimer = setTimeout(() => $wave.remove(), 700);\n    setTimeout(() => {\n      $wave.transitionEnd(() => {\n        clearTimeout(removeTimer);\n        $wave.remove();\n      });\n    }, 0);\n  });\n}\n/**\n * 隐藏涟漪动画\n * @param this\n */\n\n\nfunction hide() {\n  const $ripple = $(this);\n  $ripple.children('.mdui-ripple-wave').each((_, wave) => {\n    removeRipple($(wave));\n  });\n  $ripple.off(`${moveEvent} ${endEvent} ${cancelEvent}`, hide);\n}\n/**\n * 显示涟漪，并绑定 touchend 等事件\n * @param event\n */\n\n\nfunction showRipple(event) {\n  if (!isAllow(event)) {\n    return;\n  }\n\n  register(event); // Chrome 59 点击滚动条时，会在 document 上触发事件\n\n  if (event.target === document) {\n    return;\n  }\n\n  const $target = $(event.target); // 获取含 .mdui-ripple 类的元素\n\n  const $ripple = $target.hasClass('mdui-ripple') ? $target : $target.parents('.mdui-ripple').first();\n\n  if (!$ripple.length) {\n    return;\n  } // 禁用状态的元素上不产生涟漪效果\n\n\n  if ($ripple.prop('disabled') || !isUndefined($ripple.attr('disabled'))) {\n    return;\n  }\n\n  if (event.type === 'touchstart') {\n    let hidden = false; // touchstart 触发指定时间后开始涟漪动画，避免手指滑动时也触发涟漪\n\n    let timer = setTimeout(() => {\n      timer = 0;\n      show(event, $ripple);\n    }, 200);\n\n    const hideRipple = () => {\n      // 如果手指没有移动，且涟漪动画还没有开始，则开始涟漪动画\n      if (timer) {\n        clearTimeout(timer);\n        timer = 0;\n        show(event, $ripple);\n      }\n\n      if (!hidden) {\n        hidden = true;\n        hide.call($ripple);\n      }\n    }; // 手指移动后，移除涟漪动画\n\n\n    const touchMove = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = 0;\n      }\n\n      hideRipple();\n    };\n\n    $ripple.on('touchmove', touchMove).on('touchend touchcancel', hideRipple);\n  } else {\n    show(event, $ripple);\n    $ripple.on(`${moveEvent} ${endEvent} ${cancelEvent}`, hide);\n  }\n}\n\n$(() => {\n  $document.on(startEvent, showRipple).on(unlockEvent, register);\n});","import $ from 'mdui.jq/es/$';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/appendTo';\nimport 'mdui.jq/es/methods/attr';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/outerHeight';\nimport 'mdui.jq/es/methods/parent';\nimport 'mdui.jq/es/methods/parents';\nimport 'mdui.jq/es/methods/remove';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/text';\nimport 'mdui.jq/es/methods/trigger';\nimport 'mdui.jq/es/methods/val';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport '../../global/mutation';\nimport { $document } from '../../utils/dom';\nconst defaultData = {\n  reInit: false,\n  domLoadedEvent: false\n};\n/**\n * 输入框事件\n * @param event\n * @param data\n */\n\nfunction inputEvent(event, data = {}) {\n  data = extend({}, defaultData, data);\n  const input = event.target;\n  const $input = $(input);\n  const eventType = event.type;\n  const value = $input.val(); // 文本框类型\n\n  const inputType = $input.attr('type') || '';\n\n  if (['checkbox', 'button', 'submit', 'range', 'radio', 'image'].indexOf(inputType) > -1) {\n    return;\n  }\n\n  const $textfield = $input.parent('.mdui-textfield'); // 输入框是否聚焦\n\n  if (eventType === 'focus') {\n    $textfield.addClass('mdui-textfield-focus');\n  }\n\n  if (eventType === 'blur') {\n    $textfield.removeClass('mdui-textfield-focus');\n  } // 输入框是否为空\n\n\n  if (eventType === 'blur' || eventType === 'input') {\n    value ? $textfield.addClass('mdui-textfield-not-empty') : $textfield.removeClass('mdui-textfield-not-empty');\n  } // 输入框是否禁用\n\n\n  input.disabled ? $textfield.addClass('mdui-textfield-disabled') : $textfield.removeClass('mdui-textfield-disabled'); // 表单验证\n\n  if ((eventType === 'input' || eventType === 'blur') && !data.domLoadedEvent && input.validity) {\n    input.validity.valid ? $textfield.removeClass('mdui-textfield-invalid-html5') : $textfield.addClass('mdui-textfield-invalid-html5');\n  } // textarea 高度自动调整\n\n\n  if ($input.is('textarea')) {\n    // IE bug：textarea 的值仅为多个换行，不含其他内容时，textarea 的高度不准确\n    //         此时，在计算高度前，在值的开头加入一个空格，计算完后，移除空格\n    const inputValue = value;\n    let hasExtraSpace = false;\n\n    if (inputValue.replace(/[\\r\\n]/g, '') === '') {\n      $input.val(' ' + inputValue);\n      hasExtraSpace = true;\n    } // 设置 textarea 高度\n\n\n    $input.outerHeight('');\n    const height = $input.outerHeight();\n    const scrollHeight = input.scrollHeight;\n\n    if (scrollHeight > height) {\n      $input.outerHeight(scrollHeight);\n    } // 计算完，还原 textarea 的值\n\n\n    if (hasExtraSpace) {\n      $input.val(inputValue);\n    }\n  } // 实时字数统计\n\n\n  if (data.reInit) {\n    $textfield.find('.mdui-textfield-counter').remove();\n  }\n\n  const maxLength = $input.attr('maxlength');\n\n  if (maxLength) {\n    if (data.reInit || data.domLoadedEvent) {\n      $('<div class=\"mdui-textfield-counter\">' + `<span class=\"mdui-textfield-counter-inputed\"></span> / ${maxLength}` + '</div>').appendTo($textfield);\n    }\n\n    $textfield.find('.mdui-textfield-counter-inputed').text(value.length.toString());\n  } // 含 帮助文本、错误提示、字数统计 时，增加文本框底部内边距\n\n\n  if ($textfield.find('.mdui-textfield-helper').length || $textfield.find('.mdui-textfield-error').length || maxLength) {\n    $textfield.addClass('mdui-textfield-has-bottom');\n  }\n}\n\n$(() => {\n  // 绑定事件\n  $document.on('input focus blur', '.mdui-textfield-input', {\n    useCapture: true\n  }, inputEvent); // 可展开文本框展开\n\n  $document.on('click', '.mdui-textfield-expandable .mdui-textfield-icon', function () {\n    $(this).parents('.mdui-textfield').addClass('mdui-textfield-expanded').find('.mdui-textfield-input')[0].focus();\n  }); // 可展开文本框关闭\n\n  $document.on('click', '.mdui-textfield-expanded .mdui-textfield-close', function () {\n    $(this).parents('.mdui-textfield').removeClass('mdui-textfield-expanded').find('.mdui-textfield-input').val('');\n  });\n  /**\n   * 初始化文本框\n   */\n\n  mdui.mutation('.mdui-textfield', function () {\n    $(this).find('.mdui-textfield-input').trigger('input', {\n      domLoadedEvent: true\n    });\n  });\n});\n\nmdui.updateTextFields = function (selector) {\n  const $elements = isUndefined(selector) ? $('.mdui-textfield') : $(selector);\n  $elements.each((_, element) => {\n    $(element).find('.mdui-textfield-input').trigger('input', {\n      reInit: true\n    });\n  });\n};","import $ from 'mdui.jq/es/$';\nimport mdui from '../../mdui';\nimport '../../global/mutation';\nimport '../headroom';\n$(() => {\n  // 滚动时隐藏应用栏\n  mdui.mutation('.mdui-appbar-scroll-hide', function () {\n    new mdui.Headroom(this);\n  }); // 滚动时只隐藏应用栏中的工具栏\n\n  mdui.mutation('.mdui-appbar-scroll-toolbar-hide', function () {\n    new mdui.Headroom(this, {\n      pinnedClass: 'mdui-headroom-pinned-toolbar',\n      unpinnedClass: 'mdui-headroom-unpinned-toolbar'\n    });\n  });\n});","import $ from '../$';\nimport './each';\n\n$.fn.hide = function () {\n  return this.each(function () {\n    this.style.display = 'none';\n  });\n};","import $ from '../$';\nimport { isString } from '../utils';\nimport './children';\nimport './eq';\nimport './get';\nimport './parent';\n\n$.fn.index = function (selector) {\n  if (!arguments.length) {\n    return this.eq(0).parent().children().get().indexOf(this[0]);\n  }\n\n  if (isString(selector)) {\n    return $(selector).get().indexOf(this[0]);\n  }\n\n  return this.get().indexOf($(selector)[0]);\n};","import $ from 'mdui.jq/es/$';\nimport { isNull } from 'mdui.jq/es/utils';\n\n$.throttle = function (fn, delay = 16) {\n  let timer = null;\n  return function (...args) {\n    if (isNull(timer)) {\n      timer = setTimeout(() => {\n        fn.apply(this, args);\n        timer = null;\n      }, delay);\n    }\n  };\n};","import $ from 'mdui.jq/es/$';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/appendTo';\nimport 'mdui.jq/es/methods/attr';\nimport 'mdui.jq/es/methods/children';\nimport 'mdui.jq/es/methods/css';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/eq';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/get';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/hide';\nimport 'mdui.jq/es/methods/index';\nimport 'mdui.jq/es/methods/innerWidth';\nimport 'mdui.jq/es/methods/offset';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/show';\nimport { isNumber } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport '../../jq_extends/static/throttle';\nimport { componentEvent } from '../../utils/componentEvent';\nimport { $window } from '../../utils/dom';\nconst DEFAULT_OPTIONS = {\n  trigger: 'click',\n  loop: false\n};\n\nclass Tab {\n  constructor(selector, options = {}) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 当前激活的 tab 的索引号。为 -1 时表示没有激活的选项卡，或不存在选项卡\n     */\n\n    this.activeIndex = -1;\n    this.$element = $(selector).first();\n    extend(this.options, options);\n    this.$tabs = this.$element.children('a');\n    this.$indicator = $('<div class=\"mdui-tab-indicator\"></div>').appendTo(this.$element); // 根据 url hash 获取默认激活的选项卡\n\n    const hash = window.location.hash;\n\n    if (hash) {\n      this.$tabs.each((index, tab) => {\n        if ($(tab).attr('href') === hash) {\n          this.activeIndex = index;\n          return false;\n        }\n\n        return true;\n      });\n    } // 含 .mdui-tab-active 的元素默认激活\n\n\n    if (this.activeIndex === -1) {\n      this.$tabs.each((index, tab) => {\n        if ($(tab).hasClass('mdui-tab-active')) {\n          this.activeIndex = index;\n          return false;\n        }\n\n        return true;\n      });\n    } // 存在选项卡时，默认激活第一个选项卡\n\n\n    if (this.$tabs.length && this.activeIndex === -1) {\n      this.activeIndex = 0;\n    } // 设置激活状态选项卡\n\n\n    this.setActive(); // 监听窗口大小变化事件，调整指示器位置\n\n    $window.on('resize', $.throttle(() => this.setIndicatorPosition(), 100)); // 监听点击选项卡事件\n\n    this.$tabs.each((_, tab) => {\n      this.bindTabEvent(tab);\n    });\n  }\n  /**\n   * 指定选项卡是否已禁用\n   * @param $tab\n   */\n\n\n  isDisabled($tab) {\n    return $tab.attr('disabled') !== undefined;\n  }\n  /**\n   * 绑定在 Tab 上点击或悬浮的事件\n   * @param tab\n   */\n\n\n  bindTabEvent(tab) {\n    const $tab = $(tab); // 点击或鼠标移入触发的事件\n\n    const clickEvent = () => {\n      // 禁用状态的选项卡无法选中\n      if (this.isDisabled($tab)) {\n        return false;\n      }\n\n      this.activeIndex = this.$tabs.index(tab);\n      this.setActive();\n    }; // 无论 trigger 是 click 还是 hover，都会响应 click 事件\n\n\n    $tab.on('click', clickEvent); // trigger 为 hover 时，额外响应 mouseenter 事件\n\n    if (this.options.trigger === 'hover') {\n      $tab.on('mouseenter', clickEvent);\n    } // 阻止链接的默认点击动作\n\n\n    $tab.on('click', () => {\n      if (($tab.attr('href') || '').indexOf('#') === 0) {\n        return false;\n      }\n    });\n  }\n  /**\n   * 触发组件事件\n   * @param name\n   * @param $element\n   * @param parameters\n   */\n\n\n  triggerEvent(name, $element, parameters = {}) {\n    componentEvent(name, 'tab', $element, this, parameters);\n  }\n  /**\n   * 设置激活状态的选项卡\n   */\n\n\n  setActive() {\n    this.$tabs.each((index, tab) => {\n      const $tab = $(tab);\n      const targetId = $tab.attr('href') || ''; // 设置选项卡激活状态\n\n      if (index === this.activeIndex && !this.isDisabled($tab)) {\n        if (!$tab.hasClass('mdui-tab-active')) {\n          this.triggerEvent('change', this.$element, {\n            index: this.activeIndex,\n            id: targetId.substr(1)\n          });\n          this.triggerEvent('show', $tab);\n          $tab.addClass('mdui-tab-active');\n        }\n\n        $(targetId).show();\n        this.setIndicatorPosition();\n      } else {\n        $tab.removeClass('mdui-tab-active');\n        $(targetId).hide();\n      }\n    });\n  }\n  /**\n   * 设置选项卡指示器的位置\n   */\n\n\n  setIndicatorPosition() {\n    // 选项卡数量为 0 时，不显示指示器\n    if (this.activeIndex === -1) {\n      this.$indicator.css({\n        left: 0,\n        width: 0\n      });\n      return;\n    }\n\n    const $activeTab = this.$tabs.eq(this.activeIndex);\n\n    if (this.isDisabled($activeTab)) {\n      return;\n    }\n\n    const activeTabOffset = $activeTab.offset();\n    this.$indicator.css({\n      left: `${activeTabOffset.left + this.$element[0].scrollLeft - this.$element[0].getBoundingClientRect().left}px`,\n      width: `${$activeTab.innerWidth()}px`\n    });\n  }\n  /**\n   * 切换到下一个选项卡\n   */\n\n\n  next() {\n    if (this.activeIndex === -1) {\n      return;\n    }\n\n    if (this.$tabs.length > this.activeIndex + 1) {\n      this.activeIndex++;\n    } else if (this.options.loop) {\n      this.activeIndex = 0;\n    }\n\n    this.setActive();\n  }\n  /**\n   * 切换到上一个选项卡\n   */\n\n\n  prev() {\n    if (this.activeIndex === -1) {\n      return;\n    }\n\n    if (this.activeIndex > 0) {\n      this.activeIndex--;\n    } else if (this.options.loop) {\n      this.activeIndex = this.$tabs.length - 1;\n    }\n\n    this.setActive();\n  }\n  /**\n   * 显示指定索引号、或指定id的选项卡\n   * @param index 索引号、或id\n   */\n\n\n  show(index) {\n    if (this.activeIndex === -1) {\n      return;\n    }\n\n    if (isNumber(index)) {\n      this.activeIndex = index;\n    } else {\n      this.$tabs.each((i, tab) => {\n        if (tab.id === index) {\n          this.activeIndex === i;\n          return false;\n        }\n      });\n    }\n\n    this.setActive();\n  }\n  /**\n   * 在父元素的宽度变化时，需要调用该方法重新调整指示器位置\n   * 在添加或删除选项卡时，需要调用该方法\n   */\n\n\n  handleUpdate() {\n    const $oldTabs = this.$tabs; // 旧的 tabs JQ对象\n\n    const $newTabs = this.$element.children('a'); // 新的 tabs JQ对象\n\n    const oldTabsElement = $oldTabs.get(); // 旧的 tabs 元素数组\n\n    const newTabsElement = $newTabs.get(); // 新的 tabs 元素数组\n\n    if (!$newTabs.length) {\n      this.activeIndex = -1;\n      this.$tabs = $newTabs;\n      this.setIndicatorPosition();\n      return;\n    } // 重新遍历选项卡，找出新增的选项卡\n\n\n    $newTabs.each((index, tab) => {\n      // 有新增的选项卡\n      if (oldTabsElement.indexOf(tab) < 0) {\n        this.bindTabEvent(tab);\n\n        if (this.activeIndex === -1) {\n          this.activeIndex = 0;\n        } else if (index <= this.activeIndex) {\n          this.activeIndex++;\n        }\n      }\n    }); // 找出被移除的选项卡\n\n    $oldTabs.each((index, tab) => {\n      // 有被移除的选项卡\n      if (newTabsElement.indexOf(tab) < 0) {\n        if (index < this.activeIndex) {\n          this.activeIndex--;\n        } else if (index === this.activeIndex) {\n          this.activeIndex = 0;\n        }\n      }\n    });\n    this.$tabs = $newTabs;\n    this.setActive();\n  }\n\n}\n\nmdui.Tab = Tab;","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/attr';\n/**\n * 解析 DATA API 参数\n * @param element 元素\n * @param name 属性名\n */\n\nfunction parseOptions(element, name) {\n  const attr = $(element).attr(name);\n\n  if (!attr) {\n    return {};\n  }\n\n  return new Function('', `var json = ${attr}; return JSON.parse(JSON.stringify(json));`)();\n}\n\nexport { parseOptions };","import $ from 'mdui.jq/es/$';\nimport mdui from '../../mdui';\nimport '../../global/mutation';\nimport { parseOptions } from '../../utils/parseOptions';\nimport './index';\nconst customAttr = 'mdui-tab';\n$(() => {\n  mdui.mutation(`[${customAttr}]`, function () {\n    new mdui.Tab(this, parseOptions(this, customAttr));\n  });\n});","import $ from '../$';\nimport './on';\n\n$.fn.one = function (types, selector, data, callback) {\n  // @ts-ignore\n  return this.on(types, selector, data, callback, true);\n};","/**\n * 在桌面设备上默认显示抽屉栏，不显示遮罩层\n * 在手机和平板设备上默认不显示抽屉栏，始终显示遮罩层，且覆盖导航栏\n */\nimport $ from 'mdui.jq/es/$';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/off';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/one';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/width';\nimport mdui from '../../mdui';\nimport '../../jq_extends/methods/transitionEnd';\nimport '../../jq_extends/static/hideOverlay';\nimport '../../jq_extends/static/lockScreen';\nimport '../../jq_extends/static/showOverlay';\nimport '../../jq_extends/static/throttle';\nimport '../../jq_extends/static/unlockScreen';\nimport { componentEvent } from '../../utils/componentEvent';\nimport { $body, $window } from '../../utils/dom';\nconst DEFAULT_OPTIONS = {\n  overlay: false,\n  swipe: false\n};\n\nclass Drawer {\n  constructor(selector, options = {}) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 当前是否显示着遮罩层\n     */\n\n    this.overlay = false;\n    this.$element = $(selector).first();\n    extend(this.options, options);\n    this.position = this.$element.hasClass('mdui-drawer-right') ? 'right' : 'left';\n\n    if (this.$element.hasClass('mdui-drawer-close')) {\n      this.state = 'closed';\n    } else if (this.$element.hasClass('mdui-drawer-open')) {\n      this.state = 'opened';\n    } else if (this.isDesktop()) {\n      this.state = 'opened';\n    } else {\n      this.state = 'closed';\n    } // 浏览器窗口大小调整时\n\n\n    $window.on('resize', $.throttle(() => {\n      if (this.isDesktop()) {\n        // 由手机平板切换到桌面时\n        // 如果显示着遮罩，则隐藏遮罩\n        if (this.overlay && !this.options.overlay) {\n          $.hideOverlay();\n          this.overlay = false;\n          $.unlockScreen();\n        } // 没有强制关闭，则状态为打开状态\n\n\n        if (!this.$element.hasClass('mdui-drawer-close')) {\n          this.state = 'opened';\n        }\n      } else if (!this.overlay && this.state === 'opened') {\n        // 由桌面切换到手机平板时。如果抽屉栏是打开着的且没有遮罩层，则关闭抽屉栏\n        if (this.$element.hasClass('mdui-drawer-open')) {\n          $.showOverlay();\n          this.overlay = true;\n          $.lockScreen();\n          $('.mdui-overlay').one('click', () => this.close());\n        } else {\n          this.state = 'closed';\n        }\n      }\n    }, 100)); // 绑定关闭按钮事件\n\n    this.$element.find('[mdui-drawer-close]').each((_, close) => {\n      $(close).on('click', () => this.close());\n    });\n    this.swipeSupport();\n  }\n  /**\n   * 是否是桌面设备\n   */\n\n\n  isDesktop() {\n    return $window.width() >= 1024;\n  }\n  /**\n   * 滑动手势支持\n   */\n\n\n  swipeSupport() {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this; // 抽屉栏滑动手势控制\n\n    let openNavEventHandler;\n    let touchStartX;\n    let touchStartY;\n    let swipeStartX;\n    let swiping = null;\n    let maybeSwiping = false; // 手势触发的范围\n\n    const swipeAreaWidth = 24;\n\n    function setPosition(translateX) {\n      const rtlTranslateMultiplier = that.position === 'right' ? -1 : 1;\n      const transformCSS = `translate(${-1 * rtlTranslateMultiplier * translateX}px, 0) !important;`;\n      const transitionCSS = 'initial !important;';\n      that.$element.css('cssText', `transform: ${transformCSS}; transition: ${transitionCSS};`);\n    }\n\n    function cleanPosition() {\n      that.$element[0].style.transform = '';\n      that.$element[0].style.webkitTransform = '';\n      that.$element[0].style.transition = '';\n      that.$element[0].style.webkitTransition = '';\n    }\n\n    function getMaxTranslateX() {\n      return that.$element.width() + 10;\n    }\n\n    function getTranslateX(currentX) {\n      return Math.min(Math.max(swiping === 'closing' ? swipeStartX - currentX : getMaxTranslateX() + swipeStartX - currentX, 0), getMaxTranslateX());\n    }\n\n    function onBodyTouchEnd(event) {\n      if (swiping) {\n        let touchX = event.changedTouches[0].pageX;\n\n        if (that.position === 'right') {\n          touchX = $body.width() - touchX;\n        }\n\n        const translateRatio = getTranslateX(touchX) / getMaxTranslateX();\n        maybeSwiping = false;\n        const swipingState = swiping;\n        swiping = null;\n\n        if (swipingState === 'opening') {\n          if (translateRatio < 0.92) {\n            cleanPosition();\n            that.open();\n          } else {\n            cleanPosition();\n          }\n        } else {\n          if (translateRatio > 0.08) {\n            cleanPosition();\n            that.close();\n          } else {\n            cleanPosition();\n          }\n        }\n\n        $.unlockScreen();\n      } else {\n        maybeSwiping = false;\n      }\n\n      $body.off({\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        touchmove: onBodyTouchMove,\n        touchend: onBodyTouchEnd,\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        touchcancel: onBodyTouchMove\n      });\n    }\n\n    function onBodyTouchMove(event) {\n      let touchX = event.touches[0].pageX;\n\n      if (that.position === 'right') {\n        touchX = $body.width() - touchX;\n      }\n\n      const touchY = event.touches[0].pageY;\n\n      if (swiping) {\n        setPosition(getTranslateX(touchX));\n      } else if (maybeSwiping) {\n        const dXAbs = Math.abs(touchX - touchStartX);\n        const dYAbs = Math.abs(touchY - touchStartY);\n        const threshold = 8;\n\n        if (dXAbs > threshold && dYAbs <= threshold) {\n          swipeStartX = touchX;\n          swiping = that.state === 'opened' ? 'closing' : 'opening';\n          $.lockScreen();\n          setPosition(getTranslateX(touchX));\n        } else if (dXAbs <= threshold && dYAbs > threshold) {\n          onBodyTouchEnd();\n        }\n      }\n    }\n\n    function onBodyTouchStart(event) {\n      touchStartX = event.touches[0].pageX;\n\n      if (that.position === 'right') {\n        touchStartX = $body.width() - touchStartX;\n      }\n\n      touchStartY = event.touches[0].pageY;\n\n      if (that.state !== 'opened') {\n        if (touchStartX > swipeAreaWidth || openNavEventHandler !== onBodyTouchStart) {\n          return;\n        }\n      }\n\n      maybeSwiping = true;\n      $body.on({\n        touchmove: onBodyTouchMove,\n        touchend: onBodyTouchEnd,\n        touchcancel: onBodyTouchMove\n      });\n    }\n\n    function enableSwipeHandling() {\n      if (!openNavEventHandler) {\n        $body.on('touchstart', onBodyTouchStart);\n        openNavEventHandler = onBodyTouchStart;\n      }\n    }\n\n    if (this.options.swipe) {\n      enableSwipeHandling();\n    }\n  }\n  /**\n   * 触发组件事件\n   * @param name\n   */\n\n\n  triggerEvent(name) {\n    componentEvent(name, 'drawer', this.$element, this);\n  }\n  /**\n   * 动画结束回调\n   */\n\n\n  transitionEnd() {\n    if (this.$element.hasClass('mdui-drawer-open')) {\n      this.state = 'opened';\n      this.triggerEvent('opened');\n    } else {\n      this.state = 'closed';\n      this.triggerEvent('closed');\n    }\n  }\n  /**\n   * 是否处于打开状态\n   */\n\n\n  isOpen() {\n    return this.state === 'opening' || this.state === 'opened';\n  }\n  /**\n   * 打开抽屉栏\n   */\n\n\n  open() {\n    if (this.isOpen()) {\n      return;\n    }\n\n    this.state = 'opening';\n    this.triggerEvent('open');\n\n    if (!this.options.overlay) {\n      $body.addClass(`mdui-drawer-body-${this.position}`);\n    }\n\n    this.$element.removeClass('mdui-drawer-close').addClass('mdui-drawer-open').transitionEnd(() => this.transitionEnd());\n\n    if (!this.isDesktop() || this.options.overlay) {\n      this.overlay = true;\n      $.showOverlay().one('click', () => this.close());\n      $.lockScreen();\n    }\n  }\n  /**\n   * 关闭抽屉栏\n   */\n\n\n  close() {\n    if (!this.isOpen()) {\n      return;\n    }\n\n    this.state = 'closing';\n    this.triggerEvent('close');\n\n    if (!this.options.overlay) {\n      $body.removeClass(`mdui-drawer-body-${this.position}`);\n    }\n\n    this.$element.addClass('mdui-drawer-close').removeClass('mdui-drawer-open').transitionEnd(() => this.transitionEnd());\n\n    if (this.overlay) {\n      $.hideOverlay();\n      this.overlay = false;\n      $.unlockScreen();\n    }\n  }\n  /**\n   * 切换抽屉栏打开/关闭状态\n   */\n\n\n  toggle() {\n    this.isOpen() ? this.close() : this.open();\n  }\n  /**\n   * 返回当前抽屉栏的状态。共包含四种状态：`opening`、`opened`、`closing`、`closed`\n   */\n\n\n  getState() {\n    return this.state;\n  }\n\n}\n\nmdui.Drawer = Drawer;","import $ from '../$';\nimport each from '../functions/each';\nimport { getChildNodesArray, isFunction, isString, isElement } from '../utils';\nimport './each';\nimport './insertAfter';\nimport './insertBefore';\n/**\n * 是否不是 HTML 字符串（包裹在 <> 中）\n * @param target\n */\n\nfunction isPlainText(target) {\n  return isString(target) && (target[0] !== '<' || target[target.length - 1] !== '>');\n}\n\neach(['before', 'after'], (nameIndex, name) => {\n  $.fn[name] = function (...args) {\n    // after 方法，多个参数需要按参数顺序添加到元素后面，所以需要将参数顺序反向处理\n    if (nameIndex === 1) {\n      args = args.reverse();\n    }\n\n    return this.each((index, element) => {\n      const targets = isFunction(args[0]) ? [args[0].call(element, index, element.innerHTML)] : args;\n      each(targets, (_, target) => {\n        let $target;\n\n        if (isPlainText(target)) {\n          $target = $(getChildNodesArray(target, 'div'));\n        } else if (index && isElement(target)) {\n          $target = $(target.cloneNode(true));\n        } else {\n          $target = $(target);\n        }\n\n        $target[nameIndex ? 'insertAfter' : 'insertBefore'](element);\n      });\n    });\n  };\n});","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/on';\nimport mdui from '../../mdui';\nimport '../../global/mutation';\nimport { parseOptions } from '../../utils/parseOptions';\nimport './index';\nconst customAttr = 'mdui-drawer';\n$(() => {\n  mdui.mutation(`[${customAttr}]`, function () {\n    const $element = $(this);\n    const options = parseOptions(this, customAttr);\n    const selector = options.target;\n    delete options.target;\n    const $drawer = $(selector).first();\n    const instance = new mdui.Drawer($drawer, options);\n    $element.on('click', () => instance.toggle());\n  });\n});","import $ from '../$';\nimport each from '../functions/each';\nimport { isFunction, isString } from '../utils';\nimport './after';\nimport './before';\nimport './clone';\nimport './each';\nimport './map';\nimport './remove';\neach(['prepend', 'append'], (nameIndex, name) => {\n  $.fn[name] = function (...args) {\n    return this.each((index, element) => {\n      const childNodes = element.childNodes;\n      const childLength = childNodes.length;\n      const child = childLength ? childNodes[nameIndex ? childLength - 1 : 0] : document.createElement('div');\n\n      if (!childLength) {\n        element.appendChild(child);\n      }\n\n      let contents = isFunction(args[0]) ? [args[0].call(element, index, element.innerHTML)] : args; // 如果不是字符串，则仅第一个元素使用原始元素，其他的都克隆自第一个元素\n\n      if (index) {\n        contents = contents.map(content => {\n          return isString(content) ? content : $(content).clone();\n        });\n      }\n\n      $(child)[nameIndex ? 'after' : 'before'](...contents);\n\n      if (!childLength) {\n        element.removeChild(child);\n      }\n    });\n  };\n});","import { isUndefined } from 'mdui.jq/es/utils';\nconst container = {};\n\nfunction queue(name, func) {\n  if (isUndefined(container[name])) {\n    container[name] = [];\n  }\n\n  if (isUndefined(func)) {\n    return container[name];\n  }\n\n  container[name].push(func);\n}\n/**\n * 从队列中移除第一个函数，并执行该函数\n * @param name 队列满\n */\n\n\nfunction dequeue(name) {\n  if (isUndefined(container[name])) {\n    return;\n  }\n\n  if (!container[name].length) {\n    return;\n  }\n\n  const func = container[name].shift();\n  func();\n}\n\nexport { queue, dequeue };","import $ from 'mdui.jq/es/$';\nimport contains from 'mdui.jq/es/functions/contains';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/append';\nimport 'mdui.jq/es/methods/children';\nimport 'mdui.jq/es/methods/css';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/height';\nimport 'mdui.jq/es/methods/hide';\nimport 'mdui.jq/es/methods/innerHeight';\nimport 'mdui.jq/es/methods/off';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/remove';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/show';\nimport '../../jq_extends/methods/transitionEnd';\nimport '../../jq_extends/static/hideOverlay';\nimport '../../jq_extends/static/lockScreen';\nimport '../../jq_extends/static/showOverlay';\nimport '../../jq_extends/static/throttle';\nimport '../../jq_extends/static/unlockScreen';\nimport { componentEvent } from '../../utils/componentEvent';\nimport { $body, $window } from '../../utils/dom';\nimport { dequeue, queue } from '../../utils/queue';\nconst DEFAULT_OPTIONS = {\n  history: true,\n  overlay: true,\n  modal: false,\n  closeOnEsc: true,\n  closeOnCancel: true,\n  closeOnConfirm: true,\n  destroyOnClosed: false\n};\n/**\n * 当前显示的对话框实例\n */\n\nlet currentInst = null;\n/**\n * 队列名\n */\n\nconst queueName = '_mdui_dialog';\n/**\n * 窗口是否已锁定\n */\n\nlet isLockScreen = false;\n/**\n * 遮罩层元素\n */\n\nlet $overlay;\n\nclass Dialog {\n  constructor(selector, options = {}) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 当前 dialog 的状态\n     */\n\n    this.state = 'closed';\n    /**\n     * dialog 元素是否是动态添加的\n     */\n\n    this.append = false;\n    this.$element = $(selector).first(); // 如果对话框元素没有在当前文档中，则需要添加\n\n    if (!contains(document.body, this.$element[0])) {\n      this.append = true;\n      $body.append(this.$element);\n    }\n\n    extend(this.options, options); // 绑定取消按钮事件\n\n    this.$element.find('[mdui-dialog-cancel]').each((_, cancel) => {\n      $(cancel).on('click', () => {\n        this.triggerEvent('cancel');\n\n        if (this.options.closeOnCancel) {\n          this.close();\n        }\n      });\n    }); // 绑定确认按钮事件\n\n    this.$element.find('[mdui-dialog-confirm]').each((_, confirm) => {\n      $(confirm).on('click', () => {\n        this.triggerEvent('confirm');\n\n        if (this.options.closeOnConfirm) {\n          this.close();\n        }\n      });\n    }); // 绑定关闭按钮事件\n\n    this.$element.find('[mdui-dialog-close]').each((_, close) => {\n      $(close).on('click', () => this.close());\n    });\n  }\n  /**\n   * 触发组件事件\n   * @param name\n   */\n\n\n  triggerEvent(name) {\n    componentEvent(name, 'dialog', this.$element, this);\n  }\n  /**\n   * 窗口宽度变化，或对话框内容变化时，调整对话框位置和对话框内的滚动条\n   */\n\n\n  readjust() {\n    if (!currentInst) {\n      return;\n    }\n\n    const $element = currentInst.$element;\n    const $title = $element.children('.mdui-dialog-title');\n    const $content = $element.children('.mdui-dialog-content');\n    const $actions = $element.children('.mdui-dialog-actions'); // 调整 dialog 的 top 和 height 值\n\n    $element.height('');\n    $content.height('');\n    const elementHeight = $element.height();\n    $element.css({\n      top: `${($window.height() - elementHeight) / 2}px`,\n      height: `${elementHeight}px`\n    }); // 调整 mdui-dialog-content 的高度\n\n    $content.innerHeight(elementHeight - ($title.innerHeight() || 0) - ($actions.innerHeight() || 0));\n  }\n  /**\n   * hashchange 事件触发时关闭对话框\n   */\n\n\n  hashchangeEvent() {\n    if (window.location.hash.substring(1).indexOf('mdui-dialog') < 0) {\n      currentInst.close(true);\n    }\n  }\n  /**\n   * 点击遮罩层关闭对话框\n   * @param event\n   */\n\n\n  overlayClick(event) {\n    if ($(event.target).hasClass('mdui-overlay') && currentInst) {\n      currentInst.close();\n    }\n  }\n  /**\n   * 动画结束回调\n   */\n\n\n  transitionEnd() {\n    if (this.$element.hasClass('mdui-dialog-open')) {\n      this.state = 'opened';\n      this.triggerEvent('opened');\n    } else {\n      this.state = 'closed';\n      this.triggerEvent('closed');\n      this.$element.hide(); // 所有对话框都关闭，且当前没有打开的对话框时，解锁屏幕\n\n      if (!queue(queueName).length && !currentInst && isLockScreen) {\n        $.unlockScreen();\n        isLockScreen = false;\n      }\n\n      $window.off('resize', $.throttle(this.readjust, 100));\n\n      if (this.options.destroyOnClosed) {\n        this.destroy();\n      }\n    }\n  }\n  /**\n   * 打开指定对话框\n   */\n\n\n  doOpen() {\n    currentInst = this;\n\n    if (!isLockScreen) {\n      $.lockScreen();\n      isLockScreen = true;\n    }\n\n    this.$element.show();\n    this.readjust();\n    $window.on('resize', $.throttle(this.readjust, 100)); // 打开消息框\n\n    this.state = 'opening';\n    this.triggerEvent('open');\n    this.$element.addClass('mdui-dialog-open').transitionEnd(() => this.transitionEnd()); // 不存在遮罩层元素时，添加遮罩层\n\n    if (!$overlay) {\n      $overlay = $.showOverlay(5100);\n    } // 点击遮罩层时是否关闭对话框\n\n\n    if (this.options.modal) {\n      $overlay.off('click', this.overlayClick);\n    } else {\n      $overlay.on('click', this.overlayClick);\n    } // 是否显示遮罩层，不显示时，把遮罩层背景透明\n\n\n    $overlay.css('opacity', this.options.overlay ? '' : 0);\n\n    if (this.options.history) {\n      // 如果 hash 中原来就有 mdui-dialog，先删除，避免后退历史纪录后仍然有 mdui-dialog 导致无法关闭\n      // 包括 mdui-dialog 和 &mdui-dialog 和 ?mdui-dialog\n      let hash = window.location.hash.substring(1);\n\n      if (hash.indexOf('mdui-dialog') > -1) {\n        hash = hash.replace(/[&?]?mdui-dialog/g, '');\n      } // 后退按钮关闭对话框\n\n\n      if (hash) {\n        window.location.hash = `${hash}${hash.indexOf('?') > -1 ? '&' : '?'}mdui-dialog`;\n      } else {\n        window.location.hash = 'mdui-dialog';\n      }\n\n      $window.on('hashchange', this.hashchangeEvent);\n    }\n  }\n  /**\n   * 当前对话框是否为打开状态\n   */\n\n\n  isOpen() {\n    return this.state === 'opening' || this.state === 'opened';\n  }\n  /**\n   * 打开对话框\n   */\n\n\n  open() {\n    if (this.isOpen()) {\n      return;\n    } // 如果当前有正在打开或已经打开的对话框,或队列不为空，则先加入队列，等旧对话框开始关闭时再打开\n\n\n    if (currentInst && (currentInst.state === 'opening' || currentInst.state === 'opened') || queue(queueName).length) {\n      queue(queueName, () => this.doOpen());\n      return;\n    }\n\n    this.doOpen();\n  }\n  /**\n   * 关闭对话框\n   */\n\n\n  close(historyBack = false) {\n    // historyBack 是否需要后退历史纪录，默认为 `false`。该参数仅内部使用\n    // 为 `false` 时是通过 js 关闭，需要后退一个历史记录\n    // 为 `true` 时是通过后退按钮关闭，不需要后退历史记录\n    // setTimeout 的作用是：\n    // 当同时关闭一个对话框，并打开另一个对话框时，使打开对话框的操作先执行，以使需要打开的对话框先加入队列\n    setTimeout(() => {\n      if (!this.isOpen()) {\n        return;\n      }\n\n      currentInst = null;\n      this.state = 'closing';\n      this.triggerEvent('close'); // 所有对话框都关闭，且当前没有打开的对话框时，隐藏遮罩\n\n      if (!queue(queueName).length && $overlay) {\n        $.hideOverlay();\n        $overlay = null; // 若仍存在遮罩，恢复遮罩的 z-index\n\n        $('.mdui-overlay').css('z-index', 2000);\n      }\n\n      this.$element.removeClass('mdui-dialog-open').transitionEnd(() => this.transitionEnd());\n\n      if (this.options.history && !queue(queueName).length) {\n        if (!historyBack) {\n          window.history.back();\n        }\n\n        $window.off('hashchange', this.hashchangeEvent);\n      } // 关闭旧对话框，打开新对话框。\n      // 加一点延迟，仅仅为了视觉效果更好。不加延时也不影响功能\n\n\n      setTimeout(() => {\n        dequeue(queueName);\n      }, 100);\n    });\n  }\n  /**\n   * 切换对话框打开/关闭状态\n   */\n\n\n  toggle() {\n    this.isOpen() ? this.close() : this.open();\n  }\n  /**\n   * 获取对话框状态。共包含四种状态：`opening`、`opened`、`closing`、`closed`\n   */\n\n\n  getState() {\n    return this.state;\n  }\n  /**\n   * 销毁对话框\n   */\n\n\n  destroy() {\n    if (this.append) {\n      this.$element.remove();\n    }\n\n    if (!queue(queueName).length && !currentInst) {\n      if ($overlay) {\n        $.hideOverlay();\n        $overlay = null;\n      }\n\n      if (isLockScreen) {\n        $.unlockScreen();\n        isLockScreen = false;\n      }\n    }\n  }\n  /**\n   * 对话框内容变化时，需要调用该方法来调整对话框位置和滚动条高度\n   */\n\n\n  handleUpdate() {\n    this.readjust();\n  }\n\n}\n\nexport { currentInst, Dialog };","import mdui from '../../mdui';\nimport 'mdui.jq/es/methods/on';\nimport { $document } from '../../utils/dom';\nimport { currentInst, Dialog } from './class'; // esc 按下时关闭对话框\n\n$document.on('keydown', event => {\n  if (currentInst && currentInst.options.closeOnEsc && currentInst.state === 'opened' && event.keyCode === 27) {\n    currentInst.close();\n  }\n});\nmdui.Dialog = Dialog;","import $ from 'mdui.jq/es/$';\nimport each from 'mdui.jq/es/functions/each';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/on';\nimport mdui from '../../mdui';\nimport './index';\nconst DEFAULT_BUTTON = {\n  text: '',\n  bold: false,\n  close: true,\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClick: () => {}\n};\nconst DEFAULT_OPTIONS = {\n  title: '',\n  content: '',\n  buttons: [],\n  stackedButtons: false,\n  cssClass: '',\n  history: true,\n  overlay: true,\n  modal: false,\n  closeOnEsc: true,\n  destroyOnClosed: true,\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onOpen: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onOpened: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClose: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClosed: () => {}\n};\n\nmdui.dialog = function (options) {\n  var _a, _b; // 合并配置参数\n\n\n  options = extend({}, DEFAULT_OPTIONS, options);\n  each(options.buttons, (i, button) => {\n    options.buttons[i] = extend({}, DEFAULT_BUTTON, button);\n  }); // 按钮的 HTML\n\n  let buttonsHTML = '';\n\n  if ((_a = options.buttons) === null || _a === void 0 ? void 0 : _a.length) {\n    buttonsHTML = `<div class=\"mdui-dialog-actions${options.stackedButtons ? ' mdui-dialog-actions-stacked' : ''}\">`;\n    each(options.buttons, (_, button) => {\n      buttonsHTML += '<a href=\"javascript:void(0)\" ' + `class=\"mdui-btn mdui-ripple mdui-text-color-primary ${button.bold ? 'mdui-btn-bold' : ''}\">${button.text}</a>`;\n    });\n    buttonsHTML += '</div>';\n  } // Dialog 的 HTML\n\n\n  const HTML = `<div class=\"mdui-dialog ${options.cssClass}\">` + (options.title ? `<div class=\"mdui-dialog-title\">${options.title}</div>` : '') + (options.content ? `<div class=\"mdui-dialog-content\">${options.content}</div>` : '') + buttonsHTML + '</div>'; // 实例化 Dialog\n\n  const instance = new mdui.Dialog(HTML, {\n    history: options.history,\n    overlay: options.overlay,\n    modal: options.modal,\n    closeOnEsc: options.closeOnEsc,\n    destroyOnClosed: options.destroyOnClosed\n  }); // 绑定按钮事件\n\n  if ((_b = options.buttons) === null || _b === void 0 ? void 0 : _b.length) {\n    instance.$element.find('.mdui-dialog-actions .mdui-btn').each((index, button) => {\n      $(button).on('click', () => {\n        options.buttons[index].onClick(instance);\n\n        if (options.buttons[index].close) {\n          instance.close();\n        }\n      });\n    });\n  } // 绑定打开关闭事件\n\n\n  instance.$element.on('open.mdui.dialog', () => {\n    options.onOpen(instance);\n  }).on('opened.mdui.dialog', () => {\n    options.onOpened(instance);\n  }).on('close.mdui.dialog', () => {\n    options.onClose(instance);\n  }).on('closed.mdui.dialog', () => {\n    options.onClosed(instance);\n  });\n  instance.open();\n  return instance;\n};","import extend from 'mdui.jq/es/functions/extend';\nimport { isFunction, isUndefined } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport './dialog';\nconst DEFAULT_OPTIONS = {\n  confirmText: 'ok',\n  cancelText: 'cancel',\n  history: true,\n  modal: false,\n  closeOnEsc: true,\n  closeOnCancel: true,\n  closeOnConfirm: true\n};\n\nmdui.confirm = function (text, title, onConfirm, onCancel, options) {\n  if (isFunction(title)) {\n    options = onCancel;\n    onCancel = onConfirm;\n    onConfirm = title;\n    title = '';\n  }\n\n  if (isUndefined(onConfirm)) {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onConfirm = () => {};\n  }\n\n  if (isUndefined(onCancel)) {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onCancel = () => {};\n  }\n\n  if (isUndefined(options)) {\n    options = {};\n  }\n\n  options = extend({}, DEFAULT_OPTIONS, options);\n  return mdui.dialog({\n    title: title,\n    content: text,\n    buttons: [{\n      text: options.cancelText,\n      bold: false,\n      close: options.closeOnCancel,\n      onClick: onCancel\n    }, {\n      text: options.confirmText,\n      bold: false,\n      close: options.closeOnConfirm,\n      onClick: onConfirm\n    }],\n    cssClass: 'mdui-dialog-confirm',\n    history: options.history,\n    modal: options.modal,\n    closeOnEsc: options.closeOnEsc\n  });\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/each';\n\n$.fn.transformOrigin = function (transformOrigin) {\n  return this.each(function () {\n    this.style.webkitTransformOrigin = transformOrigin;\n    this.style.transformOrigin = transformOrigin;\n  });\n};","import $ from 'mdui.jq/es/$';\nimport { isUndefined } from 'mdui.jq/es/utils';\nconst GUID = {};\n\n$.guid = function (name) {\n  if (!isUndefined(name) && !isUndefined(GUID[name])) {\n    return GUID[name];\n  }\n\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n\n  const guid = '_' + s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n\n  if (!isUndefined(name)) {\n    GUID[name] = guid;\n  }\n\n  return guid;\n};","import $ from 'mdui.jq/es/$';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/appendTo';\nimport 'mdui.jq/es/methods/attr';\nimport 'mdui.jq/es/methods/css';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/height';\nimport 'mdui.jq/es/methods/html';\nimport 'mdui.jq/es/methods/offset';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/width';\nimport mdui from '../../mdui';\nimport '../../jq_extends/methods/transformOrigin';\nimport '../../jq_extends/methods/transitionEnd';\nimport '../../jq_extends/static/guid';\nimport { componentEvent } from '../../utils/componentEvent';\nimport { $window } from '../../utils/dom';\nimport { isAllow, register, unlockEvent } from '../../utils/touchHandler';\nconst DEFAULT_OPTIONS = {\n  position: 'auto',\n  delay: 0,\n  content: ''\n};\n\nclass Tooltip {\n  constructor(selector, options = {}) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 当前 tooltip 的状态\n     */\n\n    this.state = 'closed';\n    /**\n     * setTimeout 的返回值\n     */\n\n    this.timeoutId = null;\n    this.$target = $(selector).first();\n    extend(this.options, options); // 创建 Tooltip HTML\n\n    this.$element = $(`<div class=\"mdui-tooltip\" id=\"${$.guid()}\">${this.options.content}</div>`).appendTo(document.body); // 绑定事件。元素处于 disabled 状态时无法触发鼠标事件，为了统一，把 touch 事件也禁用\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    const that = this;\n    this.$target.on('touchstart mouseenter', function (event) {\n      if (that.isDisabled(this)) {\n        return;\n      }\n\n      if (!isAllow(event)) {\n        return;\n      }\n\n      register(event);\n      that.open();\n    }).on('touchend mouseleave', function (event) {\n      if (that.isDisabled(this)) {\n        return;\n      }\n\n      if (!isAllow(event)) {\n        return;\n      }\n\n      that.close();\n    }).on(unlockEvent, function (event) {\n      if (that.isDisabled(this)) {\n        return;\n      }\n\n      register(event);\n    });\n  }\n  /**\n   * 元素是否已禁用\n   * @param element\n   */\n\n\n  isDisabled(element) {\n    return element.disabled || $(element).attr('disabled') !== undefined;\n  }\n  /**\n   * 是否是桌面设备\n   */\n\n\n  isDesktop() {\n    return $window.width() > 1024;\n  }\n  /**\n   * 设置 Tooltip 的位置\n   */\n\n\n  setPosition() {\n    let marginLeft;\n    let marginTop; // 触发的元素\n\n    const targetProps = this.$target[0].getBoundingClientRect(); // 触发的元素和 Tooltip 之间的距离\n\n    const targetMargin = this.isDesktop() ? 14 : 24; // Tooltip 的宽度和高度\n\n    const tooltipWidth = this.$element[0].offsetWidth;\n    const tooltipHeight = this.$element[0].offsetHeight; // Tooltip 的方向\n\n    let position = this.options.position; // 自动判断位置，加 2px，使 Tooltip 距离窗口边框至少有 2px 的间距\n\n    if (position === 'auto') {\n      if (targetProps.top + targetProps.height + targetMargin + tooltipHeight + 2 < $window.height()) {\n        position = 'bottom';\n      } else if (targetMargin + tooltipHeight + 2 < targetProps.top) {\n        position = 'top';\n      } else if (targetMargin + tooltipWidth + 2 < targetProps.left) {\n        position = 'left';\n      } else if (targetProps.width + targetMargin + tooltipWidth + 2 < $window.width() - targetProps.left) {\n        position = 'right';\n      } else {\n        position = 'bottom';\n      }\n    } // 设置位置\n\n\n    switch (position) {\n      case 'bottom':\n        marginLeft = -1 * (tooltipWidth / 2);\n        marginTop = targetProps.height / 2 + targetMargin;\n        this.$element.transformOrigin('top center');\n        break;\n\n      case 'top':\n        marginLeft = -1 * (tooltipWidth / 2);\n        marginTop = -1 * (tooltipHeight + targetProps.height / 2 + targetMargin);\n        this.$element.transformOrigin('bottom center');\n        break;\n\n      case 'left':\n        marginLeft = -1 * (tooltipWidth + targetProps.width / 2 + targetMargin);\n        marginTop = -1 * (tooltipHeight / 2);\n        this.$element.transformOrigin('center right');\n        break;\n\n      case 'right':\n        marginLeft = targetProps.width / 2 + targetMargin;\n        marginTop = -1 * (tooltipHeight / 2);\n        this.$element.transformOrigin('center left');\n        break;\n    }\n\n    const targetOffset = this.$target.offset();\n    this.$element.css({\n      top: `${targetOffset.top + targetProps.height / 2}px`,\n      left: `${targetOffset.left + targetProps.width / 2}px`,\n      'margin-left': `${marginLeft}px`,\n      'margin-top': `${marginTop}px`\n    });\n  }\n  /**\n   * 触发组件事件\n   * @param name\n   */\n\n\n  triggerEvent(name) {\n    componentEvent(name, 'tooltip', this.$target, this);\n  }\n  /**\n   * 动画结束回调\n   */\n\n\n  transitionEnd() {\n    if (this.$element.hasClass('mdui-tooltip-open')) {\n      this.state = 'opened';\n      this.triggerEvent('opened');\n    } else {\n      this.state = 'closed';\n      this.triggerEvent('closed');\n    }\n  }\n  /**\n   * 当前 tooltip 是否为打开状态\n   */\n\n\n  isOpen() {\n    return this.state === 'opening' || this.state === 'opened';\n  }\n  /**\n   * 执行打开 tooltip\n   */\n\n\n  doOpen() {\n    this.state = 'opening';\n    this.triggerEvent('open');\n    this.$element.addClass('mdui-tooltip-open').transitionEnd(() => this.transitionEnd());\n  }\n  /**\n   * 打开 Tooltip\n   * @param options 允许每次打开时设置不同的参数\n   */\n\n\n  open(options) {\n    if (this.isOpen()) {\n      return;\n    }\n\n    const oldOptions = extend({}, this.options);\n\n    if (options) {\n      extend(this.options, options);\n    } // tooltip 的内容有更新\n\n\n    if (oldOptions.content !== this.options.content) {\n      this.$element.html(this.options.content);\n    }\n\n    this.setPosition();\n\n    if (this.options.delay) {\n      this.timeoutId = setTimeout(() => this.doOpen(), this.options.delay);\n    } else {\n      this.timeoutId = null;\n      this.doOpen();\n    }\n  }\n  /**\n   * 关闭 Tooltip\n   */\n\n\n  close() {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = null;\n    }\n\n    if (!this.isOpen()) {\n      return;\n    }\n\n    this.state = 'closing';\n    this.triggerEvent('close');\n    this.$element.removeClass('mdui-tooltip-open').transitionEnd(() => this.transitionEnd());\n  }\n  /**\n   * 切换 Tooltip 的打开状态\n   */\n\n\n  toggle() {\n    this.isOpen() ? this.close() : this.open();\n  }\n  /**\n   * 获取 Tooltip 状态。共包含四种状态：`opening`、`opened`、`closing`、`closed`\n   */\n\n\n  getState() {\n    return this.state;\n  }\n\n}\n\nmdui.Tooltip = Tooltip;","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/on';\nimport mdui from '../../mdui';\nimport { $document } from '../../utils/dom';\nimport { parseOptions } from '../../utils/parseOptions';\nimport './index';\nconst customAttr = 'mdui-tooltip';\nconst dataName = '_mdui_tooltip';\n$(() => {\n  // mouseenter 不能冒泡，所以这里用 mouseover 代替\n  $document.on('touchstart mouseover', `[${customAttr}]`, function () {\n    const $target = $(this);\n    let instance = $target.data(dataName);\n\n    if (!instance) {\n      instance = new mdui.Tooltip(this, parseOptions(this, customAttr));\n      $target.data(dataName, instance);\n    }\n  });\n});","import $ from 'mdui.jq/es/$';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/appendTo';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/off';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/parents';\nimport 'mdui.jq/es/methods/remove';\nimport { isString } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport '../../jq_extends/methods/reflow';\nimport '../../jq_extends/methods/transform';\nimport '../../jq_extends/methods/transitionEnd';\nimport { $document } from '../../utils/dom';\nimport { dequeue, queue } from '../../utils/queue';\nimport { startEvent } from '../../utils/touchHandler';\nconst DEFAULT_OPTIONS = {\n  message: '',\n  timeout: 4000,\n  position: 'bottom',\n  buttonText: '',\n  buttonColor: '',\n  closeOnButtonClick: true,\n  closeOnOutsideClick: true,\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClick: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onButtonClick: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onOpen: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onOpened: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClose: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClosed: () => {}\n};\n/**\n * 当前打开着的 Snackbar\n */\n\nlet currentInst = null;\n/**\n * 队列名\n */\n\nconst queueName = '_mdui_snackbar';\n\nclass Snackbar {\n  constructor(options) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 当前 Snackbar 的状态\n     */\n\n    this.state = 'closed';\n    /**\n     * setTimeout 的 ID\n     */\n\n    this.timeoutId = null;\n    extend(this.options, options); // 按钮颜色\n\n    let buttonColorStyle = '';\n    let buttonColorClass = '';\n\n    if (this.options.buttonColor.indexOf('#') === 0 || this.options.buttonColor.indexOf('rgb') === 0) {\n      buttonColorStyle = `style=\"color:${this.options.buttonColor}\"`;\n    } else if (this.options.buttonColor !== '') {\n      buttonColorClass = `mdui-text-color-${this.options.buttonColor}`;\n    } // 添加 HTML\n\n\n    this.$element = $('<div class=\"mdui-snackbar\">' + `<div class=\"mdui-snackbar-text\">${this.options.message}</div>` + (this.options.buttonText ? `<a href=\"javascript:void(0)\" class=\"mdui-snackbar-action mdui-btn mdui-ripple mdui-ripple-white ${buttonColorClass}\" ${buttonColorStyle}>${this.options.buttonText}</a>` : '') + '</div>').appendTo(document.body); // 设置位置\n\n    this.setPosition('close');\n    this.$element.reflow().addClass(`mdui-snackbar-${this.options.position}`);\n  }\n  /**\n   * 点击 Snackbar 外面的区域关闭\n   * @param event\n   */\n\n\n  closeOnOutsideClick(event) {\n    const $target = $(event.target);\n\n    if (!$target.hasClass('mdui-snackbar') && !$target.parents('.mdui-snackbar').length) {\n      currentInst.close();\n    }\n  }\n  /**\n   * 设置 Snackbar 的位置\n   * @param state\n   */\n\n\n  setPosition(state) {\n    const snackbarHeight = this.$element[0].clientHeight;\n    const position = this.options.position;\n    let translateX;\n    let translateY; // translateX\n\n    if (position === 'bottom' || position === 'top') {\n      translateX = '-50%';\n    } else {\n      translateX = '0';\n    } // translateY\n\n\n    if (state === 'open') {\n      translateY = '0';\n    } else {\n      if (position === 'bottom') {\n        translateY = snackbarHeight;\n      }\n\n      if (position === 'top') {\n        translateY = -snackbarHeight;\n      }\n\n      if (position === 'left-top' || position === 'right-top') {\n        translateY = -snackbarHeight - 24;\n      }\n\n      if (position === 'left-bottom' || position === 'right-bottom') {\n        translateY = snackbarHeight + 24;\n      }\n    }\n\n    this.$element.transform(`translate(${translateX},${translateY}px`);\n  }\n  /**\n   * 打开 Snackbar\n   */\n\n\n  open() {\n    if (this.state === 'opening' || this.state === 'opened') {\n      return;\n    } // 如果当前有正在显示的 Snackbar，则先加入队列，等旧 Snackbar 关闭后再打开\n\n\n    if (currentInst) {\n      queue(queueName, () => this.open());\n      return;\n    }\n\n    currentInst = this; // 开始打开\n\n    this.state = 'opening';\n    this.options.onOpen(this);\n    this.setPosition('open');\n    this.$element.transitionEnd(() => {\n      if (this.state !== 'opening') {\n        return;\n      }\n\n      this.state = 'opened';\n      this.options.onOpened(this); // 有按钮时绑定事件\n\n      if (this.options.buttonText) {\n        this.$element.find('.mdui-snackbar-action').on('click', () => {\n          this.options.onButtonClick(this);\n\n          if (this.options.closeOnButtonClick) {\n            this.close();\n          }\n        });\n      } // 点击 snackbar 的事件\n\n\n      this.$element.on('click', event => {\n        if (!$(event.target).hasClass('mdui-snackbar-action')) {\n          this.options.onClick(this);\n        }\n      }); // 点击 Snackbar 外面的区域关闭\n\n      if (this.options.closeOnOutsideClick) {\n        $document.on(startEvent, this.closeOnOutsideClick);\n      } // 超时后自动关闭\n\n\n      if (this.options.timeout) {\n        this.timeoutId = setTimeout(() => this.close(), this.options.timeout);\n      }\n    });\n  }\n  /**\n   * 关闭 Snackbar\n   */\n\n\n  close() {\n    if (this.state === 'closing' || this.state === 'closed') {\n      return;\n    }\n\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n\n    if (this.options.closeOnOutsideClick) {\n      $document.off(startEvent, this.closeOnOutsideClick);\n    }\n\n    this.state = 'closing';\n    this.options.onClose(this);\n    this.setPosition('close');\n    this.$element.transitionEnd(() => {\n      if (this.state !== 'closing') {\n        return;\n      }\n\n      currentInst = null;\n      this.state = 'closed';\n      this.options.onClosed(this);\n      this.$element.remove();\n      dequeue(queueName);\n    });\n  }\n\n}\n\nmdui.snackbar = function (message, options = {}) {\n  if (isString(message)) {\n    options.message = message;\n  } else {\n    options = message;\n  }\n\n  const instance = new Snackbar(options);\n  instance.open();\n  return instance;\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/html';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport '../../global/mutation';\n/**\n * layer 的 HTML 结构\n * @param index\n */\n\nfunction layerHTML(index = false) {\n  return `<div class=\"mdui-spinner-layer ${index ? `mdui-spinner-layer-${index}` : ''}\">` + '<div class=\"mdui-spinner-circle-clipper mdui-spinner-left\">' + '<div class=\"mdui-spinner-circle\"></div>' + '</div>' + '<div class=\"mdui-spinner-gap-patch\">' + '<div class=\"mdui-spinner-circle\"></div>' + '</div>' + '<div class=\"mdui-spinner-circle-clipper mdui-spinner-right\">' + '<div class=\"mdui-spinner-circle\"></div>' + '</div>' + '</div>';\n}\n/**\n * 填充 HTML\n * @param spinner\n */\n\n\nfunction fillHTML(spinner) {\n  const $spinner = $(spinner);\n  const layer = $spinner.hasClass('mdui-spinner-colorful') ? layerHTML(1) + layerHTML(2) + layerHTML(3) + layerHTML(4) : layerHTML();\n  $spinner.html(layer);\n}\n\n$(() => {\n  // 页面加载完后自动填充 HTML 结构\n  mdui.mutation('.mdui-spinner', function () {\n    fillHTML(this);\n  });\n});\n\nmdui.updateSpinners = function (selector) {\n  const $elements = isUndefined(selector) ? $('.mdui-spinner') : $(selector);\n  $elements.each(function () {\n    fillHTML(this);\n  });\n};","import $ from 'mdui.jq/es/$';\nimport contains from 'mdui.jq/es/functions/contains';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/attr';\nimport 'mdui.jq/es/methods/children';\nimport 'mdui.jq/es/methods/css';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/hasClass';\nimport 'mdui.jq/es/methods/height';\nimport 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/parent';\nimport 'mdui.jq/es/methods/parents';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/width';\nimport mdui from '../../mdui';\nimport '../../jq_extends/methods/transformOrigin';\nimport '../../jq_extends/methods/transitionEnd';\nimport '../../jq_extends/static/throttle';\nimport { componentEvent } from '../../utils/componentEvent';\nimport { $document, $window } from '../../utils/dom';\nconst DEFAULT_OPTIONS = {\n  position: 'auto',\n  align: 'auto',\n  gutter: 16,\n  fixed: false,\n  covered: 'auto',\n  subMenuTrigger: 'hover',\n  subMenuDelay: 200\n};\n\nclass Menu {\n  constructor(anchorSelector, menuSelector, options = {}) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 当前菜单状态\n     */\n\n    this.state = 'closed';\n    this.$anchor = $(anchorSelector).first();\n    this.$element = $(menuSelector).first(); // 触发菜单的元素 和 菜单必须是同级的元素，否则菜单可能不能定位\n\n    if (!this.$anchor.parent().is(this.$element.parent())) {\n      throw new Error('anchorSelector and menuSelector must be siblings');\n    }\n\n    extend(this.options, options); // 是否是级联菜单\n\n    this.isCascade = this.$element.hasClass('mdui-menu-cascade'); // covered 参数处理\n\n    this.isCovered = this.options.covered === 'auto' ? !this.isCascade : this.options.covered; // 点击触发菜单切换\n\n    this.$anchor.on('click', () => this.toggle()); // 点击菜单外面区域关闭菜单\n\n    $document.on('click touchstart', event => {\n      const $target = $(event.target);\n\n      if (this.isOpen() && !$target.is(this.$element) && !contains(this.$element[0], $target[0]) && !$target.is(this.$anchor) && !contains(this.$anchor[0], $target[0])) {\n        this.close();\n      }\n    }); // 点击不含子菜单的菜单条目关闭菜单\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    const that = this;\n    $document.on('click', '.mdui-menu-item', function () {\n      const $item = $(this);\n\n      if (!$item.find('.mdui-menu').length && $item.attr('disabled') === undefined) {\n        that.close();\n      }\n    }); // 绑定点击或鼠标移入含子菜单的条目的事件\n\n    this.bindSubMenuEvent(); // 窗口大小变化时，重新调整菜单位置\n\n    $window.on('resize', $.throttle(() => this.readjust(), 100));\n  }\n  /**\n   * 是否为打开状态\n   */\n\n\n  isOpen() {\n    return this.state === 'opening' || this.state === 'opened';\n  }\n  /**\n   * 触发组件事件\n   * @param name\n   */\n\n\n  triggerEvent(name) {\n    componentEvent(name, 'menu', this.$element, this);\n  }\n  /**\n   * 调整主菜单位置\n   */\n\n\n  readjust() {\n    let menuLeft;\n    let menuTop; // 菜单位置和方向\n\n    let position;\n    let align; // window 窗口的宽度和高度\n\n    const windowHeight = $window.height();\n    const windowWidth = $window.width(); // 配置参数\n\n    const gutter = this.options.gutter;\n    const isCovered = this.isCovered;\n    const isFixed = this.options.fixed; // 动画方向参数\n\n    let transformOriginX;\n    let transformOriginY; // 菜单的原始宽度和高度\n\n    const menuWidth = this.$element.width();\n    const menuHeight = this.$element.height(); // 触发菜单的元素在窗口中的位置\n\n    const anchorRect = this.$anchor[0].getBoundingClientRect();\n    const anchorTop = anchorRect.top;\n    const anchorLeft = anchorRect.left;\n    const anchorHeight = anchorRect.height;\n    const anchorWidth = anchorRect.width;\n    const anchorBottom = windowHeight - anchorTop - anchorHeight;\n    const anchorRight = windowWidth - anchorLeft - anchorWidth; // 触发元素相对其拥有定位属性的父元素的位置\n\n    const anchorOffsetTop = this.$anchor[0].offsetTop;\n    const anchorOffsetLeft = this.$anchor[0].offsetLeft; // 自动判断菜单位置\n\n    if (this.options.position === 'auto') {\n      if (anchorBottom + (isCovered ? anchorHeight : 0) > menuHeight + gutter) {\n        // 判断下方是否放得下菜单\n        position = 'bottom';\n      } else if (anchorTop + (isCovered ? anchorHeight : 0) > menuHeight + gutter) {\n        // 判断上方是否放得下菜单\n        position = 'top';\n      } else {\n        // 上下都放不下，居中显示\n        position = 'center';\n      }\n    } else {\n      position = this.options.position;\n    } // 自动判断菜单对齐方式\n\n\n    if (this.options.align === 'auto') {\n      if (anchorRight + anchorWidth > menuWidth + gutter) {\n        // 判断右侧是否放得下菜单\n        align = 'left';\n      } else if (anchorLeft + anchorWidth > menuWidth + gutter) {\n        // 判断左侧是否放得下菜单\n        align = 'right';\n      } else {\n        // 左右都放不下，居中显示\n        align = 'center';\n      }\n    } else {\n      align = this.options.align;\n    } // 设置菜单位置\n\n\n    if (position === 'bottom') {\n      transformOriginY = '0';\n      menuTop = (isCovered ? 0 : anchorHeight) + (isFixed ? anchorTop : anchorOffsetTop);\n    } else if (position === 'top') {\n      transformOriginY = '100%';\n      menuTop = (isCovered ? anchorHeight : 0) + (isFixed ? anchorTop - menuHeight : anchorOffsetTop - menuHeight);\n    } else {\n      transformOriginY = '50%'; // =====================在窗口中居中\n      // 显示的菜单的高度，简单菜单高度不超过窗口高度，若超过了则在菜单内部显示滚动条\n      // 级联菜单内部不允许出现滚动条\n\n      let menuHeightTemp = menuHeight; // 简单菜单比窗口高时，限制菜单高度\n\n      if (!this.isCascade) {\n        if (menuHeight + gutter * 2 > windowHeight) {\n          menuHeightTemp = windowHeight - gutter * 2;\n          this.$element.height(menuHeightTemp);\n        }\n      }\n\n      menuTop = (windowHeight - menuHeightTemp) / 2 + (isFixed ? 0 : anchorOffsetTop - anchorTop);\n    }\n\n    this.$element.css('top', `${menuTop}px`); // 设置菜单对齐方式\n\n    if (align === 'left') {\n      transformOriginX = '0';\n      menuLeft = isFixed ? anchorLeft : anchorOffsetLeft;\n    } else if (align === 'right') {\n      transformOriginX = '100%';\n      menuLeft = isFixed ? anchorLeft + anchorWidth - menuWidth : anchorOffsetLeft + anchorWidth - menuWidth;\n    } else {\n      transformOriginX = '50%'; //=======================在窗口中居中\n      // 显示的菜单的宽度，菜单宽度不能超过窗口宽度\n\n      let menuWidthTemp = menuWidth; // 菜单比窗口宽，限制菜单宽度\n\n      if (menuWidth + gutter * 2 > windowWidth) {\n        menuWidthTemp = windowWidth - gutter * 2;\n        this.$element.width(menuWidthTemp);\n      }\n\n      menuLeft = (windowWidth - menuWidthTemp) / 2 + (isFixed ? 0 : anchorOffsetLeft - anchorLeft);\n    }\n\n    this.$element.css('left', `${menuLeft}px`); // 设置菜单动画方向\n\n    this.$element.transformOrigin(`${transformOriginX} ${transformOriginY}`);\n  }\n  /**\n   * 调整子菜单的位置\n   * @param $submenu\n   */\n\n\n  readjustSubmenu($submenu) {\n    const $item = $submenu.parent('.mdui-menu-item');\n    let submenuTop;\n    let submenuLeft; // 子菜单位置和方向\n\n    let position;\n    let align; // window 窗口的宽度和高度\n\n    const windowHeight = $window.height();\n    const windowWidth = $window.width(); // 动画方向参数\n\n    let transformOriginX;\n    let transformOriginY; // 子菜单的原始宽度和高度\n\n    const submenuWidth = $submenu.width();\n    const submenuHeight = $submenu.height(); // 触发子菜单的菜单项的宽度高度\n\n    const itemRect = $item[0].getBoundingClientRect();\n    const itemWidth = itemRect.width;\n    const itemHeight = itemRect.height;\n    const itemLeft = itemRect.left;\n    const itemTop = itemRect.top; // 判断菜单上下位置\n\n    if (windowHeight - itemTop > submenuHeight) {\n      // 判断下方是否放得下菜单\n      position = 'bottom';\n    } else if (itemTop + itemHeight > submenuHeight) {\n      // 判断上方是否放得下菜单\n      position = 'top';\n    } else {\n      // 默认放在下方\n      position = 'bottom';\n    } // 判断菜单左右位置\n\n\n    if (windowWidth - itemLeft - itemWidth > submenuWidth) {\n      // 判断右侧是否放得下菜单\n      align = 'left';\n    } else if (itemLeft > submenuWidth) {\n      // 判断左侧是否放得下菜单\n      align = 'right';\n    } else {\n      // 默认放在右侧\n      align = 'left';\n    } // 设置菜单位置\n\n\n    if (position === 'bottom') {\n      transformOriginY = '0';\n      submenuTop = '0';\n    } else if (position === 'top') {\n      transformOriginY = '100%';\n      submenuTop = -submenuHeight + itemHeight;\n    }\n\n    $submenu.css('top', `${submenuTop}px`); // 设置菜单对齐方式\n\n    if (align === 'left') {\n      transformOriginX = '0';\n      submenuLeft = itemWidth;\n    } else if (align === 'right') {\n      transformOriginX = '100%';\n      submenuLeft = -submenuWidth;\n    }\n\n    $submenu.css('left', `${submenuLeft}px`); // 设置菜单动画方向\n\n    $submenu.transformOrigin(`${transformOriginX} ${transformOriginY}`);\n  }\n  /**\n   * 打开子菜单\n   * @param $submenu\n   */\n\n\n  openSubMenu($submenu) {\n    this.readjustSubmenu($submenu);\n    $submenu.addClass('mdui-menu-open').parent('.mdui-menu-item').addClass('mdui-menu-item-active');\n  }\n  /**\n   * 关闭子菜单，及其嵌套的子菜单\n   * @param $submenu\n   */\n\n\n  closeSubMenu($submenu) {\n    // 关闭子菜单\n    $submenu.removeClass('mdui-menu-open').addClass('mdui-menu-closing').transitionEnd(() => $submenu.removeClass('mdui-menu-closing')) // 移除激活状态的样式\n    .parent('.mdui-menu-item').removeClass('mdui-menu-item-active'); // 循环关闭嵌套的子菜单\n\n    $submenu.find('.mdui-menu').each((_, menu) => {\n      const $subSubmenu = $(menu);\n      $subSubmenu.removeClass('mdui-menu-open').addClass('mdui-menu-closing').transitionEnd(() => $subSubmenu.removeClass('mdui-menu-closing')).parent('.mdui-menu-item').removeClass('mdui-menu-item-active');\n    });\n  }\n  /**\n   * 切换子菜单状态\n   * @param $submenu\n   */\n\n\n  toggleSubMenu($submenu) {\n    $submenu.hasClass('mdui-menu-open') ? this.closeSubMenu($submenu) : this.openSubMenu($submenu);\n  }\n  /**\n   * 绑定子菜单事件\n   */\n\n\n  bindSubMenuEvent() {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this; // 点击打开子菜单\n\n    this.$element.on('click', '.mdui-menu-item', function (event) {\n      const $item = $(this);\n      const $target = $(event.target); // 禁用状态菜单不操作\n\n      if ($item.attr('disabled') !== undefined) {\n        return;\n      } // 没有点击在子菜单的菜单项上时，不操作（点在了子菜单的空白区域、或分隔线上）\n\n\n      if ($target.is('.mdui-menu') || $target.is('.mdui-divider')) {\n        return;\n      } // 阻止冒泡，点击菜单项时只在最后一级的 mdui-menu-item 上生效，不向上冒泡\n\n\n      if (!$target.parents('.mdui-menu-item').first().is($item)) {\n        return;\n      } // 当前菜单的子菜单\n\n\n      const $submenu = $item.children('.mdui-menu'); // 先关闭除当前子菜单外的所有同级子菜单\n\n      $item.parent('.mdui-menu').children('.mdui-menu-item').each((_, item) => {\n        const $tmpSubmenu = $(item).children('.mdui-menu');\n\n        if ($tmpSubmenu.length && (!$submenu.length || !$tmpSubmenu.is($submenu))) {\n          that.closeSubMenu($tmpSubmenu);\n        }\n      }); // 切换当前子菜单\n\n      if ($submenu.length) {\n        that.toggleSubMenu($submenu);\n      }\n    });\n\n    if (this.options.subMenuTrigger === 'hover') {\n      // 临时存储 setTimeout 对象\n      let timeout = null;\n      let timeoutOpen = null;\n      this.$element.on('mouseover mouseout', '.mdui-menu-item', function (event) {\n        const $item = $(this);\n        const eventType = event.type;\n        const $relatedTarget = $(event.relatedTarget); // 禁用状态的菜单不操作\n\n        if ($item.attr('disabled') !== undefined) {\n          return;\n        } // 用 mouseover 模拟 mouseenter\n\n\n        if (eventType === 'mouseover') {\n          if (!$item.is($relatedTarget) && contains($item[0], $relatedTarget[0])) {\n            return;\n          }\n        } // 用 mouseout 模拟 mouseleave\n        else if (eventType === 'mouseout') {\n            if ($item.is($relatedTarget) || contains($item[0], $relatedTarget[0])) {\n              return;\n            }\n          } // 当前菜单项下的子菜单，未必存在\n\n\n        const $submenu = $item.children('.mdui-menu'); // 鼠标移入菜单项时，显示菜单项下的子菜单\n\n        if (eventType === 'mouseover') {\n          if ($submenu.length) {\n            // 当前子菜单准备打开时，如果当前子菜单正准备着关闭，不用再关闭了\n            const tmpClose = $submenu.data('timeoutClose.mdui.menu');\n\n            if (tmpClose) {\n              clearTimeout(tmpClose);\n            } // 如果当前子菜单已经打开，不操作\n\n\n            if ($submenu.hasClass('mdui-menu-open')) {\n              return;\n            } // 当前子菜单准备打开时，其他准备打开的子菜单不用再打开了\n\n\n            clearTimeout(timeoutOpen); // 准备打开当前子菜单\n\n            timeout = timeoutOpen = setTimeout(() => that.openSubMenu($submenu), that.options.subMenuDelay);\n            $submenu.data('timeoutOpen.mdui.menu', timeout);\n          }\n        } // 鼠标移出菜单项时，关闭菜单项下的子菜单\n        else if (eventType === 'mouseout') {\n            if ($submenu.length) {\n              // 鼠标移出菜单项时，如果当前菜单项下的子菜单正准备打开，不用再打开了\n              const tmpOpen = $submenu.data('timeoutOpen.mdui.menu');\n\n              if (tmpOpen) {\n                clearTimeout(tmpOpen);\n              } // 准备关闭当前子菜单\n\n\n              timeout = setTimeout(() => that.closeSubMenu($submenu), that.options.subMenuDelay);\n              $submenu.data('timeoutClose.mdui.menu', timeout);\n            }\n          }\n      });\n    }\n  }\n  /**\n   * 动画结束回调\n   */\n\n\n  transitionEnd() {\n    this.$element.removeClass('mdui-menu-closing');\n\n    if (this.state === 'opening') {\n      this.state = 'opened';\n      this.triggerEvent('opened');\n    }\n\n    if (this.state === 'closing') {\n      this.state = 'closed';\n      this.triggerEvent('closed'); // 关闭后，恢复菜单样式到默认状态，并恢复 fixed 定位\n\n      this.$element.css({\n        top: '',\n        left: '',\n        width: '',\n        position: 'fixed'\n      });\n    }\n  }\n  /**\n   * 切换菜单状态\n   */\n\n\n  toggle() {\n    this.isOpen() ? this.close() : this.open();\n  }\n  /**\n   * 打开菜单\n   */\n\n\n  open() {\n    if (this.isOpen()) {\n      return;\n    }\n\n    this.state = 'opening';\n    this.triggerEvent('open');\n    this.readjust();\n    this.$element // 菜单隐藏状态使用使用 fixed 定位。\n    .css('position', this.options.fixed ? 'fixed' : 'absolute').addClass('mdui-menu-open').transitionEnd(() => this.transitionEnd());\n  }\n  /**\n   * 关闭菜单\n   */\n\n\n  close() {\n    if (!this.isOpen()) {\n      return;\n    }\n\n    this.state = 'closing';\n    this.triggerEvent('close'); // 菜单开始关闭时，关闭所有子菜单\n\n    this.$element.find('.mdui-menu').each((_, submenu) => {\n      this.closeSubMenu($(submenu));\n    });\n    this.$element.removeClass('mdui-menu-open').addClass('mdui-menu-closing').transitionEnd(() => this.transitionEnd());\n  }\n\n}\n\nmdui.Menu = Menu;","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/data';\nimport 'mdui.jq/es/methods/on';\nimport mdui from '../../mdui';\nimport { $document } from '../../utils/dom';\nimport { parseOptions } from '../../utils/parseOptions';\nimport './index';\nconst customAttr = 'mdui-menu';\nconst dataName = '_mdui_menu';\n$(() => {\n  $document.on('click', `[${customAttr}]`, function () {\n    const $this = $(this);\n    let instance = $this.data(dataName);\n\n    if (!instance) {\n      const options = parseOptions(this, customAttr);\n      const menuSelector = options.target;\n      delete options.target;\n      instance = new mdui.Menu($this, menuSelector, options);\n      $this.data(dataName, instance);\n      instance.toggle();\n    }\n  });\n});","// 全局配置参数\nconst globalOptions = {}; // 全局事件名\n\nconst ajaxEvents = {\n  ajaxStart: 'start.mdui.ajax',\n  ajaxSuccess: 'success.mdui.ajax',\n  ajaxError: 'error.mdui.ajax',\n  ajaxComplete: 'complete.mdui.ajax'\n};\nexport { globalOptions, ajaxEvents };","import $ from '../$';\nimport '../methods/trigger';\nimport { isString, isUndefined } from '../utils';\nimport each from './each';\nimport extend from './extend';\nimport param from './param';\nimport { ajaxEvents, globalOptions } from './utils/ajax';\n/**\n * 判断此请求方法是否通过查询字符串提交参数\n * @param method 请求方法，大写\n */\n\nfunction isQueryStringData(method) {\n  return ['GET', 'HEAD'].indexOf(method) >= 0;\n}\n/**\n * 添加参数到 URL 上，且 URL 中不存在 ? 时，自动把第一个 & 替换为 ?\n * @param url\n * @param query\n */\n\n\nfunction appendQuery(url, query) {\n  return `${url}&${query}`.replace(/[&?]{1,2}/, '?');\n}\n/**\n * 合并请求参数，参数优先级：options > globalOptions > defaults\n * @param options\n */\n\n\nfunction mergeOptions(options) {\n  // 默认参数\n  const defaults = {\n    url: '',\n    method: 'GET',\n    data: '',\n    processData: true,\n    async: true,\n    cache: true,\n    username: '',\n    password: '',\n    headers: {},\n    xhrFields: {},\n    statusCode: {},\n    dataType: 'text',\n    contentType: 'application/x-www-form-urlencoded',\n    timeout: 0,\n    global: true\n  }; // globalOptions 中的回调函数不合并\n\n  each(globalOptions, (key, value) => {\n    const callbacks = ['beforeSend', 'success', 'error', 'complete', 'statusCode']; // @ts-ignore\n\n    if (callbacks.indexOf(key) < 0 && !isUndefined(value)) {\n      defaults[key] = value;\n    }\n  });\n  return extend({}, defaults, options);\n}\n/**\n * 发送 ajax 请求\n * @param options\n * @example\n```js\najax({\n  method: \"POST\",\n  url: \"some.php\",\n  data: { name: \"John\", location: \"Boston\" }\n}).then(function( msg ) {\n  alert( \"Data Saved: \" + msg );\n});\n```\n */\n\n\nfunction ajax(options) {\n  // 是否已取消请求\n  let isCanceled = false; // 事件参数\n\n  const eventParams = {}; // 参数合并\n\n  const mergedOptions = mergeOptions(options);\n  let url = mergedOptions.url || window.location.toString();\n  const method = mergedOptions.method.toUpperCase();\n  let data = mergedOptions.data;\n  const processData = mergedOptions.processData;\n  const async = mergedOptions.async;\n  const cache = mergedOptions.cache;\n  const username = mergedOptions.username;\n  const password = mergedOptions.password;\n  const headers = mergedOptions.headers;\n  const xhrFields = mergedOptions.xhrFields;\n  const statusCode = mergedOptions.statusCode;\n  const dataType = mergedOptions.dataType;\n  const contentType = mergedOptions.contentType;\n  const timeout = mergedOptions.timeout;\n  const global = mergedOptions.global; // 需要发送的数据\n  // GET/HEAD 请求和 processData 为 true 时，转换为查询字符串格式，特殊格式不转换\n\n  if (data && (isQueryStringData(method) || processData) && !isString(data) && !(data instanceof ArrayBuffer) && !(data instanceof Blob) && !(data instanceof Document) && !(data instanceof FormData)) {\n    data = param(data);\n  } // 对于 GET、HEAD 类型的请求，把 data 数据添加到 URL 中\n\n\n  if (data && isQueryStringData(method)) {\n    // 查询字符串拼接到 URL 中\n    url = appendQuery(url, data);\n    data = null;\n  }\n  /**\n   * 触发事件和回调函数\n   * @param event\n   * @param params\n   * @param callback\n   * @param args\n   */\n\n\n  function trigger(event, params, callback, ...args) {\n    // 触发全局事件\n    if (global) {\n      $(document).trigger(event, params);\n    } // 触发 ajax 回调和事件\n\n\n    let result1;\n    let result2;\n\n    if (callback) {\n      // 全局回调\n      if (callback in globalOptions) {\n        // @ts-ignore\n        result1 = globalOptions[callback](...args);\n      } // 自定义回调\n\n\n      if (mergedOptions[callback]) {\n        // @ts-ignore\n        result2 = mergedOptions[callback](...args);\n      } // beforeSend 回调返回 false 时取消 ajax 请求\n\n\n      if (callback === 'beforeSend' && (result1 === false || result2 === false)) {\n        isCanceled = true;\n      }\n    }\n  } // XMLHttpRequest 请求\n\n\n  function XHR() {\n    let textStatus;\n    return new Promise((resolve, reject) => {\n      // GET/HEAD 请求的缓存处理\n      if (isQueryStringData(method) && !cache) {\n        url = appendQuery(url, `_=${Date.now()}`);\n      } // 创建 XHR\n\n\n      const xhr = new XMLHttpRequest();\n      xhr.open(method, url, async, username, password);\n\n      if (contentType || data && !isQueryStringData(method) && contentType !== false) {\n        xhr.setRequestHeader('Content-Type', contentType);\n      } // 设置 Accept\n\n\n      if (dataType === 'json') {\n        xhr.setRequestHeader('Accept', 'application/json, text/javascript');\n      } // 添加 headers\n\n\n      if (headers) {\n        each(headers, (key, value) => {\n          // undefined 值不发送，string 和 null 需要发送\n          if (!isUndefined(value)) {\n            xhr.setRequestHeader(key, value + ''); // 把 null 转换成字符串\n          }\n        });\n      } // 检查是否是跨域请求，跨域请求时不添加 X-Requested-With\n\n\n      const crossDomain = /^([\\w-]+:)?\\/\\/([^/]+)/.test(url) && RegExp.$2 !== window.location.host;\n\n      if (!crossDomain) {\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      }\n\n      if (xhrFields) {\n        each(xhrFields, (key, value) => {\n          // @ts-ignore\n          xhr[key] = value;\n        });\n      }\n\n      eventParams.xhr = xhr;\n      eventParams.options = mergedOptions;\n      let xhrTimeout;\n\n      xhr.onload = function () {\n        if (xhrTimeout) {\n          clearTimeout(xhrTimeout);\n        } // AJAX 返回的 HTTP 响应码是否表示成功\n\n\n        const isHttpStatusSuccess = xhr.status >= 200 && xhr.status < 300 || xhr.status === 304 || xhr.status === 0;\n        let responseData;\n\n        if (isHttpStatusSuccess) {\n          if (xhr.status === 204 || method === 'HEAD') {\n            textStatus = 'nocontent';\n          } else if (xhr.status === 304) {\n            textStatus = 'notmodified';\n          } else {\n            textStatus = 'success';\n          }\n\n          if (dataType === 'json') {\n            try {\n              responseData = method === 'HEAD' ? undefined : JSON.parse(xhr.responseText);\n              eventParams.data = responseData;\n            } catch (err) {\n              textStatus = 'parsererror';\n              trigger(ajaxEvents.ajaxError, eventParams, 'error', xhr, textStatus);\n              reject(new Error(textStatus));\n            }\n\n            if (textStatus !== 'parsererror') {\n              trigger(ajaxEvents.ajaxSuccess, eventParams, 'success', responseData, textStatus, xhr);\n              resolve(responseData);\n            }\n          } else {\n            responseData = method === 'HEAD' ? undefined : xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;\n            eventParams.data = responseData;\n            trigger(ajaxEvents.ajaxSuccess, eventParams, 'success', responseData, textStatus, xhr);\n            resolve(responseData);\n          }\n        } else {\n          textStatus = 'error';\n          trigger(ajaxEvents.ajaxError, eventParams, 'error', xhr, textStatus);\n          reject(new Error(textStatus));\n        } // statusCode\n\n\n        each([globalOptions.statusCode, statusCode], (_, func) => {\n          if (func && func[xhr.status]) {\n            if (isHttpStatusSuccess) {\n              func[xhr.status](responseData, textStatus, xhr);\n            } else {\n              func[xhr.status](xhr, textStatus);\n            }\n          }\n        });\n        trigger(ajaxEvents.ajaxComplete, eventParams, 'complete', xhr, textStatus);\n      };\n\n      xhr.onerror = function () {\n        if (xhrTimeout) {\n          clearTimeout(xhrTimeout);\n        }\n\n        trigger(ajaxEvents.ajaxError, eventParams, 'error', xhr, xhr.statusText);\n        trigger(ajaxEvents.ajaxComplete, eventParams, 'complete', xhr, 'error');\n        reject(new Error(xhr.statusText));\n      };\n\n      xhr.onabort = function () {\n        let statusText = 'abort';\n\n        if (xhrTimeout) {\n          statusText = 'timeout';\n          clearTimeout(xhrTimeout);\n        }\n\n        trigger(ajaxEvents.ajaxError, eventParams, 'error', xhr, statusText);\n        trigger(ajaxEvents.ajaxComplete, eventParams, 'complete', xhr, statusText);\n        reject(new Error(statusText));\n      }; // ajax start 回调\n\n\n      trigger(ajaxEvents.ajaxStart, eventParams, 'beforeSend', xhr);\n\n      if (isCanceled) {\n        reject(new Error('cancel'));\n        return;\n      } // Timeout\n\n\n      if (timeout > 0) {\n        xhrTimeout = setTimeout(() => {\n          xhr.abort();\n        }, timeout);\n      } // 发送 XHR\n\n\n      xhr.send(data);\n    });\n  }\n\n  return XHR();\n}\n\nexport default ajax;","export default class {\n  /**\n   * 获取数据存储\n   * @param key\n   */\n  getStorage(key) {\n    return window.localStorage.getItem(key);\n  }\n  /**\n   * 设置数据存储\n   * @param key\n   * @param data\n   */\n\n\n  setStorage(key, data) {\n    window.localStorage.setItem(key, data);\n  }\n  /**\n   * 删除数据存储\n   * @param key\n   */\n\n\n  removeStorage(key) {\n    window.localStorage.removeItem(key);\n  }\n\n}","import ajax from 'mdui.jq/es/functions/ajax';\nimport extend from 'mdui.jq/es/functions/extend';\nimport globalOptions from '../defaults';\nimport { GET } from '../util/requestMethod';\nimport BrowserAbstract from './abstract/Browser';\n/**\n * 浏览器适配器，使用 mdui.jq 中的 ajax 函数实现\n */\n\nexport default class extends BrowserAbstract {\n  request(options) {\n    const isFormData = options.data instanceof FormData;\n    let headers = {\n      token: this.getStorage('token') || undefined\n    };\n\n    if (options.headers) {\n      headers = extend({}, headers, options.headers);\n    }\n\n    return new Promise((resolve, reject) => {\n      ajax({\n        method: options.method || GET,\n        url: `${globalOptions.apiPath}${options.url || ''}`,\n        data: isFormData ? options.data : JSON.stringify(options.data),\n        headers,\n        dataType: 'json',\n        contentType: isFormData ? false : 'application/json',\n        timeout: globalOptions.timeout,\n        global: false,\n        beforeSend: () => {\n          globalOptions.beforeSend && globalOptions.beforeSend();\n        },\n        success: data => {\n          globalOptions.success && globalOptions.success(data);\n          data.code === 0 ? resolve(data) : reject(data);\n        },\n        error: (_, textStatus) => {\n          globalOptions.error && globalOptions.error(textStatus);\n          reject({\n            code: 999999,\n            message: textStatus\n          });\n        },\n        complete: () => {\n          globalOptions.complete && globalOptions.complete();\n        }\n      });\n    });\n  }\n\n}","/**\n * 设置 cookie，默认 15 天有效期\n * @param key\n * @param value\n * @param expire\n */\nexport function setCookie(key, value, expire = 15 * 24 * 3600) {\n  const date = new Date();\n  date.setTime(date.getTime() + expire * 1000);\n  document.cookie = `${key}=${value}; expires=${date.toUTCString()}; path=/`;\n}\n/**\n * 删除 cookie\n * @param key\n */\n\nexport function removeCookie(key) {\n  setCookie(key, '', -1);\n}","import '~/vendor/mdui';\nimport SDKConfig from 'mdclub-sdk-js/es/defaults';\nimport SDKAdapter from 'mdclub-sdk-js/es/adapter/BrowserAdapter';\nimport { isIE } from 'mdui.jq/es/utils';\nimport { setCookie } from '~/utils/cookie';\nimport './index.less'; // 设置 mdclub-sdk-js\n\nSDKConfig.apiPath = window.G_API;\nSDKConfig.adapter = new SDKAdapter();\n\nSDKConfig.error = () => {}; // 把 token 写入 cookie\n\n\nconst token = SDKConfig.adapter.getStorage('token');\n\nif (token) {\n  setCookie('token', token);\n} // 处理未 catch 的 Promise\n// 原生 Promise，promise-polyfill 需要使用 Promise._unhandledRejectionFn。\n// 兼容性不好，目前在每个 promise 中写 catch\n\n/* window.addEventListener('unhandledrejection', function (event) {\n  event.preventDefault();\n}); */\n// 控制台安全提示\n\n\nif (window.top === window && window.console && !isIE()) {\n  setTimeout(() => {\n    window.console.log('%c%s', 'color: red; background: yellow; font-size: 24px;', '警告！');\n    window.console.log('%c%s', 'color: black; font-size: 18px;', `使用此控制台可能会让攻击者利用 Self-XSS（自跨站脚本）攻击来冒充你，并窃取你的信息。\n请勿输入或粘贴你不明白的代码。`);\n  });\n}","import { getRequest, postRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL } from './util/requestHandler';\n/**\n * 🔐删除话题\n *\n * 删除话题。  只要没有错误异常，无论是否有话题被删除，该接口都会返回成功。\n */\n\nexport const del = params => deleteRequest(buildURL('/topics/{topic_id}', params));\n/**\n * 🔑关注指定话题\n *\n * 关注指定话题。\n */\n\nexport const addFollow = params => postRequest(buildURL('/topics/{topic_id}/followers', params));\n/**\n * 🔐发布话题\n *\n * 发布话题。\n */\n\nexport const create = params => {\n  const formData = new FormData();\n  formData.append('name', params.name);\n  formData.append('description', params.description);\n  formData.append('cover', params.cover);\n  return postRequest(buildURL('/topics', params, ['include']), formData);\n};\n/**\n * 🔑取消关注指定话题\n *\n * 取消关注指定话题。\n */\n\nexport const deleteFollow = params => deleteRequest(buildURL('/topics/{topic_id}/followers', params));\n/**\n * 🔐批量删除话题\n *\n * 批量删除话题。  只要没有错误异常，无论是否有话题被删除，该接口都会返回成功。\n */\n\nexport const deleteMultiple = params => deleteRequest(buildURL('/topics/{topic_ids}', params));\n/**\n * 获取指定话题信息\n *\n * 获取指定话题信息。\n */\n\nexport const get = params => getRequest(buildURL('/topics/{topic_id}', params, ['include']));\n/**\n * 获取指定话题下的文章\n *\n * 获取指定话题下的文章。\n */\n\nexport const getArticles = params => getRequest(buildURL('/topics/{topic_id}/articles', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定话题的关注者\n *\n * 不含已禁用的用户。\n */\n\nexport const getFollowers = params => getRequest(buildURL('/topics/{topic_id}/followers', params, ['page', 'per_page', 'include']));\n/**\n * 获取全部话题\n *\n * 获取全部话题。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/topics', params, ['page', 'per_page', 'include', 'order', 'topic_id', 'name', 'trashed']));\n/**\n * 获取指定话题下的提问\n *\n * 获取指定话题下的提问。\n */\n\nexport const getQuestions = params => getRequest(buildURL('/topics/{topic_id}/questions', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 🔐把话题放入回收站\n *\n * 把话题放入回收站。\n */\n\nexport const trash = params => postRequest(buildURL('/topics/{topic_id}/trash', params, ['include']));\n/**\n * 🔐批量把话题放入回收站\n *\n * 批量把话题放入回收站。\n */\n\nexport const trashMultiple = params => postRequest(buildURL('/topics/{topic_ids}/trash', params, ['include']));\n/**\n * 🔐把话题移出回收站\n *\n * 把话题移出回收站。\n */\n\nexport const untrash = params => postRequest(buildURL('/topics/{topic_id}/untrash', params, ['include']));\n/**\n * 🔐批量把话题移出回收站\n *\n * 批量把话题移出回收站。\n */\n\nexport const untrashMultiple = params => postRequest(buildURL('/topics/{topic_ids}/untrash', params, ['include']));\n/**\n * 🔐更新话题信息\n *\n * 更新话题信息。  因为 formData 类型的数据只能通过 post 请求提交，所以这里不用 patch 请求\n */\n\nexport const update = params => {\n  const formData = new FormData();\n  formData.append('topic_id', params.topic_id.toString());\n  params.name && formData.append('name', params.name);\n  params.description && formData.append('description', params.description);\n  params.cover && formData.append('cover', params.cover);\n  return postRequest(buildURL('/topics/{topic_id}', params, ['include']), formData);\n};","import { getRequest, postRequest, patchRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL, buildRequestBody } from './util/requestHandler';\n/**\n * 🔑删除提问\n *\n * 只要没有错误异常，无论是否有回答被删除，该接口都会返回成功。  管理员可删除提问。提问作者是否可删除提问，由管理员在后台的设置决定。\n */\n\nexport const del = params => deleteRequest(buildURL('/questions/{question_id}', params));\n/**\n * 🔑添加关注\n *\n * 添加关注。\n */\n\nexport const addFollow = params => postRequest(buildURL('/questions/{question_id}/followers', params));\n/**\n * 🔑为提问投票\n *\n * 为提问投票。\n */\n\nexport const addVote = params => postRequest(buildURL('/questions/{question_id}/voters', params), buildRequestBody(params, ['type']));\n/**\n * 🔑发表提问\n *\n * &#x60;content_markdown&#x60; 和 &#x60;content_rendered&#x60; 两个参数仅传入其中一个即可， 若两个参数都传入，则以 &#x60;content_markdown&#x60; 为准。\n */\n\nexport const create = params => postRequest(buildURL('/questions', params, ['include']), buildRequestBody(params, ['title', 'topic_ids', 'content_markdown', 'content_rendered']));\n/**\n * 🔑在指定提问下发表回答\n *\n * &#x60;content_markdown&#x60; 和 &#x60;content_rendered&#x60; 两个参数仅传入其中一个即可， 若两个参数都传入，则以 &#x60;content_markdown&#x60; 为准。\n */\n\nexport const createAnswer = params => postRequest(buildURL('/questions/{question_id}/answers', params, ['include']), buildRequestBody(params, ['content_markdown', 'content_rendered']));\n/**\n * 🔑在指定提问下发表评论\n *\n * 在指定提问下发表评论。\n */\n\nexport const createComment = params => postRequest(buildURL('/questions/{question_id}/comments', params, ['include']), buildRequestBody(params, ['content']));\n/**\n * 🔑取消关注\n *\n * 取消关注。\n */\n\nexport const deleteFollow = params => deleteRequest(buildURL('/questions/{question_id}/followers', params));\n/**\n * 🔐批量删除提问\n *\n * 批量删除提问。  只要没有错误异常，无论是否有提问被删除，该接口都会返回成功。\n */\n\nexport const deleteMultiple = params => deleteRequest(buildURL('/questions/{question_ids}', params));\n/**\n * 🔑取消为提问的投票\n *\n * 取消为提问的投票。\n */\n\nexport const deleteVote = params => deleteRequest(buildURL('/questions/{question_id}/voters', params));\n/**\n * 获取指定提问信息\n *\n * 获取指定提问信息。\n */\n\nexport const get = params => getRequest(buildURL('/questions/{question_id}', params, ['include']));\n/**\n * 获取指定提问下的回答\n *\n * 获取指定提问下的回答。\n */\n\nexport const getAnswers = params => getRequest(buildURL('/questions/{question_id}/answers', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定提问的评论\n *\n * 获取指定提问的评论。\n */\n\nexport const getComments = params => getRequest(buildURL('/questions/{question_id}/comments', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定提问的关注者\n *\n * 获取指定提问的关注者。\n */\n\nexport const getFollowers = params => getRequest(buildURL('/questions/{question_id}/followers', params, ['page', 'per_page', 'include']));\n/**\n * 获取提问列表\n *\n * 获取提问列表。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/questions', params, ['page', 'per_page', 'order', 'include', 'question_id', 'user_id', 'topic_id', 'trashed']));\n/**\n * 获取提问的投票者\n *\n * 获取提问的投票者。\n */\n\nexport const getVoters = params => getRequest(buildURL('/questions/{question_id}/voters', params, ['page', 'per_page', 'include', 'type']));\n/**\n * 🔐把提问放入回收站\n *\n * 把提问放入回收站。\n */\n\nexport const trash = params => postRequest(buildURL('/questions/{question_id}/trash', params, ['include']));\n/**\n * 🔐批量把提问放入回收站\n *\n * 批量把提问放入回收站。\n */\n\nexport const trashMultiple = params => postRequest(buildURL('/questions/{question_ids}/trash', params, ['include']));\n/**\n * 🔐把提问移出回收站\n *\n * 把提问移出回收站。\n */\n\nexport const untrash = params => postRequest(buildURL('/questions/{question_id}/untrash', params, ['include']));\n/**\n * 🔐批量把提问移出回收站\n *\n * 批量把提问移出回收站。\n */\n\nexport const untrashMultiple = params => postRequest(buildURL('/questions/{question_ids}/untrash', params, ['include']));\n/**\n * 🔑更新提问信息\n *\n * 管理员可修改提问。提问作者是否可修改提问，由管理员在后台的设置决定。  &#x60;content_markdown&#x60; 和 &#x60;content_rendered&#x60; 两个参数仅传入其中一个即可， 若两个参数都传入，则以 &#x60;content_markdown&#x60; 为准。\n */\n\nexport const update = params => patchRequest(buildURL('/questions/{question_id}', params, ['include']), buildRequestBody(params, ['title', 'topic_ids', 'content_markdown', 'content_rendered']));","import { getRequest, postRequest, patchRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL, buildRequestBody } from './util/requestHandler';\n/**\n * 🔑删除文章\n *\n * 只要没有错误异常，无论是否有文章被删除，该接口都会返回成功。  管理员可删除文章。文章作者是否可删除文章，由管理员在后台的设置决定。\n */\n\nexport const del = params => deleteRequest(buildURL('/articles/{article_id}', params));\n/**\n * 🔑添加关注\n *\n * 添加关注。\n */\n\nexport const addFollow = params => postRequest(buildURL('/articles/{article_id}/followers', params));\n/**\n * 🔑为文章投票\n *\n * 为文章投票。\n */\n\nexport const addVote = params => postRequest(buildURL('/articles/{article_id}/voters', params), buildRequestBody(params, ['type']));\n/**\n * 🔑发表文章\n *\n * &#x60;content_markdown&#x60; 和 &#x60;content_rendered&#x60; 两个参数仅传入其中一个即可， 若两个参数都传入，则以 &#x60;content_markdown&#x60; 为准。\n */\n\nexport const create = params => postRequest(buildURL('/articles', params, ['include']), buildRequestBody(params, ['title', 'topic_ids', 'content_markdown', 'content_rendered']));\n/**\n * 🔑在指定文章下发表评论\n *\n * 在指定文章下发表评论。\n */\n\nexport const createComment = params => postRequest(buildURL('/articles/{article_id}/comments', params, ['include']), buildRequestBody(params, ['content']));\n/**\n * 🔑取消关注\n *\n * 取消关注。\n */\n\nexport const deleteFollow = params => deleteRequest(buildURL('/articles/{article_id}/followers', params));\n/**\n * 🔐批量删除文章\n *\n * 批量删除文章。  只要没有错误异常，无论是否有文章被删除，该接口都会返回成功。\n */\n\nexport const deleteMultiple = params => deleteRequest(buildURL('/articles/{article_ids}', params));\n/**\n * 🔑取消为文章的投票\n *\n * 取消为文章的投票。\n */\n\nexport const deleteVote = params => deleteRequest(buildURL('/articles/{article_id}/voters', params));\n/**\n * 获取指定文章信息\n *\n * 获取指定文章信息。\n */\n\nexport const get = params => getRequest(buildURL('/articles/{article_id}', params, ['include']));\n/**\n * 获取指定文章的评论列表\n *\n * 获取指定文章的评论列表。\n */\n\nexport const getComments = params => getRequest(buildURL('/articles/{article_id}/comments', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取指定文章的关注者\n *\n * 获取指定文章的关注者。\n */\n\nexport const getFollowers = params => getRequest(buildURL('/articles/{article_id}/followers', params, ['page', 'per_page', 'include']));\n/**\n * 获取文章列表\n *\n * 获取文章列表。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/articles', params, ['page', 'per_page', 'order', 'include', 'article_id', 'user_id', 'topic_id', 'trashed']));\n/**\n * 获取文章的投票者\n *\n * 获取文章的投票者。\n */\n\nexport const getVoters = params => getRequest(buildURL('/articles/{article_id}/voters', params, ['page', 'per_page', 'include', 'type']));\n/**\n * 🔐把文章放入回收站\n *\n * 把文章放入回收站。\n */\n\nexport const trash = params => postRequest(buildURL('/articles/{article_id}/trash', params, ['include']));\n/**\n * 🔐批量把文章放入回收站\n *\n * 批量把文章放入回收站。\n */\n\nexport const trashMultiple = params => postRequest(buildURL('/articles/{article_ids}/trash', params, ['include']));\n/**\n * 🔐把文章移出回收站\n *\n * 把文章移出回收站。\n */\n\nexport const untrash = params => postRequest(buildURL('/articles/{article_id}/untrash', params, ['include']));\n/**\n * 🔐批量把文章移出回收站\n *\n * 批量把文章移出回收站。\n */\n\nexport const untrashMultiple = params => postRequest(buildURL('/articles/{article_ids}/untrash', params, ['include']));\n/**\n * 🔑更新文章信息\n *\n * 管理员可修改文章。文章作者是否可修改文章，由管理员在后台的设置决定。  &#x60;content_markdown&#x60; 和 &#x60;content_rendered&#x60; 两个参数仅传入其中一个即可， 若两个参数都传入，则以 &#x60;content_markdown&#x60; 为准。\n */\n\nexport const update = params => patchRequest(buildURL('/articles/{article_id}', params, ['include']), buildRequestBody(params, ['title', 'topic_ids', 'content_markdown', 'content_rendered']));","export default function currentUser() {\n  return window.app.user.getState().user;\n}","import extend from 'mdui.jq/es/functions/extend';\nimport { getList as getTopics } from 'mdclub-sdk-js/es/TopicApi';\nimport { getList as getQuestions } from 'mdclub-sdk-js/es/QuestionApi';\nimport { getList as getArticles } from 'mdclub-sdk-js/es/ArticleApi';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport commonActions from '~/utils/actionsAbstract';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nlet scroll_position;\nconst as = {\n  onCreate: () => (state, actions) => {\n    emit('route_update');\n    actions.setTitle('');\n\n    if (!state.topics_pagination) {\n      actions.loadData({\n        localParamName: 'G_INDEX_TOPICS',\n        func: getTopics,\n        fieldPrefix: 'topics',\n        include: ['is_following'],\n        order: '-follower_count',\n        per_page: 12\n      });\n    }\n\n    const include = ['user', 'topics', 'is_following'];\n\n    if (!state.questions_recent_pagination) {\n      actions.loadData({\n        localParamName: 'G_INDEX_QUESTIONS_RECENT',\n        func: getQuestions,\n        fieldPrefix: 'questions_recent',\n        include,\n        order: '-update_time',\n        per_page: 5\n      });\n    }\n\n    if (!state.questions_popular_pagination) {\n      actions.loadData({\n        localParamName: 'G_INDEX_QUESTIONS_POPULAR',\n        func: getQuestions,\n        fieldPrefix: 'questions_popular',\n        include,\n        order: '-answer_count',\n        per_page: 5\n      });\n    }\n\n    if (!state.articles_recent_pagination) {\n      actions.loadData({\n        localParamName: 'G_INDEX_ARTICLES_RECENT',\n        func: getArticles,\n        fieldPrefix: 'articles_recent',\n        include,\n        order: '-create_time',\n        per_page: 5\n      });\n    }\n\n    if (!state.articles_popular_pagination) {\n      actions.loadData({\n        localParamName: 'G_INDEX_ARTICLES_POPULAR',\n        func: getArticles,\n        fieldPrefix: 'articles_popular',\n        include,\n        order: '-vote_count',\n        per_page: 5\n      });\n    } // 恢复滚动条位置\n\n\n    if (scroll_position) {\n      window.scrollTo(0, scroll_position);\n      scroll_position = 0;\n    }\n  },\n  onDestroy: () => {},\n\n  /**\n   * 加载话题列表、提问列表、和文章列表\n   */\n  loadData: ({\n    localParamName,\n    func,\n    fieldPrefix,\n    include,\n    order,\n    per_page\n  }) => (state, actions) => {\n    const loadFromPage = () => {\n      const response = window[localParamName];\n\n      if (response) {\n        actions.setState({\n          [`${fieldPrefix}_data`]: response.data,\n          [`${fieldPrefix}_pagination`]: response.pagination\n        });\n        window[localParamName] = null;\n      }\n\n      return response;\n    };\n\n    const loadFromServer = () => {\n      actions.setState({\n        [`${fieldPrefix}_loading`]: true\n      });\n      func({\n        include,\n        order,\n        per_page\n      }).finally(() => {\n        actions.setState({\n          [`${fieldPrefix}_loading`]: false\n        });\n      }).then(({\n        data,\n        pagination\n      }) => {\n        actions.setState({\n          [`${fieldPrefix}_data`]: data,\n          [`${fieldPrefix}_pagination`]: pagination\n        });\n      }).catch(apiCatch);\n    };\n\n    if (loadFromPage()) {\n      return;\n    }\n\n    loadFromServer();\n  },\n  afterItemClick: item => {\n    scroll_position = window.pageYOffset;\n\n    if (!isUndefined(item.topic_id)) {\n      window.G_TOPIC = item;\n    } else if (!isUndefined(item.question_id)) {\n      window.G_QUESTION = item;\n    } else if (!isUndefined(item.article_id)) {\n      window.G_ARTICLE = item;\n    }\n  }\n};\nexport default extend(as, commonActions, userPopoverActions);","import { addFollow as addFollowUser, deleteFollow as deleteFollowUser } from 'mdclub-sdk-js/es/UserApi';\nimport { addFollow as addFollowTopic, deleteFollow as deleteFollowTopic } from 'mdclub-sdk-js/es/TopicApi';\nimport { addFollow as addFollowArticle, deleteFollow as deleteFollowArticle } from 'mdclub-sdk-js/es/ArticleApi';\nimport { addFollow as addFollowQuestion, deleteFollow as deleteFollowQuestion } from 'mdclub-sdk-js/es/QuestionApi';\nimport currentUser from '~/utils/currentUser';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\n\nconst getAddFollowFunction = type => {\n  if (!type.indexOf('question')) {\n    return addFollowQuestion;\n  }\n\n  if (!type.indexOf('user')) {\n    return addFollowUser;\n  }\n\n  if (!type.indexOf('topic') || type === 'index_topics') {\n    return addFollowTopic;\n  }\n\n  return addFollowArticle;\n};\n\nconst getDeleteFollowFunction = type => {\n  if (!type.indexOf('question')) {\n    return deleteFollowQuestion;\n  }\n\n  if (!type.indexOf('user')) {\n    return deleteFollowUser;\n  }\n\n  if (!type.indexOf('topic') || type === 'index_topics') {\n    return deleteFollowTopic;\n  }\n\n  return deleteFollowArticle;\n};\n/**\n * article, question, user, topic 切换关注状态\n * @param type\n * @param state\n * @param actions\n */\n\n\nconst toggleOne = (type, state, actions) => {\n  const field = type === 'user' ? 'interviewee' : type;\n  const field_id = `${type}_id`;\n  const following_field = `following_${field}`;\n  const {\n    [field]: data,\n    [following_field]: following\n  } = state;\n\n  if (following) {\n    return;\n  }\n\n  actions.setState({\n    [following_field]: true\n  }); // 修改显示的关注状态\n\n  const changeFollow = () => {\n    data.relationships.is_following = !data.relationships.is_following;\n    actions.setState({\n      [field]: data\n    });\n  }; // 不等 ajax 的响应，先修改显示状态\n\n\n  changeFollow();\n  const followParams = {\n    [field_id]: data[field_id]\n  };\n  const func = data.relationships.is_following ? getAddFollowFunction(type) : getDeleteFollowFunction(type);\n  const promise = func(followParams);\n  promise.finally(() => actions.setState({\n    [following_field]: false\n  })).then(response => {\n    emit(`${type}s_follow_updated`);\n    data.follower_count = response.data.follower_count;\n    actions.setState({\n      [field]: data\n    });\n  }).catch(response => {\n    apiCatch(response); // 关注出错后，还原关注状态\n\n    changeFollow();\n  });\n};\n/**\n * users, topics, users_dialog, index_topics 切换关注状态\n * @param type\n * @param id\n * @param state\n * @param actions\n */\n\n\nconst toggleInList = (type, id, state, actions) => {\n  const fieldsMap = {\n    users: () => [`${state.tabs[state.tabIndex]}_data`, 'user', 'user_id'],\n    topics: () => [`${state.tabs[state.tabIndex]}_data`, 'topic', 'topic_id'],\n    users_dialog: () => ['data', 'user', 'user_id'],\n    index_topics: () => ['topics_data', 'topic', 'topic_id']\n  };\n  const [dataField, field, fieldId] = fieldsMap[type]();\n  const data = state[dataField];\n  data.forEach((item, index) => {\n    if (item[fieldId] !== id) {\n      return;\n    }\n\n    const changeFollow = () => {\n      data[index].relationships.is_following = !item.relationships.is_following;\n      actions.setState({\n        [dataField]: data\n      });\n    };\n\n    changeFollow();\n\n    const toggleFollow = () => {\n      const func = item.relationships.is_following ? getAddFollowFunction(type) : getDeleteFollowFunction(type);\n      return func({\n        [fieldId]: id\n      });\n    };\n\n    toggleFollow().then(() => {\n      emit(`${field}s_follow_updated`);\n    }).catch(response => {\n      apiCatch(response);\n      changeFollow();\n    });\n  });\n};\n/**\n * 在 user-popover 中切换对用户的关注状态，用于列表\n * @param primaryKey 提问ID或文章ID或评论ID的字段名\n * @param id 提问ID或文章ID或评论ID\n * @param dataName 数据列表的参数名\n * @param actions\n */\n\n\nconst toggleUserInRelationshipsInList = (primaryKey, id, dataName, actions) => {\n  let state; // 评论列表\n\n  if (dataName === 'comments_data') {\n    state = window.app.comments.getState();\n    actions = window.app.comments;\n  } else {\n    state = actions.getState();\n  }\n\n  const data = state[dataName];\n  data.forEach((item, index) => {\n    if (item[primaryKey] !== id) {\n      return;\n    }\n\n    const changeFollow = () => {\n      const isFollowing = item.relationships.user.relationships.is_following;\n      data[index].relationships.user.relationships.is_following = !isFollowing;\n      actions.setState({\n        [dataName]: data\n      });\n    };\n\n    changeFollow();\n\n    const toggleFollow = () => {\n      const func = item.relationships.user.relationships.is_following ? addFollowUser : deleteFollowUser;\n      return func({\n        user_id: item.user_id\n      });\n    };\n\n    toggleFollow().then(() => {\n      emit('users_follow_updated');\n    }).catch(response => {\n      apiCatch(response);\n      changeFollow();\n    });\n  });\n};\n/**\n * 在 user-popover 中切换对用户的关注状态，用于文章和提问详情\n * @param primaryKey\n * @param dataName\n * @param actions\n */\n\n\nconst toggleUserInRelationships = (primaryKey, dataName, actions) => {\n  const state = actions.getState();\n  const data = state[dataName];\n\n  const changeFollow = () => {\n    data.relationships.user.relationships.is_following = !data.relationships.user.relationships.is_following;\n    actions.setState({\n      [dataName]: data\n    });\n  };\n\n  changeFollow();\n  const func = data.relationships.user.relationships.is_following ? addFollowUser : deleteFollowUser;\n  func({\n    user_id: data.user_id\n  }).then(() => {\n    emit('users_follow_updated');\n  }).catch(response => {\n    apiCatch(response);\n    changeFollow();\n  });\n};\n/**\n * 在需要用到关注的页面中，引入该 actions\n */\n\n\nexport default {\n  /**\n   * @param type article, question, user, users, topic, topics, users_dialog, index_topics, relationships-user\n   * @param dataName 仅 relationships-user 中需要传入该参数\n   * @param primaryKey 仅 relationships-user 需要传入该参数，表示提问ID或文章ID或评论ID的字段名\n   * @param id 仅 users, topics, relationships-user 中需要传入该参数\n   */\n  toggleFollow: ({\n    type,\n    dataName = null,\n    primaryKey = null,\n    id = null\n  }) => (state, actions) => {\n    if (!currentUser()) {\n      emit('login_open');\n      return;\n    } // 文章、提问、用户、话题详情页\n\n\n    if (['article', 'question', 'user', 'topic'].indexOf(type) > -1) {\n      toggleOne(type, state, actions);\n      return;\n    } // 用户、话题列表页，及 users_dialog 组件中\n\n\n    if (['users', 'topics', 'index_topics', 'users_dialog'].indexOf(type) > -1) {\n      toggleInList(type, id, state, actions);\n      return;\n    } // 在 user-popover 中，且对用户的关注状态\n\n\n    if (['relationships-user'].indexOf(type) > -1) {\n      if (dataName === 'article' || dataName === 'question') {\n        toggleUserInRelationships(primaryKey, dataName, actions);\n      } else {\n        toggleUserInRelationshipsInList(primaryKey, id, dataName, actions);\n      }\n    }\n  }\n};","import $ from 'mdui.jq';\nimport extend from 'mdui.jq/es/functions/extend';\nimport followActions from '~/components/follow/actions';\nconst $title = $('title');\n/**\n * 所有 actions 通用\n */\n\nconst as = {\n  /**\n   * 设置状态\n   */\n  setState: value => value,\n\n  /**\n   * 获取状态\n   */\n  getState: () => state => state,\n\n  /**\n   * 设置网页 title\n   */\n  setTitle: title => {\n    const metaTitle = title ? `${title} - ${window.G_OPTIONS.site_name}` : window.G_OPTIONS.site_name + (window.G_OPTIONS.site_description ? ` - ${window.G_OPTIONS.site_description}` : '');\n    $title.text(metaTitle);\n  }\n};\nexport default extend(as, followActions);","import $ from 'mdui.jq';\nimport currentUser from '~/utils/currentUser';\nimport { emit } from '~/utils/pubsub';\n/**\n * 在需要用到编辑器的页面中，引入该 actions\n */\n\nexport default {\n  /**\n   * 打开编辑器\n   */\n  editorOpen: () => (state, actions) => {\n    if (!currentUser()) {\n      emit('login_open');\n      return;\n    } // 读取 localStorage 中保存的话题\n\n\n    try {\n      const selected = JSON.parse(window.localStorage.getItem(`${state.auto_save_key}-topics`));\n\n      if (selected) {\n        actions.setState({\n          editor_selected_topics: selected,\n          editor_selected_topic_ids: selected.map(topic => topic.topic_id)\n        });\n      } // eslint-disable-next-line no-empty\n\n    } catch (err) {}\n\n    actions.setState({\n      editor_open: true\n    });\n    actions.editorUpdateOverlay();\n  },\n\n  /**\n   * 关闭编辑器\n   */\n  editorClose: () => (_, actions) => {\n    actions.setState({\n      editor_open: false\n    });\n    actions.editorUpdateOverlay();\n  },\n\n  /**\n   * 最小化编辑器\n   */\n  editorMinimize: () => (state, actions) => {\n    actions.setState({\n      editor_minimize: !state.editor_minimize\n    });\n    actions.editorUpdateOverlay();\n  },\n\n  /**\n   * 最大化编辑器\n   */\n  editorMaximize: () => (state, actions) => {\n    actions.setState({\n      editor_minimize: false,\n      editor_maximize: !state.editor_maximize\n    });\n    actions.editorUpdateOverlay();\n  },\n\n  /**\n   * 全屏显示编辑器时，需要显示遮罩，否则隐藏遮罩\n   */\n  editorUpdateOverlay: () => (_, actions) => {\n    const state = actions.getState();\n\n    if (state.editor_open && state.editor_maximize && !state.editor_minimize) {\n      $.showOverlay();\n    } else {\n      $.hideOverlay();\n    }\n  }\n};","import mdui from 'mdui';\nimport { getList } from 'mdclub-sdk-js/es/TopicApi';\nimport each from 'mdui.jq/es/functions/each';\nimport apiCatch from '~/utils/errorHandler';\n/**\n * 在含编辑器，且编辑器中含话题选择器的页面中，引入该 actions\n */\n\nexport default {\n  /**\n   * 打开对话框\n   */\n  topicSelectorOpen: () => (state, actions) => {\n    const dialog = new mdui.Dialog('.mc-topic-selector', {\n      history: false\n    });\n    const $content = dialog.$element.find('.mdui-dialog-content');\n    actions.setState({\n      topics_data: [],\n      topics_pagination: null,\n      topics_loading: true\n    });\n    dialog.open();\n\n    const loaded = promise => {\n      promise.finally(() => {\n        actions.setState({\n          topics_loading: false\n        });\n      }).then(({\n        data,\n        pagination\n      }) => {\n        actions.setState({\n          topics_data: actions.getState().topics_data.concat(data),\n          topics_pagination: pagination\n        });\n      }).catch(apiCatch);\n    };\n\n    const infiniteLoad = () => {\n      if (actions.getState().topics_loading) {\n        return;\n      }\n\n      const {\n        topics_pagination\n      } = actions.getState();\n\n      if (!topics_pagination) {\n        return;\n      }\n\n      if (topics_pagination.page >= topics_pagination.pages) {\n        return;\n      }\n\n      if ($content[0].scrollHeight - $content[0].scrollTop - $content[0].offsetHeight > 100) {\n        return;\n      }\n\n      actions.setState({\n        topics_loading: true\n      });\n      loaded(getList({\n        page: topics_pagination.page + 1,\n        order: '-follower_count'\n      }));\n    };\n\n    loaded(getList({\n      order: '-follower_count'\n    }));\n    $content.on('scroll', infiniteLoad);\n    dialog.$element.on('close.mdui.dialog', () => {\n      $content.off('scroll', infiniteLoad);\n    });\n  },\n\n  /**\n   * 点击话题\n   */\n  topicSelectorChange: ({\n    event,\n    dataIndex\n  }) => (state, actions) => {\n    const isChecked = event.target.checked;\n    const {\n      topics_data,\n      editor_selected_topics,\n      topics_max_selectable\n    } = state;\n\n    if (isChecked && editor_selected_topics.length >= topics_max_selectable) {\n      mdui.snackbar(`最多只能选择 ${topics_max_selectable} 个话题`);\n      return;\n    }\n\n    if (isChecked) {\n      const selectedTopicsResult = editor_selected_topics.concat([topics_data[dataIndex]]);\n      actions.setState({\n        editor_selected_topics: selectedTopicsResult,\n        editor_selected_topic_ids: selectedTopicsResult.map(topic => topic.topic_id)\n      });\n    } else {\n      const dataIndexToSelectedIndex = (index, data, selected) => {\n        const {\n          topic_id\n        } = data[index];\n        let result;\n        each(selected, (resultIndex, topic) => {\n          if (topic.topic_id === topic_id) {\n            result = resultIndex;\n            return false;\n          }\n\n          return true;\n        });\n        return result;\n      };\n\n      const selectedIndex = dataIndexToSelectedIndex(dataIndex, topics_data, editor_selected_topics);\n      editor_selected_topics.splice(selectedIndex, 1);\n      actions.setState({\n        editor_selected_topics,\n        editor_selected_topic_ids: editor_selected_topics.map(topic => topic.topic_id)\n      });\n    }\n\n    actions.saveToLocalStorage();\n  },\n\n  /**\n   * 移除选中的话题\n   */\n  topicSelectorRemoveOne: selectedIndex => (state, actions) => {\n    const {\n      editor_selected_topics: selected\n    } = state;\n    selected.splice(selectedIndex, 1);\n    actions.setState({\n      editor_selected_topics: selected,\n      editor_selected_topic_ids: selected.map(topic => topic.topic_id)\n    });\n    actions.saveToLocalStorage();\n  },\n\n  /**\n   * 话题有变动后，保存到 localStorage\n   */\n  saveToLocalStorage: () => state => {\n    window.localStorage.setItem(`${state.auto_save_key}-topics`, JSON.stringify(state.editor_selected_topics));\n  }\n};","/**\n * 在需要用到编辑器的页面中，引入该 state\n */\nexport default {\n  // 是否打开编辑器\n  editor_open: false,\n  // 是否最大化编辑器\n  editor_maximize: false,\n  // 是否最小化编辑器\n  editor_minimize: false,\n  // 编辑器中已选中的话题\n  editor_selected_topics: [],\n  // 已选中的话题ID数组\n  editor_selected_topic_ids: []\n};","/**\n * 在含编辑器，且编辑器中含话题选择器的页面中，引入该 state\n */\nexport default {\n  // 加载的话题数据\n  topics_data: [],\n  // 分页\n  topics_pagination: null,\n  // 是否加载中\n  topics_loading: false,\n  // 最多可选 10 个\n  topics_max_selectable: 10\n};","import extend from 'mdui.jq/es/functions/extend';\nimport editorState from '~/components/editor/state';\nimport topicSelectorState from '~/components/editor/components/topic-selector/state';\nexport const tabs = ['recent', 'popular', 'following'];\nconst state = {\n  // 当前所处的选项卡\n  current_tab: '',\n  // 是否正在发表提问\n  publishing: false,\n  // 选项卡数组\n  tabs,\n  // 最后访问的提问ID\n  last_visit_id: 0,\n  // 自动保存草稿的键名前缀\n  auto_save_key: 'page-questions'\n};\ntabs.forEach(tabName => {\n  state[`${tabName}_data`] = [];\n  state[`${tabName}_pagination`] = null; // 为 null 表示未加载初始数据\n\n  state[`${tabName}_loading`] = false;\n});\nexport default extend(state, editorState, topicSelectorState);","/**\n * 为链接补充前缀\n * @param url\n */\nfunction fullPath(url) {\n  // @ts-ignore\n  return window.G_ROOT + url;\n}\n\nfunction matchString(url) {\n  return window.location.pathname === fullPath(url);\n}\n\nfunction matchRegular(regular) {\n  const path = window.location.pathname.substr(window.G_ROOT.length);\n  return regular.test(path);\n}\n\nfunction isPathIndex() {\n  return matchString('/');\n}\n\nfunction isPathArticle() {\n  return matchRegular(/^\\/articles\\/\\d+$/);\n}\n\nfunction isPathArticles() {\n  return matchString('/articles');\n}\n\nfunction isPathQuestion() {\n  return matchRegular(/^\\/questions\\/\\d+$/);\n}\n\nfunction isPathQuestions() {\n  return matchString('/questions');\n}\n\nfunction isPathTopic() {\n  return matchRegular(/^\\/topics\\/\\d+$/);\n}\n\nfunction isPathTopics() {\n  return matchString('/topics');\n}\n\nfunction isPathUser() {\n  return matchRegular(/^\\/users\\/\\d+$/);\n}\n\nfunction isPathUsers() {\n  return matchString('/users');\n}\n\nfunction isPathInbox() {\n  return matchString('/inbox');\n}\n\nfunction isPathNotifications() {\n  return matchString('/notifications');\n}\n\nexport { fullPath, isPathIndex, isPathArticle, isPathArticles, isPathQuestion, isPathQuestions, isPathTopic, isPathTopics, isPathUser, isPathUsers, isPathInbox, isPathNotifications };","import timestamp from 'time-stamp';\n/**\n * 把时间戳格式化\n * @param ts\n * @param format\n */\n\nexport function timeFormat(ts, format = 'YYYY-MM-DD HH:mm:ss') {\n  const date = new Date(ts * 1000);\n  return timestamp(format, date);\n}\n/**\n * 把时间转换为用户友好的显示方式\n * @param ts\n */\n\nexport function timeFriendly(ts) {\n  // 时间对象\n  const date = new Date(ts * 1000); // 当前时间戳\n\n  const currentTS = Date.parse(new Date().toString()) / 1000; // 时间差\n\n  const timeDifference = currentTS - ts;\n\n  if (timeDifference < 1) {\n    return '刚刚';\n  }\n\n  if (timeDifference < 60) {\n    return `${timeDifference} 秒前`;\n  }\n\n  if (timeDifference < 3600) {\n    return `${parseInt(String(timeDifference / 60), 10)} 分钟前`;\n  } // 今天 0 点时间戳\n\n\n  const todayTS = Date.parse(new Date(new Date().setHours(0, 0, 0, 0)).toString()) / 1000;\n\n  if (ts > todayTS) {\n    return `今天 ${timestamp('HH:mm', date)}`;\n  } // 今年 0 点时间戳\n\n\n  const yearTS = Date.parse(new Date(`${new Date().getFullYear()}/01/01 00:00:00`).toString()) / 1000;\n\n  if (ts > yearTS) {\n    return timestamp('MM-DD HH:mm', date);\n  }\n\n  return timestamp('YYYY-MM-DD', date);\n}\n/**\n * 获取当前时间戳\n */\n\nexport function currentTimestamp() {\n  return Date.parse(new Date().toString()) / 1000;\n}","import { location } from 'hyperapp-router';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { getList, create as createQuestion } from 'mdclub-sdk-js/es/QuestionApi';\nimport { getMyFollowingQuestions } from 'mdclub-sdk-js/es/UserApi';\nimport { COMMON_FIELD_VERIFY_FAILED } from 'mdclub-sdk-js/es/errors';\nimport commonActions from '~/utils/actionsAbstract';\nimport editorActions from '~/components/editor/actions';\nimport topicSelectorActions from '~/components/editor/components/topic-selector/actions';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport { emit } from '~/utils/pubsub';\nimport { tabs } from './state';\nimport { fullPath } from '~/utils/path';\nimport apiCatch from '~/utils/errorHandler';\nimport { currentTimestamp } from '~/utils/time';\nconst TABNAME_RECENT = 'recent';\nconst TABNAME_POPULAR = 'popular';\nconst TABNAME_FOLLOWING = 'following';\nlet tab;\nlet tabIndex = tabs.indexOf(TABNAME_RECENT);\nlet scroll_position;\nconst is_updated = {\n  [TABNAME_RECENT]: false,\n  // 最近更新列表是否有更新\n  [TABNAME_POPULAR]: false,\n  // 最近热门列表是否有更新\n  [TABNAME_FOLLOWING]: false // 我关注的列表是否有更新\n\n}; // 上次更新的时间，若当前时间距离上次更新时间超过一定范围，则重新加载列表\n\nconst last_update_time = {\n  [TABNAME_RECENT]: 0,\n  [TABNAME_POPULAR]: 0,\n  [TABNAME_FOLLOWING]: 0\n};\nconst include = ['user', 'topics', 'is_following'];\nconst per_page = 20;\n\nconst getQuestions = (tabName, page) => {\n  if (tabName === TABNAME_RECENT) {\n    return getList({\n      page,\n      include,\n      per_page,\n      order: '-update_time'\n    });\n  }\n\n  if (tabName === TABNAME_POPULAR) {\n    return getList({\n      page,\n      include,\n      per_page,\n      order: '-vote_count'\n    });\n  }\n\n  return getMyFollowingQuestions({\n    page,\n    include,\n    per_page\n  });\n};\n\nconst as = {\n  /**\n   * 初始化\n   */\n  onCreate: () => (_, actions) => {\n    emit('route_update');\n    tab = new mdui.Tab('.mc-tab');\n    tabIndex = tab.activeIndex;\n    tab.$element.on('change.mdui.tab', () => {\n      tabIndex = tab.activeIndex;\n      window.scrollTo(0, 0);\n      window.history.replaceState({}, '', `#${tabs[tabIndex]}`);\n      actions.afterChangeTab();\n    });\n    actions.afterChangeTab(); // 恢复滚动条位置\n\n    if (scroll_position) {\n      window.scrollTo(0, scroll_position);\n      scroll_position = 0;\n    } // 绑定加载更多\n\n\n    $window.on('scroll', actions.infiniteLoad);\n  },\n  onDestroy: () => (_, actions) => {\n    $window.off('scroll', actions.infiniteLoad);\n  },\n\n  /**\n   * 切换 Tab 之后\n   */\n  afterChangeTab: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n    const TAB_NAME = tabName.toUpperCase();\n\n    if (tabName === TABNAME_RECENT) {\n      actions.setTitle('最新提问');\n    } else if (tabName === TABNAME_POPULAR) {\n      actions.setTitle('近期热门提问');\n    } else {\n      actions.setTitle('我关注的提问');\n    }\n\n    actions.setState({\n      current_tab: tabName\n    });\n\n    if (!is_updated[tabs[tabIndex]] && state[`${tabName}_pagination`] && currentTimestamp() - last_update_time[tabs[tabIndex]] < 180) {\n      return;\n    }\n\n    is_updated[tabs[tabIndex]] = false;\n    last_update_time[tabs[tabIndex]] = currentTimestamp(); // 从页面中加载初始数据\n\n    if (window[`G_QUESTIONS_${TAB_NAME}`]) {\n      actions.setState({\n        [`${tabName}_data`]: window[`G_QUESTIONS_${TAB_NAME}`].data,\n        [`${tabName}_pagination`]: window[`G_QUESTIONS_${TAB_NAME}`].pagination\n      }); // 清空页面中的数据，下次需要从 ajax 加载\n\n      window[`G_QUESTIONS_${TAB_NAME}`] = null; // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n      return;\n    } // ajax 加载数据\n\n\n    actions.setState({\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null,\n      [`${tabName}_loading`]: true\n    });\n    getQuestions(tabName, 1).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: response.data,\n        [`${tabName}_pagination`]: response.pagination\n      }); // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 绑定下拉加载更多\n   */\n  infiniteLoad: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n\n    if (state[`${tabName}_loading`]) {\n      return;\n    }\n\n    const pagination = state[`${tabName}_pagination`];\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.setState({\n      [`${tabName}_loading`]: true\n    });\n    getQuestions(tabName, pagination.page + 1).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: state[`${tabName}_data`].concat(response.data),\n        [`${tabName}_pagination`]: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 切换到最近更新\n   */\n  toRecent: () => {\n    tab.show(tabs.indexOf(TABNAME_RECENT));\n  },\n\n  /**\n   * 切换到近期热门\n   */\n  toPopular: () => {\n    tab.show(tabs.indexOf(TABNAME_POPULAR));\n  },\n\n  /**\n   * 切换到我关注的\n   */\n  toFolliwing: () => {\n    tab.show(tabs.indexOf(TABNAME_FOLLOWING));\n  },\n\n  /**\n   * 在其他页面关注了问题后，需要调用该方法，以使下次切换到该页面时重新加载关注列表\n   */\n  followUpdate: () => {\n    is_updated[TABNAME_FOLLOWING] = true;\n  },\n\n  /**\n   * 问题信息更新后（发布回答、评论、关注），需要调用该方法\n   */\n  questionUpdate: question => (state, actions) => {\n    let questions = [];\n    tabs.forEach(tabName => {\n      questions = state[`${tabName}_data`];\n      let hasUpdate = false;\n      questions.forEach((_question, i) => {\n        if (question.question_id === _question.question_id) {\n          hasUpdate = true;\n          questions[i] = question;\n        }\n      });\n\n      if (hasUpdate) {\n        actions.setState({\n          [`${tabName}_data`]: questions\n        });\n      }\n    });\n  },\n\n  /**\n   * 发布提问\n   */\n  publish: ({\n    title,\n    content\n  }) => (state, actions) => {\n    const {\n      editor_selected_topic_ids: topic_ids,\n      auto_save_key\n    } = state;\n\n    if (!title) {\n      mdui.snackbar('请输入标题');\n      return;\n    }\n\n    if (!topic_ids.length) {\n      mdui.snackbar('请选择话题');\n      return;\n    }\n\n    if (!content || content === '<p><br></p>') {\n      mdui.snackbar('请输入正文');\n      return;\n    }\n\n    actions.setState({\n      publishing: true\n    });\n    createQuestion({\n      title,\n      topic_ids,\n      content_rendered: content,\n      include\n    }).finally(() => {\n      actions.setState({\n        publishing: false\n      });\n    }).then(response => {\n      is_updated[TABNAME_RECENT] = true;\n      is_updated[TABNAME_POPULAR] = true;\n      is_updated[TABNAME_FOLLOWING] = true; // 清空草稿和编辑器内容\n\n      window.localStorage.removeItem(`${auto_save_key}-title`);\n      window.localStorage.removeItem(`${auto_save_key}-topics`);\n      window.localStorage.removeItem(`${auto_save_key}-content`);\n      actions.setState({\n        editor_selected_topics: [],\n        editor_selected_topic_ids: []\n      });\n      actions.editorClose(); // 到提问详情页\n\n      window.G_QUESTION = response.data;\n      location.actions.go(fullPath(`/questions/${response.data.question_id}`));\n    }).catch(response => {\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        mdui.snackbar(Object.values(response.errors)[0]);\n        return;\n      }\n\n      apiCatch(response);\n    });\n  },\n\n  /**\n   * 点击链接后，保存最后访问的提问ID和提问详情\n   * @param question\n   */\n  afterItemClick: question => (_, actions) => {\n    window.G_QUESTION = question;\n    scroll_position = window.pageYOffset;\n    actions.setState({\n      last_visit_id: question.question_id\n    });\n  }\n};\nexport default extend(as, commonActions, editorActions, topicSelectorActions, userPopoverActions);","/**\n * 错误代码\n *\n * 错误码格式：ABBCCC\n * A：错误级别，1：系统级错误；2：服务级错误\n * B：模块编号\n * C：具体错误编号\n */\n\n/**\n * =================================================================== 系统级错误\n */\n\n/**\n * 服务器错误\n */\nexport const SYSTEM_ERROR = 100000;\n/**\n * 系统维护中\n */\n\nexport const SYSTEM_MAINTAIN = 100001;\n/**\n * IP 请求超过上限\n */\n\nexport const SYSTEM_IP_LIMIT = 100002;\n/**\n * 用户请求超过上限\n */\n\nexport const SYSTEM_USER_LIMIT = 100003;\n/**\n * 接口不存在\n */\n\nexport const SYSTEM_API_NOT_FOUND = 100004;\n/**\n * 该接口不支持此 HTTP METHOD\n */\n\nexport const SYSTEM_API_NOT_ALLOWED = 100005;\n/**\n * 请求参数的 json 格式错误\n */\n\nexport const SYSTEM_REQUEST_JSON_INVALID = 100006;\n/**\n * 系统安装失败\n */\n\nexport const SYSTEM_INSTALL_FAILED = 100007;\n/**\n * ===================================================== 通用服务错误，模块编号：0\n */\n\n/**\n * 字段验证失败\n */\n\nexport const COMMON_FIELD_VERIFY_FAILED = 200001;\n/**\n * 邮件发送失败\n */\n\nexport const COMMON_SEND_EMAIL_FAILED = 200002;\n/**\n * 邮件验证码已失效\n */\n\nexport const COMMON_EMAIL_VERIFY_EXPIRED = 200003;\n/**\n * 图片上传失败\n */\n\nexport const COMMON_IMAGE_UPLOAD_FAILED = 200004;\n/**\n * 指定图片不存在\n */\n\nexport const COMMON_IMAGE_NOT_FOUND = 200005;\n/**\n * 投票类型只能是 up、down 中的一个\n */\n\nexport const COMMON_VOTE_TYPE_ERROR = 200006;\n/**\n * ===================================================== 用户相关错误，模块编号：1\n */\n\n/**\n * 用户未登录\n */\n\nexport const USER_NEED_LOGIN = 201001;\n/**\n * 需要管理员权限\n */\n\nexport const USER_NEED_MANAGE_PERMISSION = 201002;\n/**\n * 指定用户不存在\n */\n\nexport const USER_NOT_FOUND = 201003;\n/**\n * 目标用户不存在\n */\n\nexport const USER_TARGET_NOT_FOUND = 201004;\n/**\n * 该用户已被禁用\n */\n\nexport const USER_DISABLED = 201005;\n/**\n * 账号或密码错误\n */\n\nexport const USER_PASSWORD_ERROR = 201006;\n/**\n * 头像上传失败\n */\n\nexport const USER_AVATAR_UPLOAD_FAILED = 201007;\n/**\n * 封面上传失败\n */\n\nexport const USER_COVER_UPLOAD_FAILED = 201008;\n/**\n * 不能关注你自己\n */\n\nexport const USER_CANT_FOLLOW_YOURSELF = 201009;\n/**\n * ===================================================== 提问相关错误，模块编号：2\n */\n\n/**\n * 指定提问不存在\n */\n\nexport const QUESTION_NOT_FOUND = 202001;\n/**\n * 提问发表后即无法编辑\n */\n\nexport const QUESTION_CANT_EDIT = 202002;\n/**\n * 仅提问作者可以编辑提问\n */\n\nexport const QUESTION_CANT_EDIT_NOT_AUTHOR = 202003;\n/**\n * 已超过可编辑的时间\n */\n\nexport const QUESTION_CANT_EDIT_TIMEOUT = 202004;\n/**\n * 该提问下已有回答，不允许编辑\n */\n\nexport const QUESTION_CANT_EDIT_HAS_ANSWER = 202005;\n/**\n * 该提问下已有评论，不允许编辑\n */\n\nexport const QUESTION_CANT_EDIT_HAS_COMMENT = 202006;\n/**\n * 提问发表后即无法删除\n */\n\nexport const QUESTION_CANT_DELETE = 202007;\n/**\n * 仅提问作者可以删除提问\n */\n\nexport const QUESTION_CANT_DELETE_NOT_AUTHOR = 202008;\n/**\n * 已超过可删除的时间\n */\n\nexport const QUESTION_CANT_DELETE_TIMEOUT = 202009;\n/**\n * 该提问下已有回答，不允许删除\n */\n\nexport const QUESTION_CANT_DELETE_HAS_ANSWER = 202010;\n/**\n * 该提问下已有评论，不允许删除\n */\n\nexport const QUESTION_CANT_DELETE_HAS_COMMENT = 202011;\n/**\n * ===================================================== 回答相关错误，模块编号：3\n */\n\n/**\n * 指定回答不存在\n */\n\nexport const ANSWER_NOT_FOUND = 203001;\n/**\n * 回答发表后即无法编辑\n */\n\nexport const ANSWER_CANT_EDIT = 203002;\n/**\n * 仅回答的作者可以编辑回答\n */\n\nexport const ANSWER_CANT_EDIT_NOT_AUTHOR = 203003;\n/**\n * 已超过可编辑的时间\n */\n\nexport const ANSWER_CANT_EDIT_TIMEOUT = 203004;\n/**\n * 该回答下已有评论，不允许编辑\n */\n\nexport const ANSWER_CANT_EDIT_HAS_COMMENT = 203005;\n/**\n * 回答发表后即无法删除\n */\n\nexport const ANSWER_CANT_DELETE = 203006;\n/**\n * 仅回答的作者可以删除回答\n */\n\nexport const ANSWER_CANT_DELETE_NOT_AUTHOR = 203007;\n/**\n * 已超过可删除的时间\n */\n\nexport const ANSWER_CANT_DELETE_TIMEOUT = 203008;\n/**\n * 该回答下已有评论，不允许删除\n */\n\nexport const ANSWER_CANT_DELETE_HAS_COMMENT = 203009;\n/**\n * ===================================================== 评论相关错误，模块编号：4\n */\n\n/**\n * 指定的评论不存在\n */\n\nexport const COMMENT_NOT_FOUND = 204001;\n/**\n * 评论发表后即无法编辑\n */\n\nexport const COMMENT_CANT_EDIT = 204002;\n/**\n * 仅评论的作者可以编辑评论\n */\n\nexport const COMMENT_CANT_EDIT_NOT_AUTHOR = 204003;\n/**\n * 已超过可编辑时间\n */\n\nexport const COMMENT_CANT_EDIT_TIMEOUT = 204004;\n/**\n * 评论发表后即无法删除\n */\n\nexport const COMMENT_CANT_DELETE = 204005;\n/**\n * 仅评论的作者可以删除评论\n */\n\nexport const COMMENT_CANT_DELETE_NOT_AUTHOR = 204006;\n/**\n * 已超过可删除时间\n */\n\nexport const COMMENT_CANT_DELETE_TIMEOUT = 204007;\n/**\n * ===================================================== 话题相关错误，模块编号：5\n */\n\n/**\n * 指定话题不存在\n */\n\nexport const TOPIC_NOT_FOUND = 205001;\n/**\n * 话题封面上传失败\n */\n\nexport const TOPIC_COVER_UPLOAD_FAILED = 205002;\n/**\n * ===================================================== 文章相关错误，模块编号：6\n */\n\n/**\n * 指定文章不存在\n */\n\nexport const ARTICLE_NOT_FOUND = 206001;\n/**\n * 文章发表后即无法编辑\n */\n\nexport const ARTICLE_CANT_EDIT_NOT_AUTHOR = 206002;\n/**\n * 仅文章作者可以编辑文章\n */\n\nexport const ARTICLE_CANT_EDIT = 206003;\n/**\n * 已超过可编辑时间\n */\n\nexport const ARTICLE_CANT_EDIT_TIMEOUT = 206004;\n/**\n * 该文章下已有评论，不允许编辑\n */\n\nexport const ARTICLE_CANT_EDIT_HAS_COMMENT = 206005;\n/**\n * 文章发表后即无法删除\n */\n\nexport const ARTICLE_CANT_DELETE_NOT_AUTHOR = 206006;\n/**\n * 仅文章作者可以删除文章\n */\n\nexport const ARTICLE_CANT_DELETE = 206007;\n/**\n * 已超过可删除时间\n */\n\nexport const ARTICLE_CANT_DELETE_TIMEOUT = 206008;\n/**\n * 该文章下已有评论，不允许删除\n */\n\nexport const ARTICLE_CANT_DELETE_HAS_COMMENT = 206009;\n/**\n * ===================================================== 举报相关错误，模块编号：7\n */\n\n/**\n * 指定举报不存在\n */\n\nexport const REPORT_NOT_FOUND = 207001;\n/**\n * 举报目标不存在\n */\n\nexport const REPORT_TARGET_NOT_FOUND = 207002;\n/**\n * 不能重复举报\n */\n\nexport const REPORT_ALREADY_SUBMITTED = 207003;\n/**\n * ===================================================== 通知相关错误，模块编号：8\n */\n\n/**\n * 指定通知不存在\n */\n\nexport const NOTIFICATION_NOT_FOUND = 208001;","/**\n * Copyright (C) 2017-present by Andrea Giammarchi - @WebReflection\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nconst {replace} = '';\n\n// escape\nconst es = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;\nconst ca = /[&<>'\"]/g;\n\nconst esca = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  \"'\": '&#39;',\n  '\"': '&quot;'\n};\nconst pe = m => esca[m];\n\nexport const escape = es => replace.call(es, ca, pe);\n\n\n// unescape\nconst unes = {\n  '&amp;': '&',\n  '&#38;': '&',\n  '&lt;': '<',\n  '&#60;': '<',\n  '&gt;': '>',\n  '&#62;': '>',\n  '&apos;': \"'\",\n  '&#39;': \"'\",\n  '&quot;': '\"',\n  '&#34;': '\"'\n};\nconst cape = m => unes[m];\n\nexport const unescape = un => replace.call(un, es, cape);\n","import { getRequest, postRequest, patchRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL, buildRequestBody } from './util/requestHandler';\n/**\n * 🔑删除回答\n *\n * 只要没有错误异常，无论是否有回答被删除，该接口都会返回成功。  管理员可删除回答。回答作者是否可删除回答，由管理员在后台的设置决定。\n */\n\nexport const del = params => deleteRequest(buildURL('/answers/{answer_id}', params));\n/**\n * 🔑为回答投票\n *\n * 为回答投票。\n */\n\nexport const addVote = params => postRequest(buildURL('/answers/{answer_id}/voters', params), buildRequestBody(params, ['type']));\n/**\n * 在指定回答下发表评论\n *\n * 在指定回答下发表评论。\n */\n\nexport const createComment = params => postRequest(buildURL('/answers/{answer_id}/comments', params, ['include']), buildRequestBody(params, ['content']));\n/**\n * 🔐批量删除回答\n *\n * 批量删除回答。  只要没有错误异常，无论是否有回答被删除，该接口都会返回成功。\n */\n\nexport const deleteMultiple = params => deleteRequest(buildURL('/answers/{answer_ids}', params));\n/**\n * 🔑取消为回答的投票\n *\n * 取消为回答的投票。\n */\n\nexport const deleteVote = params => deleteRequest(buildURL('/answers/{answer_id}/voters', params));\n/**\n * 获取回答详情\n *\n * 获取回答详情。\n */\n\nexport const get = params => getRequest(buildURL('/answers/{answer_id}', params, ['include']));\n/**\n * 获取指定回答的评论\n *\n * 获取指定回答的评论。\n */\n\nexport const getComments = params => getRequest(buildURL('/answers/{answer_id}/comments', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 🔐获取回答列表\n *\n * 获取回答列表。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/answers', params, ['page', 'per_page', 'order', 'include', 'answer_id', 'question_id', 'user_id', 'trashed']));\n/**\n * 获取回答的投票者\n *\n * 获取回答的投票者。\n */\n\nexport const getVoters = params => getRequest(buildURL('/answers/{answer_id}/voters', params, ['page', 'per_page', 'include', 'type']));\n/**\n * 🔐把回答放入回收站\n *\n * 把回答放入回收站。\n */\n\nexport const trash = params => postRequest(buildURL('/answers/{answer_id}/trash', params, ['include']));\n/**\n * 🔐批量把回答放入回收站\n *\n * 批量把回答放入回收站。\n */\n\nexport const trashMultiple = params => postRequest(buildURL('/answers/{answer_ids}/trash', params, ['include']));\n/**\n * 🔐把回答移出回收站\n *\n * 把回答移出回收站。\n */\n\nexport const untrash = params => postRequest(buildURL('/answers/{answer_id}/untrash', params, ['include']));\n/**\n * 🔐批量把回答移出回收站\n *\n * 批量把回答移出回收站。\n */\n\nexport const untrashMultiple = params => postRequest(buildURL('/answers/{answer_ids}/untrash', params, ['include']));\n/**\n * 🔑修改回答信息\n *\n * 管理员可修改回答。回答作者是否可修改回答，由管理员在后台的设置决定。  &#x60;content_markdown&#x60; 和 &#x60;content_rendered&#x60; 两个参数仅传入其中一个即可， 若两个参数都传入，则以 &#x60;content_markdown&#x60; 为准。\n */\n\nexport const update = params => patchRequest(buildURL('/answers/{answer_id}', params, ['include']), buildRequestBody(params, ['content_markdown', 'content_rendered']));","import { getRequest, postRequest, patchRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL, buildRequestBody } from './util/requestHandler';\n/**\n * 🔑删除评论\n *\n * 只要没有错误异常，无论是否有回答被删除，该接口都会返回成功。  管理员可删除评论。评论作者是否可删除评论，由管理员在后台的设置决定。\n */\n\nexport const del = params => deleteRequest(buildURL('/comments/{comment_id}', params));\n/**\n * 🔑为评论投票\n *\n * 为评论投票。\n */\n\nexport const addVote = params => postRequest(buildURL('/comments/{comment_id}/voters', params), buildRequestBody(params, ['type']));\n/**\n * 🔑在指定评论下发表回复\n *\n * 在指定评论下发表回复。\n */\n\nexport const createReply = params => postRequest(buildURL('/comments/{comment_id}/replies', params, ['include']), buildRequestBody(params, ['content']));\n/**\n * 🔐批量删除评论\n *\n * 批量删除评论。  只要没有错误异常，无论是否有评论被删除，该接口都会返回成功。\n */\n\nexport const deleteMultiple = params => deleteRequest(buildURL('/comments/{comment_ids}', params));\n/**\n * 🔑取消为评论的投票\n *\n * 取消为评论的投票。\n */\n\nexport const deleteVote = params => deleteRequest(buildURL('/comments/{comment_id}/voters', params));\n/**\n * 获取评论详情\n *\n * 获取评论详情。\n */\n\nexport const get = params => getRequest(buildURL('/comments/{comment_id}', params, ['include']));\n/**\n * 🔐获取所有评论\n *\n * 获取所有评论。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/comments', params, ['page', 'per_page', 'order', 'include', 'comment_id', 'commentable_id', 'commentable_type', 'user_id', 'trashed']));\n/**\n * 获取指定评论的回复\n *\n * 获知指定评论的回复。\n */\n\nexport const getReplies = params => getRequest(buildURL('/comments/{comment_id}/replies', params, ['page', 'per_page', 'order', 'include']));\n/**\n * 获取评论的投票者\n *\n * 获取评论的投票者。\n */\n\nexport const getVoters = params => getRequest(buildURL('/comments/{comment_id}/voters', params, ['page', 'per_page', 'include', 'type']));\n/**\n * 🔐把评论放入回收站\n *\n * 把评论放入回收站。\n */\n\nexport const trash = params => postRequest(buildURL('/comments/{comment_id}/trash', params, ['include']));\n/**\n * 🔐批量把评论放入回收站\n *\n * 批量把评论放入回收站。\n */\n\nexport const trashMultiple = params => postRequest(buildURL('/comments/{comment_ids}/trash', params, ['include']));\n/**\n * 🔐把评论移出回收站\n *\n * 把评论移出回收站。\n */\n\nexport const untrash = params => postRequest(buildURL('/comments/{comment_id}/untrash', params, ['include']));\n/**\n * 🔐批量把评论移出回收站\n *\n * 批量把评论移出回收站。\n */\n\nexport const untrashMultiple = params => postRequest(buildURL('/comments/{comment_ids}/untrash', params, ['include']));\n/**\n * 🔑修改评论\n *\n * 管理员可修改评论。评论作者是否可修改评论，由管理员在后台的设置决定。\n */\n\nexport const update = params => patchRequest(buildURL('/comments/{comment_id}', params, ['include']), buildRequestBody(params, ['content']));","import extend from 'mdui.jq/es/functions/extend';\nimport { addVote as addAnswerVote, deleteVote as deleteAnswerVote } from 'mdclub-sdk-js/es/AnswerApi';\nimport { addVote as addArticleVote, deleteVote as deleteArticleVote } from 'mdclub-sdk-js/es/ArticleApi';\nimport { addVote as addCommentVote, deleteVote as deleteCommentVote } from 'mdclub-sdk-js/es/CommentApi';\nimport { findIndex } from '~/utils/func';\nimport apiCatch from '~/utils/errorHandler';\n\nconst toggle = (id, commentIndex, type, voting, state, actions) => {\n  let promise; // 文章详情页中\n\n  if (type === 'article') {\n    const {\n      article\n    } = state;\n    const isDelete = article.relationships.voting === voting;\n    article.relationships.voting = isDelete ? '' : voting;\n    actions.setState({\n      article\n    });\n    promise = isDelete ? deleteArticleVote({\n      article_id: id\n    }) : addArticleVote({\n      article_id: id,\n      type: voting\n    });\n    promise.then(({\n      data\n    }) => {\n      extend(article, data);\n      actions.setState({\n        article\n      });\n    });\n  } // 回答列表中\n\n\n  if (type === 'answers') {\n    const {\n      answer_data\n    } = state;\n    const index = findIndex(answer_data, 'answer_id', id);\n    const answer = answer_data[index];\n    const isDelete = answer.relationships.voting === voting;\n    answer.relationships.voting = isDelete ? '' : voting;\n    answer_data[index] = answer;\n    actions.setState({\n      answer_data\n    });\n    promise = isDelete ? deleteAnswerVote({\n      answer_id: id\n    }) : addAnswerVote({\n      answer_id: id,\n      type: voting\n    });\n    promise.then(({\n      data\n    }) => {\n      extend(answer, data);\n      answer_data[index] = answer;\n      actions.setState({\n        answer_data\n      });\n    });\n  } // 评论列表中\n\n\n  if (type === 'comments') {\n    const {\n      comments_data\n    } = state;\n    const index = findIndex(comments_data, 'comment_id', id);\n    const comment = comments_data[index];\n    const isDelete = comment.relationships.voting === voting;\n    comment.relationships.voting = isDelete ? '' : voting;\n    comments_data[index] = comment;\n    actions.setState({\n      comments_data\n    });\n    promise = isDelete ? deleteCommentVote({\n      comment_id: id\n    }) : addCommentVote({\n      comment_id: id,\n      type: voting\n    });\n    promise.then(({\n      data\n    }) => {\n      extend(comment, data);\n      comments_data[index] = comment;\n      actions.setState({\n        comments_data\n      });\n    });\n  } // 回复列表中\n\n\n  if (type === 'replies') {\n    const {\n      comments_data\n    } = state;\n    const {\n      replies_data\n    } = comments_data[commentIndex];\n    const index = findIndex(replies_data, 'comment_id', id);\n    const reply = replies_data[index];\n    const isDelete = reply.relationships.voting === voting;\n    reply.relationships.voting = isDelete ? '' : voting;\n    comments_data[commentIndex].replies_data[index] = reply;\n    actions.setState({\n      comments_data\n    });\n    promise = isDelete ? deleteCommentVote({\n      comment_id: id\n    }) : addCommentVote({\n      comment_id: id,\n      type: voting\n    });\n    promise.then(({\n      data\n    }) => {\n      extend(reply, data);\n      comments_data[commentIndex].replies_data[index] = reply;\n      actions.setState({\n        comments_data\n      });\n    });\n  }\n\n  promise.catch(apiCatch);\n};\n\nconst getIdValue = (item, type) => {\n  switch (type) {\n    case 'article':\n      return item.article_id;\n\n    case 'answers':\n      return item.answer_id;\n\n    default:\n      return item.comment_id;\n  }\n};\n/**\n * 在需要用到投票的页面中，引入该 actions\n */\n\n\nexport default {\n  /**\n   * 点击赞同\n   * @param item\n   * @param type\n   *              answers: 提问页面的回答列表\n   *              article: 文章详情页\n   *              comments: 评论列表\n   *              replies: 评论回复列表\n   * @param commentIndex 仅 replies 中需要，表示评论的索引号\n   */\n  voteUp: ({\n    item,\n    type,\n    commentIndex\n  }) => (state, actions) => {\n    toggle(getIdValue(item, type), commentIndex, type, 'up', state, actions);\n  },\n\n  /**\n   * 点击不赞同\n   * @param item\n   * @param type\n   *              answers: 提问页面的回答列表\n   *              article: 文章详情页\n   *              comments: 评论列表\n   *              replies：评论回复列表\n   * @param commentIndex 仅 replies 中需要，表示评论的索引号\n   */\n  voteDown: ({\n    item,\n    type,\n    commentIndex\n  }) => (state, actions) => {\n    toggle(getIdValue(item, type), commentIndex, type, 'down', state, actions);\n  }\n};","export default {\n  // 提问ID\n  question_id: 0,\n  // 若为回答详情页，则包含该参数\n  answer_id: 0,\n  // 当前访问的提问信息\n  question: null,\n  // 是否正在加载提问数据，提问详情页和回答详情页公用\n  loading: false,\n  // 是否正在变更关注状态\n  following_question: false,\n  // 排序方式\n  answer_order: '-vote_count',\n  // 回答列表，回答详情页的数据也放在这里\n  answer_data: [],\n  // 回答分页信息，为 null 表示未加载初始数据\n  answer_pagination: null,\n  // 是否正在加载回答，提问详情页和回答详情页公用\n  answer_loading: false,\n  // 是否正在发表回答\n  answer_publishing: false,\n  auto_save_key: 'page-answers'\n};","import { location } from 'hyperapp-router';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { unescape } from 'html-escaper';\nimport { get as getQuestion, createAnswer, getAnswers } from 'mdclub-sdk-js/es/QuestionApi';\nimport { getList as getAnswerList, get as getAnswer } from 'mdclub-sdk-js/es/AnswerApi';\nimport { COMMON_FIELD_VERIFY_FAILED } from 'mdclub-sdk-js/es/errors';\nimport { emit } from '~/utils/pubsub';\nimport { fullPath } from '~/utils/path';\nimport apiCatch from '~/utils/errorHandler';\nimport commonActions from '~/utils/actionsAbstract';\nimport editorActions from '~/components/editor/actions';\nimport voteActions from '~/components/vote/actions';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport stateDefault from './stateDefault';\nconst per_page = 20;\nconst as = {\n  /**\n   * @param question_id\n   * @param answer_id 提问详情页该参数值为 0\n   * @param route question, answer\n   */\n  onCreate: ({\n    question_id,\n    answer_id,\n    route\n  }) => (state, actions) => {\n    emit('route_update');\n    actions.setState({\n      route\n    });\n\n    if (answer_id) {\n      // 回答详情页\n      if (state.answer_id !== answer_id) {\n        actions.setState(stateDefault);\n        actions.setState({\n          question_id,\n          answer_id\n        });\n        actions.loadQuestion();\n        actions.loadAnswer();\n      }\n    } else {\n      // 提问详情页\n      if (state.question_id !== question_id || state.answer_id) {\n        actions.setState(stateDefault);\n        actions.setState({\n          question_id\n        });\n        actions.loadQuestion();\n        actions.loadAnswers();\n      } // 发表回答后，到了回答页面，然后返回到提问页面，需要重新加载回答列表\n\n\n      if (!state.answer_pagination) {\n        actions.loadAnswers();\n      }\n\n      $window.on('scroll', actions.infiniteLoadAnswers);\n    }\n  },\n  onDestroy: () => (state, actions) => {\n    if (state.route === 'question') {\n      $window.off('scroll', actions.infiniteLoadAnswers);\n    }\n  },\n\n  /**\n   * 加载问题数据\n   */\n  loadQuestion: () => (state, actions) => {\n    const setTitle = title => {\n      if (state.route === 'question') {\n        actions.setTitle(title);\n      } else {\n        actions.setTitle(`${title} 的回答`);\n      }\n    }; // 从页面中加载问题数据\n\n\n    const loadFromPage = () => {\n      const question = window.G_QUESTION;\n\n      if (question) {\n        actions.setState({\n          question\n        });\n        window.G_QUESTION = null;\n        setTitle(unescape(question.title));\n      }\n\n      return question;\n    }; // ajax 加载问题数据\n\n\n    const loadFromServer = () => {\n      actions.setState({\n        loading: true\n      });\n      getQuestion({\n        question_id: state.question_id,\n        include: ['user', 'topics', 'is_following', 'voting']\n      }).finally(() => {\n        actions.setState({\n          loading: false\n        });\n      }).then(({\n        data\n      }) => {\n        actions.setState({\n          question: data\n        });\n        setTitle(unescape(data.title));\n      }).catch(apiCatch);\n    };\n\n    if (loadFromPage()) {\n      return;\n    }\n\n    loadFromServer();\n  },\n\n  /**\n   * 加载回答数据\n   */\n  loadAnswer: () => (state, actions) => {\n    // 从页面中加载回答数据\n    const loadFromPage = () => {\n      const answer = window.G_ANSWER;\n\n      if (answer) {\n        actions.setState({\n          answer_data: [answer]\n        });\n        window.G_ANSWER = null;\n      }\n\n      return answer;\n    }; // ajax 加载回答数据\n\n\n    const loadFromServer = () => {\n      actions.setState({\n        answer_loading: true\n      });\n      getAnswer({\n        answer_id: state.answer_id,\n        include: ['user', 'voting']\n      }).finally(() => {\n        actions.setState({\n          answer_loading: false\n        });\n      }).then(({\n        data\n      }) => {\n        actions.setState({\n          answer_data: [data]\n        });\n      }).catch(apiCatch);\n    };\n\n    if (loadFromPage()) {\n      return;\n    }\n\n    loadFromServer();\n  },\n\n  /**\n   * 切换回答排序方式\n   */\n  changeOrder: answer_order => (state, actions) => {\n    if (answer_order === state.answer_order) {\n      return;\n    }\n\n    actions.setState({\n      answer_order,\n      answer_data: [],\n      answer_pagination: null\n    });\n    actions.loadAnswers();\n  },\n\n  /**\n   * 加载回答数据\n   * @returns void\n   */\n  loadAnswers: () => (state, actions) => {\n    // 从页面中加载回答数据\n    const loadFromPage = () => {\n      const answers = window.G_QUESTION_ANSWERS;\n\n      if (answers) {\n        actions.setState({\n          answer_data: answers.data,\n          answer_pagination: answers.pagination,\n          answer_loading: false\n        });\n        window.G_QUESTION_ANSWERS = null;\n      }\n\n      return answers;\n    }; // 从 ajax 获取回答数据\n\n\n    const loadFromServer = () => {\n      actions.setState({\n        answer_loading: true\n      });\n      getAnswers({\n        question_id: state.question_id,\n        per_page,\n        order: state.answer_order,\n        include: ['user', 'voting']\n      }).finally(() => {\n        actions.setState({\n          answer_loading: false\n        });\n      }).then(response => {\n        actions.setState({\n          answer_data: response.data,\n          answer_pagination: response.pagination\n        });\n      }).catch(apiCatch);\n    };\n\n    if (loadFromPage()) {\n      return;\n    }\n\n    loadFromServer();\n  },\n\n  /**\n   * 绑定下拉加载更多回答\n   */\n  infiniteLoadAnswers: () => (state, actions) => {\n    if (state.answer_loading) {\n      return;\n    }\n\n    const pagination = state.answer_pagination;\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.setState({\n      answer_loading: true\n    });\n    getAnswerList({\n      page: pagination.page + 1,\n      per_page,\n      order: state.answer_order,\n      include: ['user', 'voting'],\n      question_id: state.question_id\n    }).finally(() => {\n      actions.setState({\n        answer_loading: false\n      });\n    }).then(response => {\n      actions.setState({\n        answer_data: state.answer_data.concat(response.data),\n        answer_pagination: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 发布回答\n   */\n  publishAnswer: ({\n    content\n  }) => (state, actions) => {\n    const {\n      auto_save_key\n    } = state;\n\n    if (!content || content === '<p><br></p>') {\n      mdui.snackbar('请输入正文');\n      return;\n    }\n\n    actions.setState({\n      answer_publishing: true\n    });\n    createAnswer({\n      question_id: state.question_id,\n      content_rendered: content,\n      include: ['user', 'voting']\n    }).finally(() => {\n      actions.setState({\n        answer_publishing: false\n      });\n    }).then(response => {\n      window.localStorage.removeItem(`${auto_save_key}-content`);\n      actions.editorClose(); // 发表回答后，回答数量 + 1\n\n      const {\n        question\n      } = state;\n      question.answer_count += 1; // 下次进入重新加载回答\n\n      actions.setState({\n        question,\n        answer_data: [],\n        answer_pagination: null\n      }); // 到回答详情页\n\n      window.G_QUESTION = state.question;\n      window.G_ANSWER = response.data;\n      location.actions.go(fullPath(`/questions/${state.question_id}/answers/${response.data.answer_id}`));\n    }).catch(response => {\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        mdui.snackbar(Object.values(response.errors)[0]);\n        return;\n      }\n\n      apiCatch(response);\n    });\n  }\n};\nexport default extend(as, commonActions, editorActions, voteActions, userPopoverActions);","import extend from 'mdui.jq/es/functions/extend';\nimport editorState from '~/components/editor/state';\nimport topicSelectorState from '~/components/editor/components/topic-selector/state';\nexport const tabs = ['recent', 'popular', 'following'];\nconst state = {\n  // 当前所处的选项卡\n  current_tab: '',\n  // 是否正在发表文章\n  publishing: false,\n  // 选项卡数组\n  tabs,\n  // 最后访问的文章ID\n  last_visit_id: 0,\n  // 自动保存草稿的键名前缀\n  auto_save_key: 'page-articles'\n};\ntabs.forEach(tabName => {\n  state[`${tabName}_data`] = [];\n  state[`${tabName}_pagination`] = null; // 为 null 表示未加载初始数据\n\n  state[`${tabName}_loading`] = false;\n});\nexport default extend(state, editorState, topicSelectorState);","import { location } from 'hyperapp-router';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { getList, create as createArticle } from 'mdclub-sdk-js/es/ArticleApi';\nimport { getMyFollowingArticles } from 'mdclub-sdk-js/es/UserApi';\nimport { COMMON_FIELD_VERIFY_FAILED } from 'mdclub-sdk-js/es/errors';\nimport commonActions from '~/utils/actionsAbstract';\nimport editorActions from '~/components/editor/actions';\nimport topicSelectorActions from '~/components/editor/components/topic-selector/actions';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport { emit } from '~/utils/pubsub';\nimport { tabs } from './state';\nimport { fullPath } from '~/utils/path';\nimport apiCatch from '~/utils/errorHandler';\nimport { currentTimestamp } from '~/utils/time';\nconst TABNAME_RECENT = 'recent';\nconst TABNAME_POPULAR = 'popular';\nconst TABNAME_FOLLOWING = 'following';\nlet tab;\nlet tabIndex = tabs.indexOf(TABNAME_RECENT);\nlet scroll_position;\nconst is_updated = {\n  [TABNAME_RECENT]: false,\n  // 最近更新列表是否有更新\n  [TABNAME_POPULAR]: false,\n  // 最近热门列表是否有更新\n  [TABNAME_FOLLOWING]: false // 我关注的列表是否有更新\n\n}; // 上次更新的时间，若当前时间距离上次更新时间超过一定范围，则重新加载列表\n\nconst last_update_time = {\n  [TABNAME_RECENT]: 0,\n  [TABNAME_POPULAR]: 0,\n  [TABNAME_FOLLOWING]: 0\n};\nconst include = ['user', 'topics', 'is_following', 'voting'];\nconst per_page = 20;\n\nconst getArticles = (tabName, page) => {\n  if (tabName === TABNAME_RECENT) {\n    return getList({\n      page,\n      include,\n      per_page,\n      order: '-update_time'\n    });\n  }\n\n  if (tabName === TABNAME_POPULAR) {\n    return getList({\n      page,\n      include,\n      per_page,\n      order: '-vote_count'\n    });\n  }\n\n  return getMyFollowingArticles({\n    page,\n    include,\n    per_page\n  });\n};\n\nconst as = {\n  onCreate: () => (_, actions) => {\n    emit('route_update');\n    tab = new mdui.Tab('.mc-tab');\n    tabIndex = tab.activeIndex;\n    tab.$element.on('change.mdui.tab', () => {\n      tabIndex = tab.activeIndex;\n      window.scrollTo(0, 0);\n      window.history.replaceState({}, '', `#${tabs[tabIndex]}`);\n      actions.afterChangeTab();\n    });\n    actions.afterChangeTab(); // 恢复滚动条位置\n\n    if (scroll_position) {\n      window.scrollTo(0, scroll_position);\n      scroll_position = 0;\n    } // 绑定加载更多\n\n\n    $window.on('scroll', actions.infiniteLoad);\n  },\n  onDestroy: () => (_, actions) => {\n    $window.off('scroll', actions.infiniteLoad);\n  },\n\n  /**\n   * 切换 Tab 之后\n   */\n  afterChangeTab: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n    const TAB_NAME = tabName.toUpperCase();\n\n    if (tabName === TABNAME_RECENT) {\n      actions.setTitle('最新文章');\n    } else if (tabName === TABNAME_POPULAR) {\n      actions.setTitle('近期热门文章');\n    } else {\n      actions.setTitle('我关注的文章');\n    }\n\n    actions.setState({\n      current_tab: tabName\n    });\n\n    if (!is_updated[tabs[tabIndex]] && state[`${tabName}_pagination`] && currentTimestamp() - last_update_time[tabs[tabIndex]] < 180) {\n      return;\n    }\n\n    is_updated[tabs[tabIndex]] = false;\n    last_update_time[tabs[tabIndex]] = currentTimestamp(); // 从页面中加载初始数据\n\n    if (window[`G_ARTICLES_${TAB_NAME}`]) {\n      actions.setState({\n        [`${tabName}_data`]: window[`G_ARTICLES_${TAB_NAME}`].data,\n        [`${tabName}_pagination`]: window[`G_ARTICLES_${TAB_NAME}`].pagination\n      }); // 清空页面中的数据，下次需要从 ajax 加载\n\n      window[`G_ARTICLES_${TAB_NAME}`] = null; // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n      return;\n    } // ajax 加载数据\n\n\n    actions.setState({\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null,\n      [`${tabName}_loading`]: true\n    });\n    getArticles(tabName, 1).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: response.data,\n        [`${tabName}_pagination`]: response.pagination\n      }); // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 绑定下拉加载更多\n   */\n  infiniteLoad: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n\n    if (state[`${tabName}_loading`]) {\n      return;\n    }\n\n    const pagination = state[`${tabName}_pagination`];\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.setState({\n      [`${tabName}_loading`]: true\n    });\n    getArticles(tabName, pagination.page + 1).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: state[`${tabName}_data`].concat(response.data),\n        [`${tabName}_pagination`]: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 切换到最近更新\n   */\n  toRecent: () => {\n    tab.show(tabs.indexOf(TABNAME_RECENT));\n  },\n\n  /**\n   * 切换到近期热门\n   */\n  toPopular: () => {\n    tab.show(tabs.indexOf(TABNAME_POPULAR));\n  },\n\n  /**\n   * 切换到我关注的\n   */\n  toFolliwing: () => {\n    tab.show(tabs.indexOf(TABNAME_FOLLOWING));\n  },\n\n  /**\n   * 在其他页面关注了问题后，需要调用该方法，以使下次切换到该页面时重新加载关注列表\n   */\n  followUpdate: () => {\n    is_updated[TABNAME_FOLLOWING] = true;\n  },\n\n  /**\n   * 文章信息更新后（发布评论，关注），需要调用该方法\n   */\n  articleUpdate: article => (state, actions) => {\n    let articles = [];\n    tabs.forEach(tabName => {\n      articles = state[`${tabName}_data`];\n      let hasUpdate = false;\n      articles.forEach((_article, i) => {\n        if (article.article_id === _article.article_id) {\n          hasUpdate = true;\n          articles[i] = article;\n        }\n      });\n\n      if (hasUpdate) {\n        actions.setState({\n          [`${tabName}_data`]: articles\n        });\n      }\n    });\n  },\n\n  /**\n   * 发布提问\n   */\n  publish: ({\n    title,\n    content\n  }) => (state, actions) => {\n    const {\n      editor_selected_topic_ids: topic_ids,\n      auto_save_key\n    } = state;\n\n    if (!title) {\n      mdui.snackbar('请输入标题');\n      return;\n    }\n\n    if (!topic_ids.length) {\n      mdui.snackbar('请选择话题');\n      return;\n    }\n\n    if (!content || content === '<p><br></p>') {\n      mdui.snackbar('请输入正文');\n      return;\n    }\n\n    actions.setState({\n      publishing: true\n    });\n    createArticle({\n      title,\n      topic_ids,\n      content_rendered: content,\n      include\n    }).finally(() => {\n      actions.setState({\n        publishing: false\n      });\n    }).then(response => {\n      is_updated[TABNAME_RECENT] = true;\n      is_updated[TABNAME_POPULAR] = true;\n      is_updated[TABNAME_FOLLOWING] = true; // 清空草稿和编辑器内容\n\n      window.localStorage.removeItem(`${auto_save_key}-title`);\n      window.localStorage.removeItem(`${auto_save_key}-topics`);\n      window.localStorage.removeItem(`${auto_save_key}-content`);\n      actions.editorClose(); // 到文章详情页\n\n      window.G_ARTICLE = response.data;\n      location.actions.go(fullPath(`/articles/${response.data.article_id}`));\n    }).catch(response => {\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        mdui.snackbar(Object.values(response.errors)[0]);\n        return;\n      }\n\n      apiCatch(response);\n    });\n  },\n\n  /**\n   * 点击链接后，保存最后访问的文章ID和文章详情\n   * @param article\n   */\n  afterItemClick: article => (_, actions) => {\n    window.G_ARTICLE = article;\n    scroll_position = window.pageYOffset;\n    actions.setState({\n      last_visit_id: article.article_id\n    });\n  }\n};\nexport default extend(as, commonActions, editorActions, topicSelectorActions, userPopoverActions);","export default {\n  // 文章ID\n  article_id: 0,\n  // 当前访问的文章信息\n  article: null,\n  // 是否正在加载提问数据\n  loading: false,\n  // 是否正在变更关注状态\n  following_article: false\n};","import { unescape } from 'html-escaper';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { get as getArticle } from 'mdclub-sdk-js/es/ArticleApi';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport commonActions from '~/utils/actionsAbstract';\nimport voteActions from '~/components/vote/actions';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport stateDefault from './stateDefault';\nconst as = {\n  onCreate: ({\n    article_id\n  }) => (state, actions) => {\n    emit('route_update');\n\n    if (state.article_id !== article_id) {\n      actions.setState(stateDefault);\n      actions.setState({\n        article_id\n      });\n      actions.loadArticle();\n    }\n  },\n  loadArticle: () => (state, actions) => {\n    // 从页面中加载文章数据\n    const loadFromPage = () => {\n      const article = window.G_ARTICLE;\n\n      if (article) {\n        actions.setState({\n          article\n        });\n        window.G_ARTICLE = null;\n        actions.setTitle(unescape(article.title));\n      }\n\n      return article;\n    }; // ajax 加载文章数据\n\n\n    const loadFromServer = () => {\n      actions.setState({\n        loading: true\n      });\n      getArticle({\n        article_id: state.article_id,\n        include: ['user', 'topics', 'is_following', 'voting']\n      }).finally(() => {\n        actions.setState({\n          loading: false\n        });\n      }).then(({\n        data\n      }) => {\n        actions.setState({\n          article: data\n        });\n        actions.setTitle(unescape(data.title));\n      }).catch(apiCatch);\n    };\n\n    if (loadFromPage()) {\n      return;\n    }\n\n    loadFromServer();\n  }\n};\nexport default extend(as, commonActions, voteActions, userPopoverActions);","export const tabs = ['following', 'recommended'];\nconst state = {\n  // 当前所处选项卡 following、recommended\n  current_tab: '',\n  // 选项卡数组\n  tabs,\n  // 当前激活的选项卡索引号\n  tabIndex: tabs.indexOf('recommended')\n};\ntabs.forEach(tabName => {\n  state[`${tabName}_data`] = [];\n  state[`${tabName}_pagination`] = null; // 为 null 表示未加载初始数据\n\n  state[`${tabName}_loading`] = false;\n});\nexport default state;","import mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { getList } from 'mdclub-sdk-js/es/TopicApi';\nimport { getMyFollowingTopics } from 'mdclub-sdk-js/es/UserApi';\nimport currentUser from '~/utils/currentUser';\nimport commonActions from '~/utils/actionsAbstract';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport { tabs } from './state';\nconst TABNAME_FOLLOWING = 'following';\nconst TABNAME_RECOMMENDED = 'recommended';\nlet tab; // tab 选项卡实例。若未登录，则没有 tab\n\nlet scroll_position;\nconst is_updated = {\n  [TABNAME_FOLLOWING]: false,\n  [TABNAME_RECOMMENDED]: false\n};\nconst include = ['is_following'];\nconst per_page = 20;\n\nconst getTopics = (tabName, page) => {\n  if (tabName === TABNAME_FOLLOWING) {\n    return getMyFollowingTopics({\n      page,\n      per_page,\n      include\n    });\n  }\n\n  return getList({\n    page,\n    per_page,\n    include,\n    order: '-follower_count'\n  });\n};\n\nconst as = {\n  /**\n   * 初始化\n   */\n  onCreate: () => (state, actions) => {\n    emit('route_update');\n\n    if (currentUser()) {\n      tab = new mdui.Tab('.mc-tab');\n      actions.setState({\n        tabIndex: tab.activeIndex\n      });\n      tab.$element.on('change.mdui.tab', () => {\n        actions.setState({\n          tabIndex: tab.activeIndex\n        });\n        window.scrollTo(0, 0);\n        window.history.replaceState({}, '', `#${tabs[tab.activeIndex]}`);\n        actions.afterChangeTab();\n      });\n    }\n\n    actions.afterChangeTab(); // 恢复滚动条位置\n\n    if (scroll_position) {\n      window.scrollTo(0, scroll_position);\n      scroll_position = 0;\n    }\n\n    $window.on('scroll', actions.infiniteLoad);\n  },\n  onDestroy: () => (_, actions) => {\n    $window.off('scroll', actions.infiniteLoad);\n  },\n\n  /**\n   * 切换 Tab 之后\n   */\n  afterChangeTab: () => (state, actions) => {\n    const tabName = tabs[state.tabIndex];\n    const TAB_NAME = tabName.toUpperCase();\n\n    if (tabName === TABNAME_FOLLOWING) {\n      actions.setTitle('我关注的话题');\n    } else {\n      actions.setTitle('推荐话题');\n    }\n\n    actions.setState({\n      current_tab: tabName\n    });\n\n    if (!is_updated[tabName] && state[`${tabName}_pagination`]) {\n      return;\n    }\n\n    is_updated[tabName] = false; // 从页面中读取初始数据\n\n    if (window[`G_TOPICS_${TAB_NAME}`]) {\n      actions.setState({\n        [`${tabName}_data`]: window[`G_TOPICS_${TAB_NAME}`].data,\n        [`${tabName}_pagination`]: window[`G_TOPICS_${TAB_NAME}`].pagination\n      }); // 清空页面中的数据，下次需要从 ajax 加载\n\n      window[`G_TOPICS_${TAB_NAME}`] = null; // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n      return;\n    } // ajax 加载初始数据\n\n\n    actions.setState({\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null\n    });\n    actions.loadStart(tabName);\n    getTopics(tabName, 1).finally(() => {\n      actions.loadEnd(tabName);\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: response.data,\n        [`${tabName}_pagination`]: response.pagination\n      }); // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 绑定下拉加载更多\n   */\n  infiniteLoad: () => (state, actions) => {\n    const tabName = tabs[state.tabIndex];\n\n    if (state[`${tabName}_loading`]) {\n      return;\n    }\n\n    const pagination = state[`${tabName}_pagination`];\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.loadStart(tabName);\n    getTopics(tabName, pagination.page + 1).finally(() => {\n      actions.loadEnd(tabName);\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: state[`${tabName}_data`].concat(response.data),\n        [`${tabName}_pagination`]: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 切换到精选话题\n   */\n  toRecommended: () => {\n    tab.show(tabs.indexOf(TABNAME_RECOMMENDED));\n  },\n\n  /**\n   * 切换到已关注话题\n   */\n  toFollowing: () => {\n    tab.show(tabs.indexOf(TABNAME_FOLLOWING));\n  },\n\n  /**\n   * 在其他页面关注了话题后，需要调用该方法，以使下次切换到该页面时重新加载关注列表\n   */\n  followUpdate: () => {\n    is_updated[TABNAME_FOLLOWING] = true;\n    is_updated[TABNAME_RECOMMENDED] = true;\n  },\n\n  /**\n   * 点击链接后，保存话题详情\n   * @param topic\n   */\n  afterItemClick: topic => {\n    window.G_TOPIC = topic;\n    scroll_position = window.pageYOffset;\n  },\n\n  /**\n   * 开始加载\n   */\n  loadStart: tabName => ({\n    [`${tabName}_loading`]: true\n  }),\n\n  /**\n   * 结束加载\n   */\n  loadEnd: tabName => ({\n    [`${tabName}_loading`]: false\n  })\n};\nexport default extend(as, commonActions);","export const tabs = ['questions', 'articles'];\nconst state = {\n  // 话题ID\n  topic_id: 0,\n  // 话题信息\n  topic: null,\n  // 是否正在加载话题信息\n  loading: false,\n  // 是否正在变更关注状态\n  following_topic: false,\n  // 选项卡数组\n  tabs,\n  // 当前所处的选项卡\n  current_tab: '',\n  // 最后访问的文章ID\n  last_visit_article_id: 0,\n  // 最后访问的提问ID\n  last_visit_question_id: 0\n};\ntabs.forEach(tabName => {\n  state[`${tabName}_order`] = '-update_time';\n  state[`${tabName}_data`] = [];\n  state[`${tabName}_pagination`] = null;\n  state[`${tabName}_loading`] = false;\n});\nexport default state;","import mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { unescape } from 'html-escaper';\nimport { get as getTopic, getArticles, getQuestions } from 'mdclub-sdk-js/es/TopicApi';\nimport commonActions from '~/utils/actionsAbstract';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport stateDefault, { tabs } from './stateDefault';\nconst TABNAME_QUESTIONS = 'questions'; // const TABNAME_ARTICLES = 'articles';\n\nlet tab;\nlet tabIndex = tabs.indexOf(TABNAME_QUESTIONS);\nlet scroll_position;\nconst include = ['user', 'topics', 'is_following'];\nconst per_page = 20;\nconst as = {\n  /**\n   * 加载提问列表或文字列表\n   */\n  getContexts: ({\n    tabName,\n    page\n  }) => state => {\n    const params = {\n      topic_id: state.topic_id,\n      page,\n      per_page,\n      include,\n      order: state[`${tabName}_order`]\n    };\n\n    if (tabName === TABNAME_QUESTIONS) {\n      return getQuestions(params);\n    }\n\n    return getArticles(params);\n  },\n  onCreate: ({\n    topic_id\n  }) => (state, actions) => {\n    emit('route_update');\n    tab = new mdui.Tab('.mc-tab');\n    tabIndex = tab.activeIndex;\n\n    if (state.topic_id !== topic_id) {\n      actions.setState(stateDefault);\n      actions.setState({\n        topic_id\n      });\n      actions.loadTopic();\n      actions.afterChangeTab();\n    }\n\n    tab.$element.on('change.mdui.tab', () => {\n      tabIndex = tab.activeIndex;\n      window.scrollTo(0, 0);\n      window.history.replaceState({}, '', `#${tabs[tabIndex]}`);\n      actions.afterChangeTab();\n    }); // 恢复滚动条位置\n\n    if (scroll_position) {\n      window.scrollTo(0, scroll_position);\n      scroll_position = 0;\n    } // 绑定加载更多\n\n\n    $window.on('scroll', actions.infiniteLoad);\n  },\n  onDestroy: () => (_, actions) => {\n    $window.off('scroll', actions.infiniteLoad);\n  },\n  loadTopic: () => (state, actions) => {\n    // 从页面中加载话题数据\n    const loadFromPage = () => {\n      const topic = window.G_TOPIC;\n\n      if (topic) {\n        actions.setState({\n          topic\n        });\n        window.G_TOPIC = null;\n        actions.setTitle(unescape(topic.name));\n      }\n\n      return topic;\n    }; // ajax 加载话题数据\n\n\n    const loadFromServer = () => {\n      actions.setState({\n        loading: true\n      });\n      getTopic({\n        topic_id: state.topic_id,\n        include: ['is_following']\n      }).finally(() => {\n        actions.setState({\n          loading: false\n        });\n      }).then(({\n        data\n      }) => {\n        actions.setState({\n          topic: data\n        });\n        actions.setTitle(unescape(data.name));\n      }).catch(apiCatch);\n    };\n\n    if (loadFromPage()) {\n      return;\n    }\n\n    loadFromServer();\n  },\n  afterChangeTab: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n    const TAB_NAME = tabName.toUpperCase();\n    actions.setState({\n      current_tab: tabName\n    });\n\n    if (state[`${tabName}_pagination`]) {\n      return;\n    } // 从页面中加载初始数据\n\n\n    if (window[`G_TOPIC_${TAB_NAME}`]) {\n      actions.setState({\n        [`${tabName}_data`]: window[`G_TOPIC_${TAB_NAME}`].data,\n        [`${tabName}_pagination`]: window[`G_TOPIC_${TAB_NAME}`].pagination\n      }); // 清空页面中的数据，下次需要从 ajax 加载\n\n      window[`G_TOPIC_${TAB_NAME}`] = null; // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n      return;\n    } // ajax 加载数据\n\n\n    actions.setState({\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null,\n      [`${tabName}_loading`]: true\n    });\n    actions.getContexts({\n      tabName,\n      page: 1\n    }).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: response.data,\n        [`${tabName}_pagination`]: response.pagination\n      }); // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 绑定下拉加载更多\n   */\n  infiniteLoad: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n\n    if (state[`${tabName}_loading`]) {\n      return;\n    }\n\n    const pagination = state[`${tabName}_pagination`];\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.setState({\n      [`${tabName}_loading`]: true\n    });\n    actions.getContexts({\n      tabName,\n      page: pagination.page + 1\n    }).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: state[`${tabName}_data`].concat(response.data),\n        [`${tabName}_pagination`]: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 点击链接后，保存最后访问的提问ID和提问详情\n   * @param context 提问或文字信息\n   */\n  afterItemClick: context => (_, actions) => {\n    const tabName = tabs[tabIndex];\n    scroll_position = window.pageYOffset;\n\n    if (tabName === TABNAME_QUESTIONS) {\n      window.G_QUESTION = context;\n      actions.setState({\n        last_visit_question_id: context.question_id\n      });\n    } else {\n      window.G_ARTICLE = context;\n      actions.setState({\n        last_visit_article_id: context.article_id\n      });\n    }\n  },\n\n  /**\n   * 切换排序方式\n   */\n  changeOrder: order => (state, actions) => {\n    const tabName = tabs[tabIndex];\n\n    if (order === state[`${tabName}_order`]) {\n      return;\n    }\n\n    actions.setState({\n      [`${tabName}_order`]: order,\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null\n    });\n    actions.afterChangeTab();\n  }\n};\nexport default extend(as, commonActions, userPopoverActions);","export const tabs = ['followees', 'followers', 'recommended'];\nconst state = {\n  // 当前所处选项卡 followees、followers、recommended\n  current_tab: '',\n  // 选项卡数组\n  tabs,\n  // 当前激活的选项卡索引号\n  tabIndex: tabs.indexOf('recommended')\n};\ntabs.forEach(tabName => {\n  state[`${tabName}_data`] = [];\n  state[`${tabName}_pagination`] = null; // 为 null 表示未加载初始数据\n\n  state[`${tabName}_loading`] = false;\n});\nexport default state;","import mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { getList, getMyFollowees, getMyFollowers } from 'mdclub-sdk-js/es/UserApi';\nimport currentUser from '~/utils/currentUser';\nimport commonActions from '~/utils/actionsAbstract';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport { tabs } from './state';\nconst TABNAME_FOLLOWEES = 'followees';\nconst TABNAME_FOLLOWERS = 'followers';\nconst TABNAME_RECOMMENDED = 'recommended';\nlet tab; // tab 选项卡实例。若未登录，则没有 tab\n\nlet scroll_position;\nconst is_updated = {\n  [TABNAME_FOLLOWEES]: false,\n  // 已关注列表是否有更新，有更新则切换到该选项卡时需要重新加载\n  [TABNAME_FOLLOWERS]: false,\n  // 关注者列表是否有更新\n  [TABNAME_RECOMMENDED]: false // 推荐列表是否有更新\n\n};\nconst include = ['is_following', 'is_me'];\nconst per_page = 20;\n\nconst getUsers = (tabName, page) => {\n  if (tabName === TABNAME_FOLLOWEES) {\n    return getMyFollowees({\n      include,\n      page,\n      per_page\n    });\n  }\n\n  if (tabName === TABNAME_FOLLOWERS) {\n    return getMyFollowers({\n      include,\n      page,\n      per_page\n    });\n  }\n\n  return getList({\n    include,\n    page,\n    per_page,\n    order: '-follower_count'\n  });\n};\n\nconst as = {\n  /**\n   * 初始化\n   */\n  onCreate: () => (_, actions) => {\n    emit('route_update');\n\n    if (currentUser()) {\n      tab = new mdui.Tab('.mc-tab');\n      actions.setState({\n        tabIndex: tab.activeIndex\n      });\n      tab.$element.on('change.mdui.tab', () => {\n        actions.setState({\n          tabIndex: tab.activeIndex\n        });\n        window.scrollTo(0, 0);\n        window.history.replaceState({}, '', `#${tabs[tab.activeIndex]}`);\n        actions.afterChangeTab();\n      });\n    }\n\n    actions.afterChangeTab(); // 恢复滚动条位置\n\n    if (scroll_position) {\n      window.scrollTo(0, scroll_position);\n      scroll_position = 0;\n    } // 绑定加载更多\n\n\n    $window.on('scroll', actions.infiniteLoad);\n  },\n  onDestroy: () => (_, actions) => {\n    $window.off('scroll', actions.infiniteLoad);\n  },\n\n  /**\n   * 切换 Tab 之后\n   */\n  afterChangeTab: () => (state, actions) => {\n    const tabName = tabs[state.tabIndex];\n    const TAB_NAME = tabName.toUpperCase();\n\n    if (tabName === TABNAME_FOLLOWEES) {\n      actions.setTitle('我关注的人');\n    } else if (tabName === TABNAME_FOLLOWERS) {\n      actions.setTitle('我的关注者');\n    } else {\n      actions.setTitle('推荐人脉');\n    }\n\n    actions.setState({\n      current_tab: tabName\n    });\n\n    if (!is_updated[tabName] && state[`${tabName}_pagination`]) {\n      return;\n    }\n\n    is_updated[tabName] = false; // 从页面中加载初始数据\n\n    if (window[`G_USERS_${TAB_NAME}`]) {\n      actions.setState({\n        [`${tabName}_data`]: window[`G_USERS_${TAB_NAME}`].data,\n        [`${tabName}_pagination`]: window[`G_USERS_${TAB_NAME}`].pagination\n      }); // 清空页面中的数据，下次需要从 ajax 加载\n\n      window[`G_USERS_${TAB_NAME}`] = null; // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n      return;\n    } // ajax 加载数据\n\n\n    actions.setState({\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null\n    });\n    actions.loadStart(tabName);\n    getUsers(tabName, 1).finally(() => {\n      actions.loadEnd(tabName);\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: response.data,\n        [`${tabName}_pagination`]: response.pagination\n      }); // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 绑定下拉加载更多\n   */\n  infiniteLoad: () => (state, actions) => {\n    const tabName = tabs[state.tabIndex];\n\n    if (state[`${tabName}_loading`]) {\n      return;\n    }\n\n    const pagination = state[`${tabName}_pagination`];\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.loadStart(tabName);\n    getUsers(tabName, pagination.page + 1).finally(() => {\n      actions.loadEnd(tabName);\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: state[`${tabName}_data`].concat(response.data),\n        [`${tabName}_pagination`]: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 切换到推荐用户\n   */\n  toRecommended: () => {\n    tab.show(tabs.indexOf(TABNAME_RECOMMENDED));\n  },\n\n  /**\n   * 在其他页面关注了用户后，需要调用该方法，以使下次切换到该页面时重新加载关注列表\n   */\n  followUpdate: () => {\n    is_updated[TABNAME_FOLLOWEES] = true;\n    is_updated[TABNAME_RECOMMENDED] = true;\n  },\n\n  /**\n   * 点击链接后，保存用户信息\n   */\n  afterItemClick: user => {\n    window.G_INTERVIEWEE = user;\n    scroll_position = window.pageYOffset;\n  },\n\n  /**\n   * 开始加载\n   */\n  loadStart: tabName => ({\n    [`${tabName}_loading`]: true\n  }),\n\n  /**\n   * 结束加载\n   */\n  loadEnd: tabName => ({\n    [`${tabName}_loading`]: false\n  })\n};\nexport default extend(as, commonActions);","export const tabs = ['questions', 'answers', 'articles'];\nconst state = {\n  // 被访问者的用户信息\n  interviewee: null,\n  // 是否正在加载\n  loading: false,\n  // 是否正在更新被访问者的关注状态\n  following_interviewee: false,\n  // 是否正在提交个人信息\n  edit_info_submitting: false,\n  // 是否把详细信息折叠\n  profile_fold: true,\n  // 选项卡数组\n  tabs,\n  // 当前所处的选项卡\n  current_tab: '',\n  // 最后访问的文章ID\n  last_visit_article_id: 0,\n  // 最后访问的提问ID\n  last_visit_question_id: 0,\n  // 最后访问的回答ID\n  last_visit_answer_id: 0\n};\ntabs.forEach(tabName => {\n  if (tabName === 'questions') {\n    state[`${tabName}_order`] = '-update_time';\n  } else {\n    state[`${tabName}_order`] = '-create_time';\n  }\n\n  state[`${tabName}_data`] = [];\n  state[`${tabName}_pagination`] = null;\n  state[`${tabName}_loading`] = false;\n});\nexport default state;","import $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { get as getUser, deleteMyCover, deleteMyAvatar, updateMine, getArticles, getQuestions, getAnswers } from 'mdclub-sdk-js/es/UserApi';\nimport commonActions from '~/utils/actionsAbstract';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport stateDefault, { tabs } from './stateDefault';\n/**\n * 当前访问的用户ID\n */\n\nlet interviewee_id;\n/**\n * 编辑个人资料的弹框实例\n */\n\nlet editInfoDialog;\nconst TABNAME_QUESTIONS = 'questions';\nconst TABNAME_ARTICLES = 'articles'; // const TABNAME_ANSWERS = 'answers';\n\nlet tab;\nlet tabIndex = tabs.indexOf(TABNAME_QUESTIONS);\nlet scroll_position;\nconst per_page = 20;\nconst as = {\n  /**\n   * 加载提问列表、回答列表或文字列表\n   */\n  getContexts: ({\n    tabName,\n    page\n  }) => state => {\n    const params = {\n      user_id: interviewee_id,\n      page,\n      per_page,\n      include: ['user', 'topics', 'is_following'],\n      order: state[`${tabName}_order`]\n    };\n\n    if (tabName === TABNAME_QUESTIONS) {\n      return getQuestions(params);\n    }\n\n    if (tabName === TABNAME_ARTICLES) {\n      return getArticles(params);\n    }\n\n    params.include = ['user', 'question', 'voting'];\n    return getAnswers(params);\n  },\n  onCreate: props => (_, actions) => {\n    emit('route_update');\n    tab = new mdui.Tab('.mc-tab');\n    tabIndex = tab.activeIndex;\n\n    if (interviewee_id !== props.interviewee_id) {\n      interviewee_id = props.interviewee_id;\n      actions.setState(stateDefault);\n      actions.loadInterviewee();\n      actions.afterChangeTab();\n    }\n\n    tab.$element.on('change.mdui.tab', () => {\n      tabIndex = tab.activeIndex;\n      window.history.replaceState({}, '', `#${tabs[tabIndex]}`);\n      actions.afterChangeTab();\n    }); // 恢复滚动条位置\n\n    if (scroll_position) {\n      window.scrollTo(0, scroll_position);\n      scroll_position = 0;\n    } // 绑定加载更多\n\n\n    $window.on('scroll', actions.infiniteLoad);\n  },\n  onDestroy: () => (_, actions) => {\n    $window.off('scroll', actions.infiniteLoad);\n  },\n\n  /**\n   * 加载当前被访问用户数据\n   */\n  loadInterviewee: () => (state, actions) => {\n    // 访问自己的页面\n    if (state.user && interviewee_id === state.user.user_id) {\n      actions.setTitle(`${state.user.username}的个人主页`);\n      actions.setState({\n        interviewee: state.user\n      });\n      window.G_INTERVIEWEE = null;\n      return;\n    } // 从页面中加载用户数据\n\n\n    const interviewee = window.G_INTERVIEWEE;\n\n    if (interviewee) {\n      actions.setState({\n        interviewee\n      });\n      window.G_INTERVIEWEE = null;\n      actions.setTitle(`${interviewee.username}的个人主页`);\n      return;\n    } // 从服务器加载用户数据\n\n\n    actions.setState({\n      loading: true,\n      interviewee: null\n    });\n    getUser({\n      user_id: interviewee_id,\n      include: ['is_following']\n    }).finally(() => {\n      actions.setState({\n        loading: false\n      });\n    }).then(({\n      data\n    }) => {\n      actions.setState({\n        interviewee: data\n      });\n      actions.setTitle(`${data.username}的个人主页`);\n    }).catch(apiCatch);\n  },\n  afterChangeTab: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n    const TAB_NAME = tabName.toUpperCase();\n    actions.setState({\n      current_tab: tabName\n    });\n\n    if (state[`${tabName}_pagination`]) {\n      return;\n    } // 从页面中加载初始数据\n\n\n    if (window[`G_USER_${TAB_NAME}`]) {\n      actions.setState({\n        [`${tabName}_data`]: window[`G_USER_${TAB_NAME}`].data,\n        [`${tabName}_pagination`]: window[`G_USER_${TAB_NAME}`].pagination\n      }); // 清空页面中的数据，下次需要从 ajax 加载\n\n      window[`G_USER_${TAB_NAME}`] = null; // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n      return;\n    } // ajax 加载数据\n\n\n    actions.setState({\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null,\n      [`${tabName}_loading`]: true\n    });\n    actions.getContexts({\n      tabName,\n      page: 1\n    }).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: response.data,\n        [`${tabName}_pagination`]: response.pagination\n      }); // 若第一页没有填满屏幕，则加载第二页\n\n      setTimeout(() => {\n        actions.infiniteLoad();\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 绑定下拉加载更多\n   */\n  infiniteLoad: () => (state, actions) => {\n    const tabName = tabs[tabIndex];\n\n    if (state[`${tabName}_loading`]) {\n      return;\n    }\n\n    const pagination = state[`${tabName}_pagination`];\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.setState({\n      [`${tabName}_loading`]: true\n    });\n    actions.getContexts({\n      tabName,\n      page: pagination.page + 1\n    }).finally(() => {\n      actions.setState({\n        [`${tabName}_loading`]: false\n      });\n    }).then(response => {\n      actions.setState({\n        [`${tabName}_data`]: state[`${tabName}_data`].concat(response.data),\n        [`${tabName}_pagination`]: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 点击链接后，保存最后访问的提问ID和提问详情\n   * @param context 提问或文字信息\n   */\n  afterItemClick: context => (_, actions) => {\n    const tabName = tabs[tabIndex];\n    scroll_position = window.pageYOffset;\n\n    if (tabName === TABNAME_QUESTIONS) {\n      window.G_QUESTION = context;\n      actions.setState({\n        last_visit_question_id: context.question_id\n      });\n    } else if (tabName === TABNAME_ARTICLES) {\n      window.G_ARTICLE = context;\n      actions.setState({\n        last_visit_article_id: context.article_id\n      });\n    } else {\n      window.G_ANSWER = context;\n      actions.setState({\n        last_visit_answer_id: context.answer_id\n      });\n    }\n  },\n\n  /**\n   * 切换排序方式\n   */\n  changeOrder: order => (state, actions) => {\n    const tabName = tabs[tabIndex];\n\n    if (order === state[`${tabName}_order`]) {\n      return;\n    }\n\n    actions.setState({\n      [`${tabName}_order`]: order,\n      [`${tabName}_data`]: [],\n      [`${tabName}_pagination`]: null\n    });\n    actions.afterChangeTab();\n  },\n\n  /**\n   * 删除头像\n   */\n  deleteAvatar: e => (state, actions) => {\n    e.preventDefault();\n    mdui.confirm('系统将删除现有头像，并随机生成一个新头像。', '要删除现有头像吗？', () => {\n      deleteMyAvatar().then(({\n        data\n      }) => {\n        const {\n          user\n        } = state;\n        user.avatar = data;\n        actions.setState({\n          user\n        });\n      }).catch(apiCatch);\n    }, () => {}, {\n      confirmText: '删除',\n      cancelText: '取消'\n    });\n  },\n\n  /**\n   * 删除封面\n   */\n  deleteCover: e => (state, actions) => {\n    e.preventDefault();\n    mdui.confirm('系统将删除现有封面，并重置为默认封面。', '要删除现有封面吗？', () => {\n      deleteMyCover().then(({\n        data\n      }) => {\n        const {\n          user\n        } = state;\n        user.cover = data;\n        actions.setState({\n          user\n        });\n      }).catch(apiCatch);\n    }, () => {}, {\n      confirmText: '删除',\n      cancelText: '取消'\n    });\n  },\n\n  /**\n   * 更新个人信息\n   */\n  updateUserInfo: () => (_, actions) => {\n    if (editInfoDialog) {\n      editInfoDialog.open();\n      return;\n    }\n\n    const $dialog = $('#page-user .edit-info');\n    editInfoDialog = new mdui.Dialog($dialog, {\n      closeOnConfirm: false\n    });\n    $dialog.on('open.mdui.dialog', () => {\n      $dialog.find('.mdui-textfield-input')[0].focus();\n    });\n    $dialog.on('opened.mdui.dialog', () => {\n      editInfoDialog.handleUpdate();\n    });\n    $dialog.on('confirm.mdui.dialog', () => {\n      const formData = {\n        include: ['is_following']\n      };\n      $dialog.find('form').serializeArray().forEach(item => {\n        formData[item.name] = item.value;\n      });\n      actions.setState({\n        edit_info_submitting: true\n      });\n      updateMine(formData).finally(() => {\n        actions.setState({\n          edit_info_submitting: false\n        });\n      }).then(({\n        data\n      }) => {\n        const updateData = {\n          user: data\n        };\n\n        if (data.user_id === interviewee_id) {\n          updateData.interviewee = data;\n        }\n\n        actions.setState(updateData);\n        editInfoDialog.close();\n        mdui.snackbar('更新成功');\n      }).catch(apiCatch);\n    });\n    editInfoDialog.open();\n  }\n};\nexport default extend(as, commonActions, userPopoverActions);","import $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { COMMON_FIELD_VERIFY_FAILED } from 'mdclub-sdk-js/es/errors';\nimport { generate as generateCaptcha } from 'mdclub-sdk-js/es/CaptchaApi';\nimport { login } from 'mdclub-sdk-js/es/TokenApi';\nimport commonActions from '~/utils/actionsAbstract';\nimport { setCookie } from '~/utils/cookie';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nlet dialog;\nlet $name;\nlet $password;\nlet $captchaCode;\nconst as = {\n  /**\n   * 响应输入框输入事件\n   */\n  onInput: e => {\n    const input = e.target;\n    return {\n      [input.name]: input.value,\n      [`${input.name}_msg`]: ''\n    };\n  },\n\n  /**\n   * 初始化\n   */\n  onCreate: props => {\n    const $element = $(props.element).mutation();\n    dialog = new mdui.Dialog($element, {\n      modal: true,\n      history: false\n    });\n    $name = $element.find('[name=\"name\"]');\n    $password = $element.find('[name=\"password\"]');\n    $captchaCode = $element.find('[name=\"captcha_code\"]');\n    $element.on('open.mdui.dialog', () => {\n      $name[0].focus();\n    });\n  },\n\n  /**\n   * 打开登陆框\n   */\n  open: () => {\n    dialog.open();\n  },\n\n  /**\n   * 关闭登录界面对话框\n   */\n  close: () => {\n    if (dialog) {\n      dialog.close();\n    }\n  },\n\n  /**\n   * 打开注册对话框\n   */\n  toRegister: () => {\n    dialog.close();\n    emit('register_open');\n  },\n\n  /**\n   * 打开重置密码对话框\n   */\n  toReset: () => {\n    dialog.close();\n    emit('reset_open');\n  },\n\n  /**\n   * 刷新验证码\n   */\n  refreshCaptcha: () => (_, actions) => {\n    generateCaptcha().then(({\n      data: {\n        captcha_token,\n        captcha_image\n      }\n    }) => {\n      actions.setState({\n        captcha_token,\n        captcha_image,\n        captcha_code: ''\n      });\n      setTimeout(() => {\n        $captchaCode[0].focus();\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 执行登录\n   */\n  login: e => (state, actions) => {\n    e.preventDefault();\n    actions.setState({\n      submitting: true\n    });\n    const loginData = {\n      name: state.name,\n      password: state.password,\n      device: navigator.userAgent\n    };\n\n    if (state.captcha_token) {\n      loginData.captcha_token = state.captcha_token;\n      loginData.captcha_code = state.captcha_code;\n    }\n\n    login(loginData).then(({\n      data\n    }) => {\n      setCookie('token', data.token);\n      window.location.reload();\n    }).catch(response => {\n      actions.setState({\n        submitting: false,\n        captcha_token: response.captcha_token || '',\n        captcha_image: response.captcha_image || '',\n        captcha_code: ''\n      }); // 字段验证失败\n\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        const name_msg = response.errors.name || '';\n        const password_msg = response.errors.password || '';\n        const captcha_code_msg = response.errors.captcha_code || '';\n        actions.setState({\n          name_msg,\n          password_msg,\n          captcha_code_msg\n        });\n\n        if (name_msg) {\n          $name[0].focus();\n        } else if (password_msg) {\n          $password[0].focus();\n        } else if (captcha_code_msg) {\n          $captchaCode[0].focus();\n        }\n\n        return;\n      } // 其他错误\n\n\n      apiCatch(response);\n    });\n  }\n};\nexport default extend(as, commonActions);","import $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { COMMON_FIELD_VERIFY_FAILED, COMMON_EMAIL_VERIFY_EXPIRED } from 'mdclub-sdk-js/es/errors';\nimport { generate as generateCaptcha } from 'mdclub-sdk-js/es/CaptchaApi';\nimport { register, sendRegisterEmail } from 'mdclub-sdk-js/es/UserApi';\nimport { login } from 'mdclub-sdk-js/es/TokenApi';\nimport { setCookie } from '~/utils/cookie';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport commonActions from '~/utils/actionsAbstract';\nlet dialog;\nlet $email;\nlet $emailCode;\nlet $username;\nlet $password;\nlet $captchaCode;\nconst as = {\n  /**\n   * 响应输入框输入事件\n   */\n  onInput: e => {\n    const input = e.target;\n    return {\n      [input.name]: input.value,\n      [`${input.name}_msg`]: ''\n    };\n  },\n\n  /**\n   * 初始化\n   */\n  onCreate: props => state => {\n    const $element = $(props.element).mutation();\n    dialog = new mdui.Dialog($element, {\n      modal: true,\n      history: false\n    });\n    $email = $element.find('[name=\"email\"]');\n    $emailCode = $element.find('[name=\"email_code\"]');\n    $username = $element.find('[name=\"username\"]');\n    $password = $element.find('[name=\"password\"]');\n    $captchaCode = $element.find('[name=\"captcha_code\"]');\n    $element.on('open.mdui.dialog', () => {\n      if (state.email_valid) {\n        $username[0].focus();\n      } else {\n        $email[0].focus();\n      }\n    });\n  },\n\n  /**\n   * 打开注册界面对话框\n   */\n  open: () => {\n    dialog.open();\n  },\n\n  /**\n   * 关闭注册界面对话框\n   */\n  close: () => {\n    if (dialog) {\n      dialog.close();\n    }\n  },\n\n  /**\n   * 打开登录对话框\n   */\n  toLogin: () => {\n    dialog.close();\n    emit('login_open');\n  },\n\n  /**\n   * 刷新验证码\n   */\n  refreshCaptcha: () => (_, actions) => {\n    generateCaptcha().then(({\n      data: {\n        captcha_token,\n        captcha_image\n      }\n    }) => {\n      actions.setState({\n        captcha_token,\n        captcha_image,\n        captcha_code: ''\n      });\n      setTimeout(() => {\n        $captchaCode[0].focus();\n      }, 0);\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 60秒倒计时\n   */\n  countdown: () => (state, actions) => {\n    if (state.resend_countdown > 0) {\n      actions.setState({\n        resend_countdown: state.resend_countdown - 1\n      });\n      setTimeout(actions.countdown, 1000);\n    } else {\n      actions.setState({\n        show_resend_countdown: false\n      });\n    }\n  },\n\n  /**\n   * 开始重新发送倒计时\n   */\n  sendCountdown: () => (_, actions) => {\n    actions.setState({\n      show_resend_countdown: true,\n      resend_countdown: 60\n    });\n    actions.countdown();\n  },\n\n  /**\n   * 发送邮件\n   */\n  sendEmail: () => (state, actions) => {\n    if (!$email[0].validity.valid) {\n      $email[0].focus();\n      return;\n    }\n\n    if (state.captcha_token && !$captchaCode[0].validity.valid) {\n      actions.setState({\n        captcha_code_msg: '请输入图形验证码'\n      });\n      $captchaCode[0].focus();\n      return;\n    }\n\n    actions.setState({\n      sending: true\n    });\n    const formData = {\n      email: state.email\n    };\n\n    if (state.captcha_token) {\n      formData.captcha_token = state.captcha_token;\n      formData.captcha_code = state.captcha_code;\n    }\n\n    sendRegisterEmail(formData).finally(() => {\n      actions.setState({\n        sending: false,\n        captcha_token: '',\n        captcha_image: '',\n        captcha_code: '',\n        email_code: '',\n        email_code_msg: ''\n      });\n    }).then(() => {\n      mdui.snackbar('邮箱验证码已发送');\n      actions.sendCountdown();\n    }).catch(response => {\n      actions.setState({\n        captcha_token: response.captcha_token || '',\n        captcha_image: response.captcha_image || ''\n      }); // 字段验证失败\n\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        const email_msg = response.errors.email || '';\n        const captcha_code_msg = response.errors.captcha_code || '';\n        actions.setState({\n          email_msg,\n          captcha_code_msg\n        });\n\n        if (email_msg) {\n          $email[0].focus();\n        } else if (captcha_code_msg) {\n          $captchaCode[0].focus();\n        }\n\n        return;\n      } // 其他错误\n\n\n      apiCatch(response);\n    });\n  },\n\n  /**\n   * 回到上一步\n   */\n  prevStep: () => (_, actions) => {\n    actions.setState({\n      email_valid: false\n    });\n  },\n\n  /**\n   * 点击下一步\n   */\n  nextStep: e => (state, actions) => {\n    e.preventDefault();\n    actions.setState({\n      verifying: true\n    });\n    const formData = {\n      email: state.email,\n      email_code: state.email_code\n    }; // 没有传入 username 和 password 参数，调用接口一定会返回错误\n    // 若返回字段验证失败，且不含 email 和 email_code，则表示邮箱验证通过\n\n    register(formData).finally(() => {\n      actions.setState({\n        verifying: false\n      });\n    }).catch(response => {\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        // 不含 email 和 email_code 即表示邮箱验证通过\n        if (!response.errors.email && !response.errors.email_code) {\n          actions.setState({\n            email_valid: true\n          });\n          setTimeout(() => {\n            $username[0].focus();\n          }, 0);\n          return;\n        } // 邮箱验证未通过\n\n\n        const email_msg = response.errors.email || '';\n        const email_code_msg = response.errors.email_code || '';\n        actions.setState({\n          email_msg,\n          email_code_msg\n        });\n\n        if (email_msg) {\n          $email[0].focus();\n        } else if (email_code_msg) {\n          $emailCode[0].focus();\n        }\n\n        return;\n      } // 邮箱验证码已失效，需要重新发送邮件\n\n\n      if (response.code === COMMON_EMAIL_VERIFY_EXPIRED) {\n        mdui.snackbar('验证码已失效，请重新发送邮箱验证码', {\n          timeout: 10000\n        });\n        actions.setState({\n          email_code: '',\n          email_code_msg: ''\n        });\n        return;\n      } // 其他错误\n\n\n      apiCatch(response);\n    });\n  },\n\n  /**\n   * 提交注册\n   */\n  register: e => (state, actions) => {\n    e.preventDefault();\n    actions.setState({\n      submitting: true\n    });\n    const registerData = {\n      email: state.email,\n      email_code: state.email_code,\n      username: state.username,\n      password: state.password\n    };\n    const loginData = {\n      name: state.username,\n      password: state.password,\n      device: window.navigator.userAgent\n    };\n    register(registerData).then(response => {\n      emit('user_update', response.data);\n      return login(loginData);\n    }).finally(() => {\n      actions.setState({\n        submitting: false\n      });\n    }).then(({\n      data\n    }) => {\n      setCookie('token', data.token);\n      window.location.reload();\n    }).catch(response => {\n      // 字段验证失败\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        const email_msg = response.errors.email || '';\n        const email_code_msg = response.errors.email_code || '';\n        const username_msg = response.errors.username || '';\n        const password_msg = response.errors.password || ''; // 如果是邮箱或验证码错误，回到上一步\n\n        if (email_msg || email_code_msg) {\n          actions.setState({\n            email_valid: false,\n            email_msg,\n            email_code_msg\n          });\n\n          if (email_msg) {\n            $email[0].focus();\n          } else if (email_code_msg) {\n            $emailCode[0].focus();\n          }\n\n          return;\n        } // 用户名或密码错误\n\n\n        actions.setState({\n          username_msg,\n          password_msg\n        });\n\n        if (username_msg) {\n          $username[0].focus();\n        } else if (password_msg) {\n          $password[0].focus();\n        }\n\n        return;\n      } // 验证码失效，重新验证邮箱，回到上一步\n\n\n      if (response.code === COMMON_EMAIL_VERIFY_EXPIRED) {\n        mdui.snackbar('验证码已失效，请重新发送邮箱验证码', {\n          timeout: 10000\n        });\n        actions.setState({\n          email_valid: false,\n          email_code: '',\n          email_code_msg: ''\n        });\n        return;\n      }\n\n      apiCatch(response);\n    });\n  }\n};\nexport default extend(as, commonActions);","import $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { COMMON_FIELD_VERIFY_FAILED, COMMON_EMAIL_VERIFY_EXPIRED } from 'mdclub-sdk-js/es/errors';\nimport { generate as generateCaptcha } from 'mdclub-sdk-js/es/CaptchaApi';\nimport { sendPasswordResetEmail, updatePassword } from 'mdclub-sdk-js/es/UserApi';\nimport commonActions from '~/utils/actionsAbstract';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nlet dialog;\nlet $email;\nlet $emailCode;\nlet $captchaCode;\nlet $password;\nlet $passwordRepeat;\nconst as = {\n  /**\n   * 响应输入框输入事件\n   */\n  onInput: e => {\n    const input = e.target;\n    return {\n      [input.name]: input.value,\n      [`${input.name}_msg`]: ''\n    };\n  },\n\n  /**\n   * 初始化\n   */\n  onCreate: props => state => {\n    const $element = $(props.element).mutation();\n    dialog = new mdui.Dialog($element, {\n      modal: true,\n      history: false\n    });\n    $email = $element.find('[name=\"email\"]');\n    $emailCode = $element.find('[name=\"email_code\"]');\n    $password = $element.find('[name=\"password\"]');\n    $passwordRepeat = $element.find('[name=\"password_repeat\"]');\n    $captchaCode = $element.find('[name=\"captcha_code\"]');\n    $element.on('open.mdui.dialog', () => {\n      if (state.email_valid) {\n        $password[0].focus();\n      } else {\n        $email[0].focus();\n      }\n    });\n  },\n\n  /**\n   * 打开重置密码对话框\n   */\n  open: () => {\n    dialog.open();\n  },\n\n  /**\n   * 关闭重置密码对话框\n   */\n  close: () => {\n    if (dialog) {\n      dialog.close();\n    }\n  },\n\n  /**\n   * 打开登录对话框\n   */\n  toLogin: () => {\n    dialog.close();\n    emit('login_open');\n  },\n\n  /**\n   * 打开注册对话框\n   */\n  toRegister: () => {\n    dialog.close();\n    emit('register_open');\n  },\n\n  /**\n   * 刷新验证码\n   */\n  refreshCaptcha: () => (_, actions) => {\n    generateCaptcha().then(({\n      data: {\n        captcha_token,\n        captcha_image\n      }\n    }) => {\n      actions.setState({\n        captcha_token,\n        captcha_image,\n        captcha_code: ''\n      });\n      setTimeout(() => {\n        $captchaCode[0].focus();\n      }, 0);\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 60秒倒计时\n   */\n  countdown: () => (state, actions) => {\n    if (state.resend_countdown > 0) {\n      actions.setState({\n        resend_countdown: state.resend_countdown - 1\n      });\n      setTimeout(actions.countdown, 1000);\n    } else {\n      actions.setState({\n        show_resend_countdown: false\n      });\n    }\n  },\n\n  /**\n   * 开始重新发送倒计时\n   */\n  sendCountdown: () => (_, actions) => {\n    actions.setState({\n      show_resend_countdown: true,\n      resend_countdown: 60\n    });\n    actions.countdown();\n  },\n\n  /**\n   * 发送邮件\n   */\n  sendEmail: () => (state, actions) => {\n    if (!$email[0].validity.valid) {\n      $email[0].focus();\n      return;\n    }\n\n    if (state.captcha_token && !$captchaCode[0].validity.valid) {\n      actions.setState({\n        captcha_code_msg: '请输入图形验证码'\n      });\n      $captchaCode[0].focus();\n      return;\n    }\n\n    actions.setState({\n      sending: true\n    });\n    const formData = {\n      email: state.email\n    };\n\n    if (state.captcha_token) {\n      formData.captcha_token = state.captcha_token;\n      formData.captcha_code = state.captcha_code;\n    }\n\n    sendPasswordResetEmail(formData).finally(() => {\n      actions.setState({\n        sending: false,\n        captcha_token: '',\n        captcha_image: '',\n        captcha_code: '',\n        email_code: '',\n        email_code_msg: ''\n      });\n    }).then(() => {\n      mdui.snackbar('邮箱验证码已发送');\n      actions.sendCountdown();\n    }).catch(response => {\n      actions.setState({\n        captcha_token: response.captcha_token || '',\n        captcha_image: response.captcha_image || ''\n      }); // 字段验证失败\n\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        const email_msg = response.errors.email || '';\n        const captcha_code_msg = response.errors.captcha_code || '';\n        actions.setState({\n          email_msg,\n          captcha_code_msg\n        });\n\n        if (email_msg) {\n          $email[0].focus();\n        } else if (captcha_code_msg) {\n          $captchaCode[0].focus();\n        }\n\n        return;\n      } // 其他错误\n\n\n      apiCatch(response);\n    });\n  },\n\n  /**\n   * 回到上一步\n   */\n  prevStep: () => (_, actions) => {\n    actions.setState({\n      email_valid: false\n    });\n  },\n\n  /**\n   * 点击下一步\n   */\n  nextStep: e => (state, actions) => {\n    e.preventDefault();\n    actions.setState({\n      verifying: true\n    });\n    const formData = {\n      email: state.email,\n      email_code: state.email_code\n    }; // 没有传入 password 参数，调用接口一定会返回错误\n    // 若返回字段验证失败，且不含 email 和 email_code，则表示邮箱验证通过\n\n    updatePassword(formData).finally(() => {\n      actions.setState({\n        verifying: false\n      });\n    }).catch(response => {\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        // 不含 email 和 email_code 即表示邮箱验证通过\n        if (!response.errors.email && !response.errors.email_code) {\n          actions.setState({\n            email_valid: true\n          });\n          setTimeout(() => {\n            $password[0].focus();\n          }, 0);\n          return;\n        } // 邮箱验证未通过\n\n\n        const email_msg = response.errors.email || '';\n        const email_code_msg = response.errors.email_code || '';\n        actions.setState({\n          email_msg,\n          email_code_msg\n        });\n\n        if (email_msg) {\n          $email[0].focus();\n        } else if (email_code_msg) {\n          $emailCode[0].focus();\n        }\n\n        return;\n      } // 邮箱验证码已失效，需要重新发送邮件\n\n\n      if (response.code === COMMON_EMAIL_VERIFY_EXPIRED) {\n        mdui.snackbar('验证码已失效，请重新发送邮箱验证码', {\n          timeout: 10000\n        });\n        actions.setState({\n          email_code: '',\n          email_code_msg: ''\n        });\n        return;\n      } // 其他错误\n\n\n      apiCatch(response);\n    });\n  },\n\n  /**\n   * 提交新密码\n   */\n  submit: e => (state, actions) => {\n    e.preventDefault(); // 验证两次密码一致\n\n    if (state.password !== state.password_repeat) {\n      actions.setState({\n        password_repeat_msg: '两次输入的密码不一致'\n      });\n      $passwordRepeat[0].focus();\n      return;\n    }\n\n    actions.setState({\n      submitting: true\n    });\n    const formData = {\n      email: state.email,\n      email_code: state.email_code,\n      password: state.password\n    };\n    updatePassword(formData).finally(() => {\n      actions.setState({\n        submitting: false\n      });\n    }).then(() => {\n      mdui.snackbar('重置密码成功');\n      dialog.close();\n      emit('login_open');\n    }).catch(response => {\n      // 字段验证失败\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        const email_msg = response.errors.email || '';\n        const email_code_msg = response.errors.email_code || '';\n        const password_msg = response.errors.password || ''; // 如果是邮箱或验证码错误，回到上一步\n\n        if (email_msg || email_code_msg) {\n          actions.setState({\n            email_valid: false,\n            email_msg,\n            email_code_msg\n          });\n\n          if (email_msg) {\n            $email[0].focus();\n          } else if (email_code_msg) {\n            $emailCode[0].focus();\n          }\n\n          return;\n        }\n\n        actions.setState({\n          password_msg\n        });\n\n        if (password_msg) {\n          $password[0].focus();\n        }\n\n        return;\n      } // 邮箱验证码失效，需要重新发送验证码，回到上一步\n\n\n      if (response.code === COMMON_EMAIL_VERIFY_EXPIRED) {\n        mdui.snackbar('验证码已失效，请重新发送邮箱验证码', {\n          timeout: 10000\n        });\n        actions.setState({\n          email_valid: false,\n          email_code: '',\n          email_code_msg: ''\n        });\n        return;\n      } // 其他错误\n\n\n      apiCatch(response);\n    });\n  }\n};\nexport default extend(as, commonActions);","import { location } from 'hyperapp-router';\nimport $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { getFollowees, getFollowers } from 'mdclub-sdk-js/es/UserApi';\nimport { getFollowers as getArticleFollowers } from 'mdclub-sdk-js/es/ArticleApi';\nimport { getFollowers as getQuestionFollowers } from 'mdclub-sdk-js/es/QuestionApi';\nimport { getFollowers as getTopicFollowers } from 'mdclub-sdk-js/es/TopicApi';\nimport commonActions from '~/utils/actionsAbstract';\nimport stateDefault from '~/components/users-dialog/stateDefault';\nimport { fullPath } from '~/utils/path';\nimport apiCatch from '~/utils/errorHandler';\nlet dialog;\nlet $dialog;\nlet $content;\nconst service = {\n  followees: getFollowees,\n  followers: getFollowers,\n  topic_followers: getTopicFollowers,\n  question_followers: getQuestionFollowers,\n  article_followers: getArticleFollowers\n};\nconst paramField = {\n  followees: 'user_id',\n  followers: 'user_id',\n  topic_followers: 'topic_id',\n  question_followers: 'question_id',\n  article_followers: 'article_id'\n};\nconst as = {\n  onCreate: ({\n    element\n  }) => {\n    $dialog = $(element);\n    $content = $dialog.find('.mdui-dialog-content');\n  },\n\n  /**\n   * 打开对话框\n   * @param props\n   * {type: string, id: int}\n   * 用户列表类型 followees, followers, topic_followers, question_followers, article_followers\n   */\n  open: ({\n    type,\n    id\n  }) => (state, actions) => {\n    if (!dialog) {\n      dialog = new mdui.Dialog('.mc-users-dialog', {\n        history: false\n      });\n      dialog.$element.on('closed.mdui.dialog', () => {\n        actions.setState(stateDefault);\n      });\n    }\n\n    actions.setState({\n      type,\n      data: [],\n      pagination: null,\n      loading: true\n    });\n    dialog.open();\n\n    const loaded = promise => {\n      promise.finally(() => {\n        actions.setState({\n          loading: false\n        });\n      }).then(({\n        data,\n        pagination\n      }) => {\n        actions.setState({\n          data: actions.getState().data.concat(data),\n          pagination\n        });\n      }).catch(apiCatch);\n    };\n\n    const infiniteLoad = () => {\n      if (actions.getState().loading) {\n        return;\n      }\n\n      const {\n        pagination\n      } = actions.getState();\n\n      if (!pagination) {\n        return;\n      }\n\n      if (pagination.page >= pagination.pages) {\n        return;\n      }\n\n      if ($content[0].scrollHeight - $content[0].scrollTop - $content[0].offsetHeight > 100) {\n        return;\n      }\n\n      actions.setState({\n        loading: true\n      });\n      loaded(service[type]({\n        [paramField[type]]: id,\n        page: pagination.page + 1,\n        include: ['is_following', 'is_me']\n      }));\n    };\n\n    loaded(service[type]({\n      [paramField[type]]: id,\n      include: ['is_following', 'is_me']\n    }));\n    $content.on('scroll', infiniteLoad);\n    $dialog.on('close.mdui.dialog', () => {\n      $content.off('scroll', infiniteLoad);\n    });\n  },\n\n  /**\n   * 关闭对话框\n   */\n  close: () => {\n    if (dialog) {\n      dialog.close();\n    }\n  },\n\n  /**\n   * 点击 item\n   */\n  onItemClick: user_id => {\n    location.actions.go(fullPath(`/users/${user_id}`));\n    dialog.close();\n  }\n};\nexport default extend(as, commonActions);","import mdui from 'mdui';\nimport $ from 'mdui.jq';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window, $document } from 'mdui/es/utils/dom';\nimport { createComment as createQuestionComment, getComments as getQuestionComments } from 'mdclub-sdk-js/es/QuestionApi';\nimport { createComment as createAnswerComment, getComments as getAnswerComments } from 'mdclub-sdk-js/es/AnswerApi';\nimport { createComment as createArticleComment, getComments as getArticleComments } from 'mdclub-sdk-js/es/ArticleApi';\nimport { COMMON_FIELD_VERIFY_FAILED } from 'mdclub-sdk-js/es/errors';\nimport { createReply, getReplies } from 'mdclub-sdk-js/es/CommentApi';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport commonActions from '~/utils/actionsAbstract';\nimport apiCatch from '~/utils/errorHandler';\nimport { findIndex } from '~/utils/func';\nimport voteActions from '~/components/vote/actions';\nimport userPopoverActions from '~/components/user-popover/actions';\nimport stateDefault from './stateDefault';\nconst per_page = 20;\nconst include = ['user', 'voting'];\nlet $commentsWrapper; // 获取评论列表\n\nconst getComments = (commentable_type, commentable_id, order, page = 1) => {\n  const params = {\n    page,\n    per_page,\n    order,\n    include\n  };\n  let promise;\n\n  switch (commentable_type) {\n    case 'question':\n      params.question_id = commentable_id;\n      promise = getQuestionComments(params);\n      break;\n\n    case 'article':\n      params.article_id = commentable_id;\n      promise = getArticleComments(params);\n      break;\n\n    default:\n      // answer\n      params.answer_id = commentable_id;\n      promise = getAnswerComments(params);\n      break;\n  }\n\n  promise.then(response => {\n    response.data.forEach((item, index) => {\n      // 添加 show_replies 字段，表示是否显示评论的回复列表\n      response.data[index].show_replies = false; // 添加 show_new_reply 字段，表示是否显示回复框\n\n      response.data[index].show_new_reply = false; // 是否正在发表回复\n\n      response.data[index].reply_submitting = false; // 是否正在加载回复列表\n\n      response.data[index].replies_loading = false; // 回复列表数据列表\n\n      response.data[index].replies_data = []; // 回复列表数据分页\n\n      response.data[index].replies_pagination = null;\n    });\n    return response;\n  });\n  return promise;\n};\n/**\n * isInDialog: 是否在模态框中\n * 若不在模态框中，直接加载评论\n * 若在模态框中，在调用 openDialog 方法后加载评论\n */\n\n\nconst as = {\n  onCreate: ({\n    commentable_type,\n    commentable_id,\n    isInDialog\n  }) => (state, actions) => {\n    const isTargetUpdated = state.commentable_type !== commentable_type || state.commentable_id !== commentable_id;\n\n    if (isTargetUpdated && !isInDialog) {\n      actions.setState(stateDefault);\n      actions.setState({\n        commentable_type,\n        commentable_id\n      });\n      actions.loadData();\n    }\n\n    if (!isInDialog) {\n      $window.on('scroll', actions.infiniteLoadInPage);\n    }\n  },\n  onDestroy: ({\n    isInDialog\n  }) => (_, actions) => {\n    if (!isInDialog) {\n      $window.off('scroll', actions.infiniteLoadInPage);\n    }\n  },\n\n  /**\n   * 指定关闭评论模态框\n   */\n  doCloseDialog: () => (_, actions) => {\n    $.hideOverlay();\n    setTimeout(() => {\n      $('.mc-comments-dialog').hide();\n      $.unlockScreen();\n    }, 300);\n    actions.setState({\n      open_dialog: false\n    });\n  },\n\n  /**\n   * 打开评论模态框\n   */\n  openDialog: ({\n    commentable_type,\n    commentable_id\n  }) => (state, actions) => {\n    $commentsWrapper = $('.comments-wrapper');\n    $.showOverlay();\n    $.lockScreen();\n    $('.mc-comments-dialog').show();\n    $document.on('click', '.mdui-overlay', actions.doCloseDialog);\n    $commentsWrapper.on('scroll', actions.infiniteLoadInDialog);\n    const isTargetUpdated = state.commentable_type !== commentable_type || state.commentable_id !== commentable_id;\n\n    if (isTargetUpdated) {\n      actions.setState(stateDefault);\n      actions.setState({\n        commentable_type,\n        commentable_id\n      });\n      actions.loadData();\n    }\n\n    actions.setState({\n      open_dialog: true\n    });\n  },\n\n  /**\n   * 关闭评论模态框\n   */\n  closeDialog: () => (state, actions) => {\n    if (!state.open_dialog) {\n      return;\n    }\n\n    actions.doCloseDialog();\n    $document.off('click', '.mdui-overlay', actions.doCloseDialog);\n    $commentsWrapper.off('scroll', actions.infiniteLoadInDialog);\n  },\n\n  /**\n   * 发布评论\n   */\n  onSubmit: () => (state, actions) => {\n    const funcMaps = {\n      question: createQuestionComment,\n      answer: createAnswerComment,\n      article: createArticleComment\n    };\n    const fieldMaps = {\n      question: 'question_id',\n      answer: 'answer_id',\n      article: 'article_id'\n    };\n    const $newComment = $('.new-comment');\n    const $textarea = $newComment.find('textarea');\n    const content = $textarea.val();\n\n    if (!content) {\n      mdui.snackbar('请输入评论内容');\n      return;\n    }\n\n    const params = {\n      [fieldMaps[state.commentable_type]]: state.commentable_id,\n      content,\n      include: ['user', 'voting']\n    };\n    actions.setState({\n      submitting: true\n    });\n    funcMaps[state.commentable_type](params).finally(() => {\n      actions.setState({\n        submitting: false\n      });\n    }).then(({\n      data\n    }) => {\n      mdui.snackbar('评论发布成功');\n      $textarea.val('');\n      mdui.updateTextFields($newComment); // 若按热门排序，且已加载到最后一页，把新评论插到最后面\n      // 若按时间顺序，且已加载到最后一页，把新评论插到最后面\n      // 若按时间倒序，把新评论插到最前面\n\n      const {\n        pagination\n      } = state;\n      const isLoadedAll = pagination && (pagination.page === pagination.pages || !pagination.pages);\n      pagination.total += 1;\n      actions.setState({\n        pagination\n      });\n\n      if (state.order === '-create_time') {\n        actions.setState({\n          comments_data: [data].concat(state.comments_data)\n        });\n      } else if (isLoadedAll) {\n        actions.setState({\n          comments_data: state.comments_data.concat(data)\n        });\n      }\n    }).catch(response => {\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        mdui.snackbar(response.errors.content);\n        return;\n      }\n\n      apiCatch(response);\n    });\n  },\n\n  /**\n   * 切换评论的排序方式\n   */\n  changeOrder: order => (state, actions) => {\n    if (order === state.order) {\n      return;\n    }\n\n    actions.setState({\n      order,\n      comments_data: [],\n      pagination: null\n    });\n    actions.loadData();\n  },\n\n  /**\n   * 加载评论\n   */\n  loadData: () => (state, actions) => {\n    // 从页面中加载评论数据\n    const loadFromPage = () => {\n      const comments = window.G_COMMENTS;\n\n      if (comments) {\n        actions.setState({\n          comments_data: comments.data,\n          pagination: comments.pagination,\n          loading: false\n        });\n        window.G_COMMENTS = null;\n      }\n\n      return comments;\n    }; // ajax 加载评论数据\n\n\n    const loadFromServer = () => {\n      actions.setState({\n        loading: true\n      });\n      getComments(state.commentable_type, state.commentable_id, state.order).finally(() => {\n        actions.setState({\n          loading: false\n        });\n      }).then(response => {\n        actions.setState({\n          comments_data: response.data,\n          pagination: response.pagination\n        });\n      }).catch(apiCatch);\n    };\n\n    if (loadFromPage()) {\n      return;\n    }\n\n    loadFromServer();\n  },\n  infiniteLoadInPage: () => (state, actions) => {\n    actions.infiniteLoad({\n      isInDialog: false\n    });\n  },\n  infiniteLoadInDialog: () => (state, actions) => {\n    actions.infiniteLoad({\n      isInDialog: true\n    });\n  },\n\n  /**\n   * 下拉加载更多\n   */\n  infiniteLoad: ({\n    isInDialog\n  }) => (state, actions) => {\n    if (state.loading) {\n      return;\n    }\n\n    const {\n      pagination\n    } = state;\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (isInDialog) {\n      if ($commentsWrapper[0].scrollHeight - $commentsWrapper[0].scrollTop - $commentsWrapper[0].clientHeight > 100) {\n        return;\n      }\n    } else if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.setState({\n      loading: true\n    });\n    getComments(state.commentable_type, state.commentable_id, state.order, pagination.page + 1).finally(() => {\n      actions.setState({\n        loading: false\n      });\n    }).then(response => {\n      actions.setState({\n        comments_data: state.comments_data.concat(response.data),\n        pagination: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 切换 comments_data 中的字段值\n   * @param comment_id\n   * @param fieldName 字段名\n   * @param value 若为 undefined，则表示切换布尔值，否则设置为 value 值\n   */\n  toggleState: ({\n    comment_id,\n    fieldName,\n    value = undefined\n  }) => (state, actions) => {\n    const {\n      comments_data\n    } = state;\n    const index = findIndex(comments_data, 'comment_id', comment_id);\n    const comment = comments_data[index];\n    comments_data[index][fieldName] = isUndefined(value) ? !comment[fieldName] : value;\n    actions.setState({\n      comments_data\n    }); // 如果是打开回复列表，则开始加载回复列表\n\n    if (fieldName === 'show_replies' && comment[fieldName] && !comment.replies_pagination) {\n      actions.loadReplies({\n        comment\n      });\n    }\n  },\n\n  /**\n   * 加载回复列表\n   */\n  loadReplies: ({\n    comment\n  }) => (state, actions) => {\n    const isLoaded = !comment.replies_loading && comment.replies_pagination && comment.replies_pagination.page === comment.replies_pagination.pages;\n    const isLoading = comment.replies_loading;\n\n    if (isLoading || isLoaded) {\n      return;\n    }\n\n    actions.toggleState({\n      comment_id: comment.comment_id,\n      fieldName: 'replies_loading',\n      value: true\n    });\n    getReplies({\n      comment_id: comment.comment_id,\n      page: comment.replies_pagination ? comment.replies_pagination.page + 1 : 1,\n      per_page: 10,\n      order: 'create_time',\n      include: ['user', 'voting']\n    }).finally(() => {\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'replies_loading',\n        value: false\n      });\n    }).then(response => {\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'replies_data',\n        value: comment.replies_data.concat(response.data)\n      });\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'replies_pagination',\n        value: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 发表回复\n   */\n  submitReply: ({\n    target,\n    comment\n  }) => (state, actions) => {\n    const $element = $(target).parent();\n    const $button = $element.find('.submit');\n\n    if ($button[0].disabled) {\n      return;\n    }\n\n    const $textarea = $element.find('textarea');\n    const value = $textarea.val();\n\n    if (!value) {\n      mdui.snackbar('请输入回复内容');\n      return;\n    }\n\n    const params = {\n      comment_id: comment.comment_id,\n      content: value,\n      include: ['user', 'voting']\n    };\n    actions.toggleState({\n      comment_id: comment.comment_id,\n      fieldName: 'reply_submitting',\n      value: true\n    });\n    createReply(params).finally(() => {\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'reply_submitting',\n        value: false\n      });\n    }).then(() => {\n      mdui.snackbar('回复发布成功'); // 发表成功后，隐藏回复框，回复数量+1\n\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'show_new_reply'\n      });\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'reply_count',\n        value: comment.reply_count + 1\n      }); // todo\n    }).catch(response => {\n      if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n        mdui.snackbar(response.errors.content);\n        return;\n      }\n\n      apiCatch(response);\n    });\n  }\n};\nexport default extend(as, commonActions, voteActions, userPopoverActions);","import $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { COMMON_FIELD_VERIFY_FAILED } from 'mdclub-sdk-js/es/errors';\nimport { create as createReport } from 'mdclub-sdk-js/es/ReportApi';\nimport commonActions from '~/utils/actionsAbstract';\nimport apiCatch from '~/utils/errorHandler';\nimport stateDefault from './stateDefault';\nlet dialog;\nconst as = {\n  onCreate: ({\n    element\n  }) => (_, actions) => {\n    const $element = $(element).mutation();\n    dialog = new mdui.Dialog($element, {\n      history: false\n    });\n    dialog.$element.on('confirm.mdui.dialog', () => {\n      const $customReason = dialog.$element.find('.custom-reason');\n      const customReason = $customReason.val();\n      const {\n        type,\n        item,\n        reason\n      } = actions.getState();\n\n      const getReportableId = () => {\n        switch (type) {\n          case 'question':\n            return item.question_id;\n\n          case 'answer':\n            return item.answer_id;\n\n          case 'article':\n            return item.article_id;\n\n          case 'comment':\n            return item.comment_id;\n\n          case 'user':\n            return item.user_id;\n\n          default:\n            return null;\n        }\n      };\n\n      createReport({\n        reportable_type: type,\n        reportable_id: getReportableId(),\n        reason: reason === '其他原因' ? customReason : reason\n      }).finally(() => {\n        actions.setState(stateDefault);\n        $customReason.val('');\n      }).then(() => {\n        mdui.snackbar('举报成功');\n      }).catch(response => {\n        if (response.code === COMMON_FIELD_VERIFY_FAILED) {\n          mdui.snackbar(Object.values(response.errors)[0]);\n          return;\n        }\n\n        apiCatch(response);\n      });\n      dialog.close();\n    });\n  },\n\n  /**\n   * 选择原因\n   */\n  onChange: event => (state, actions) => {\n    const reason = event.target.value;\n    actions.setState({\n      reason\n    });\n\n    if ([reason, state.reason].indexOf('其他原因') > -1) {\n      setTimeout(() => dialog.handleUpdate());\n    }\n  },\n\n  /**\n   * 打开举报弹框\n   */\n  open: ({\n    type,\n    item\n  }) => (_, actions) => {\n    actions.setState({\n      type,\n      item\n    });\n    dialog.open();\n  },\n\n  /**\n   * 关闭举报弹框\n   */\n  close: () => {\n    dialog.close();\n  }\n};\nexport default extend(as, commonActions);","import $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport commonActions from '~/utils/actionsAbstract';\nlet dialog;\nconst as = {\n  onCreate: ({\n    element\n  }) => {\n    const $element = $(element).mutation();\n    dialog = new mdui.Dialog($element, {\n      history: false\n    });\n  },\n\n  /**\n   * 打开分享弹框\n   */\n  open: ({\n    url,\n    title\n  }) => (_, actions) => {\n    actions.setState({\n      url,\n      title\n    });\n    dialog.open();\n  },\n\n  /**\n   * 关闭分享弹框\n   */\n  close: () => {\n    dialog.close();\n  },\n\n  /**\n   * 分享到微博\n   */\n  shareToWeibo: () => (state, actions) => {\n    actions.close();\n    window.open(`https://service.weibo.com/share/share.php?url=${state.url}&title=${state.title}`);\n  },\n\n  /**\n   * 分享到 Facebook\n   */\n  shareToFacebook: () => (state, actions) => {\n    actions.close();\n    window.open(`https://www.facebook.com/sharer/sharer.php?u=${state.url}`);\n  },\n\n  /**\n   * 分享到 Twitter\n   */\n  shareToTwitter: () => (state, actions) => {\n    actions.close();\n    window.open(`https://twitter.com/intent/tweet?url=${state.url}`);\n  }\n};\nexport default extend(as, commonActions);","import { getRequest, postRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL } from './util/requestHandler';\n/**\n * 🔑删除一条通知\n *\n * 只要没有错误异常，无论是否有通知被删除，该接口都会返回成功。\n */\n\nexport const del = params => deleteRequest(buildURL('/notifications/{notification_id}', params));\n/**\n * 🔑删除所有通知\n *\n * 只要没有错误异常，无论是否有通知被删除，该接口都会返回成功。\n */\n\nexport const deleteAll = (params = {}) => deleteRequest(buildURL('/notifications', params, ['type']));\n/**\n * 🔑批量删除通知\n *\n * 只要没有错误异常，无论是否有通知被删除，该接口都会返回成功。\n */\n\nexport const deleteMultiple = params => deleteRequest(buildURL('/notifications/{notification_ids}', params));\n/**\n * 🔑获取未读通知数量\n *\n * 获取未读通知数量。\n */\n\nexport const getCount = (params = {}) => getRequest(buildURL('/notifications/count', params, ['type']));\n/**\n * 🔑获取通知列表\n *\n * 获取通知列表。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/notifications', params, ['page', 'per_page', 'include', 'type', 'read']));\n/**\n * 🔑把一条通知标记为已读\n *\n * 把一条通知标记为已读。\n */\n\nexport const read = params => postRequest(buildURL('/notifications/{notification_id}/read', params, ['include']));\n/**\n * 🔑把所有通知标记为已读\n *\n * 只要没有错误异常。无论是否有通知被标记为已读，该接口都会返回成功。\n */\n\nexport const readAll = (params = {}) => postRequest(buildURL('/notifications/read', params, ['type']));\n/**\n * 🔑批量把通知标记为已读\n *\n * 批量把通知标记为已读。\n */\n\nexport const readMultiple = params => postRequest(buildURL('/notifications/{notification_ids}/read', params, ['include']));","import mdui from 'mdui/es/mdui';\nimport extend from 'mdui.jq/es/functions/extend';\nimport { $window } from 'mdui/es/utils/dom';\nimport { getList as getNotifications, del as deleteNotification, readAll } from 'mdclub-sdk-js/es/NotificationApi';\nimport { get as getAnswer } from 'mdclub-sdk-js/es/AnswerApi';\nimport { get as getComment } from 'mdclub-sdk-js/es/CommentApi';\nimport commonActions from '~/utils/actionsAbstract';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport currentUser from '~/utils/currentUser';\nimport { findIndex } from '~/utils/func';\nconst per_page = 20;\nconst include = [// 'receiver',\n'sender', 'article', 'question', 'answer', 'comment', 'reply']; // 下次打开通知页面是否需要重新加载\n\nconst needReload = false;\n\nconst transformData = data => {\n  return data.map(item => {\n    // 是否已加载通知对应的详细信息\n    item.is_loaded_detail = false; // 是否显示通知对应的详细内容\n\n    item.is_show_detail = false; // 通知对应的详细信息内容\n\n    item.content_detail = '';\n    return item;\n  });\n};\n\nconst as = {\n  onCreate: () => (state, actions) => {\n    emit('route_update');\n    actions.setTitle('通知');\n\n    if (!currentUser()) {\n      return;\n    } // 当有未读通知时，需要重新加载列表\n\n\n    if (!state.pagination || state.count || needReload) {\n      actions.loadData();\n    } // 进入通知页面，即标记所有通知为已读\n\n\n    readAll().then(() => {\n      actions.updateCount(0);\n    }).catch(apiCatch);\n    $window.on('scroll', actions.infiniteLoad);\n  },\n  onDestroy: () => (_, actions) => {\n    $window.off('scroll', actions.infiniteLoad);\n  },\n\n  /**\n   * 更新未读通知数量\n   */\n  updateCount: count => (_, actions) => {\n    actions.setState({\n      count\n    });\n  },\n\n  /**\n   * 加载通知列表\n   */\n  loadData: () => (state, actions) => {\n    actions.setState({\n      data: [],\n      pagination: null,\n      loading: true\n    });\n    getNotifications({\n      page: 1,\n      per_page,\n      include\n    }).finally(() => {\n      actions.setState({\n        loading: false\n      });\n    }).then(response => {\n      actions.setState({\n        data: transformData(response.data),\n        pagination: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 绑定下拉加载更多\n   */\n  infiniteLoad: () => (state, actions) => {\n    if (state.loading) {\n      return;\n    }\n\n    const {\n      pagination\n    } = state;\n\n    if (pagination.page >= pagination.pages) {\n      return;\n    }\n\n    if (document.body.scrollHeight - window.pageYOffset - window.innerHeight > 100) {\n      return;\n    }\n\n    actions.setState({\n      loading: true\n    });\n    getNotifications({\n      page: pagination.page + 1,\n      per_page,\n      include\n    }).finally(() => {\n      actions.setState({\n        loading: false\n      });\n    }).then(response => {\n      actions.setState({\n        data: state.data.concat(transformData(response.data)),\n        pagination: response.pagination\n      });\n    }).catch(apiCatch);\n  },\n\n  /**\n   * 删除一条通知\n   */\n  deleteOne: notification => (state, actions) => {\n    const onConfirm = () => {\n      const {\n        data\n      } = state;\n      const index = findIndex(data, 'notification_id', notification.notification_id);\n      data.splice(index, 1);\n      actions.setState({\n        data\n      });\n      deleteNotification({\n        notification_id: notification.notification_id\n      }).catch(apiCatch);\n    };\n\n    const onCancel = () => false;\n\n    const options = {\n      history: false,\n      confirmText: '确定',\n      cancelText: '取消'\n    };\n    mdui.confirm('确认删除这条通知？', onConfirm, onCancel, options);\n  },\n\n  /**\n   * 切换通知详情的显示\n   */\n  toggleDetail: notification => (state, actions) => {\n    const {\n      data\n    } = state;\n    const index = findIndex(data, 'notification_id', notification.notification_id);\n    const item = data[index];\n    item.is_show_detail = !item.is_show_detail;\n\n    if (item.is_show_detail && item.is_loaded_detail) {\n      // 已经加载过详情，直接切换\n      data[index] = item;\n      actions.setState({\n        data\n      });\n    } else {\n      // 加载详情\n      switch (item.type) {\n        // content_deleted 中加载文章、提问、回答、评论\n        case 'article_deleted':\n        case 'question_deleted':\n        case 'answer_deleted':\n        case 'comment_deleted':\n          item.is_loaded_detail = true;\n          item.content_detail = item.type === 'comment_deleted' ? item.content_deleted.content : item.content_deleted.content_rendered;\n          data[index] = item;\n          actions.setState({\n            data\n          });\n          break;\n        // ajax 加载评论、回答\n\n        case 'question_commented':\n        case 'article_commented':\n        case 'answer_commented':\n        case 'comment_replies':\n        case 'question_answered':\n          data[index] = item;\n          actions.setState({\n            data\n          });\n          (item.type === 'question_answered' ? getAnswer({\n            answer_id: item.answer_id\n          }) : getComment({\n            comment_id: item.comment_id\n          })).then(response => {\n            item.is_loaded_detail = true;\n            item.content_detail = item.type === 'question_answered' ? response.data.content_rendered : response.data.content;\n            data[index] = item;\n            actions.setState({\n              data\n            });\n          }).catch(apiCatch);\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n};\nexport default extend(as, commonActions);","import { postRequest } from './util/requestAlias';\nimport { buildURL } from './util/requestHandler';\n/**\n * 生成新的图形验证码\n *\n * 生成新的图形验证码。\n */\n\nexport const generate = () => postRequest(buildURL('/captchas', {}));","// @ts-ignore\nimport sha1 from 'sha-1';\nimport { postRequest } from './util/requestAlias';\nimport { buildURL, buildRequestBody } from './util/requestHandler';\nimport defaults from './defaults';\n/**\n * 生成 Token\n *\n * 通过账号密码登陆，返回 Token 信息。  若登录失败，且返回信息中含参数 &#x60;captcha_token&#x60; 和 &#x60;captcha_image&#x60;， 表示下次调用该接口时，需要用户输入图形验证码，并把 &#x60;captcha_token&#x60; 和 &#x60;captcha_code&#x60; 参数传递到服务端。\n */\n\nexport const login = params => {\n  if (params.password) {\n    params.password = sha1(params.password);\n  }\n\n  return postRequest(buildURL('/tokens', params), buildRequestBody(params, ['name', 'password', 'device', 'captcha_token', 'captcha_code'])).then(response => {\n    if (!response.code) {\n      defaults.adapter.setStorage('token', response.data.token);\n    }\n\n    return response;\n  });\n};","export default {\n  // 对话框类型：followees, followers, topic_followers, question_followers, article_followers\n  type: '',\n  data: [],\n  pagination: null,\n  loading: false\n};","export default {\n  // 评论目标类型：article, question, answer\n  commentable_type: '',\n  // 评论目标的ID\n  commentable_id: 0,\n  // 排序方式\n  order: 'create_time',\n  // 评论列表\n  comments_data: [],\n  // 评论分页信息，为 null 表示未加载初始数据\n  pagination: null,\n  // 是否正在加载评论\n  loading: false,\n  // 是否正在发表评论\n  submitting: false,\n  // 是否打开评论模态框\n  open_dialog: false\n};","export default {\n  /**\n   * 举报类型：question, answer, article, comment, user\n   */\n  type: '',\n\n  /**\n   * 举报目标信息\n   */\n  item: null,\n\n  /**\n   * 举报原因\n   */\n  reason: ''\n};","import { getRequest, postRequest, deleteRequest } from './util/requestAlias';\nimport { buildURL, buildRequestBody } from './util/requestHandler';\n/**\n * 🔐删除举报\n *\n * 删除举报。\n */\n\nexport const del = params => deleteRequest(buildURL('/reports/{reportable_type}:{reportable_id}', params));\n/**\n * 🔑添加举报\n *\n * 添加举报。\n */\n\nexport const create = params => postRequest(buildURL('/reports/{reportable_type}:{reportable_id}', params, ['include']), buildRequestBody(params, ['reason']));\n/**\n * 🔐批量删除举报\n *\n * 批量删除举报。  只要没有错误异常，无论是否有记录被删除，该接口都会返回成功。\n */\n\nexport const deleteMultiple = params => deleteRequest(buildURL('/reports/{report_targets}', params));\n/**\n * 🔐获取被举报的内容列表\n *\n * 获取被举报的内容列表。\n */\n\nexport const getList = (params = {}) => getRequest(buildURL('/reports', params, ['page', 'per_page', 'include', 'reportable_type']));\n/**\n * 🔐获取被举报内容的举报详情\n *\n * 获取被举报内容的举报详情。\n */\n\nexport const getReasons = params => getRequest(buildURL('/reports/{reportable_type}:{reportable_id}', params, ['page', 'per_page', 'include']));","import { location } from 'hyperapp-router'; // 页面\n\nimport index from '~/pages/index/actions';\nimport questions from '../pages/questions/actions';\nimport questionAndAnswer from '../pages/question/actions';\nimport articles from '../pages/articles/actions';\nimport article from '../pages/article/actions';\nimport topics from '../pages/topics/actions';\nimport topic from '../pages/topic/actions';\nimport users from '../pages/users/actions';\nimport user from '~/pages/user/actions';\nimport notifications from '~/pages/notifications/actions'; // import inbox from '../pages/inbox/actions';\n// 组件\n\nimport theme from '~/components/theme/actions';\nimport login from '~/components/login/actions';\nimport register from '~/components/register/actions';\nimport reset from '~/components/reset/actions';\nimport usersDialog from '~/components/users-dialog/actions';\nimport comments from '~/components/comments/actions';\nimport reportDialog from '~/components/report-dialog/actions';\nimport shareDialog from '~/components/share-dialog/actions';\nexport default {\n  location: location.actions,\n  getState: () => state => state,\n  // 页面\n  index,\n  questions,\n  question: questionAndAnswer,\n  answer: questionAndAnswer,\n  articles,\n  article,\n  topics,\n  topic,\n  users,\n  user,\n  notifications,\n  // inbox,\n  // 组件\n  theme,\n  login,\n  register,\n  reset,\n  usersDialog,\n  comments,\n  reportDialog,\n  shareDialog\n};","export default {\n  /**\n   * 设置应用布局色\n   */\n  setLayout: layout => ({\n    layout\n  })\n};","import extend from 'mdui.jq/es/functions/extend';\nimport topicsState from './components/topics/state';\nconst as = {\n  topics_data: [],\n  topics_pagination: null,\n  topics_loading: false,\n  questions_recent_data: [],\n  questions_recent_pagination: null,\n  questions_recent_loading: false,\n  questions_popular_data: [],\n  questions_popular_pagination: null,\n  questions_popular_loading: false,\n  articles_recent_data: [],\n  articles_recent_pagination: null,\n  articles_recent_loading: false,\n  articles_popular_data: [],\n  articles_popular_pagination: null,\n  articles_popular_loading: false\n};\nexport default extend(as, topicsState);","export default {\n  // 是否显示话题的左箭头\n  topics_show_arrow_left: false,\n  // 是否显示话题的右箭头\n  topics_show_arrow_right: false\n};","import extend from 'mdui.jq/es/functions/extend';\nimport editorState from '~/components/editor/state';\nimport stateDefault from './stateDefault';\nconst as = {\n  // 表示当前为提问页面\n  route: 'question'\n};\nexport default extend(as, stateDefault, editorState);","import extend from 'mdui.jq/es/functions/extend';\nimport editorState from '~/components/editor/state';\nimport stateDefault from './stateDefault';\nconst as = {\n  // 表示当前为回答页面\n  route: 'answer'\n};\nexport default extend(as, stateDefault, editorState);","import extend from 'mdui.jq/es/functions/extend';\nimport stateDefault from './stateDefault';\nexport default extend({}, stateDefault);","import extend from 'mdui.jq/es/functions/extend';\nimport stateDefault from './stateDefault';\nexport default extend({}, stateDefault);","import extend from 'mdui.jq/es/functions/extend';\nimport stateDefault from './stateDefault';\nconst state = {\n  // 当前登录用户信息，为 null 时表示未登录\n  user: null\n};\nexport default extend(state, stateDefault);","const state = {\n  layout: 'light'\n};\nexport default state;","import extend from 'mdui.jq/es/functions/extend';\nimport stateDefault from '~/components/users-dialog/stateDefault';\nexport default extend({}, stateDefault);","import extend from 'mdui.jq/es/functions/extend';\nimport stateDefault from './stateDefault';\n/**\n * 在需要用到编辑器的页面中，引入该 state\n */\n\nexport default extend({}, stateDefault);","import extend from 'mdui.jq/es/functions/extend';\nimport stateDefault from './stateDefault';\nexport default extend({}, stateDefault);","import { location } from 'hyperapp-router'; // 页面\n\nimport index from '~/pages/index/state';\nimport questions from '../pages/questions/state';\nimport question from '../pages/question/questionState';\nimport answer from '../pages/question/answerState';\nimport articles from '../pages/articles/state';\nimport article from '../pages/article/state';\nimport topics from '../pages/topics/state';\nimport topic from '../pages/topic/state';\nimport users from '../pages/users/state';\nimport user from '~/pages/user/state';\nimport notifications from '~/pages/notifications/state'; // import inbox from '../pages/inbox/state';\n// 组件\n\nimport theme from '~/components/theme/state';\nimport login from '~/components/login/state';\nimport register from '~/components/register/state';\nimport reset from '~/components/reset/state';\nimport usersDialog from '~/components/users-dialog/state';\nimport comments from '~/components/comments/state';\nimport reportDialog from '~/components/report-dialog/state';\nimport shareDialog from '~/components/share-dialog/state';\nexport default {\n  location: location.state,\n  // 页面\n  index,\n  questions,\n  question,\n  answer,\n  articles,\n  article,\n  topics,\n  topic,\n  users,\n  user,\n  notifications,\n  // inbox,\n  // 组件\n  theme,\n  login,\n  register,\n  reset,\n  usersDialog,\n  comments,\n  reportDialog,\n  shareDialog\n};","export default {\n  data: [],\n  pagination: null,\n  // 为 null 时表示未加载初始数据\n  loading: false,\n  count: null // 通过 /notifications/count 接口获取的未读消息数量\n\n};","export default {\n  name: '',\n  name_msg: '',\n  password: '',\n  password_msg: '',\n  captcha_code: '',\n  captcha_code_msg: '',\n  captcha_token: '',\n  captcha_image: '',\n  submitting: false\n};","export default {\n  // 邮箱\n  email: '',\n  email_msg: '',\n  // 验证码\n  email_code: '',\n  email_code_msg: '',\n  // 用户名\n  username: '',\n  username_msg: '',\n  // 密码\n  password: '',\n  password_msg: '',\n  // 图形验证码\n  captcha_code: '',\n  captcha_code_msg: '',\n  // 图形验证码token和图片\n  captcha_token: '',\n  captcha_image: '',\n  // 邮箱验证是否通过\n  email_valid: false,\n  // 是否正在发送验证码\n  sending: false,\n  // 是否显示重新发送倒计时\n  show_resend_countdown: false,\n  // 重新发送验证码倒计时\n  resend_countdown: 60,\n  // 是否正在验证中\n  verifying: false,\n  // 是否正在提交注册\n  submitting: false\n};","export default {\n  // 邮箱\n  email: '',\n  email_msg: '',\n  // 验证码\n  email_code: '',\n  email_code_msg: '',\n  // 新密码\n  password: '',\n  password_msg: '',\n  // 重复新密码\n  password_repeat: '',\n  password_repeat_msg: '',\n  // 图形验证码\n  captcha_code: '',\n  captcha_code_msg: '',\n  // 图形验证码token和图片\n  captcha_token: '',\n  captcha_image: '',\n  // 邮箱验证是否通过\n  email_valid: false,\n  // 是否正在发送验证码\n  sending: false,\n  // 是否显示重新发送倒计时\n  show_resend_countdown: false,\n  // 重新发送验证码倒计时\n  resend_countdown: 60,\n  // 是否正在验证中\n  verifying: false,\n  // 是否正在提交新密码\n  submitting: false\n};","export default {\n  /**\n   * 链接\n   */\n  url: '',\n\n  /**\n   * 描述\n   */\n  title: ''\n};","var isArray = Array.isArray\n\nexport default function cc(obj) {\n  var out = \"\"\n\n  if (typeof obj === \"string\" || typeof obj === \"number\") return obj || \"\"\n\n  if (isArray(obj))\n    for (var k = 0, tmp; k < obj.length; k++) {\n      if ((tmp = cc(obj[k])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  else\n    for (var k in obj) {\n      if (obj.hasOwnProperty(k) && obj[k]) out += (out && \" \") + k\n    }\n\n  return out\n}\n","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nexport default (({\n  title,\n  url\n}) => h(Link, {\n  class: \"header mdui-ripple\",\n  to: fullPath(url)\n}, h(\"div\", {\n  class: \"mdui-text-color-theme-secondary\"\n}, title), h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme\"\n}, \"arrow_forward\")));","const easeInOutQuad = (t, b, c, d) => {\n  t /= d / 2;\n  if (t < 1) return c / 2 * t * t + b;\n  t -= 1;\n  return -c / 2 * (t * (t - 2) - 1) + b;\n};\n\nexport function scrollToTop(duration = 300) {\n  const start = window.scrollY || window.pageYOffset;\n  const stop = document.body.getBoundingClientRect().top + start;\n  const distance = stop - start;\n  let timeStart;\n  let timeElapsed;\n  let next;\n\n  function loop(timeCurrent) {\n    if (!timeStart) {\n      timeStart = timeCurrent;\n    }\n\n    timeElapsed = timeCurrent - timeStart;\n    next = easeInOutQuad(timeElapsed, start, distance, duration);\n    window.scrollTo(0, next);\n\n    if (timeElapsed < duration) {\n      window.requestAnimationFrame(loop);\n    } else {\n      window.scrollTo(0, start + distance);\n      timeStart = false;\n    }\n  }\n\n  window.requestAnimationFrame(loop);\n}\nexport function scrollHorizontal(element, options) {\n  const duration = options.duration || 300;\n  const offset = options.offset || 0;\n  const {\n    callback\n  } = options;\n  const start = element.scrollLeft;\n  let timeStart;\n  let timeElapsed;\n  let next;\n\n  function loop(timeCurrent) {\n    if (!timeStart) {\n      timeStart = timeCurrent;\n    }\n\n    timeElapsed = timeCurrent - timeStart;\n    next = easeInOutQuad(timeElapsed, start, offset, duration);\n    element.scrollLeft = next;\n\n    if (timeElapsed < duration) {\n      window.requestAnimationFrame(loop);\n    } else {\n      // 滚动结束后，纠正误差\n      element.scrollLeft = start + offset;\n\n      if (callback) {\n        callback();\n      }\n\n      timeStart = false;\n    }\n  }\n\n  window.requestAnimationFrame(loop);\n}","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport cc from 'classcat';\nimport './index.less';\nexport default (({\n  show\n}) => h(\"div\", {\n  key: \"mc-loading\",\n  class: cc(['mc-loading', {\n    'mdui-hidden': !show\n  }])\n}, h(\"div\", {\n  class: \"mdui-spinner\",\n  oncreate: element => $(element).mutation()\n})));","import $ from 'mdui.jq';\nimport hljs from 'highlight.js/lib/core';\nimport 'highlight.js/styles/vs.css';\nimport './vs2015-style.css';\nimport xml from 'highlight.js/lib/languages/xml';\nimport css from 'highlight.js/lib/languages/css';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport json from 'highlight.js/lib/languages/json';\nimport php from 'highlight.js/lib/languages/php';\nhljs.registerLanguage('xml', xml);\nhljs.registerLanguage('css', css);\nhljs.registerLanguage('javascript', javascript);\nhljs.registerLanguage('json', json);\nhljs.registerLanguage('php', php);\nexport default (element => {\n  $(element).find('pre').each((_, block) => {\n    hljs.highlightBlock(block);\n  });\n});","import data from 'mdui.jq/es/functions/data';\nimport highlight from '~/vendor/highlight/index';\n/**\n * 富文本，包含代码高亮\n */\n\nexport const richText = html => element => {\n  // 把原始 html 保存，避免在 onupdate 事件中，html 未变更时也重新渲染\n  if (data(element, 'html') === html) {\n    return;\n  }\n\n  data(element, 'html', html);\n\n  if (!html || html.replace(/ /gi, '') === '<p><br/></p>') {\n    html = '';\n  }\n\n  element.innerHTML = html;\n  highlight(element);\n};\n/**\n * 移除 HTML 标签，移除换行符，返回纯文本。用于显示富文本摘要或单行纯文本\n * @param str 字符串\n * @param length 截取的字符串长度，默认不截取\n */\n\nexport const summaryText = (str, length = 0) => element => {\n  if (data(element, 'html') === str) {\n    return;\n  }\n\n  data(element, 'html', str);\n  let text = str.replace(/<[^>]+>/g, '');\n\n  if (length) {\n    text = text.substr(0, length);\n  }\n\n  element.innerHTML = text;\n};\n/**\n * 纯文本，把换行符转换为 <p>\n * @param str\n */\n\nexport const plainText = str => element => {\n  if (data(element, 'html') === str) {\n    return;\n  }\n\n  data(element, 'html', str);\n  element.innerHTML = `<p>${str.replace(/[\\r\\n]/g, '</p><p>')}</p>`;\n};","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\n/**\n * 数量显示优化\n * 小于 1000 时，直接显示\n * 1000 - 10000 之间时，以 k 为单位，保留一位小数。例如 1.9k\n * 大于 10000 时，以 k 为单位，舍去小数。例如 19k\n *\n * @param badge\n */\n\nconst badgeFormat = badge => {\n  if (badge < 1000) {\n    return badge;\n  }\n\n  if (badge < 10000) {\n    return `${(badge / 1000).toFixed(1)}k`;\n  }\n\n  return `${Math.floor(badge / 1000)}k`;\n};\n\nexport default (({\n  cls = '',\n  icon,\n  iconActive,\n  tooltip = '',\n  badge = 0,\n  active = false,\n  onClick\n}) => h(\"button\", {\n  class: cc(['mc-icon-button', 'mdui-btn', 'mdui-btn-icon', 'mdui-btn-outlined', {\n    active\n  }, cls]),\n  \"mdui-tooltip\": `{content: '${tooltip}', delay: 300}`,\n  onclick: onClick\n}, badge ? h(\"span\", {\n  class: \"badge\"\n}, badgeFormat(badge)) : null, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, active && iconActive ? iconActive : icon)));","import { h } from 'hyperapp';\nimport './index.less';\nimport IconButton from '~/components/icon-button/view.jsx';\n/**\n * @param item 用户、提问、文章信息\n * @param type question, topic, topics, user, users, article, relationships-user\n * @param primaryKey 仅 relationships-user 需要传入该参数，表示提问ID或文章ID或评论ID的字段名\n * @param id 若 type 为 topics、users、relationships-user，则需要传入该参数\n * @param dataName 若 type 为 relationships-user 时，需要传入改参数\n * @param actions\n */\n\nexport default (({\n  item,\n  type,\n  primaryKey = null,\n  id = null,\n  dataName = null,\n  actions\n}) => {\n  const {\n    is_following\n  } = item.relationships;\n  return h(IconButton, {\n    cls: \"mc-follow\",\n    icon: \"star_border\",\n    iconActive: \"star\",\n    tooltip: is_following ? '取消关注' : '关注',\n    active: is_following,\n    onClick: () => actions.toggleFollow({\n      type,\n      dataName,\n      primaryKey,\n      id\n    })\n  });\n});","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport { emit } from '~/utils/pubsub';\nimport { summaryText } from '~/utils/html';\nimport './index.less';\nimport Follow from '~/components/follow/view.jsx';\nexport default (({\n  topic,\n  actions,\n  type = 'topics'\n}) => h(\"div\", {\n  class: \"mc-topic-item item-inner\",\n  key: topic.topic_id\n}, h(\"div\", {\n  class: \"item mdui-card\",\n  style: {\n    backgroundImage: `url(\"${topic.cover.small}\")`\n  }\n}, h(Link, {\n  to: fullPath(`/topics/${topic.topic_id}`),\n  class: \"mdui-ripple info\",\n  onclick: () => actions.afterItemClick(topic)\n}, h(\"div\", {\n  class: \"name mdui-text-color-theme-text\",\n  oncreate: summaryText(topic.name),\n  onupdate: summaryText(topic.name)\n})), h(\"div\", {\n  class: \"actions\"\n}, h(Follow, {\n  item: topic,\n  type: type,\n  id: topic.topic_id,\n  actions: actions\n}), h(\"button\", {\n  class: \"followers mdui-btn mdui-ripple mdui-text-color-theme-secondary\",\n  onclick: () => {\n    emit('users_dialog_open', {\n      type: 'topic_followers',\n      id: topic.topic_id\n    });\n  }\n}, topic.follower_count, \" \\u4EBA\\u5173\\u6CE8\")))));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport $ from 'mdui.jq';\nimport { scrollHorizontal } from '~/utils/scroll';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport TopicItem from '~/components/topic-item/view.jsx';\n\nconst jumpEnd = (element, actions) => {\n  actions.setState({\n    topics_show_arrow_left: element.scrollLeft > 0,\n    topics_show_arrow_right: element.scrollLeft + element.offsetWidth < element.scrollWidth\n  });\n};\n\nconst jumpTo = (event, position, actions) => {\n  const element = $(event.target).parents('.topics-wrapper').find('.topics')[0];\n  const isLeft = position === 'left';\n  const offset = element.offsetWidth * (isLeft ? -1 : 1);\n  scrollHorizontal(element, {\n    offset,\n    callback: () => {\n      jumpEnd(element, actions);\n    }\n  });\n};\n\nconst Arrow = ({\n  icon,\n  cls,\n  show,\n  onClick\n}) => h(\"button\", {\n  class: cc(['mdui-btn', 'mdui-btn-raised', 'mdui-btn-icon', 'mdui-ripple', cls, {\n    'mdui-hidden': !show\n  }]),\n  onclick: onClick\n}, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, icon));\n\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  class: \"topics-wrapper\"\n}, h(\"div\", {\n  class: \"topics\",\n  onupdate: element => jumpEnd(element, actions)\n}, state.topics_data.map(topic => h(TopicItem, {\n  topic: topic,\n  actions: actions,\n  type: \"index_topics\"\n}))), h(Arrow, {\n  icon: \"keyboard_arrow_left\",\n  cls: \"arrow-left\",\n  show: state.topics_show_arrow_left,\n  onClick: event => jumpTo(event, 'left', actions)\n}), h(Arrow, {\n  icon: \"keyboard_arrow_right\",\n  cls: \"arrow-right\",\n  show: state.topics_show_arrow_right,\n  onClick: event => jumpTo(event, 'right', actions)\n}), h(Loading, {\n  show: state.topics_loading\n})));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport { emit } from '~/utils/pubsub';\nimport { fullPath } from '~/utils/path';\nimport currentUser from '~/utils/currentUser';\nimport './index.less';\n\nconst copy = url => {\n  let textArea; // 判断是不是ios端\n\n  function isOS() {\n    return window.navigator.userAgent.match(/ipad|iphone/i);\n  } // 创建文本元素\n\n\n  function createTextArea(text) {\n    textArea = document.createElement('textArea');\n    textArea.value = text;\n    document.body.appendChild(textArea);\n  } // 选择内容\n\n\n  function selectText() {\n    if (isOS()) {\n      const range = document.createRange();\n      range.selectNodeContents(textArea);\n      const selection = window.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(range);\n      textArea.setSelectionRange(0, 999999);\n    } else {\n      textArea.select();\n    }\n  } // 复制到剪贴板\n\n\n  function copyToClipboard() {\n    try {\n      if (document.execCommand('Copy')) {\n        mdui.snackbar('已复制');\n      } else {\n        mdui.snackbar('复制失败！请手动复制！');\n      }\n    } catch (err) {\n      mdui.snackbar('复制失败！请手动复制！');\n    }\n\n    document.body.removeChild(textArea);\n  }\n\n  createTextArea(url);\n  selectText();\n  copyToClipboard();\n};\n/**\n * @param type question, answer, article, comment, user, topic\n * @param item\n * @param extraOptions [{ name, onClick }] 额外的菜单项\n */\n\n\nexport default (({\n  type,\n  item,\n  extraOptions = null\n}) => {\n  let url;\n  let title; // eslint-disable-next-line default-case\n\n  switch (type) {\n    case 'question':\n      url = `/questions/${item.question_id}`;\n      title = item.title;\n      break;\n\n    case 'answer':\n      url = `/questions/${item.question_id}/answers/${item.answer_id}`;\n      title = item.title;\n      break;\n\n    case 'article':\n      url = `/articles/${item.article_id}`;\n      title = item.title;\n      break;\n\n    case 'comment':\n      title = item.content;\n      break;\n\n    case 'user':\n      url = `/users/${item.user_id}`;\n      title = item.username;\n      break;\n\n    case 'topic':\n      url = `/topics/${item.topic_id}`;\n      title = item.name;\n      break;\n  }\n\n  url = `${window.location.protocol}//${window.location.host}${fullPath(url)}`;\n\n  const Item = ({\n    name,\n    onClick\n  }) => h(\"li\", {\n    class: \"mdui-menu-item\"\n  }, h(\"a\", {\n    class: \"mdui-ripple\",\n    onclick: onClick\n  }, name));\n\n  return h(\"div\", {\n    class: \"mc-options-button\",\n    oncreate: element => {\n      const $element = $(element); // eslint-disable-next-line no-new\n\n      new mdui.Menu($element.children('button'), $element.children('.mdui-menu'), {\n        position: 'top',\n        align: 'right'\n      });\n    }\n  }, h(\"button\", {\n    class: cc(['mdui-btn', 'mdui-btn-icon', 'mdui-text-color-theme-icon', 'mdui-ripple'])\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons\"\n  }, \"more_vert\")), h(\"ul\", {\n    class: \"mdui-menu\"\n  }, type !== 'comment' ? [h(Item, {\n    name: \"\\u590D\\u5236\\u94FE\\u63A5\",\n    onClick: () => copy(url),\n    key: \"0\"\n  }), h(Item, {\n    name: \"\\u5206\\u4EAB\",\n    onClick: () => emit('share_dialog_open', {\n      url,\n      title\n    }),\n    key: \"1\"\n  })] : null, type !== 'topic' && (type !== 'user' || !currentUser() || currentUser().user_id !== item.user_id) ? h(Item, {\n    name: \"\\u4E3E\\u62A5\",\n    onClick: () => emit('report_dialog_open', {\n      type,\n      item\n    })\n  }) : null, extraOptions ? extraOptions.map(option => h(Item, {\n    name: option.name,\n    onClick: option.onClick\n  })) : null));\n});","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport $ from 'mdui.jq';\nimport { unescape } from 'html-escaper';\nimport { fullPath } from '~/utils/path';\nimport { emit } from '~/utils/pubsub';\nimport currentUser from '~/utils/currentUser';\nimport './index.less';\nimport Follow from '~/components/follow/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\n\nconst StatItem = ({\n  url,\n  label,\n  count\n}) => h(Link, {\n  to: url,\n  class: \"mdui-btn mdui-ripple\"\n}, h(\"label\", {\n  class: \"mdui-text-color-theme-secondary\"\n}, label), h(\"span\", {\n  class: \"mdui-text-color-theme-text\"\n}, count));\n\nexport default (({\n  actions,\n  user,\n  dataName,\n  primaryKey = null,\n  primaryValue = null\n}, children) => h(\"div\", {\n  class: \"mc-user-popover\",\n  key: \"mc-user-popover\",\n  onclick: event => event.preventDefault(),\n  oncreate: element => {\n    actions.onUserPopoverCreate({\n      element,\n      dataName,\n      primaryKey,\n      primaryValue\n    });\n  }\n}, children, h(\"div\", {\n  class: \"popover mdui-menu\",\n  key: \"popover\"\n}, user.cover ? [h(\"div\", {\n  class: \"mc-user-line\",\n  key: \"0\"\n}, h(Link, {\n  key: \"avatar\",\n  class: \"avatar user-popover-trigger\",\n  to: fullPath(`/users/${user.user_id}`),\n  style: {\n    backgroundImage: `url(\"${user.avatar.middle}\")`\n  }\n}), h(Link, {\n  key: \"username\",\n  class: \"username user-popover-trigger mdui-text-color-theme-text\",\n  to: fullPath(`/users/${user.user_id}`)\n}, user.username), h(\"div\", {\n  key: \"headline\",\n  class: \"headline mdui-text-color-theme-secondary\"\n}, unescape(user.headline))), h(\"div\", {\n  class: \"stats\",\n  key: \"1\"\n}, h(StatItem, {\n  url: fullPath(`/users/${user.user_id}#answers`),\n  label: \"\\u56DE\\u7B54\",\n  count: user.answer_count\n}), h(StatItem, {\n  url: fullPath(`/users/${user.user_id}#articles`),\n  label: \"\\u6587\\u7AE0\",\n  count: user.article_count\n}), h(\"button\", {\n  class: \"mdui-btn mdui-ripple\",\n  onclick: () => {\n    emit('users_dialog_open', {\n      type: 'followers',\n      id: user.user_id\n    });\n  }\n}, h(\"label\", {\n  class: \"mdui-text-color-theme-secondary\"\n}, \"\\u5173\\u6CE8\\u8005\"), h(\"span\", {\n  class: \"mdui-text-color-theme-text\"\n}, user.follower_count))), h(\"div\", {\n  class: \"bottom\",\n  key: \"2\"\n}, !currentUser() || currentUser().user_id !== user.user_id ? h(Follow, {\n  item: user,\n  type: \"relationships-user\",\n  dataName: dataName,\n  primaryKey: primaryKey,\n  id: primaryValue,\n  actions: actions\n}) : null, h(\"div\", {\n  class: \"flex-grow\"\n}), h(OptionsButton, {\n  type: \"user\",\n  item: user\n}))] : null, !user.cover ? h(\"div\", {\n  key: \"mc-user-popover-spinner\",\n  class: \"mdui-spinner\",\n  oncreate: element => $(element).mutation()\n}) : null)));","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport UserPopover from '~/components/user-popover/view.jsx';\nimport Header from '../header/view.jsx';\nimport { summaryText } from '~/utils/html';\nexport default (({\n  title,\n  items,\n  primaryKey,\n  dataName,\n  loading,\n  url,\n  actions\n}) => h(\"div\", {\n  class: \"items-container\"\n}, h(\"div\", {\n  class: \"items mdui-card\"\n}, h(Header, {\n  title: title,\n  url: url\n}), h(\"div\", {\n  class: \"content\"\n}, h(Loading, {\n  show: loading\n}), items.map(item => h(Link, {\n  class: \"item\",\n  to: fullPath(`${url.split('#')[0]}/${item[primaryKey]}`),\n  onclick: () => actions.afterItemClick(item)\n}, h(UserPopover, {\n  actions: actions,\n  user: item.relationships.user,\n  dataName: dataName,\n  primaryKey: primaryKey,\n  primaryValue: item[primaryKey]\n}, h(\"div\", {\n  class: \"avatar user-popover-trigger\",\n  style: {\n    backgroundImage: `url(\"${item.relationships.user.avatar.middle}\")`\n  }\n})), h(\"div\", {\n  class: \"title mdui-text-color-theme-text\",\n  oncreate: summaryText(item.title),\n  onupdate: summaryText(item.title)\n})))))));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\nexport default (({\n  show\n}) => h(\"div\", {\n  class: cc(['mc-loaded', {\n    'mdui-hidden': !show\n  }]),\n  key: \"mc-loaded\"\n}, \"\\u5DF2\\u52A0\\u8F7D\\u5B8C\\u6240\\u6709\\u6570\\u636E\"));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\nimport emptyImage from '~/static/image/following_empty.png';\nexport default (({\n  show = false,\n  title,\n  description = '',\n  action = false,\n  action_text = ''\n}) => h(\"div\", {\n  class: cc(['mc-empty', {\n    'mdui-hidden': !show\n  }]),\n  style: {\n    backgroundImage: `url(${window.G_OPTIONS.site_static_url ? window.G_OPTIONS.site_static_url : `${window.G_ROOT}/static`}/theme/material/${emptyImage})`\n  },\n  key: \"mc-empty\"\n}, h(\"div\", {\n  class: \"title\"\n}, title), description ? h(\"div\", {\n  class: \"description\"\n}, description) : null, action ? h(\"button\", {\n  class: \"mdui-btn mdui-btn-raised mdui-ripple mdui-color-theme\",\n  onclick: () => {\n    action();\n  }\n}, action_text) : null));","import $ from '../$';\nimport './eq';\n\n$.fn.last = function () {\n  return this.eq(-1);\n};","class CommonAbstract {\n  /**\n   * @param editor 编辑器实例\n   */\n  constructor(editor) {\n    this.editor = editor;\n  }\n  /**\n   * 工具栏 JQ 对象\n   */\n\n\n  get $toolbar() {\n    return this.editor.$toolbar;\n  }\n  /**\n   * 内容区域 JQ 对象\n   */\n\n\n  get $container() {\n    return this.editor.$container;\n  }\n  /**\n   * 选区实例\n   */\n\n\n  get selection() {\n    return this.editor.selection;\n  }\n  /**\n   * 命令实例\n   */\n\n\n  get command() {\n    return this.editor.command;\n  }\n\n}\n\nexport default CommonAbstract;","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/appendTo';\nimport 'mdui.jq/es/methods/insertAfter';\nimport 'mdui.jq/es/methods/remove';\nimport CommonAbstract from '../abstracts/commonAbstract';\n/**\n * 封装 document.execCommand 命令\n */\n\nclass Command extends CommonAbstract {\n  /**\n   * 执行命令\n   * @param name\n   * @param value\n   */\n  do(name, value) {\n    // 如果无选区，忽略\n    if (!this.selection.getRange()) {\n      return;\n    } // 恢复选区\n\n\n    this.selection.restore();\n    const customName = name; // 执行命令\n    // @ts-ignore\n\n    if (this[customName]) {\n      // @ts-ignore\n      this[customName](value);\n    } else {\n      document.execCommand(name, false, value);\n    } // 修改菜单状态\n\n\n    this.editor.menus.changeStatus(); // 最后，恢复选区保证光标在原来的位置闪烁\n\n    this.selection.saveRange();\n    this.selection.restore(); // 触发 onchange\n\n    if (this.editor.change) {\n      this.editor.change();\n    }\n  }\n  /**\n   * 自定义 insertHTML 事件，在当前选区中插入指定 HTML\n   * @param html\n   */\n  // @ts-ignore\n\n\n  insertHTML(html) {\n    // W3C\n    if (document.queryCommandSupported('insertHTML')) {\n      document.execCommand('insertHTML', false, html);\n      return;\n    }\n\n    const range = this.selection.getRange();\n\n    if (range.insertNode) {\n      // IE\n      range.deleteContents();\n      range.insertNode($(html)[0]); // @ts-ignore\n    } else if (range.pasteHTML) {\n      // IE <= 10\n      // @ts-ignore\n      range.pasteHTML(html);\n    }\n  }\n  /**\n   * 用指定 HTML 替换当前选区的 root 元素\n   * @param html\n   */\n  // @ts-ignore\n\n\n  replaceRoot(html) {\n    const $oldElem = this.selection.getRootElem();\n    const $newElem = $(html).insertAfter($oldElem);\n    $oldElem.remove();\n    this.selection.createRangeByElem($newElem, false, true);\n    this.selection.restore();\n  }\n  /**\n   * 在当前选区的 root 元素后面插入指定 html\n   * @param html\n   */\n  // @ts-ignore\n\n\n  insertAfterRoot(html) {\n    const $oldElem = this.selection.getRootElem();\n    const $newElem = $(html).insertAfter($oldElem);\n    this.selection.createRangeByElem($newElem, false, true);\n    this.selection.restore();\n  }\n  /**\n   * 在当前 $content 的最后追加 html\n   * @param html\n   */\n  // @ts-ignore\n\n\n  appendHTML(html) {\n    const $newElem = $(html).appendTo(this.$container);\n    this.selection.createRangeByElem($newElem, false, true);\n    this.selection.restore();\n  }\n  /**\n   * 插入 elem\n   * @param $elem\n   */\n  // @ts-ignore\n\n\n  insertElem($elem) {\n    const range = this.selection.getRange();\n\n    if (range.insertNode) {\n      range.deleteContents();\n      range.insertNode($elem[0]);\n    }\n  }\n\n}\n\nexport default Command;","import CommonAbstract from './commonAbstract';\n\nclass MenuAbstract extends CommonAbstract {\n  /**\n   * @param editor 编辑器实例\n   * @param $button 按钮 JQ 对象\n   */\n  constructor(editor, $button) {\n    super(editor);\n    this.$button = $button;\n  }\n  /**\n   * 按钮是否激活\n   */\n\n\n  isActive() {\n    return false;\n  }\n\n}\n/**\n * 按钮图标\n */\n\n\nMenuAbstract.icon = '';\n/**\n * 按钮名称\n */\n\nMenuAbstract.title = '';\n/**\n * 激活按钮时，需要禁用的其他按钮\n */\n\nMenuAbstract.disable = [];\nexport default MenuAbstract;","import MenuAbstract from './menuAbstract';\n/**\n * 原生命令抽象类\n */\n\nclass MenuNativeAbstract extends MenuAbstract {\n  onclick() {\n    const isSelectionEmpty = this.selection.isEmpty();\n\n    if (isSelectionEmpty) {\n      // 选区是空的，插入并选中一个“空白”\n      this.selection.createEmptyRange(this.getElementName());\n    } // 执行 bold 命令\n\n\n    this.command.do(this.getCommandName());\n\n    if (isSelectionEmpty) {\n      // 需要将选区折叠起来\n      this.selection.collapseRange();\n      this.selection.restore();\n    }\n  }\n\n  isActive() {\n    return document.queryCommandState(this.getCommandName());\n  }\n\n}\n\nexport default MenuNativeAbstract;","import MenuNativeAbstract from '../abstracts/menuNativeAbstract';\n/**\n * 加粗\n */\n\nclass Bold extends MenuNativeAbstract {\n  getCommandName() {\n    return 'bold';\n  }\n\n  getElementName() {\n    return 'strong';\n  }\n\n}\n\nBold.icon = 'format_bold';\nBold.title = '粗体';\nBold.disable = ['image'];\nexport default Bold;","import { returnFalse } from 'mdui.jq/es/utils';\nimport 'mdui/es/components/dialog/confirm';\nimport mdui from 'mdui/es/mdui';\nimport MenuAbstract from '../abstracts/menuAbstract';\n/**\n * 舍弃草稿\n */\n\nclass ClearDrafts extends MenuAbstract {\n  onclick() {\n    mdui.confirm('确定要清空内容？', () => {\n      const options = this.editor.options;\n      this.editor.setHTML('');\n\n      if (options.autoSave) {\n        window.localStorage.removeItem(options.autoSaveKey);\n        options.onClearDrafts();\n      }\n    }, returnFalse, {\n      confirmText: '确定',\n      cancelText: '取消'\n    });\n  }\n\n}\n\nClearDrafts.icon = 'delete';\nClearDrafts.title = '舍弃草稿';\nexport default ClearDrafts;","/**\n * 替换 html 特殊字符\n * @param html\n */\nexport function replaceHtmlSymbol(html = '') {\n  return html.replace(/</gm, '&lt;').replace(/>/gm, '&gt;').replace(/\"/gm, '&quot;');\n}","import $ from '../$';\nimport merge from '../functions/merge';\nimport unique from '../functions/unique';\nimport { JQ } from '../JQ';\nimport './get';\n\n$.fn.add = function (selector) {\n  return new JQ(unique(merge(this.get(), $(selector).get())));\n};","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/add';\nimport 'mdui.jq/es/methods/children';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/last';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/remove';\nimport 'mdui.jq/es/methods/text';\nimport MenuAbstract from '../abstracts/menuAbstract';\nimport { replaceHtmlSymbol } from '../utils/str';\n/**\n * 代码块\n */\n\nclass Code extends MenuAbstract {\n  constructor(editor, $button) {\n    super(editor, $button);\n    this.active = false;\n    this.init();\n  }\n\n  init() {\n    this.$container.on('keydown', event => {\n      if (event.keyCode === 13) {\n        // 按回车时，添加 \\n\n        if (this.active) {\n          event.preventDefault();\n          const startOffset = this.selection.getRange().startOffset;\n          this.command.do('insertHTML', '\\n');\n          this.selection.saveRange();\n\n          if (this.selection.getRange().startOffset === startOffset) {\n            // 没起作用，再来一次\n            this.command.do('insertHTML', '\\n');\n          } // 换行后滚动条回到最左侧\n\n\n          this.selection.getContainerElem()[0].scrollLeft = 0;\n        }\n      }\n\n      if (event.keyCode === 9) {\n        // 按 tab 时，添加四个空格\n        if (this.active) {\n          event.preventDefault();\n          this.command.do('insertHTML', '    ');\n        }\n      }\n    });\n  }\n\n  onclick() {\n    const $rootElem = this.selection.getRootElem();\n\n    if (this.active) {\n      // 若当前是代码块，则每一行都转换为 p 标签\n      const textArray = $rootElem.text().split('\\n');\n      let html = '';\n      textArray.forEach(line => {\n        line = replaceHtmlSymbol(line);\n        html = line ? `<p>${line}</p>${html}` : `<p><br></p>${html}`;\n      });\n      this.command.do('replaceRoot', html);\n      return;\n    }\n\n    if (!$rootElem.length) {\n      const range = this.selection.getRange();\n\n      if (range.collapsed) {\n        // 没有选中任何选区，在最后添加一行\n        this.command.do('appendHTML', '<pre><code><br></code></pre>');\n      } else {\n        // 选中了多行，把多行包裹在同一个 pre 中\n        let text = '';\n        let isInRange = false;\n        let $linesRemove = $();\n        this.$container.children().each((_, line) => {\n          const $line = $(line);\n\n          if (!isInRange) {\n            if ($line.is(range.startContainer) || $line[0].contains(range.startContainer) || this.$container.is(range.startContainer)) {\n              isInRange = true;\n            }\n          }\n\n          if (isInRange) {\n            text += `${replaceHtmlSymbol($line.text())}\\n`;\n            $linesRemove = $linesRemove.add($line);\n\n            if ($line.is(range.endContainer) || $line[0].contains(range.endContainer)) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n        $linesRemove.each((i, line) => {\n          const $line = $(line);\n\n          if (i < $linesRemove.length - 1) {\n            $line.remove();\n          }\n        });\n        this.selection.createRangeByElem($linesRemove.last(), false, true);\n        this.command.do('replaceRoot', `<pre><code>${text}</code></pre>`);\n      }\n\n      return;\n    } // 选中单行，需要移除选区内容所有子元素的标签，然后转换为 pre\n\n\n    const text = replaceHtmlSymbol($rootElem.text());\n    this.command.do('replaceRoot', text ? `<pre><code>${text}</code></pre>` : '<pre><code><br></code></pre>');\n  }\n\n  isActive() {\n    this.active = this.selection.getRootElem().is('pre');\n    return this.active;\n  }\n\n}\n\nCode.icon = 'code';\nCode.title = '代码块';\nCode.disable = ['bold', 'italic', 'head', 'ol', 'ul', 'link', 'image'];\nexport default Code;","import 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/text';\nimport MenuAbstract from '../abstracts/menuAbstract';\nimport { replaceHtmlSymbol } from '../utils/str';\n/**\n * 标题\n */\n\nclass Head extends MenuAbstract {\n  constructor() {\n    super(...arguments);\n    this.active = false;\n  }\n\n  onclick() {\n    const $rootElem = this.selection.getRootElem();\n\n    if (this.active) {\n      // 若当前是 h2，则转换为 p\n      const text = $rootElem.text();\n      this.command.do('replaceRoot', text ? `<p>${text}</p>` : '<p><br></p>');\n      return;\n    }\n\n    if (!$rootElem.length) {\n      const range = this.selection.getRange();\n\n      if (range.collapsed) {\n        // 没有选中任何选区，在最后添加一行\n        this.command.do('appendHTML', '<h2><br></h2>');\n      } else {// 选中了多行，不处理\n      }\n\n      return;\n    } // 选中单行，需要移除选区内所有子元素的标签，然后转换为 h2\n\n\n    this.command.do('replaceRoot', `<h2>${replaceHtmlSymbol($rootElem.text())}</h2>`);\n  }\n\n  isActive() {\n    this.active = this.selection.getRootElem().is('h2');\n    return this.active;\n  }\n\n}\n\nHead.icon = 'title';\nHead.title = '标题';\nHead.disable = ['bold', 'italic', 'image'];\nexport default Head;","import extend from 'mdui.jq/es/functions/extend';\nimport { isFunction, isUndefined } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport './dialog';\nconst DEFAULT_OPTIONS = {\n  confirmText: 'ok',\n  history: true,\n  modal: false,\n  closeOnEsc: true,\n  closeOnConfirm: true\n};\n\nmdui.alert = function (text, title, onConfirm, options) {\n  if (isFunction(title)) {\n    options = onConfirm;\n    onConfirm = title;\n    title = '';\n  }\n\n  if (isUndefined(onConfirm)) {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onConfirm = () => {};\n  }\n\n  if (isUndefined(options)) {\n    options = {};\n  }\n\n  options = extend({}, DEFAULT_OPTIONS, options);\n  return mdui.dialog({\n    title: title,\n    content: text,\n    buttons: [{\n      text: options.confirmText,\n      bold: false,\n      close: options.closeOnConfirm,\n      onClick: onConfirm\n    }],\n    cssClass: 'mdui-dialog-alert',\n    history: options.history,\n    modal: options.modal,\n    closeOnEsc: options.closeOnEsc\n  });\n};","import $ from 'mdui.jq/es/$';\nimport ajax from 'mdui.jq/es/functions/ajax';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/html';\nimport 'mdui.jq/es/methods/insertAfter';\nimport 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/next';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/remove';\nimport 'mdui.jq/es/methods/val';\nimport 'mdui.jq/es/methods/trigger';\nimport 'mdui/es/components/dialog/alert';\nimport 'mdui/es/components/dialog/dialog';\nimport mdui from 'mdui/es/mdui';\nimport 'mdui/es/jq_extends/static/guid';\nimport MenuAbstract from '../abstracts/menuAbstract';\nimport { memoryFormat } from '../utils/format';\n\nclass Image extends MenuAbstract {\n  constructor(editor, $button) {\n    super(editor, $button);\n    /**\n     * <input type=\"file\"/> 元素\n     */\n\n    this.$input = $();\n    /**\n     * <input type=\"file\"/> 元素的 ID\n     */\n\n    this.inputID = $.guid();\n    /**\n     * 允许上传的图片后缀\n     */\n\n    this.suffixs = [];\n    /**\n     * 允许上传的图片格式\n     */\n\n    this.accepts = [];\n    this.setAccepts();\n    this.setInput();\n    this.bindInputChange();\n    this.bindKeyboardEvent();\n  }\n\n  bindKeyboardEvent() {\n    this.$container.on('keydown', event => {\n      const keyCode = event.keyCode;\n      this.selection.saveRange();\n      const $curElem = this.selection.getContainerElem();\n\n      if (keyCode === 8 || keyCode === 46) {\n        if ($curElem.is('figcaption')) {\n          // 在 figcaption 元素中按删除键时，若该元素内容为空，则不删除\n          const html = $curElem.html().toLowerCase().trim();\n\n          if (!html || html === '<br>' || html === '<br/>') {\n            $curElem.html('');\n            event.preventDefault();\n          }\n        }\n      }\n\n      if ($curElem.is('figure')) {\n        if (keyCode === 8 || keyCode === 46) {\n          // 删除图片时，删除 figure 元素，并聚焦到下一行\n          this.selection.createRangeByElem($curElem.next());\n          $curElem.remove();\n          this.selection.restore();\n        }\n\n        event.preventDefault();\n      }\n\n      if (keyCode === 13) {\n        // 在 figcaption 中按回车键时，跳出图片元素，聚焦到下一个 root 元素\n        if ($curElem.is('figcaption')) {\n          const $nextElem = this.selection.getRootElem().next();\n\n          if (!$nextElem.length) {\n            // 没有下一个元素，新增一行\n            this.command.do('insertAfterRoot', '<p><br></p>');\n          } else {\n            // 有下一个元素，聚焦到下一行\n            this.selection.createRangeByElem($nextElem);\n            this.selection.restore();\n          }\n\n          event.preventDefault();\n        }\n      }\n    });\n    this.$container.on('keyup', event => {\n      const keyCode = event.keyCode;\n      const $curElem = this.selection.getContainerElem();\n\n      if (keyCode === 8 || keyCode === 46) {\n        // 在 figcaption 中删除时，若该元素不含文字，则清空该元素\n        if ($curElem.is('figcaption')) {\n          const html = $curElem.html().toLowerCase().trim();\n\n          if (!html || html === '<br>' || html === '<br/>') {\n            $curElem.html('');\n          }\n        }\n      }\n    });\n  }\n  /**\n   * 设置允许上传的图片类型\n   */\n\n\n  setAccepts() {\n    this.suffixs = this.editor.options.imageUploadSuffix;\n    const map = {\n      png: 'image/png',\n      jpg: 'image/jpeg',\n      gif: 'image/gif'\n    };\n    this.accepts = this.suffixs.map(suffix => map[suffix]);\n  }\n  /**\n   * 在按钮后面插入 <input type=\"file\"/> 元素\n   */\n\n\n  setInput() {\n    this.$input = $(`<input type=\"file\" id=\"${this.inputID}\" name=\"${this.editor.options.imageUploadName}\" accept=\"${this.accepts.join(', ')}\"/>`).insertAfter(this.$button);\n  }\n  /**\n   * 选择文件后触发的事件\n   */\n\n\n  bindInputChange() {\n    this.$input.on('change', event => {\n      // @ts-ignore\n      const files = event.target.files;\n\n      if (!files.length) {\n        return;\n      }\n\n      this.upload(files[0]);\n      this.$input.val('');\n    });\n  }\n  /**\n   * 执行上传\n   * @param file\n   */\n\n\n  upload(file) {\n    if (this.accepts.indexOf(file.type) < 0) {\n      mdui.alert(`仅允许上传 ${this.suffixs.join(', ')} 格式的图片`);\n      return;\n    }\n\n    if (file.size > this.editor.options.imageUploadMaxSize) {\n      mdui.alert(`图片体积不能超过 ${memoryFormat(this.editor.options.imageUploadMaxSize)}`);\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(this.editor.options.imageUploadName, file);\n    let loadingDialog;\n    let uploadTime;\n    let uploadTimeInterval;\n    ajax({\n      url: this.editor.options.imageUploadUrl,\n      method: 'POST',\n      data: formData,\n      processData: false,\n      dataType: 'json',\n      contentType: false,\n      global: false,\n      beforeSend: xhr => {\n        uploadTime = 0;\n        uploadTimeInterval = setInterval(() => uploadTime += 100, 100);\n        loadingDialog = mdui.dialog({\n          title: '上传中…',\n          content: '<p class=\"mdui_editor-upload-progress\">0%</p>',\n          history: false,\n          modal: true,\n          cssClass: 'mdui_editor-upload-progress-dialog'\n        });\n        const $progress = loadingDialog.$element.find('.mdui_editor-upload-progress');\n\n        xhr.upload.onprogress = event => {\n          // @ts-ignore\n          $progress.html(`${(event.loaded / event.total * 100).toFixed(0)}%`);\n        };\n      },\n      complete: () => {\n        clearInterval(uploadTimeInterval);\n\n        if (uploadTime < 500) {\n          setTimeout(() => {\n            loadingDialog.close();\n          }, 500 - uploadTime);\n        } else {\n          loadingDialog.close();\n        }\n      }\n    }).then(response => {\n      if (this.editor.options.imageUploadResponseTransform) {\n        response = this.editor.options.imageUploadResponseTransform(response);\n      }\n\n      if (response.code) {\n        mdui.alert(response.message);\n        return;\n      }\n\n      const $rootElem = this.selection.getRootElem();\n      const rootHTML = $rootElem.html().toLowerCase().trim();\n      const imgHTML = `<figure><img src=\"${response.data.url}\"/><figcaption placeholder=\"图片描述（选填）\"></figcaption></figure>`;\n\n      if ($rootElem[0].nodeName === 'P' && (rootHTML === '<br>' || rootHTML === '<br/>')) {\n        // 当前为空的 p 元素，替换该元素\n        this.command.do('replaceRoot', imgHTML);\n      } else {\n        // 当前不是空的 p 元素，在当前元素后面插入图片\n        this.command.do('insertAfterRoot', imgHTML);\n      } // 在图片下面重新插入一行，并聚焦\n\n\n      this.command.do('insertAfterRoot', '<p><br></p>');\n    }).catch(() => mdui.alert('图片上传失败'));\n  }\n\n  onclick() {\n    $(`#${this.inputID}`).trigger('click');\n  }\n\n}\n\nImage.icon = 'image';\nImage.title = '插入图片';\nexport default Image;","/**\n * 格式化内存大小\n * @param memory\n */\nexport function memoryFormat(memory) {\n  const units = ['B', 'KB', 'MB', 'GB', 'TB'];\n  let pos = 0;\n\n  while (memory >= 1024) {\n    memory /= 1024;\n    pos++;\n  }\n\n  return memory.toFixed(2) + units[pos];\n}","import MenuNativeAbstract from '../abstracts/menuNativeAbstract';\n/**\n * 斜体\n */\n\nclass Italic extends MenuNativeAbstract {\n  getCommandName() {\n    return 'italic';\n  }\n\n  getElementName() {\n    return 'em';\n  }\n\n}\n\nItalic.icon = 'format_italic';\nItalic.title = '斜体';\nItalic.disable = ['image'];\nexport default Italic;","import extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/val';\nimport { isFunction, isUndefined } from 'mdui.jq/es/utils';\nimport mdui from '../../mdui';\nimport '../textfield';\nimport './dialog';\nconst DEFAULT_OPTIONS = {\n  confirmText: 'ok',\n  cancelText: 'cancel',\n  history: true,\n  modal: false,\n  closeOnEsc: true,\n  closeOnCancel: true,\n  closeOnConfirm: true,\n  type: 'text',\n  maxlength: 0,\n  defaultValue: '',\n  confirmOnEnter: false\n};\n\nmdui.prompt = function (label, title, onConfirm, onCancel, options) {\n  if (isFunction(title)) {\n    options = onCancel;\n    onCancel = onConfirm;\n    onConfirm = title;\n    title = '';\n  }\n\n  if (isUndefined(onConfirm)) {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onConfirm = () => {};\n  }\n\n  if (isUndefined(onCancel)) {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onCancel = () => {};\n  }\n\n  if (isUndefined(options)) {\n    options = {};\n  }\n\n  options = extend({}, DEFAULT_OPTIONS, options);\n  const content = '<div class=\"mdui-textfield\">' + (label ? `<label class=\"mdui-textfield-label\">${label}</label>` : '') + (options.type === 'text' ? `<input class=\"mdui-textfield-input\" type=\"text\" value=\"${options.defaultValue}\" ${options.maxlength ? 'maxlength=\"' + options.maxlength + '\"' : ''}/>` : '') + (options.type === 'textarea' ? `<textarea class=\"mdui-textfield-input\" ${options.maxlength ? 'maxlength=\"' + options.maxlength + '\"' : ''}>${options.defaultValue}</textarea>` : '') + '</div>';\n\n  const onCancelClick = dialog => {\n    const value = dialog.$element.find('.mdui-textfield-input').val();\n    onCancel(value, dialog);\n  };\n\n  const onConfirmClick = dialog => {\n    const value = dialog.$element.find('.mdui-textfield-input').val();\n    onConfirm(value, dialog);\n  };\n\n  return mdui.dialog({\n    title,\n    content,\n    buttons: [{\n      text: options.cancelText,\n      bold: false,\n      close: options.closeOnCancel,\n      onClick: onCancelClick\n    }, {\n      text: options.confirmText,\n      bold: false,\n      close: options.closeOnConfirm,\n      onClick: onConfirmClick\n    }],\n    cssClass: 'mdui-dialog-prompt',\n    history: options.history,\n    modal: options.modal,\n    closeOnEsc: options.closeOnEsc,\n    onOpen: dialog => {\n      // 初始化输入框\n      const $input = dialog.$element.find('.mdui-textfield-input');\n      mdui.updateTextFields($input); // 聚焦到输入框\n\n      $input[0].focus(); // 捕捉文本框回车键，在单行文本框的情况下触发回调\n\n      if (options.type !== 'textarea' && options.confirmOnEnter === true) {\n        $input.on('keydown', event => {\n          if (event.keyCode === 13) {\n            const value = dialog.$element.find('.mdui-textfield-input').val();\n            onConfirm(value, dialog);\n\n            if (options.closeOnConfirm) {\n              dialog.close();\n            }\n\n            return false;\n          }\n\n          return;\n        });\n      } // 如果是多行输入框，监听输入框的 input 事件，更新对话框高度\n\n\n      if (options.type === 'textarea') {\n        $input.on('input', () => dialog.handleUpdate());\n      } // 有字符数限制时，加载完文本框后 DOM 会变化，需要更新对话框高度\n\n\n      if (options.maxlength) {\n        dialog.handleUpdate();\n      }\n    }\n  });\n};","import 'mdui.jq/es/methods/after';\nimport 'mdui.jq/es/methods/attr';\nimport 'mdui.jq/es/methods/find';\nimport 'mdui.jq/es/methods/is';\nimport { returnFalse } from 'mdui.jq/es/utils';\nimport 'mdui/es/components/dialog/prompt';\nimport 'mdui/es/components/textfield';\nimport mdui from 'mdui/es/mdui';\nimport MenuAbstract from '../abstracts/menuAbstract';\n/**\n * 添加链接\n */\n\nclass Link extends MenuAbstract {\n  onclick() {\n    const $curElem = this.selection.getContainerElem();\n    let defaultUrl = '';\n\n    if ($curElem.is('a')) {\n      // 当前选区为 a 元素，则选中整个 a 元素\n      this.selection.createRangeByElem($curElem, false, true);\n      defaultUrl = $curElem.attr('href') || '';\n    }\n\n    const dialog = mdui.prompt('请输入链接地址', (url, dialog) => {\n      if (!url) {\n        // 链接为空，移除链接\n        this.command.do('unlink');\n        dialog.close();\n        return;\n      }\n\n      const input = dialog.$element.find('.mdui-textfield-input')[0];\n\n      if (input.validity && input.validity.valid) {\n        this.command.do('createLink', url);\n        dialog.close();\n        return;\n      }\n    }, returnFalse, {\n      confirmText: '确认',\n      cancelText: '取消',\n      defaultValue: defaultUrl,\n      confirmOnEnter: true,\n      closeOnConfirm: false\n    });\n    dialog.$element.find('.mdui-textfield-input').attr('type', 'text').attr('pattern', '^(https?|ftp|file)://[\\\\S]+\\\\.[\\\\S]+$').after('<div class=\"mdui-textfield-error\">链接格式错误</div>');\n    mdui.updateTextFields(dialog.$element.find('.mdui-textfield'));\n    dialog.handleUpdate();\n  }\n\n  isActive() {\n    return this.selection.getContainerElem().is('a');\n  }\n\n}\n\nLink.icon = 'link';\nLink.title = '插入链接';\nLink.disable = ['image'];\nexport default Link;","import $ from '../$';\nimport each from '../functions/each';\nimport './get';\nimport dir from './utils/dir';\neach(['', 'All', 'Until'], (nameIndex, name) => {\n  $.fn[`prev${name}`] = function (selector, filter) {\n    // prevAll、prevUntil 需要把元素的顺序倒序处理，以便和 jQuery 的结果一致\n    const $nodes = !nameIndex ? this : $(this.get().reverse());\n    return dir($nodes, nameIndex, 'previousElementSibling', selector, filter);\n  };\n});","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/each';\nimport 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/parent';\nimport 'mdui.jq/es/methods/prev';\nimport 'mdui.jq/es/methods/remove';\nimport MenuAbstract from './menuAbstract';\n/**\n * ul、ol 两个功能需要继承该类\n */\n\nclass MenuListAbstract extends MenuAbstract {\n  constructor() {\n    super(...arguments);\n    this.disable = ['head', 'code', 'image'];\n  }\n  /**\n   * 获取命令名称\n   */\n\n\n  getCommandName() {\n    return this.getName() === 'ol' ? 'insertOrderedList' : 'insertUnorderedList';\n  }\n  /**\n   * 验证列表是否被包裹在 <p> 之内，因为可能同时操作多个列表，所以检查所有列表\n   * @param $list\n   */\n\n\n  moveListToRoot($list) {\n    $list.each((_, ol) => {\n      const $parent = $(ol).parent();\n\n      if ($parent.is(this.$container)) {\n        return;\n      }\n\n      this.selection.createRangeByElem($parent, false, true);\n      this.command.do('replaceRoot', ol);\n    });\n  }\n  /**\n   * 把纯文本、b、strong、i、em、a 标签包裹的元素移到 p 标签中，移除 br 标签\n   */\n\n\n  moveElemToP() {\n    $(this.$container[0].childNodes).each((_, curElem) => {\n      const $curElem = $(curElem);\n      const {\n        nodeType,\n        nodeName,\n        nodeValue,\n        outerHTML\n      } = curElem;\n\n      if (nodeType === 3) {\n        // 纯文本，移动到 p 标签中\n        this.selection.createRangeByElem($curElem.prev(), false, true);\n        this.command.do('insertAfterRoot', nodeValue ? `<p>${nodeValue}</p>` : '<p><br></p>');\n        $curElem.remove();\n        return;\n      }\n\n      if (nodeType !== 1) {\n        // 不是普通 DOM 节点，跳过\n        return;\n      }\n\n      if (['B', 'STRONG', 'I', 'EM', 'A'].indexOf(nodeName) > -1) {\n        // 移动到 p 标签中\n        this.selection.createRangeByElem($curElem, false, true);\n        this.command.do('replaceRoot', outerHTML ? `<p>${outerHTML}</p>` : '<p><br></p>');\n        return;\n      }\n\n      if (nodeName === 'BR') {\n        // 移除 br 元素\n        $curElem.remove();\n      }\n    });\n  }\n\n  onclick() {\n    this.command.do(this.getCommandName());\n    this.moveListToRoot(this.$container.find(this.getName()));\n    this.moveElemToP();\n  }\n\n  isActive() {\n    return document.queryCommandState(this.getCommandName());\n  }\n\n}\n\nexport default MenuListAbstract;","import 'mdui.jq/es/methods/find';\nimport MenuListAbstract from '../abstracts/menuListAbstract';\n/**\n * 有序列表\n */\n\nclass Ol extends MenuListAbstract {\n  getName() {\n    return 'ol';\n  }\n\n}\n\nOl.icon = 'format_list_numbered';\nOl.title = '有序列表';\nexport default Ol;","import 'mdui.jq/es/methods/find';\nimport MenuListAbstract from '../abstracts/menuListAbstract';\n/**\n * 无序列表\n */\n\nclass Ul extends MenuListAbstract {\n  getName() {\n    return 'ul';\n  }\n\n}\n\nUl.icon = 'format_list_bulleted';\nUl.title = '无序列表';\nexport default Ul;","import $ from 'mdui.jq/es/$';\nimport each from 'mdui.jq/es/functions/each';\nimport unique from 'mdui.jq/es/functions/unique';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/append';\nimport 'mdui.jq/es/methods/appendTo';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/prop';\nimport 'mdui.jq/es/methods/removeClass';\nimport CommonAbstract from '../abstracts/commonAbstract';\nimport Bold from './bold';\nimport ClearDrafts from './clear_drafts';\nimport Code from './code';\nimport Head from './head';\nimport Image from './image';\nimport Italic from './italic';\nimport Link from './link';\nimport Ol from './ol';\nimport Ul from './ul';\nconst MenuConstructors = {\n  bold: Bold,\n  clear_drafts: ClearDrafts,\n  code: Code,\n  head: Head,\n  image: Image,\n  italic: Italic,\n  link: Link,\n  ol: Ol,\n  ul: Ul\n};\n\nclass Menus extends CommonAbstract {\n  constructor(editor) {\n    super(editor);\n    /**\n     * { 按钮名称: 按钮实例 }\n     */\n\n    this.menus = {};\n    this.init();\n  }\n  /**\n   * 初始化菜单\n   * @private\n   */\n\n\n  init() {\n    this.editor.options.menus.forEach(name => {\n      // 插入分隔符\n      if (name === '|') {\n        this.$toolbar.append('<div class=\"mdui_editor-toolbar-divider\"></div>');\n        return;\n      } // 插入 spacer\n\n\n      if (name === ' ') {\n        this.$toolbar.append('<div class=\"mdui-toolbar-spacer\"></div>');\n        return;\n      }\n\n      const MenuConstructor = MenuConstructors[name];\n\n      if (!MenuConstructor || typeof MenuConstructor !== 'function') {\n        return;\n      } // 创建按钮\n\n\n      const $button = $(`<button class=\"mdui-btn mdui_editor-toolbar-menu mdui_editor-toolbar-menu-${name}\" type=\"button\" title=\"${MenuConstructor.title}\">` + `<i class=\"mdui-icon material-icons\">${MenuConstructor.icon}</i>` + '</button>').appendTo(this.$toolbar); // 实例化菜单项\n\n      const menu = new MenuConstructor(this.editor, $button);\n      this.menus[name] = menu;\n\n      const onClick = () => {\n        if (this.selection.getRange() === null) {\n          return;\n        }\n\n        menu.onclick();\n      };\n\n      $button.on('click', onClick);\n    });\n  }\n  /**\n   * 修改菜单按钮状态\n   */\n\n\n  changeStatus() {\n    let disableMenus = [];\n    each(this.menus, (name, menu) => {\n      setTimeout(() => {\n        // 切换激活状态\n        if (menu.isActive()) {\n          menu.$button.addClass('mdui_editor-toolbar-menu-active');\n\n          if (MenuConstructors[name].disable) {\n            disableMenus = disableMenus.concat(MenuConstructors[name].disable);\n          }\n        } else {\n          menu.$button.removeClass('mdui_editor-toolbar-menu-active');\n        } // 禁用按钮，遍历到最后一个按钮再统一处理\n\n\n        if (name === this.editor.options.menus[this.editor.options.menus.length - 1]) {\n          disableMenus = unique(disableMenus);\n          each(this.menus, (name, menu) => {\n            menu.$button.prop('disabled', disableMenus.indexOf(name) > -1);\n          });\n        }\n      }, 0);\n    });\n  }\n\n}\n\nexport default Menus;","import $ from 'mdui.jq/es/$';\nimport 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/last';\nimport 'mdui.jq/es/methods/parent';\nimport 'mdui.jq/es/methods/parentsUntil';\nimport CommonAbstract from '../abstracts/commonAbstract';\nimport { isWebkit } from '../utils/ua';\n/**\n * selection range API\n */\n\nclass Selection extends CommonAbstract {\n  constructor() {\n    super(...arguments);\n    /**\n     * 当前选区\n     */\n\n    this.currentRange = undefined;\n  }\n  /**\n   * 获取 range 对象\n   */\n\n\n  getRange() {\n    return this.currentRange;\n  }\n  /**\n   * 保存选区\n   * @param range 指定的选取。若未指定，则获取当前选区并保存\n   */\n\n\n  saveRange(range) {\n    if (range) {\n      // 保存已有选区\n      this.currentRange = range;\n      return;\n    } // 获取当前的选区\n\n\n    const selection = window.getSelection();\n\n    if (selection.rangeCount === 0) {\n      return;\n    }\n\n    const rangeAt = selection.getRangeAt(0); // 判断选区内容是否在编辑内容之内\n\n    const $containerElem = this.getContainerElem(rangeAt);\n\n    if (!$containerElem.length) {\n      return;\n    }\n\n    if (this.$container[0].contains($containerElem[0])) {\n      // 是编辑内容之内的\n      this.currentRange = rangeAt;\n    }\n  }\n  /**\n   * 折叠选区\n   * @param toStart\n   */\n\n\n  collapseRange(toStart = false) {\n    const range = this.currentRange;\n\n    if (range) {\n      range.collapse(toStart);\n    }\n  }\n  /**\n   * 获取选中区域的文字\n   */\n\n\n  getText() {\n    return this.currentRange ? this.currentRange.toString() : '';\n  }\n  /**\n   * 获取选区元素的 JQ 对象\n   * @param range\n   */\n\n\n  getContainerElem(range) {\n    range = range || this.currentRange;\n\n    if (range) {\n      const elem = range.commonAncestorContainer;\n      return $(elem.nodeType === 1 ? elem : elem.parentNode);\n    }\n\n    return $();\n  }\n  /**\n   * 获取当前选区的最顶级元素的 JQ 对象\n   * @param range\n   */\n\n\n  getRootElem(range) {\n    const $elem = this.getContainerElem(range);\n\n    if (this.$container.is($elem)) {\n      // 当前选区选中了多个元素，返回 $container\n      return $();\n    }\n\n    if ($elem.parent().is(this.$container)) {\n      // 当前选区的元素就是 root 元素\n      return $elem;\n    }\n\n    return $elem.parentsUntil(this.$container).last();\n  }\n  /**\n   * 判断选区是否为空\n   */\n\n\n  isEmpty() {\n    const range = this.currentRange;\n\n    if (!range || !range.startContainer) {\n      return false;\n    }\n\n    if (range.startContainer !== range.endContainer) {\n      return false;\n    }\n\n    return range.startOffset === range.endOffset;\n  }\n  /**\n   * 恢复选区\n   */\n\n\n  restore() {\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(this.currentRange);\n  }\n  /**\n   * 创建一个空白（即 &#8203 字符）选区\n   * @param tag 标签名，非 webkit 浏览器不支持插入纯文本，需要指定包裹空白元素的标签\n   */\n\n\n  createEmptyRange(tag = 'strong') {\n    const range = this.getRange();\n    let $elem;\n\n    if (!range) {\n      // 当前无 range\n      return;\n    }\n\n    if (!this.isEmpty()) {\n      // 当前选区必须没有内容才可以\n      return;\n    }\n\n    try {\n      // 目前只支持 webkit 内核\n      if (isWebkit()) {\n        // 插入 &#8203\n        this.command.do('insertHTML', '&#8203;'); // 修改 offset 位置\n\n        range.setEnd(range.endContainer, range.endOffset + 1); // 存储\n\n        this.saveRange(range);\n      } else {\n        $elem = $(`<${tag}>&#8203;</${tag}>`);\n        this.command.do('insertElem', $elem);\n        this.createRangeByElem($elem, true);\n      }\n    } catch (ex) {// 部分情况下会报错，兼容一下\n    }\n  }\n  /**\n   * 根据 JQ 对象设置选区\n   * @param $elem\n   * @param toStart   true 光标在开始位置，false 光标在结束位置\n   * @param isContent 是否选中 elem 的内容\n   */\n\n\n  createRangeByElem($elem, toStart = false, isContent = false) {\n    if (!$elem.length) {\n      return;\n    }\n\n    const elem = $elem[0];\n    const range = document.createRange();\n\n    if (isContent) {\n      range.selectNodeContents(elem);\n    } else {\n      range.selectNode(elem);\n    }\n\n    range.collapse(toStart);\n    this.saveRange(range);\n  }\n\n}\n\nexport default Selection;","/**\n * 是否是 webkit 浏览器\n */\nexport function isWebkit() {\n  return /webkit/i.test(navigator.userAgent);\n}","import { replaceHtmlSymbol } from './str';\n/**\n * 获取剪贴板数据\n * @param event\n */\n\nfunction getPasteData(event) {\n  const clipboardData = event.clipboardData || // @ts-ignore\n  event.originalEvent && event.originalEvent.clipboardData;\n  let pasteText = '';\n  let pasteHtml = '';\n\n  if (clipboardData === null) {\n    // @ts-ignore\n    pasteText = window.clipboardData && window.clipboardData.getData('text');\n  } else {\n    pasteText = clipboardData.getData('text/plain');\n    pasteHtml = clipboardData.getData('text/html');\n  }\n\n  return {\n    pasteText,\n    pasteHtml\n  };\n}\n/**\n * 获取粘贴的 HTML\n * @param event\n */\n\n\nexport function getPasteHTML(event) {\n  let {\n    pasteText,\n    pasteHtml\n  } = getPasteData(event);\n\n  if (!pasteHtml && pasteText) {\n    pasteText = replaceHtmlSymbol(pasteText);\n    pasteHtml = pasteText ? `<p>${pasteText}</p>` : '<p><br></p>';\n  }\n\n  return pasteHtml;\n}\n/**\n * 获取粘贴的纯文本\n * @param event\n */\n\nexport function getPasteText(event) {\n  const {\n    pasteText\n  } = getPasteData(event);\n  return replaceHtmlSymbol(pasteText);\n}","import $ from 'mdui.jq/es/$';\nimport extend from 'mdui.jq/es/functions/extend';\nimport 'mdui.jq/es/methods/addClass';\nimport 'mdui.jq/es/methods/append';\nimport 'mdui.jq/es/methods/attr';\nimport 'mdui.jq/es/methods/children';\nimport 'mdui.jq/es/methods/first';\nimport 'mdui.jq/es/methods/html';\nimport 'mdui.jq/es/methods/is';\nimport 'mdui.jq/es/methods/last';\nimport 'mdui.jq/es/methods/off';\nimport 'mdui.jq/es/methods/on';\nimport 'mdui.jq/es/methods/removeClass';\nimport 'mdui.jq/es/methods/text';\nimport Command from './command/index';\nimport Menus from './menus/index';\nimport Selection from './selection/index';\nimport { getPasteText } from './utils/paste';\nimport { purifier } from './utils/purifier';\nconst DEFAULT_OPTIONS = {\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onchange: () => {},\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClearDrafts: () => {},\n  onchangeTimeout: 200,\n  placeholder: '说点什么',\n  menus: ['bold', 'italic', 'head', 'code', 'ol', 'ul', 'link', 'image', ' ', 'clear_drafts'],\n  tagsWhiteList: ['p', 'strong', 'b', 'em', 'i', 'h2', 'pre', 'code', 'ol', 'ul', 'li', 'a', 'img', 'figure', 'figcaption'],\n  autoSave: false,\n  autoSaveKey: 'mdui-editor-content',\n  imageUploadUrl: '',\n  imageUploadMaxSize: 1024 * 1024 * 2,\n  imageUploadSuffix: ['png', 'jpg', 'gif'],\n  imageUploadName: 'file',\n  imageUploadResponseTransform: false\n};\n/**\n * 编辑器\n */\n\nclass Editor {\n  /**\n   * 初始化编辑器\n   * @param toolbar 工具栏的 CSS 选择器、或 DOM 元素、或 JQ 对象\n   * @param container 编辑器内容的 CSS 选择器、或 DOM 元素、或 JQ 对象\n   * @param options 配置参数\n   */\n  constructor(toolbar, container, options = {}) {\n    /**\n     * 配置参数\n     */\n    this.options = extend({}, DEFAULT_OPTIONS);\n    /**\n     * 输入内容时执行的函数\n     */\n\n    this.change = null;\n    extend(this.options, options);\n    this.$toolbar = $(toolbar).first().addClass('mdui_editor-toolbar');\n    this.$container = $(container).first().addClass('mdui_editor-content mdui-typo').attr({\n      contenteditable: '',\n      placeholder: this.options.placeholder\n    });\n    this.command = new Command(this);\n    this.selection = new Selection(this);\n    this.menus = new Menus(this); // 写入草稿的内容\n\n    if (this.options.autoSave) {\n      this.setHTML(window.localStorage.getItem(this.options.autoSaveKey) || '');\n    }\n\n    this.initSelection(true);\n    this.bindEvent(); // 使用 p 换行\n\n    this.command.do('defaultParagraphSeparator', 'p'); // 禁止 IE 自动加链接\n\n    try {\n      this.command.do('AutoUrlDetect', false);\n    } catch (e) {\n      /* eslint-disable no-empty */\n    }\n  }\n  /**\n   * 初始化选区，将光标定位到内容尾部\n   * @param newLine 是否在内容后面添加一个空行\n   */\n\n\n  initSelection(newLine = false) {\n    const $children = this.$container.children(); // 如果编辑器区域无内容，添加一个空行，重新设置选区\n\n    if (!$children.length) {\n      this.$container.append('<p><br></p>');\n      return this.initSelection();\n    }\n\n    const $last = $children.last(); // 最后一个元素不是 <p><br></p>，添加一个空行，重新设置选区\n\n    if (newLine) {\n      const html = $last.html().toLowerCase();\n      const nodeName = $last[0].nodeName;\n\n      if (html !== '<br>' && html !== '<br/>' || nodeName !== 'P') {\n        this.$container.append('<p><br></p>');\n        return this.initSelection();\n      }\n    }\n\n    this.updatePlaceholder();\n    this.selection.createRangeByElem($last, false, true);\n    this.selection.restore();\n  }\n  /**\n   * 获取编辑器 html\n   */\n\n\n  getHTML() {\n    return this.$container.html().replace(/\\u200b/gm, '');\n  }\n  /**\n   * 设置编辑器 html\n   * @param html\n   */\n\n\n  setHTML(html) {\n    this.$container.html(html);\n    this.initSelection();\n  }\n  /**\n   * 获取编辑器纯文本内容\n   */\n\n\n  getText() {\n    return this.$container.text().replace(/\\u200b/gm, '');\n  }\n  /**\n   * 设置编辑器纯文本内容\n   * @param text\n   */\n\n\n  setText(text) {\n    this.setHTML(text ? `<p>${text}</p>` : '<p><br></p>');\n  }\n  /**\n   * 清空编辑器内容\n   */\n\n\n  clear() {\n    this.setHTML('<p><br></p>');\n  }\n  /**\n   * 聚焦到输入框\n   */\n\n\n  focus() {\n    this.initSelection();\n  }\n  /**\n   * 绑定事件\n   * @private\n   */\n\n\n  bindEvent() {\n    // 记录输入法的开始和结束\n    let compositionEnd = true;\n    this.$container // 输入法开始输入\n    .on('compositionstart', () => {\n      compositionEnd = false;\n    }) // 输入法结束输入\n    .on('compositionend', () => {\n      compositionEnd = true;\n    }) // 绑定 onchange\n    .on('click keyup', () => {\n      if (compositionEnd && this.change) {\n        this.change();\n      }\n    });\n    this.$toolbar.on('click', () => {\n      if (this.change) {\n        this.change();\n      }\n    });\n    this.bindChange();\n    this.saveRangeRealTime();\n    this.pasteHandler();\n    this.deleteHandler();\n    this.containerClickHandler();\n    this.dragHandler();\n    this.undoHandler();\n  }\n  /**\n   * 更新 placeholder 显示状态\n   */\n\n\n  updatePlaceholder() {\n    const className = 'mdui_editor-content-empty';\n    this.$container.html() === '<p><br></p>' ? this.$container.addClass(className) : this.$container.removeClass(className);\n  }\n  /**\n   * 绑定 onchange 事件\n   * @private\n   */\n\n\n  bindChange() {\n    const options = this.options;\n    const onchangeTimeout = options.onchangeTimeout;\n    let onchangeTimeoutId = 0;\n    let beforeChangeHTML = this.getHTML(); // 触发 change 的有三个场景：\n    // 1. editor.$container.on('click keyup')\n    // 2. editor.$toolbar.on('click')\n    // 3. editor.command.do()\n\n    this.change = () => {\n      const currentHTML = this.getHTML(); // 内容没有变化，则不处理\n\n      if (currentHTML === beforeChangeHTML) {\n        return;\n      } // 执行，使用节流\n\n\n      if (onchangeTimeoutId) {\n        clearTimeout(onchangeTimeoutId);\n      }\n\n      onchangeTimeoutId = setTimeout(() => {\n        // 触发配置参数中的 onchange 函数\n        options.onchange(this);\n        beforeChangeHTML = currentHTML; // 保存到 localStorage\n\n        if (options.autoSave) {\n          window.localStorage.setItem(options.autoSaveKey, this.getHTML());\n        } // 更新 placeholder 显示状态\n\n\n        this.updatePlaceholder();\n      }, onchangeTimeout);\n    };\n  }\n  /**\n   * 实时保存选区\n   */\n\n\n  saveRangeRealTime() {\n    // 保存当前的选区\n    const saveRange = () => {\n      // 随时保存选区\n      this.selection.saveRange(); // 更新按钮状态\n\n      this.menus.changeStatus();\n    };\n\n    this.$container.on('keyup', saveRange).on('mousedown', () => {\n      // mousedown 状态下，鼠标滑动到编辑区域外面，也需要保存选区\n      this.$container.on('mouseleave', saveRange);\n    }).on('mouseup', () => {\n      saveRange(); // 在编辑器区域之内完成点击，取消鼠标滑动到编辑区外面的事件\n\n      this.$container.off('mouseleave', saveRange);\n    });\n  }\n  /**\n   * 粘贴文字、图片事件\n   */\n\n\n  pasteHandler() {\n    this.$container.on('paste', event => {\n      event.preventDefault(); // 获取粘贴的文字\n\n      const pasteHTML = purifier(getPasteText(event)); // todo 后续需要通过 getPasteHTML 获取内容，并进行过滤\n\n      const pasteText = getPasteText(event);\n      const $selectionElem = this.selection.getContainerElem();\n\n      if (!$selectionElem.length) {\n        return;\n      }\n\n      const {\n        nodeName\n      } = $selectionElem[0]; // 代码块中只能粘贴纯文本\n\n      if (nodeName === 'CODE' || nodeName === 'PRE') {\n        this.command.do('insertHTML', pasteText);\n        return;\n      }\n\n      if (!pasteHTML) {\n        return;\n      }\n\n      try {\n        // firefox 中，获取的 pasteHtml 可能是没有 <ul> 包裹的 <li>\n        // 因此执行 insertHTML 会报错\n        this.command.do('insertHTML', pasteHTML);\n      } catch (ex) {\n        // 此时使用 pasteText 来兼容一下\n        this.command.do('insertHTML', pasteText);\n      }\n    });\n  }\n  /**\n   * 按删除键时的处理\n   */\n\n\n  deleteHandler() {\n    this.$container.on('keydown keyup', event => {\n      const {\n        keyCode,\n        type\n      } = event;\n\n      if (keyCode === 8 || keyCode === 46) {\n        // 按删除键时，始终保留最后一个空行\n        const html = this.$container.html().toLowerCase().trim();\n\n        if (type === 'keydown') {\n          if (html === '<p><br></p>') {\n            event.preventDefault();\n          } else if (!html) {\n            this.$container.html('<p><br></p>');\n            event.preventDefault();\n          }\n        }\n\n        if (type === 'keyup') {\n          if (!html) {\n            this.$container.html('<p><br></p>');\n          }\n        }\n      }\n\n      this.updatePlaceholder();\n    });\n  }\n  /**\n   * 在 $container 上点击的处理\n   * @private\n   */\n\n\n  containerClickHandler() {\n    this.$container.on('click', event => {\n      const target = event.target;\n\n      if (!$(target).is(this.$container)) {\n        return;\n      }\n\n      const $last = this.$container.children().last(); // 在 $container 上点击时，如果最后一行不是 p，则在最后添加一个空行，并聚焦\n      // $container 中不存在元素，或最后一行不是 p，添加一行\n\n      if (!$last.length || $last[0].nodeName !== 'P') {\n        this.command.do('appendHTML', '<p><br></p>');\n      }\n    });\n  }\n  /**\n   * 拖拽事件\n   */\n\n\n  dragHandler() {\n    // 禁用编辑器内容拖拽事件\n    this.$container.on('dragleave drop dragenter dragover', false); // todo 编辑区域拖拽上传图片\n  }\n  /**\n   * Ctrl + Z 处理\n   */\n\n\n  undoHandler() {\n    // undo 操作无法撤销直接操作 DOM 的清空，先直接禁用 undo，以后想办法\n    this.$container.on('keydown', event => {\n      if (event.ctrlKey && event.keyCode === 90) {\n        return false;\n      }\n    });\n  }\n\n}\n\nexport default Editor;","/**\n * 净化器\n */\nexport function purifier(html) {\n  let result = ''; // todo 目前直接返回用每一行都用 p 标签包裹的 html，后续开发根据白名单进行过滤\n\n  html.split('\\n').forEach(line => {\n    // 移除行内的换行符\n    line = line.replace(/[\\r\\n]/gm, '');\n    result += line ? `<p>${line}</p>` : '<p><br></p>';\n  });\n  return result;\n}","import { h } from 'hyperapp';\nimport './index.less';\nexport default (({\n  topic,\n  onRemove\n}) => h(\"div\", {\n  class: \"mdui-chip\",\n  key: topic.topic_id\n}, h(\"img\", {\n  class: \"mdui-chip-icon\",\n  src: topic.cover.small\n}), h(\"span\", {\n  class: \"mdui-chip-title\"\n}, topic.name), h(\"span\", {\n  class: \"mdui-chip-delete\",\n  onclick: onRemove\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"cancel\"))));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport $ from 'mdui.jq';\nimport Editor from 'mdui.editor/es/index';\nimport './index.less';\nimport TopicChip from './components/topic-chip/view.jsx';\n\nconst HeaderIcon = ({\n  iconTitle,\n  icon,\n  onClick\n}) => h(\"i\", {\n  class: \"mdui-icon material-icons\",\n  title: iconTitle,\n  onclick: onClick\n}, icon);\n\nexport default (({\n  id,\n  // 唯一ID\n  title,\n  // 头部显示的名称\n  withTitle = false,\n  // 是否包含标题\n  withTopics = false,\n  // 是否包含话题选择\n  onSubmit,\n  // 点提交按钮的函数\n  publishing,\n  // 是否正在提交内容\n  state,\n  // 包含 stateAbstract 中的 editorState 和 topicSelectorState\n  actions // 包含 actionsAbstract 中的 editorActions 和 topicSelectorActions\n\n}) => {\n  const Header = () => h(\"div\", {\n    class: \"header\"\n  }, h(\"div\", {\n    class: \"header-title\",\n    onclick: actions.editorMinimize\n  }, title), h(\"div\", {\n    class: \"header-actions\"\n  }, h(HeaderIcon, {\n    iconTitle: \"\\u6700\\u5C0F\\u5316\",\n    icon: \"remove\",\n    onClick: actions.editorMinimize\n  }), h(HeaderIcon, {\n    iconTitle: \"\\u5168\\u5C4F\\u6A21\\u5F0F\",\n    icon: state.editor_maximize ? 'fullscreen_exit' : 'fullscreen',\n    onClick: actions.editorMaximize\n  }), h(HeaderIcon, {\n    iconTitle: \"\\u4FDD\\u5B58\\u4E3A\\u8349\\u7A3F\\u5E76\\u5173\\u95ED\",\n    icon: \"close\",\n    onClick: actions.editorClose\n  })));\n\n  const Title = () => h(\"input\", {\n    class: \"editor-title mdui-text-color-theme-text\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6807\\u9898\",\n    value: window.localStorage.getItem(`${state.auto_save_key}-title`),\n    oninput: event => {\n      window.localStorage.setItem(`${state.auto_save_key}-title`, event.target.value);\n    }\n  });\n\n  const Topics = () => h(\"div\", {\n    class: \"editor-topics\"\n  }, state.editor_selected_topics.length ? h(\"div\", {\n    class: \"chip-wrapper\"\n  }, state.editor_selected_topics.map((topic, selectedIndex) => h(TopicChip, {\n    topic: topic,\n    onRemove: () => {\n      actions.topicSelectorRemoveOne(selectedIndex);\n    }\n  }))) : null, !state.editor_selected_topics.length ? h(\"span\", {\n    class: \"placeholder\",\n    title: \"\\u70B9\\u51FB\\u6DFB\\u52A0\\u8BDD\\u9898\",\n    onclick: actions.topicSelectorOpen\n  }, \"\\u8BF7\\u81F3\\u5C11\\u9009\\u62E9 1 \\u4E2A\\u8BDD\\u9898\") : null, h(\"button\", {\n    class: \"add mdui-btn mdui-btn-icon mdui-btn-dense mdui-ripple\",\n    title: \"\\u70B9\\u51FB\\u6DFB\\u52A0\\u8BDD\\u9898\",\n    onclick: actions.topicSelectorOpen\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n  }, \"add\")));\n\n  const SubmitButton = () => h(\"button\", {\n    class: \"submit mdui-btn mdui-btn-raised mdui-color-theme\",\n    disabled: publishing,\n    onclick: event => {\n      const $dialog = $(event.target).parents('.mc-editor');\n      const editor = $dialog.data('editor-instance');\n      onSubmit({\n        title: $dialog.find('.editor-title').val(),\n        content: editor.getHTML()\n      });\n    }\n  }, publishing ? '发布中' : '发布');\n\n  return h(\"div\", {\n    class: cc(['mc-editor', {\n      'mdui-hidden': !state.editor_open,\n      maximize: state.editor_maximize,\n      minimize: state.editor_minimize,\n      'with-title': withTitle,\n      'with-topics': withTopics\n    }]),\n    id: id,\n    key: `mc-editor-${id}`,\n    oncreate: element => {\n      const $element = $(element);\n      const $toolbar = $element.find('.editor-toolbar');\n      const $content = $element.find('.editor-content');\n      const editor = new Editor($toolbar, $content, {\n        onClearDrafts: () => {\n          if (withTitle) {\n            window.localStorage.removeItem(`${state.auto_save_key}-title`);\n          }\n\n          if (withTopics) {\n            window.localStorage.removeItem(`${state.auto_save_key}-topics`);\n          }\n\n          actions.editorClose();\n        },\n        placeholder: '请输入内容',\n        autoSave: !!state.auto_save_key,\n        autoSaveKey: `${state.auto_save_key}-content`,\n        imageUploadUrl: `${window.G_API}/images`,\n        imageUploadName: 'image',\n        imageUploadResponseTransform: response => {\n          response.data.url = response.data.urls.release;\n          return response;\n        }\n      }); // 保存编辑器实例到元素中\n\n      $element.data('editor-instance', editor);\n    }\n  }, h(Header, null), h(\"div\", {\n    class: \"body\"\n  }, withTitle ? h(Title, null) : null, withTopics ? h(Topics, null) : null, h(\"div\", {\n    class: \"editor-content mdui-text-color-theme-text\"\n  }), h(\"div\", {\n    class: \"editor-toolbar\"\n  }, h(SubmitButton, null))));\n});","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport cc from 'classcat';\nimport $ from 'mdui.jq';\nimport { timeFormat, timeFriendly } from '~/utils/time';\nimport { fullPath } from '~/utils/path';\nimport { summaryText } from '~/utils/html';\nimport './index.less';\nimport UserPopover from '~/components/user-popover/view.jsx';\n\nconst Wrapper = ({\n  item,\n  id,\n  last_visit_id,\n  path,\n  actions\n}, children) => h(Link, {\n  to: fullPath(path),\n  class: cc(['mc-list-item', {\n    'last-visit': last_visit_id === id\n  }]),\n  key: id,\n  oncreate: element => $(element).mutation(),\n  onclick: () => {\n    actions.afterItemClick(item);\n  }\n}, children);\n\nconst Avatar = ({\n  actions,\n  user,\n  tabName,\n  primaryKey,\n  id\n}) => h(UserPopover, {\n  actions: actions,\n  user: user,\n  dataName: `${tabName}_data`,\n  primaryKey: primaryKey,\n  primaryValue: id\n}, h(\"div\", {\n  class: \"avatar user-popover-trigger\",\n  style: {\n    backgroundImage: `url(\"${user.avatar.middle}\")`\n  }\n}));\n\nconst Title = ({\n  content\n}) => h(\"div\", {\n  class: \"title mdui-text-color-theme-text\",\n  oncreate: summaryText(content),\n  onupdate: summaryText(content)\n});\n\nconst Content = ({\n  snippet,\n  updateTime,\n  updateTimeDesc,\n  replys\n}) => h(\"div\", {\n  class: \"content mdui-text-color-theme-secondary\"\n}, h(\"div\", {\n  class: \"snippet\",\n  oncreate: summaryText(snippet, 100),\n  onupdate: summaryText(snippet, 100)\n}), h(\"div\", {\n  class: \"meta\"\n}, h(\"div\", {\n  class: \"update_time\",\n  title: timeFormat(updateTime)\n}, `${updateTimeDesc} ${timeFriendly(updateTime)}`), h(\"div\", {\n  class: \"replys\"\n}, replys)));\n/**\n * 用于提问列表\n */\n\n\nexport const QuestionItem = ({\n  question,\n  last_visit_id,\n  tabName,\n  actions\n}) => h(Wrapper, {\n  item: question,\n  id: question.question_id,\n  last_visit_id: last_visit_id,\n  path: `/questions/${question.question_id}`,\n  actions: actions\n}, h(Avatar, {\n  actions: actions,\n  user: question.relationships.user,\n  tabName: tabName,\n  primaryKey: \"question_id\",\n  id: question.question_id\n}), h(Title, {\n  content: question.title\n}), h(Content, {\n  snippet: question.content_rendered,\n  updateTime: question.answer_time || question.create_time,\n  updateTimeDesc: question.answer_time ? '回复于' : '发布于',\n  replys: `${question.answer_count} 个回答`\n}));\n/**\n * 用于文章列表\n */\n\nexport const ArticleItem = ({\n  article,\n  last_visit_id,\n  tabName,\n  actions\n}) => h(Wrapper, {\n  item: article,\n  id: article.article_id,\n  last_visit_id: last_visit_id,\n  path: `/articles/${article.article_id}`,\n  actions: actions\n}, h(Avatar, {\n  actions: actions,\n  user: article.relationships.user,\n  tabName: tabName,\n  primaryKey: \"article_id\",\n  id: article.article_id\n}), h(Title, {\n  content: article.title\n}), h(Content, {\n  snippet: article.content_rendered,\n  updateTime: article.create_time,\n  updateTimeDesc: \"\\u53D1\\u5E03\\u4E8E\",\n  replys: `${article.comment_count} 条评论`\n}));\nexport const AnswerItem = ({\n  answer,\n  last_visit_id,\n  tabName,\n  actions\n}) => h(Wrapper, {\n  item: answer,\n  id: answer.answer_id,\n  last_visit_id: last_visit_id,\n  path: `/questions/${answer.question_id}/answers/${answer.answer_id}`,\n  actions: actions\n}, h(Avatar, {\n  actions: actions,\n  user: answer.relationships.user,\n  tabName: tabName,\n  primaryKey: \"answer_id\",\n  id: answer.answer_id\n}), h(Title, {\n  content: answer.relationships.question.title\n}), h(Content, {\n  snippet: answer.content_rendered,\n  updateTime: answer.create_time,\n  updateTimeDesc: \"\\u53D1\\u5E03\\u4E8E\",\n  replys: `${answer.comment_count} 条评论`\n}));","import { h } from 'hyperapp';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport TopicChip from '../topic-chip/view.jsx';\n\nconst Title = () => h(\"div\", {\n  class: \"mdui-dialog-title\"\n}, \"\\u8BF7\\u9009\\u62E9\\u8BDD\\u9898\", h(\"button\", {\n  class: \"mdui-btn mdui-btn-icon mdui-ripple close\",\n  \"mdui-dialog-close\": true\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"close\")));\n/**\n * @param state 包含 stateAbstract 中的 editorState 和 topicSelectorState\n * @param actions 包含 actionsAbstract 中的 editorActions 和 topicSelectorActions\n */\n\n\nexport default (({\n  state,\n  actions\n}) => {\n  const {\n    topics_data: data,\n    topics_pagination: pagination,\n    topics_loading: loading,\n    editor_selected_topics: selected,\n    editor_selected_topic_ids: selected_ids\n  } = state;\n  const isEmpty = !loading && !data.length && pagination;\n  const isLoading = loading;\n  const isLoaded = !loading && pagination && pagination.page === pagination.pages;\n\n  const Selected = () => selected.length ? h(\"div\", {\n    class: \"selected\",\n    key: \"selected\"\n  }, selected.map((topic, selectedIndex) => h(TopicChip, {\n    topic: topic,\n    onRemove: () => {\n      actions.topicSelectorRemoveOne(selectedIndex);\n    }\n  }))) : null;\n\n  const Item = ({\n    topic,\n    dataIndex\n  }) => h(\"label\", {\n    class: \"mdui-list-item\",\n    key: topic.topic_id\n  }, h(\"div\", {\n    class: \"mdui-list-item-avatar\"\n  }, h(\"img\", {\n    src: topic.cover.small\n  })), h(\"div\", {\n    class: \"mdui-list-item-content\"\n  }, h(\"div\", {\n    class: \"mdui-list-item-title mdui-list-item-one-line\"\n  }, topic.name), h(\"div\", {\n    class: \"mdui-list-item-text mdui-list-item-one-line\"\n  }, topic.description)), h(\"div\", {\n    class: \"mdui-checkbox\"\n  }, h(\"input\", {\n    type: \"checkbox\",\n    checked: selected_ids.indexOf(topic.topic_id) > -1,\n    onchange: event => {\n      actions.topicSelectorChange({\n        event,\n        dataIndex\n      });\n    }\n  }), h(\"i\", {\n    class: \"mdui-checkbox-icon\"\n  })));\n\n  return h(\"div\", {\n    key: \"topic-selector\",\n    class: \"mdui-dialog mc-topic-selector\"\n  }, h(Title, null), h(\"div\", {\n    class: \"mdui-dialog-content\"\n  }, h(Selected, null), h(\"div\", {\n    class: \"mdui-list\",\n    key: \"list\"\n  }, data.map((topic, dataIndex) => h(Item, {\n    topic: topic,\n    dataIndex: dataIndex\n  }))), h(Empty, {\n    show: isEmpty,\n    title: \"\\u7BA1\\u7406\\u5458\\u672A\\u53D1\\u5E03\\u4EFB\\u4F55\\u8BDD\\u9898\",\n    description: \"\\u5F85\\u7BA1\\u7406\\u5458\\u53D1\\u5E03\\u8BDD\\u9898\\u540E\\uFF0C\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\"\n  }), h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  })), h(\"div\", {\n    class: \"mdui-dialog-actions\"\n  }, h(\"button\", {\n    class: \"mdui-btn mdui-ripple\",\n    \"mdui-dialog-confirm\": true\n  }, \"\\u786E\\u5B9A\")));\n});","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Editor from '~/components/editor/view.jsx';\nimport { QuestionItem } from '~/components/list-item/view.jsx';\nimport TopicSelector from '~/components/editor/components/topic-selector/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => h(\"div\", {\n  oncreate: actions.onCreate,\n  ondestroy: actions.onDestroy,\n  key: match.url,\n  id: \"page-questions\",\n  class: \"mdui-container\"\n}, state.tabs.map(tabName => {\n  const isEmpty = !state[`${tabName}_loading`] && !state[`${tabName}_data`].length && state[`${tabName}_pagination`];\n  const isLoaded = !state[`${tabName}_loading`] && state[`${tabName}_pagination`] && state[`${tabName}_pagination`].page === state[`${tabName}_pagination`].pages;\n  const isLoading = state[`${tabName}_loading`];\n  return () => h(\"div\", {\n    id: tabName\n  }, state[`${tabName}_data`].length ? h(\"div\", {\n    class: \"item-list mdui-card mdui-card-shadow\"\n  }, state[`${tabName}_data`].map(question => h(QuestionItem, {\n    question: question,\n    last_visit_id: state.last_visit_id,\n    tabName: tabName,\n    actions: actions\n  }))) : null, tabName === 'recent' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u53D1\\u5E03\\u4EFB\\u4F55\\u95EE\\u9898\",\n    description: \"\\u6B64\\u5904\\u4F1A\\u663E\\u793A\\u6700\\u8FD1\\u66F4\\u65B0\\u7684\\u95EE\\u9898\",\n    action: () => {\n      actions.editorOpen();\n    },\n    action_text: \"\\u53D1\\u5E03\\u95EE\\u9898\"\n  }) : null, tabName === 'popular' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u6CA1\\u6709\\u8FD1\\u671F\\u70ED\\u95E8\\u95EE\\u9898\",\n    description: \"\\u6B64\\u5904\\u4F1A\\u663E\\u793A\\u8FD1\\u671F\\u6700\\u53D7\\u6B22\\u8FCE\\u7684\\u95EE\\u9898\",\n    action: () => {\n      actions.toRecent();\n    },\n    action_text: \"\\u67E5\\u770B\\u6700\\u65B0\\u95EE\\u9898\"\n  }) : null, tabName === 'following' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u5173\\u6CE8\\u4EFB\\u4F55\\u95EE\\u9898\",\n    description: \"\\u5173\\u6CE8\\u95EE\\u9898\\u540E\\uFF0C\\u76F8\\u5E94\\u95EE\\u9898\\u5C31\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\",\n    action: () => {\n      actions.toPopular();\n    },\n    action_text: \"\\u67E5\\u770B\\u70ED\\u95E8\\u95EE\\u9898\"\n  }) : null, h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  }));\n}), h(\"button\", {\n  class: cc(['mdui-fab', 'mdui-fab-fixed', 'mdui-fab-extended', 'mdui-ripple', 'mdui-color-theme', {\n    'mdui-hidden': state.editor_open\n  }]),\n  onclick: actions.editorOpen\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"add\"), h(\"span\", null, \"\\u63D0\\u95EE\\u9898\")), h(Editor, {\n  id: \"page-questions-editor\",\n  title: \"\\u65B0\\u63D0\\u95EE\",\n  withTitle: true,\n  withTopics: true,\n  onSubmit: actions.publish,\n  publishing: state.publishing,\n  state: state,\n  actions: actions\n}), h(TopicSelector, {\n  state: state,\n  actions: actions\n})));","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { unescape } from 'html-escaper';\nimport { timeFormat, timeFriendly } from '~/utils/time';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nimport UserPopover from '~/components/user-popover/view.jsx';\n/**\n * @param actions\n * @param user 用户信息\n * @param time 时间戳\n * @param dataName state 中的数据字段名\n * @param primaryKey\n * @param primaryValue\n */\n\nexport default (({\n  actions,\n  user,\n  time,\n  dataName = null,\n  primaryKey = null,\n  primaryValue = null\n}) => h(\"div\", {\n  class: \"mc-user-line\"\n}, h(UserPopover, {\n  actions: actions,\n  user: user,\n  dataName: dataName,\n  primaryKey: primaryKey,\n  primaryValue: primaryValue\n}, h(Link, {\n  class: \"avatar user-popover-trigger\",\n  to: fullPath(`/users/${user.user_id}`),\n  style: {\n    backgroundImage: `url(\"${user.avatar.middle}\")`\n  }\n}), h(Link, {\n  class: \"username user-popover-trigger mdui-text-color-theme-text\",\n  to: fullPath(`/users/${user.user_id}`)\n}, user.username), h(\"div\", {\n  class: \"headline mdui-text-color-theme-secondary\"\n}, unescape(user.headline)), time ? h(\"div\", {\n  class: \"more\"\n}, h(\"span\", {\n  class: \"time mdui-text-color-theme-secondary\",\n  title: timeFormat(time)\n}, timeFriendly(time))) : null)));","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nexport default (({\n  topics\n}) => h(\"div\", {\n  class: \"mc-topics-bar\"\n}, topics.map(topic => h(Link, {\n  to: fullPath(`/topics/${topic.topic_id}`),\n  class: \"mdui-chip mdui-ripple\",\n  key: topic.topic_id\n}, h(\"img\", {\n  class: \"mdui-chip-icon\",\n  src: topic.cover.small\n}), h(\"span\", {\n  class: \"mdui-chip-title\"\n}, topic.name)))));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport map from 'mdui.jq/es/functions/map';\nimport './index.less';\n/**\n * 用于回答列表和评论列表头部\n * @params show 是否显示\n * @params title 标题\n * @params disabled 是否禁用排序按钮\n * @params currentOrder 当前排序值\n * @params orders 当前排序值和名称组成的数组\n * @params key 附加在 id 上\n * @params closeBtnClick 若在手机上，在 dialog 中显示时，需要关闭按钮，需要传入回调函数\n */\n\nexport default (({\n  show,\n  title,\n  disabled,\n  currentOrder,\n  orders,\n  onChangeOrder,\n  key = '',\n  closeBtnClick = false\n}) => h(\"div\", {\n  class: cc(['mc-list-header', {\n    'mdui-hidden': !show\n  }])\n}, h(\"div\", {\n  class: \"title\"\n}, closeBtnClick ? h(\"button\", {\n  class: \"close mdui-btn mdui-btn-icon mdui-ripple\",\n  onclick: closeBtnClick\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"close\")) : null, title), h(\"button\", {\n  class: \"mdui-btn mdui-btn-dense\",\n  \"mdui-menu\": `{target: '#mc-list-header-${key}', align: 'right'}`,\n  disabled: disabled\n}, map(orders, ({\n  order,\n  name\n}) => {\n  return order === currentOrder ? name : null;\n})[0], orders[currentOrder], h(\"i\", {\n  class: \"mdui-icon mdui-icon-right material-icons mdui-text-color-theme-icon\"\n}, \"arrow_drop_down\")), h(\"ul\", {\n  class: \"mdui-menu\",\n  id: `mc-list-header-${key}`\n}, orders.map(({\n  order,\n  name\n}) => h(\"li\", {\n  class: \"mdui-menu-item\",\n  onclick: () => onChangeOrder(order)\n}, h(\"a\", {\n  href: \"javascript:void(0)\"\n}, h(\"i\", {\n  class: \"mdui-menu-item-icon mdui-icon material-icons\"\n}, currentOrder === order ? \"check\" : null), name))))));","import { h } from 'hyperapp';\nimport { location } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\n\nconst back = path => {\n  if (window.history.state) {\n    window.history.back();\n  } else {\n    location.actions.go(fullPath(path));\n  }\n};\n\nexport default (({\n  path\n}) => h(\"div\", {\n  class: \"mc-nav\"\n}, h(\"button\", {\n  class: \"back mdui-btn mdui-color-theme mdui-ripple\",\n  onclick: () => back(path)\n}, h(\"i\", {\n  class: \"mdui-icon mdui-icon-left material-icons\"\n}, \"arrow_back\"), \"\\u8FD4\\u56DE\")));","import { h } from 'hyperapp';\nimport IconButton from '~/components/icon-button/view.jsx';\n/**\n * @param actions\n * @param item\n * @param type\n * @param commentIndex 仅 replies 需要\n */\n\nexport default (({\n  actions,\n  item,\n  type,\n  commentIndex = null\n}) => h(\"div\", {\n  class: \"mc-vote\"\n}, h(IconButton, {\n  icon: \"thumb_up\",\n  tooltip: item.relationships.voting === 'up' ? '取消顶' : '顶一下',\n  badge: item.vote_up_count,\n  active: item.relationships.voting === 'up',\n  onClick: () => actions.voteUp({\n    item,\n    type,\n    commentIndex\n  })\n}), h(IconButton, {\n  icon: \"thumb_down\",\n  tooltip: item.relationships.voting === 'down' ? '取消踩' : '踩一下',\n  badge: item.vote_down_count,\n  active: item.relationships.voting === 'down',\n  onClick: () => actions.voteDown({\n    item,\n    type,\n    commentIndex\n  })\n})));","import { h } from 'hyperapp';\nimport './index.less';\nimport IconButton from '~/components/icon-button/view.jsx';\nexport default (({\n  item,\n  onClick\n}) => h(IconButton, {\n  cls: \"comment\",\n  icon: \"comment\",\n  tooltip: \"\\u67E5\\u770B\\u8BC4\\u8BBA\",\n  badge: item.comment_count,\n  onClick: onClick\n}));","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport { richText } from '~/utils/html';\nimport { emit } from '~/utils/pubsub';\nimport './index.less';\nimport UserLine from '~/components/user-line/view.jsx';\nimport Vote from '~/components/vote/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\nimport CommentButton from '../comment-button/view.jsx';\nexport default (({\n  answer,\n  actions\n}) => h(\"div\", {\n  class: \"item\",\n  key: answer.answer_id,\n  oncreate: element => $(element).mutation()\n}, h(UserLine, {\n  actions: actions,\n  user: answer.relationships.user,\n  time: answer.create_time,\n  dataName: \"answer_data\",\n  primaryKey: \"answer_id\",\n  primaryValue: answer.answer_id\n}), h(\"div\", {\n  class: \"content mdui-typo\",\n  oncreate: richText(answer.content_rendered),\n  onupdate: richText(answer.content_rendered)\n}), h(\"div\", {\n  class: \"actions\"\n}, h(Vote, {\n  actions: actions,\n  item: answer,\n  type: \"answers\"\n}), h(CommentButton, {\n  item: answer,\n  onClick: () => {\n    emit('comments_dialog_open', {\n      commentable_type: 'answer',\n      commentable_id: answer.answer_id\n    });\n  }\n}), h(\"div\", {\n  class: \"flex-grow\"\n}), h(OptionsButton, {\n  type: \"answer\",\n  item: answer\n}))));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport { Link } from 'hyperapp-router';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport { richText, summaryText } from '~/utils/html';\nimport { emit } from '~/utils/pubsub';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport UserLine from '~/components/user-line/view.jsx';\nimport Follow from '~/components/follow/view.jsx';\nimport Editor from '~/components/editor/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\nimport TopicsBar from '~/components/topics-bar/view.jsx';\nimport ListHeader from '~/components/list-header/view.jsx';\nimport Nav from '~/components/nav/view.jsx';\nimport AnswerItem from './components/answer-item/view.jsx';\nimport CommentButton from './components/comment-button/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => {\n  // 判断当前是提问详情页还是回答详情页\n  let answer_id = 0;\n  const route = isUndefined(match.params.answer_id) ? 'question' : 'answer';\n\n  if (route === 'answer') {\n    answer_id = parseInt(match.params.answer_id, 10);\n  }\n\n  const question_id = parseInt(match.params.question_id, 10);\n  const {\n    question,\n    loading,\n    answer_data,\n    answer_pagination,\n    answer_loading\n  } = state;\n  let answer_count = 0;\n\n  if (question) {\n    answer_count = question.answer_count;\n  }\n\n  if (answer_pagination) {\n    answer_count = answer_pagination.total;\n  }\n\n  const isEmpty = !answer_loading && answer_pagination && !answer_pagination.total;\n\n  const AllAnswersLink = ({\n    count,\n    url\n  }) => h(Link, {\n    class: \"all-answers mdui-text-color-theme-text\",\n    to: fullPath(url)\n  }, \"\\u67E5\\u770B\\u5168\\u90E8 \", count, \" \\u4E2A\\u56DE\\u7B54\");\n\n  return h(\"div\", {\n    oncreate: () => actions.onCreate({\n      question_id,\n      answer_id,\n      route\n    }),\n    ondestroy: actions.onDestroy,\n    key: match.url,\n    id: \"page-question\",\n    class: \"mdui-container\"\n  }, h(Nav, {\n    path: answer_id ? `/questions/${question_id}` : '/questions'\n  }), h(\"div\", {\n    class: \"mdui-card mdui-card-shadow question\"\n  }, question ? [h(\"h1\", {\n    class: \"title\",\n    oncreate: summaryText(question.title),\n    onupdate: summaryText(question.title),\n    key: \"0\"\n  }), h(UserLine, {\n    actions: actions,\n    user: question.relationships.user,\n    time: question.create_time,\n    dataName: \"question\",\n    key: \"1\"\n  }), h(\"div\", {\n    class: \"mdui-typo content\",\n    oncreate: richText(question.content_rendered),\n    onupdate: richText(question.content_rendered),\n    key: \"2\"\n  }), question.relationships.topics.length ? h(TopicsBar, {\n    topics: question.relationships.topics,\n    key: \"3\"\n  }) : null, h(\"div\", {\n    class: \"actions\",\n    key: \"4\"\n  }, h(Follow, {\n    item: question,\n    type: \"question\",\n    actions: actions\n  }), h(CommentButton, {\n    item: question,\n    onClick: () => {\n      emit('comments_dialog_open', {\n        commentable_type: 'question',\n        commentable_id: question_id\n      });\n    }\n  }), h(\"div\", {\n    class: \"flex-grow\"\n  }), h(OptionsButton, {\n    type: \"question\",\n    item: question,\n    extraOptions: [{\n      name: `查看 ${question.follower_count} 位关注者`,\n      onClick: () => {\n        emit('users_dialog_open', {\n          type: 'question_followers',\n          id: question_id\n        });\n      }\n    }]\n  }))] : null, h(Loading, {\n    show: loading\n  })), route === 'question' ? [h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u6709\\u4EBA\\u56DE\\u7B54\\u8BE5\\u95EE\\u9898\",\n    key: \"0\"\n  }), h(ListHeader, {\n    show: !isEmpty,\n    title: `共 ${answer_count} 个回答`,\n    disabled: answer_loading,\n    currentOrder: state.answer_order,\n    orders: [{\n      order: '-vote_count',\n      name: '最热门'\n    }, {\n      order: 'create_time',\n      name: '发布时间（从早到晚）'\n    }, {\n      order: '-create_time',\n      name: '发布时间（从晚到早）'\n    }],\n    onChangeOrder: actions.changeOrder,\n    key: \"1\"\n  }), answer_data && answer_data.length ? h(\"div\", {\n    class: \"mdui-card answers\",\n    key: \"2\"\n  }, answer_data.map(answer => h(AnswerItem, {\n    answer: answer,\n    actions: actions\n  }))) : null, h(Loaded, {\n    show: !answer_loading && answer_pagination && answer_pagination.page === answer_pagination.pages,\n    key: \"3\"\n  })] : null, route === 'answer' && question ? [h(AllAnswersLink, {\n    count: question.answer_count,\n    url: `/questions/${question_id}`,\n    key: \"0\"\n  }), h(\"div\", {\n    class: \"mdui-card answers\",\n    key: \"1\"\n  }, h(AnswerItem, {\n    answer: answer_data[0],\n    actions: actions\n  })), h(AllAnswersLink, {\n    count: question.answer_count,\n    url: `/questions/${question_id}`,\n    key: \"2\"\n  })] : null, h(Loading, {\n    show: answer_loading\n  }), h(\"button\", {\n    class: cc(['mdui-fab', 'mdui-fab-fixed', 'mdui-fab-extended', 'mdui-ripple', 'mdui-color-theme', {\n      'mdui-hidden': state.editor_open\n    }]),\n    onclick: actions.editorOpen\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons\"\n  }, \"add\"), h(\"span\", null, \"\\u5199\\u56DE\\u7B54\")), h(Editor, {\n    id: \"page-question-editor\",\n    title: \"\\u5199\\u56DE\\u7B54\",\n    withTitle: false,\n    withTopics: false,\n    onSubmit: actions.publishAnswer,\n    publishing: state.answer_publishing,\n    state: state,\n    actions: actions\n  }));\n});","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Editor from '~/components/editor/view.jsx';\nimport { ArticleItem } from '~/components/list-item/view.jsx';\nimport TopicSelector from '~/components/editor/components/topic-selector/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => h(\"div\", {\n  oncreate: actions.onCreate,\n  ondestroy: actions.onDestroy,\n  key: match.url,\n  id: \"page-articles\",\n  class: \"mdui-container\"\n}, state.tabs.map(tabName => {\n  const isEmpty = !state[`${tabName}_loading`] && !state[`${tabName}_data`].length && state[`${tabName}_pagination`];\n  const isLoaded = !state[`${tabName}_loading`] && state[`${tabName}_pagination`] && state[`${tabName}_pagination`].page === state[`${tabName}_pagination`].pages;\n  const isLoading = state[`${tabName}_loading`];\n  return () => h(\"div\", {\n    id: tabName\n  }, state[`${tabName}_data`].length ? h(\"div\", {\n    class: \"item-list mdui-card mdui-card-shadow\"\n  }, state[`${tabName}_data`].map(article => h(ArticleItem, {\n    article: article,\n    last_visit_id: state.last_visit_id,\n    tabName: tabName,\n    actions: actions\n  }))) : null, tabName === 'recent' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u53D1\\u5E03\\u4EFB\\u4F55\\u6587\\u7AE0\",\n    description: \"\\u6B64\\u5904\\u4F1A\\u663E\\u793A\\u6700\\u8FD1\\u66F4\\u65B0\\u7684\\u6587\\u7AE0\",\n    action: () => {\n      actions.editorOpen();\n    },\n    action_text: \"\\u5199\\u6587\\u7AE0\"\n  }) : null, tabName === 'popular' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u6CA1\\u6709\\u8FD1\\u671F\\u70ED\\u95E8\\u6587\\u7AE0\",\n    description: \"\\u6B64\\u5904\\u4F1A\\u663E\\u793A\\u8FD1\\u671F\\u6700\\u53D7\\u6B22\\u8FCE\\u7684\\u6587\\u7AE0\",\n    action: () => {\n      actions.toRecent();\n    },\n    action_text: \"\\u67E5\\u770B\\u6700\\u65B0\\u6587\\u7AE0\"\n  }) : null, tabName === 'following' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u5173\\u6CE8\\u4EFB\\u4F55\\u6587\\u7AE0\",\n    description: \"\\u5173\\u6CE8\\u6587\\u7AE0\\u540E\\uFF0C\\u76F8\\u5E94\\u6587\\u7AE0\\u5C31\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\",\n    action: () => {\n      actions.toPopular();\n    },\n    action_text: \"\\u67E5\\u770B\\u70ED\\u95E8\\u6587\\u7AE0\"\n  }) : null, h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  }));\n}), h(\"button\", {\n  class: cc(['mdui-fab', 'mdui-fab-fixed', 'mdui-fab-extended', 'mdui-ripple', 'mdui-color-theme', {\n    'mdui-hidden': state.editor_open\n  }]),\n  onclick: actions.editorOpen\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"add\"), h(\"span\", null, \"\\u5199\\u6587\\u7AE0\")), h(Editor, {\n  id: \"page-article-editor\",\n  title: \"\\u65B0\\u6587\\u7AE0\",\n  withTitle: true,\n  withTopics: true,\n  onSubmit: actions.publish,\n  publishing: state.publishing,\n  state: state,\n  actions: actions\n}), h(TopicSelector, {\n  state: state,\n  actions: actions\n})));","import { h } from 'hyperapp';\nimport './index.less';\nexport default (({\n  submitting,\n  onSubmit,\n  onCreate = null,\n  placeholder = '写下你的评论...'\n}) => h(\"div\", {\n  class: \"mdui-textfield new-comment\",\n  key: \"new-comment\",\n  oncreate: onCreate\n}, h(\"textarea\", {\n  class: \"mdui-textfield-input\",\n  placeholder: placeholder,\n  disabled: submitting\n}), h(\"button\", {\n  class: \"submit mdui-btn mdui-btn-raised mdui-color-theme\",\n  onclick: onSubmit,\n  disabled: submitting\n}, submitting ? '发布中' : '发布')));","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport { plainText } from '~/utils/html';\nimport './index.less';\nimport UserLine from '~/components/user-line/view.jsx';\nimport Vote from '~/components/vote/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\nexport default (({\n  comment,\n  commentIndex,\n  actions\n}) => h(\"div\", {\n  class: \"item\",\n  key: comment.comment_id,\n  oncreate: element => $(element).mutation()\n}, h(UserLine, {\n  actions: actions,\n  user: comment.relationships.user,\n  time: comment.create_time,\n  dataName: `comments_data[${commentIndex}].replies_data`,\n  primaryKey: \"comment_id\",\n  primaryValue: comment.comment_id\n}), h(\"div\", {\n  class: \"content mdui-typo\",\n  oncreate: plainText(comment.content),\n  onupdate: plainText(comment.content)\n}), h(\"div\", {\n  class: \"actions\"\n}, h(Vote, {\n  actions: actions,\n  item: comment,\n  commentIndex: commentIndex,\n  type: \"replies\"\n}), h(\"div\", {\n  class: \"flex-grow\"\n}), h(OptionsButton, {\n  type: \"comment\",\n  item: comment\n}))));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport $ from 'mdui.jq';\nimport { plainText } from '~/utils/html';\nimport './index.less';\nimport UserLine from '~/components/user-line/view.jsx';\nimport Vote from '~/components/vote/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\nimport IconButton from '~/components/icon-button/view.jsx';\nimport Loading from '~/components/loading/view.jsx';\nimport NewComment from '../new-comment/view.jsx';\nimport Reply from '../reply/view.jsx';\nexport default (({\n  comment,\n  commentIndex,\n  actions\n}) => {\n  const isRepliesLoaded = !comment.replies_loading && comment.replies_pagination && comment.replies_pagination.page === comment.replies_pagination.pages;\n  const isRepliesLoading = comment.replies_loading;\n  return h(\"div\", {\n    class: \"item\",\n    key: comment.comment_id,\n    oncreate: element => $(element).mutation()\n  }, h(UserLine, {\n    actions: actions,\n    user: comment.relationships.user,\n    time: comment.create_time,\n    dataName: \"comments_data\",\n    primaryKey: \"comment_id\",\n    primaryValue: comment.comment_id\n  }), h(\"div\", {\n    class: \"content mdui-typo\",\n    oncreate: plainText(comment.content),\n    onupdate: plainText(comment.content)\n  }), h(\"div\", {\n    class: \"actions\"\n  }, h(Vote, {\n    actions: actions,\n    item: comment,\n    type: \"comments\"\n  }), h(IconButton, {\n    icon: \"reply\",\n    tooltip: \"\\u53D1\\u8868\\u56DE\\u590D\",\n    onClick: () => {\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'show_new_reply'\n      });\n    }\n  }), h(\"div\", {\n    class: \"flex-grow\"\n  }), h(OptionsButton, {\n    type: \"comment\",\n    item: comment\n  })), comment.show_new_reply ? h(NewComment, {\n    placeholder: \"\\u6DFB\\u52A0\\u56DE\\u590D...\",\n    submitting: comment.reply_submitting,\n    onCreate: element => {\n      setTimeout(() => $(element).find('textarea')[0].focus());\n    },\n    onSubmit: ({\n      target\n    }) => {\n      actions.submitReply({\n        target,\n        comment\n      });\n    }\n  }) : null, comment.reply_count ? h(\"div\", {\n    class: cc(['reply_count', {\n      'show-replies': comment.show_replies\n    }]),\n    onclick: () => {\n      actions.toggleState({\n        comment_id: comment.comment_id,\n        fieldName: 'show_replies'\n      });\n    }\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons\"\n  }, \"arrow_drop_down\"), h(\"span\", null, comment.show_replies ? '隐藏' : '查看', \" \", comment.reply_count, ' ', \"\\u6761\\u56DE\\u590D\")) : null, comment.show_replies ? h(\"div\", {\n    class: \"replies\"\n  }, comment.replies_data.map(reply => h(Reply, {\n    comment: reply,\n    commentIndex: commentIndex,\n    actions: actions\n  })), h(Loading, {\n    show: comment.replies_loading\n  }), h(\"div\", {\n    class: cc(['reply_more', {\n      'mdui-hidden': isRepliesLoaded || isRepliesLoading\n    }]),\n    onclick: () => {\n      actions.loadReplies({\n        comment\n      });\n    }\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons\"\n  }, \"subdirectory_arrow_right\"), h(\"span\", null, \"\\u663E\\u793A\\u66F4\\u591A\\u56DE\\u590D\"))) : null);\n});","import { h } from 'hyperapp';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport ListHeader from '~/components/list-header/view.jsx';\nimport Item from './components/item/view.jsx';\nimport NewComment from './components/new-comment/view.jsx';\nexport default (({\n  commentable_type,\n  commentable_id,\n  isInDialog,\n  state,\n  actions\n}) => {\n  const {\n    order,\n    comments_data,\n    pagination,\n    loading,\n    submitting\n  } = state;\n  const isEmpty = !loading && pagination && !pagination.total;\n  let count = 0;\n\n  if (pagination) {\n    count = pagination.total;\n  }\n\n  return h(\"div\", {\n    class: \"mc-comments\"\n  }, h(ListHeader, {\n    show: true,\n    title: `共 ${count} 条评论`,\n    disabled: loading || submitting,\n    currentOrder: order,\n    key: \"comments\",\n    orders: [{\n      order: 'create_time',\n      name: '发布时间（从早到晚）'\n    }, {\n      order: '-create_time',\n      name: '发布时间（从晚到早）'\n    }, {\n      order: '-vote_count',\n      name: '最热门'\n    }],\n    onChangeOrder: actions.changeOrder,\n    closeBtnClick: isInDialog ? actions.closeDialog : false\n  }), h(\"div\", {\n    class: \"comments-wrapper\",\n    oncreate: () => {\n      actions.onCreate({\n        commentable_type,\n        commentable_id,\n        isInDialog\n      });\n    },\n    ondestroy: () => actions.onDestroy({\n      isInDialog\n    })\n  }, h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u6709\\u4EBA\\u53D1\\u8868\\u8BC4\\u8BBA\"\n  }), comments_data && comments_data.length ? h(\"div\", {\n    class: \"mdui-card comments\"\n  }, comments_data.map((comment, commentIndex) => h(Item, {\n    comment: comment,\n    commentIndex: commentIndex,\n    actions: actions\n  }))) : null, h(Loading, {\n    show: loading\n  }), h(Loaded, {\n    show: !loading && pagination && pagination.page === pagination.pages\n  })), isInDialog ? h(NewComment, {\n    submitting: state.submitting,\n    onSubmit: actions.onSubmit\n  }) : null);\n});","import { h } from 'hyperapp';\nimport mdui from 'mdui';\nimport './page.less';\nimport Comments from './view.jsx';\nimport NewComment from './components/new-comment/view.jsx';\n/**\n * 评论直接放在页面中\n * 用于文章的评论\n * @param commentable_type\n * @param commentable_id\n */\n\nexport default (({\n  commentable_type,\n  commentable_id\n}) => (globalState, globalActions) => {\n  const state = globalState.comments;\n  const actions = globalActions.comments;\n  return h(\"div\", {\n    class: \"mc-comments-page\"\n  }, h(Comments, {\n    commentable_type: commentable_type,\n    commentable_id: commentable_id,\n    isInDialog: false,\n    state: state,\n    actions: actions\n  }), h(\"div\", {\n    class: \"new-comment-fixed\",\n    oncreate: element => {\n      // eslint-disable-next-line no-new\n      new mdui.Headroom(element, {\n        pinnedClass: 'mdui-headroom-pinned-down',\n        unpinnedClass: 'mdui-headroom-unpinned-down'\n      });\n    }\n  }, h(\"div\", {\n    class: \"mdui-container\"\n  }, h(NewComment, {\n    submitting: state.submitting,\n    onSubmit: actions.onSubmit\n  }))));\n});","import { h } from 'hyperapp';\nimport { richText, summaryText } from '~/utils/html';\nimport { emit } from '~/utils/pubsub';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport UserLine from '~/components/user-line/view.jsx';\nimport Follow from '~/components/follow/view.jsx';\nimport Vote from '~/components/vote/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\nimport TopicsBar from '~/components/topics-bar/view.jsx';\nimport Comments from '~/components/comments/page.jsx';\nimport Nav from '~/components/nav/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => {\n  const article_id = parseInt(match.params.article_id, 10);\n  const {\n    article,\n    loading\n  } = state;\n  return h(\"div\", {\n    oncreate: () => actions.onCreate({\n      article_id\n    }),\n    key: match.url,\n    id: \"page-article\",\n    class: \"mdui-container\"\n  }, h(Nav, {\n    path: \"/articles\"\n  }), h(\"div\", {\n    class: \"mdui-card mdui-card-shadow article\"\n  }, article ? [h(\"h1\", {\n    class: \"title\",\n    oncreate: summaryText(article.title),\n    onupdate: summaryText(article.title),\n    key: \"0\"\n  }), h(UserLine, {\n    actions: actions,\n    user: article.relationships.user,\n    time: article.create_time,\n    dataName: \"article\",\n    key: \"1\"\n  }), h(\"div\", {\n    class: \"mdui-typo content\",\n    oncreate: richText(article.content_rendered),\n    onupdate: richText(article.content_rendered),\n    key: \"2\"\n  }), article.relationships.topics.length ? h(TopicsBar, {\n    topics: article.relationships.topics,\n    key: \"3\"\n  }) : null, h(\"div\", {\n    class: \"actions\",\n    key: \"4\"\n  }, h(Vote, {\n    actions: actions,\n    item: article,\n    type: \"article\"\n  }), h(Follow, {\n    item: article,\n    type: \"article\",\n    actions: actions\n  }), h(\"div\", {\n    class: \"flex-grow\"\n  }), h(OptionsButton, {\n    type: \"article\",\n    item: article,\n    extraOptions: [{\n      name: `查看 ${article.follower_count} 位关注者`,\n      onClick: () => {\n        emit('users_dialog_open', {\n          type: 'article_followers',\n          id: article_id\n        });\n      }\n    }]\n  }))] : null, h(Loading, {\n    show: loading\n  })), h(Comments, {\n    commentable_type: \"article\",\n    commentable_id: article_id\n  }));\n});","import { h } from 'hyperapp';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Item from '~/components/topic-item/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => h(\"div\", {\n  oncreate: actions.onCreate,\n  ondestroy: actions.onDestroy,\n  key: match.url,\n  id: \"page-topics\",\n  class: \"mdui-container\"\n}, state.tabs.map(tabName => {\n  const isEmpty = !state[`${tabName}_loading`] && !state[`${tabName}_data`].length && state[`${tabName}_pagination`];\n  const isLoaded = !state[`${tabName}_loading`] && state[`${tabName}_pagination`] && state[`${tabName}_pagination`].page === state[`${tabName}_pagination`].pages;\n  const isLoading = state[`${tabName}_loading`];\n  return () => h(\"div\", {\n    id: tabName\n  }, !isLoading && state.following_data.length ? h(\"div\", {\n    class: \"subheading mdui-text-color-theme-secondary\"\n  }, tabName === 'following' ? [\"\\u5DF2\\u5173\\u6CE8 \", state[`${tabName}_pagination`].total, \" \\u4E2A\\u8BDD\\u9898\"] : null, tabName === 'recommended' ? \"\\u8BDD\\u9898\\u63A8\\u8350\" : null) : null, h(\"div\", {\n    class: \"items-wrapper\"\n  }, state[`${tabName}_data`].map(topic => h(Item, {\n    topic: topic,\n    actions: actions\n  }))), tabName === 'following' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u5173\\u6CE8\\u4EFB\\u4F55\\u8BDD\\u9898\",\n    description: \"\\u5173\\u6CE8\\u8BDD\\u9898\\u540E\\uFF0C\\u76F8\\u5E94\\u8BDD\\u9898\\u5C31\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\\u3002\",\n    action: () => {\n      actions.toRecommended();\n    },\n    action_text: \"\\u67E5\\u770B\\u7CBE\\u9009\\u8BDD\\u9898\"\n  }) : null, tabName === 'recommended' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u7BA1\\u7406\\u5458\\u672A\\u53D1\\u5E03\\u4EFB\\u4F55\\u8BDD\\u9898\",\n    description: \"\\u5F85\\u7BA1\\u7406\\u5458\\u53D1\\u5E03\\u8BDD\\u9898\\u540E\\uFF0C\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\"\n  }) : null, h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  }));\n})));","import { h } from 'hyperapp';\nimport { emit } from '~/utils/pubsub';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Follow from '~/components/follow/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\nimport { summaryText } from '~/utils/html';\nexport default (({\n  topic,\n  loading,\n  actions\n}) => h(\"div\", {\n  class: \"mdui-card mdui-card-shadow topic\"\n}, topic ? [h(\"div\", {\n  class: \"info\",\n  key: \"0\"\n}, h(\"div\", {\n  class: \"cover\",\n  style: {\n    backgroundImage: `url(\"${topic.cover.small}\")`\n  }\n}), h(\"div\", {\n  class: \"main\"\n}, h(\"div\", {\n  class: \"name\",\n  oncreate: summaryText(topic.name),\n  onupdate: summaryText(topic.name)\n}), h(\"div\", {\n  class: \"meta mdui-text-color-theme-secondary\"\n}, h(\"span\", null, topic.question_count, \" \\u4E2A\\u63D0\\u95EE\"), h(\"span\", null, topic.article_count, \" \\u7BC7\\u6587\\u7AE0\")), h(\"div\", {\n  class: \"description mdui-text-color-theme-secondary\",\n  oncreate: summaryText(topic.description),\n  onupdate: summaryText(topic.description)\n}))), h(\"div\", {\n  class: \"actions\",\n  key: \"1\"\n}, h(Follow, {\n  item: topic,\n  type: \"topic\",\n  actions: actions\n}), h(\"div\", {\n  class: \"flex-grow\"\n}), h(OptionsButton, {\n  type: \"topic\",\n  item: topic,\n  extraOptions: [{\n    name: `查看 ${topic.follower_count} 位关注者`,\n    onClick: () => {\n      emit('users_dialog_open', {\n        type: 'topic_followers',\n        id: topic.topic_id\n      });\n    }\n  }]\n}))] : null, h(Loading, {\n  show: loading\n})));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport './index.less';\nexport default (({\n  items,\n  centered = false,\n  key = null\n}) => h(\"div\", {\n  key: key,\n  class: cc(['mc-tab', 'mdui-tab', {\n    'mdui-tab-centered': centered\n  }])\n}, items.map(item => {\n  if (!item) {\n    return null;\n  }\n\n  return h(\"a\", {\n    href: `#${item.hash}`,\n    class: \"mdui-ripple\"\n  }, item.name, !isUndefined(item.count) ? h(\"span\", null, item.count) : null);\n})));","import { h } from 'hyperapp';\nimport './index.less';\nimport ListHeader from '~/components/list-header/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Tab from '~/components/tab/view.jsx';\nimport { QuestionItem, ArticleItem } from '~/components/list-item/view.jsx';\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  class: \"contexts mdui-card\"\n}, h(Tab, {\n  items: [{\n    name: '提问',\n    hash: 'questions',\n    count: state.topic ? state.topic.question_count : 0\n  }, {\n    name: '文章',\n    hash: 'articles',\n    count: state.topic ? state.topic.article_count : 0\n  }]\n}), state.tabs.map(tabName => {\n  const pagination = state[`${tabName}_pagination`];\n  const data = state[`${tabName}_data`];\n  const order = state[`${tabName}_order`];\n  const isLoading = state[`${tabName}_loading`];\n  const isEmpty = !isLoading && !data.length && pagination;\n  const isLoaded = !isLoading && pagination && pagination.page === pagination.pages;\n  return () => h(\"div\", {\n    id: tabName\n  }, tabName === 'questions' ? h(ListHeader, {\n    show: !isEmpty,\n    title: `共 ${pagination ? pagination.total : 0} 个提问`,\n    disabled: isLoading,\n    currentOrder: order,\n    key: tabName,\n    orders: [{\n      order: '-update_time',\n      name: '更新时间（从晚到早）'\n    }, {\n      order: 'update_time',\n      name: '更新时间（从早到晚）'\n    }],\n    onChangeOrder: actions.changeOrder\n  }) : null, tabName === 'articles' ? h(ListHeader, {\n    show: !isEmpty,\n    title: `共 ${pagination ? pagination.total : 0} 篇文章`,\n    disabled: isLoading,\n    currentOrder: order,\n    key: tabName,\n    orders: [{\n      order: '-update_time',\n      name: '更新时间（从晚到早）'\n    }, {\n      order: 'update_time',\n      name: '更新时间（从早到晚）'\n    }, {\n      order: '-vote_count',\n      name: '最热门'\n    }],\n    onChangeOrder: actions.changeOrder\n  }) : null, data.length ? h(\"div\", {\n    class: \"item-list\"\n  }, tabName === 'questions' ? data.map(context => h(QuestionItem, {\n    question: context,\n    last_visit_id: state.last_visit_question_id,\n    tabName: tabName,\n    actions: actions\n  })) : null, tabName === 'articles' ? data.map(context => h(ArticleItem, {\n    article: context,\n    last_visit_id: state.last_visit_article_id,\n    tabName: tabName,\n    actions: actions\n  })) : null) : null, h(Empty, {\n    show: isEmpty,\n    title: `该话题下没有${tabName === 'questions' ? '提问' : '文章'}`\n  }), h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  }));\n})));","import { h } from 'hyperapp';\nimport './index.less';\nimport Nav from '~/components/nav/view.jsx';\nimport Topic from './components/topic/view.jsx';\nimport Contexts from './components/contexts/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => {\n  const topic_id = parseInt(match.params.topic_id, 10);\n  const {\n    topic,\n    loading\n  } = state;\n  return h(\"div\", {\n    oncreate: () => actions.onCreate({\n      topic_id\n    }),\n    ondestroy: actions.onDestroy,\n    key: match.url,\n    id: \"page-topic\",\n    class: \"mdui-container\"\n  }, h(Nav, {\n    path: \"/topics\"\n  }), h(Topic, {\n    topic: topic,\n    loading: loading,\n    actions: actions\n  }), h(Contexts, {\n    state: state,\n    actions: actions\n  }));\n});","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nimport Follow from '~/components/follow/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\nexport default (({\n  user,\n  actions\n}) => h(\"div\", {\n  class: \"item-inner\",\n  key: user.user_id\n}, h(\"div\", {\n  class: \"item mdui-card\"\n}, h(Link, {\n  to: fullPath(`/users/${user.user_id}`),\n  class: \"mdui-ripple info\",\n  onclick: () => actions.afterItemClick(user)\n}, h(\"div\", {\n  class: \"avatar\",\n  style: {\n    backgroundImage: `url(\"${user.avatar.large}\")`\n  }\n}), h(\"div\", {\n  class: \"username mdui-text-color-theme-text\"\n}, user.username), h(\"div\", {\n  class: \"headline mdui-text-color-theme-secondary\"\n}, user.headline)), h(\"div\", {\n  class: \"actions\"\n}, !user.relationships.is_me ? h(Follow, {\n  item: user,\n  type: \"users\",\n  id: user.user_id,\n  actions: actions\n}) : null, h(\"div\", {\n  class: \"flex-grow\"\n}), h(OptionsButton, {\n  type: \"user\",\n  item: user\n})))));","import { h } from 'hyperapp';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Item from './components/item/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => h(\"div\", {\n  oncreate: actions.onCreate,\n  ondestroy: actions.onDestroy,\n  key: match.url,\n  id: \"page-users\",\n  class: \"mdui-container\"\n}, state.tabs.map(tabName => {\n  const isEmpty = !state[`${tabName}_loading`] && !state[`${tabName}_data`].length && state[`${tabName}_pagination`];\n  const isLoaded = !state[`${tabName}_loading`] && state[`${tabName}_pagination`] && state[`${tabName}_pagination`].page === state[`${tabName}_pagination`].pages;\n  const isLoading = state[`${tabName}_loading`];\n  return () => h(\"div\", {\n    id: tabName\n  }, !isLoading && state[`${tabName}_data`].length ? h(\"div\", {\n    class: \"subheading mdui-text-color-theme-secondary\"\n  }, tabName === 'followees' ? [\"\\u5DF2\\u5173\\u6CE8 \", state[`${tabName}_pagination`].total, \" \\u4EBA\"] : null, tabName === 'followers' ? [\"\\u5173\\u6CE8\\u8005 \", state[`${tabName}_pagination`].total, \" \\u4EBA\"] : null, tabName === 'recommended' ? \"\\u4EBA\\u5458\\u63A8\\u8350\" : null) : null, h(\"div\", {\n    class: \"items-wrapper\"\n  }, state[`${tabName}_data`].map(user => h(Item, {\n    user: user,\n    actions: actions\n  }))), tabName === 'followees' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u5C1A\\u672A\\u5173\\u6CE8\\u4EFB\\u4F55\\u7528\\u6237\",\n    description: \"\\u5173\\u6CE8\\u7528\\u6237\\u540E\\uFF0C\\u76F8\\u5E94\\u7528\\u6237\\u5C31\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\\u3002\",\n    action: () => {\n      actions.toRecommended();\n    },\n    action_text: \"\\u67E5\\u770B\\u63A8\\u8350\\u7528\\u6237\"\n  }) : null, tabName === 'followers' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u4F60\\u8FD8\\u6CA1\\u6709\\u5173\\u6CE8\\u8005\",\n    description: \"\\u7528\\u6237\\u5173\\u6CE8\\u4E86\\u4F60\\u540E\\uFF0C\\u76F8\\u5E94\\u7528\\u6237\\u5C31\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\\u3002\"\n  }) : null, tabName === 'recommended' ? h(Empty, {\n    show: isEmpty,\n    title: \"\\u5DF2\\u5173\\u6CE8\\u6240\\u6709\\u7528\\u6237\",\n    description: \"\\u4F60\\u672A\\u5173\\u6CE8\\u7684\\u7528\\u6237\\u4F1A\\u663E\\u793A\\u518D\\u6B64\\u5904\\u3002\"\n  }) : null, h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  }));\n})));","import $ from 'mdui.jq';\n/**\n * 开始全屏 loading 状态\n */\n\nexport function loadStart() {\n  if ($('.mc-loading-overlay').length) {\n    return;\n  }\n\n  $('<div class=\"mc-loading-overlay\"><div class=\"mdui-spinner mdui-spinner-colorful\"></div></div>').appendTo(document.body).reflow().addClass('mc-loading-overlay-show');\n  setTimeout(() => {\n    $('.mc-loading-overlay').mutation();\n  }, 0);\n  $.lockScreen();\n}\n/**\n * 结束全屏 loading 状态\n */\n\nexport function loadEnd() {\n  const $overlay = $('.mc-loading-overlay');\n\n  if (!$overlay.length) {\n    return;\n  }\n\n  $overlay.removeClass('mc-loading-overlay-show').transitionEnd(() => {\n    $overlay.remove();\n    $.unlockScreen();\n  });\n}","import { h } from 'hyperapp';\nimport { location } from 'hyperapp-router';\nimport mdui from 'mdui';\nimport { fullPath } from '~/utils/path';\nimport { removeCookie } from '~/utils/cookie';\nimport './index.less';\nimport AvatarUpload from '~/components/avatar-upload/view.jsx';\nlet menu;\n\nconst Button = ({\n  user\n}) => h(\"div\", {\n  class: \"user mdui-btn mdui-btn-icon mdui-btn-dense\",\n  title: `帐号：${user.username}\\n(${user.email})`,\n  oncreate: element => {\n    menu = new mdui.Menu(element, '#appbar-avatar-popover', {\n      covered: false\n    });\n  }\n}, h(\"img\", {\n  src: user.avatar.middle,\n  width: \"32\",\n  height: \"32\"\n}));\n\nconst Popover = ({\n  user\n}) => h(\"div\", {\n  class: \"popover mdui-menu\",\n  id: \"appbar-avatar-popover\"\n}, h(\"div\", {\n  class: \"info\"\n}, h(\"div\", {\n  class: \"avatar-box\"\n}, h(AvatarUpload, {\n  user: user\n}), h(\"img\", {\n  src: user.avatar.large,\n  width: \"96\",\n  height: \"96\"\n})), h(\"div\", {\n  class: \"username\"\n}, user.username), h(\"div\", {\n  class: \"email mdui-text-color-theme-secondary\"\n}, user.email), h(\"button\", {\n  class: \"personal mdui-btn mdui-btn-dense mdui-btn-outlined mdui-color-theme mdui-ripple\",\n  onclick: () => {\n    const url = fullPath(`/users/${user.user_id}`);\n    location.actions.go(url);\n    menu.close();\n  }\n}, \"\\u4E2A\\u4EBA\\u8D44\\u6599\")), h(\"div\", {\n  class: \"bottom\"\n}, h(\"button\", {\n  onclick: () => {\n    removeCookie('token');\n    window.localStorage.removeItem('token');\n    window.location.reload();\n  },\n  class: \"mdui-btn mdui-btn-dense mdui-btn-outlined mdui-color-theme mdui-ripple\"\n}, \"\\u9000\\u51FA\")));\n\nexport default (({\n  user\n}) => h(\"div\", {\n  class: \"avatar\"\n}, h(Button, {\n  user: user\n}), h(Popover, {\n  user: user\n})));","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport './index.less';\nlet $searchbar;\nlet $input;\n\nconst onCreate = element => {\n  $searchbar = $(element);\n  $input = $searchbar.find('input');\n};\n\nconst onFocus = () => {\n  $searchbar.addClass('focus');\n};\n\nconst onBlur = () => {\n  $searchbar.removeClass('focus');\n};\n\nconst onInput = e => {\n  if (e.target.value) {\n    $searchbar.addClass('not-empty');\n  } else {\n    $searchbar.removeClass('not-empty');\n  }\n};\n\nconst clearInput = () => {\n  $input.val('').trigger('input');\n};\n\nconst onBack = e => {\n  $(e.target).parents('.toolbar').removeClass('mobile');\n};\n\nconst getFormAction = keyword => {\n  const query = `site:${window.location.host}%20${keyword}`;\n\n  if (window.G_OPTIONS.search_type === 'third') {\n    switch (window.G_OPTIONS.search_third) {\n      case 'google':\n        return `https://www.google.com/search?q=${query}`;\n\n      case 'bing':\n        return `https://www.bing.com/search?q=${query}`;\n\n      case 'baidu':\n        return `https://www.baidu.com/s?ws=${query}`;\n\n      case 'sogou':\n        return `https://www.sogou.com/web?query=${query}`;\n\n      case '360':\n        return `https://www.so.com/s?q=${query}`;\n\n      default:\n        return '';\n    }\n  }\n\n  return '';\n};\n\nconst onSubmit = e => {\n  e.preventDefault();\n  const value = $input.val();\n\n  if (!value) {\n    return;\n  }\n\n  const ua = window.navigator.userAgent;\n\n  if (ua.indexOf('iPad') > -1 || ua.indexOf('Ipod') > -1 || ua.indexOf('iPhone') > -1) {\n    window.location.href = getFormAction(value);\n  } else {\n    window.open(getFormAction(value), '_blank');\n  }\n};\n\nexport default (() => h(\"form\", {\n  method: \"get\",\n  class: \"search-bar\",\n  oncreate: element => onCreate(element),\n  onsubmit: onSubmit\n}, h(\"button\", {\n  type: \"button\",\n  class: \"back mdui-btn mdui-btn-icon\",\n  onclick: onBack\n}, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"arrow_back\")), h(\"button\", {\n  type: \"submit\",\n  class: \"submit mdui-btn mdui-btn-icon\"\n}, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"search\")), h(\"input\", {\n  type: \"text\",\n  placeholder: \"\\u641C\\u7D22\\u6587\\u7AE0\\u4E0E\\u95EE\\u7B54\",\n  onfocus: onFocus,\n  onblur: onBlur,\n  oninput: onInput\n}), h(\"button\", {\n  type: \"button\",\n  class: \"cancel mdui-btn mdui-btn-icon\",\n  onclick: clearInput\n}, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"close\"))));","import { h } from 'hyperapp';\nimport mdui from 'mdui';\nimport $ from 'mdui.jq';\nimport { COMMON_IMAGE_UPLOAD_FAILED } from 'mdclub-sdk-js/es/errors';\nimport { uploadMyAvatar } from 'mdclub-sdk-js/es/UserApi';\nimport { loadStart, loadEnd } from '~/utils/loading';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport './index.less';\n\nconst upload = (e, user) => {\n  const file = e.target.files[0];\n\n  if (file.size > 5 * 1024 * 1024) {\n    mdui.snackbar('头像文件不能超过 5M');\n    e.target.value = '';\n    return;\n  }\n\n  if (['image/png', 'image/jpeg'].indexOf(file.type) < 0) {\n    mdui.snackbar('只能上传 png、jpg 格式的图片');\n    e.target.value = '';\n    return;\n  }\n\n  loadStart();\n  uploadMyAvatar({\n    avatar: file\n  }).finally(loadEnd).then(({\n    data\n  }) => {\n    user.avatar = data;\n    emit('user_update', user);\n  }).catch(response => {\n    if (response.code === COMMON_IMAGE_UPLOAD_FAILED) {\n      mdui.snackbar(response.extra_message);\n      return;\n    }\n\n    apiCatch(response);\n  });\n};\n\nexport default (({\n  user\n}) => h(\"div\", {\n  class: \"mc-avatar-upload\"\n}, h(\"button\", {\n  onclick: e => {\n    $(e.currentTarget).next().val('').trigger('click');\n  },\n  class: \"upload-btn mdui-btn mdui-btn-icon mdui-ripple\",\n  type: \"button\",\n  title: \"\\u70B9\\u51FB\\u4E0A\\u4F20\\u5934\\u50CF\"\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"photo_camera\")), h(\"input\", {\n  onchange: e => upload(e, user),\n  type: \"file\",\n  title: \" \",\n  accept: \"image/jpeg,image/png\"\n})));","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport { COMMON_IMAGE_UPLOAD_FAILED } from 'mdclub-sdk-js/es/errors';\nimport { uploadMyCover } from 'mdclub-sdk-js/es/UserApi';\nimport { loadStart, loadEnd } from '~/utils/loading';\nimport { emit } from '~/utils/pubsub';\nimport apiCatch from '~/utils/errorHandler';\nimport './index.less';\n\nconst upload = (e, user) => {\n  const file = e.target.files[0];\n\n  if (file.size > 5 * 1024 * 1024) {\n    mdui.snackbar('封面文件不能超过 5M');\n    e.target.value = '';\n    return;\n  }\n\n  if (['image/png', 'image/jpeg'].indexOf(file.type) < 0) {\n    mdui.snackbar('只能上传 png、jpg 格式的图片');\n    e.target.value = '';\n    return;\n  }\n\n  loadStart();\n  uploadMyCover({\n    cover: file\n  }).finally(loadEnd).then(({\n    data\n  }) => {\n    user.cover = data;\n    emit('user_update', user);\n  }).catch(response => {\n    if (response.code === COMMON_IMAGE_UPLOAD_FAILED) {\n      mdui.snackbar(response.extra_message);\n      return;\n    }\n\n    apiCatch(response);\n  });\n};\n\nexport default (({\n  user\n}) => h(\"div\", {\n  class: \"mc-cover-upload\"\n}, h(\"button\", {\n  onclick: e => {\n    $(e.currentTarget).next().val('').trigger('click');\n  },\n  class: \"upload-btn mdui-btn mdui-btn-icon mdui-ripple\",\n  type: \"button\",\n  title: \"\\u70B9\\u51FB\\u4E0A\\u4F20\\u5C01\\u9762\"\n}, h(\"i\", {\n  className: \"mdui-icon material-icons\"\n}, \"photo_camera\")), h(\"input\", {\n  onchange: e => upload(e, user),\n  type: \"file\",\n  title: \" \",\n  accept: \"image/jpeg,image/png\"\n})));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport $ from 'mdui.jq';\nimport { $window } from 'mdui/es/utils/dom';\nimport { emit } from '~/utils/pubsub';\nimport { summaryText, plainText } from '~/utils/html';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport AvatarUpload from '~/components/avatar-upload/view.jsx';\nimport CoverUpload from '~/components/cover-upload/view.jsx';\nimport Follow from '~/components/follow/view.jsx';\nimport OptionsButton from '~/components/options-button/view.jsx';\n\nconst MetaItem = ({\n  icon,\n  text,\n  tooltip,\n  multiLine = false\n}) => {\n  const contentFunc = multiLine ? plainText(text) : summaryText(text);\n  return h(\"div\", {\n    class: \"meta\"\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons mdui-text-color-theme-icon\",\n    \"mdui-tooltip\": `{content: '${tooltip}', delay: 300}`\n  }, icon), h(\"div\", {\n    class: cc([{\n      'mdui-typo': multiLine\n    }]),\n    oncreate: contentFunc,\n    onupdate: contentFunc\n  }));\n};\n\nexport default (({\n  state,\n  actions,\n  is_me\n}) => {\n  const {\n    interviewee\n  } = state;\n  return h(\"div\", {\n    key: \"user\",\n    class: \"user mdui-card mdui-card-shadow\"\n  }, h(Loading, {\n    show: state.loading\n  }), interviewee ? [h(\"div\", {\n    class: \"cover\",\n    style: {\n      backgroundImage: `url(\"${interviewee.cover.large}\")`\n    },\n    oncreate: element => {\n      // cover 元素创建完成后，绑定滚动事件，使封面随着滚动条滚动\n      setTimeout(() => {\n        $window.on('scroll', () => {\n          window.requestAnimationFrame(() => {\n            element.style['background-position-y'] = `${window.pageYOffset / 2}px`;\n          });\n        }); // 向下滚动一段距离\n\n        window.scrollTo(0, $(element).width() * 0.56 * 0.58);\n      });\n    },\n    key: \"0\"\n  }, is_me ? h(CoverUpload, {\n    user: interviewee\n  }) : null), h(\"div\", {\n    class: \"info\",\n    key: \"1\"\n  }, h(\"div\", {\n    class: \"avatar-box\"\n  }, is_me ? h(AvatarUpload, {\n    user: interviewee\n  }) : null, h(\"img\", {\n    src: interviewee.avatar.large,\n    class: \"avatar\"\n  })), h(\"div\", {\n    class: cc(['profile', {\n      fold: state.profile_fold\n    }])\n  }, h(\"div\", {\n    class: \"meta username mdui-text-color-theme-text\"\n  }, interviewee.username), interviewee.headline ? h(MetaItem, {\n    icon: \"credit_card\",\n    text: interviewee.headline,\n    tooltip: \"\\u4E00\\u53E5\\u8BDD\\u4ECB\\u7ECD\"\n  }) : null, interviewee.blog ? h(MetaItem, {\n    icon: \"insert_link\",\n    text: interviewee.blog,\n    tooltip: \"\\u4E2A\\u4EBA\\u4E3B\\u9875\"\n  }) : null, interviewee.company ? h(MetaItem, {\n    icon: \"location_city\",\n    text: interviewee.company,\n    tooltip: \"\\u6240\\u5C5E\\u5B66\\u6821\\u6216\\u4F01\\u4E1A\"\n  }) : null, interviewee.location ? h(MetaItem, {\n    icon: \"location_on\",\n    text: interviewee.location,\n    tooltip: \"\\u6240\\u5728\\u5730\\u533A\"\n  }) : null, interviewee.bio ? h(MetaItem, {\n    icon: \"description\",\n    text: interviewee.bio,\n    tooltip: \"\\u4E2A\\u4EBA\\u7B80\\u4ECB\",\n    multiLine: true\n  }) : null, interviewee.blog || interviewee.company || interviewee.location || interviewee.bio ? h(\"button\", {\n    class: \"fold-button mdui-btn\",\n    onclick: () => {\n      actions.setState({\n        profile_fold: !state.profile_fold\n      });\n    }\n  }, h(\"i\", {\n    class: \"mdui-icon-left mdui-icon material-icons mdui-text-color-theme-icon\"\n  }, state.profile_fold ? 'keyboard_arrow_down' : 'keyboard_arrow_up'), state.profile_fold ? '查看' : '收起', \"\\u8BE6\\u7EC6\\u8D44\\u6599\") : null)), h(\"div\", {\n    class: \"actions\",\n    key: \"2\"\n  }, !is_me ? h(Follow, {\n    item: interviewee,\n    type: \"user\",\n    id: interviewee.user_id,\n    actions: actions\n  }) : null, is_me ? h(\"button\", {\n    class: \"edit mdui-btn mdui-btn-icon mdui-btn-outlined\",\n    \"mdui-tooltip\": \"{content: '\\u7F16\\u8F91\\u4E2A\\u4EBA\\u8D44\\u6599', delay: 300}\",\n    onclick: actions.updateUserInfo\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n  }, \"edit\")) : null, h(\"div\", {\n    class: \"follow\"\n  }, h(\"button\", {\n    class: \"followers mdui-btn mdui-text-color-theme-secondary\",\n    onclick: () => {\n      emit('users_dialog_open', {\n        type: 'followers',\n        id: interviewee.user_id\n      });\n    }\n  }, interviewee.follower_count, \" \\u4EBA\\u5173\\u6CE8\"), h(\"div\", {\n    class: \"divider\"\n  }), h(\"button\", {\n    class: \"followees mdui-btn mdui-text-color-theme-secondary\",\n    onclick: () => {\n      emit('users_dialog_open', {\n        type: 'followees',\n        id: interviewee.user_id\n      });\n    }\n  }, \"\\u5173\\u6CE8\\u4E86 \", interviewee.followee_count, \" \\u4EBA\")), h(\"div\", {\n    class: \"flex-grow\"\n  }), h(OptionsButton, {\n    type: \"user\",\n    item: interviewee,\n    extraOptions: is_me ? [{\n      name: '重置头像',\n      onClick: actions.deleteAvatar\n    }, {\n      name: '重置封面',\n      onClick: actions.deleteCover\n    }] : null\n  }))] : null);\n});","import { h } from 'hyperapp';\nimport mdui from 'mdui';\nimport $ from 'mdui.jq';\nimport { unescape } from 'html-escaper';\nimport './index.less';\n\nconst Title = () => h(\"div\", {\n  class: \"mdui-dialog-title\"\n}, h(\"button\", {\n  class: \"mdui-btn mdui-btn-icon mdui-ripple close\",\n  \"mdui-dialog-close\": true\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"close\")), \"\\u7F16\\u8F91\\u4E2A\\u4EBA\\u4FE1\\u606F\");\n\nconst Textfield = ({\n  label,\n  maxlength,\n  name,\n  value,\n  type\n}) => h(\"div\", {\n  class: \"mdui-textfield mdui-textfield-floating-label\",\n  onupdate: element => mdui.updateTextFields(element)\n}, h(\"label\", {\n  class: \"mdui-textfield-label\"\n}, label), type === 'text' ? h(\"input\", {\n  class: \"mdui-textfield-input\",\n  name: name,\n  type: \"text\",\n  maxlength: maxlength,\n  value: unescape(value)\n}) : null, type === 'textfield' ? h(\"textarea\", {\n  class: \"mdui-textfield-input\",\n  name: name,\n  maxlength: maxlength,\n  value: unescape(value)\n}) : null);\n\nconst Content = ({\n  user\n}) => h(\"form\", {\n  class: \"mdui-dialog-content\"\n}, h(Textfield, {\n  label: \"\\u4E00\\u53E5\\u8BDD\\u4ECB\\u7ECD\",\n  maxlength: 40,\n  name: \"headline\",\n  value: user.headline,\n  type: \"text\"\n}), h(Textfield, {\n  label: \"\\u4E2A\\u4EBA\\u4E3B\\u9875\",\n  maxlength: 80,\n  name: \"blog\",\n  value: user.blog,\n  type: \"text\"\n}), h(Textfield, {\n  label: \"\\u6240\\u5C5E\\u5B66\\u6821\\u6216\\u4F01\\u4E1A\",\n  maxlength: 80,\n  name: \"company\",\n  value: user.company,\n  type: \"text\"\n}), h(Textfield, {\n  label: \"\\u6240\\u5728\\u5730\\u533A\",\n  maxlength: 80,\n  name: \"location\",\n  value: user.location,\n  type: \"text\"\n}), h(Textfield, {\n  label: \"\\u4E2A\\u4EBA\\u7B80\\u4ECB\",\n  maxlength: 160,\n  name: \"bio\",\n  value: user.bio,\n  type: \"textfield\"\n}));\n\nconst Actions = ({\n  edit_info_submitting\n}) => h(\"div\", {\n  class: \"mdui-dialog-actions\"\n}, h(\"button\", {\n  class: \"mdui-btn\",\n  \"mdui-dialog-close\": true\n}, \"\\u53D6\\u6D88\"), h(\"button\", {\n  class: \"mdui-btn\",\n  \"mdui-dialog-confirm\": true,\n  disabled: edit_info_submitting\n}, edit_info_submitting ? '保存中' : '确定'));\n\nexport default (({\n  user,\n  edit_info_submitting\n}) => h(\"div\", {\n  class: \"mdui-dialog edit-info\",\n  oncreate: element => $(element).mutation()\n}, h(Title, null), h(Content, {\n  user: user\n}), h(Actions, {\n  edit_info_submitting: edit_info_submitting\n})));","import { h } from 'hyperapp';\nimport './index.less';\nimport ListHeader from '~/components/list-header/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Tab from '~/components/tab/view.jsx';\nimport { QuestionItem, ArticleItem, AnswerItem } from '~/components/list-item/view.jsx';\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  class: \"contexts mdui-card\"\n}, h(Tab, {\n  items: [{\n    name: '提问',\n    hash: 'questions',\n    count: state.interviewee ? state.interviewee.question_count : 0\n  }, {\n    name: '回答',\n    hash: 'answers',\n    count: state.interviewee ? state.interviewee.answer_count : 0\n  }, {\n    name: '文章',\n    hash: 'articles',\n    count: state.interviewee ? state.interviewee.article_count : 0\n  }]\n}), state.tabs.map(tabName => {\n  const pagination = state[`${tabName}_pagination`];\n  const data = state[`${tabName}_data`];\n  const order = state[`${tabName}_order`];\n  const isLoading = state[`${tabName}_loading`];\n  const isEmpty = !isLoading && !data.length && pagination;\n  const isLoaded = !isLoading && pagination && pagination.page === pagination.pages;\n  return () => h(\"div\", {\n    id: tabName\n  }, tabName === 'questions' ? h(ListHeader, {\n    show: !isEmpty,\n    title: `共 ${pagination ? pagination.total : 0} 个提问`,\n    disabled: isLoading,\n    currentOrder: order,\n    key: tabName,\n    orders: [{\n      order: '-update_time',\n      name: '更新时间（从晚到早）'\n    }, {\n      order: 'update_time',\n      name: '更新时间（从早到晚）'\n    }],\n    onChangeOrder: actions.changeOrder\n  }) : null, tabName === 'articles' ? h(ListHeader, {\n    show: !isEmpty,\n    title: `共 ${pagination ? pagination.total : 0} 篇文章`,\n    disabled: isLoading,\n    currentOrder: order,\n    key: tabName,\n    orders: [{\n      order: '-create_time',\n      name: '发布时间（从晚到早）'\n    }, {\n      order: 'create_time',\n      name: '发布时间（从早到晚）'\n    }, {\n      order: '-vote_count',\n      name: '最热门'\n    }],\n    onChangeOrder: actions.changeOrder\n  }) : null, tabName === 'answers' ? h(ListHeader, {\n    show: !isEmpty,\n    title: `共 ${pagination ? pagination.total : 0} 个回答`,\n    disabled: isLoading,\n    currentOrder: order,\n    key: tabName,\n    orders: [{\n      order: '-create_time',\n      name: '发布时间（从晚到早）'\n    }, {\n      order: 'create_time',\n      name: '发布时间（从早到晚）'\n    }, {\n      order: '-vote_count',\n      name: '最热门'\n    }],\n    onChangeOrder: actions.changeOrder\n  }) : null, data.length ? h(\"div\", {\n    class: \"item-list\"\n  }, tabName === 'questions' ? data.map(context => h(QuestionItem, {\n    question: context,\n    last_visit_id: state.last_visit_question_id,\n    tabName: tabName,\n    actions: actions\n  })) : null, tabName === 'articles' ? data.map(context => h(ArticleItem, {\n    article: context,\n    last_visit_id: state.last_visit_article_id,\n    tabName: tabName,\n    actions: actions\n  })) : null, tabName === 'answers' ? data.map(context => h(AnswerItem, {\n    answer: context,\n    last_visit_id: state.last_visit_question_id,\n    tabName: tabName,\n    actions: actions\n  })) : null) : null, h(Empty, {\n    show: isEmpty,\n    title: `该用户没有发表${// eslint-disable-next-line no-nested-ternary\n    tabName === 'questions' ? '提问' : tabName === 'articles' ? '文章' : '回答'}`\n  }), h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  }));\n})));","import { h } from 'hyperapp';\nimport './index.less';\nimport User from './components/user/view.jsx';\nimport EditInfo from './components/edit-info/view.jsx';\nimport Contexts from './components/contexts/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => {\n  // 当前访问的用户ID\n  const interviewee_id = parseInt(match.params.user_id, 10); // 用户是否访问自己的主页\n\n  const is_me = state.user && interviewee_id === state.user.user_id;\n  return h(\"div\", {\n    oncreate: () => actions.onCreate({\n      interviewee_id\n    }),\n    ondestroy: actions.onDestroy,\n    key: match.url,\n    id: \"page-user\",\n    class: \"mdui-container\"\n  }, h(User, {\n    state: state,\n    actions: actions,\n    is_me: is_me\n  }), h(Contexts, {\n    state: state,\n    actions: actions\n  }), state.user ? h(EditInfo, {\n    user: state.user,\n    edit_info_submitting: state.edit_info_submitting\n  }) : null);\n});","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport cc from 'classcat';\nimport './index.less';\nexport default (({\n  show\n}) => h(\"div\", {\n  key: \"mc-loading\",\n  class: cc(['mc-loading', {\n    'mdui-hidden': !show\n  }])\n}, h(\"div\", {\n  class: \"mdui-spinner\",\n  oncreate: element => $(element).mutation()\n})));","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nimport { plainText, richText, summaryText } from '~/utils/html';\nimport Loading from '~/components/Loading/view.jsx';\nexport default (({\n  notification,\n  actions\n}) => {\n  // eslint-disable-next-line no-empty-pattern\n  const Title = ({}, children) => h(\"div\", {\n    class: \"title mdui-text-color-theme-text\"\n  }, children);\n\n  const Content = ({\n    content\n  }) => {\n    if (!notification.is_show_detail) {\n      return h(\"div\", {\n        class: \"content\",\n        key: \"summary\",\n        oncreate: summaryText(content, 46),\n        onupdate: summaryText(content, 46)\n      });\n    }\n\n    if (notification.is_loaded_detail) {\n      const contentFunc = ['comment_deleted', 'question_commented', 'article_commented', 'answer_commented', 'comment_replies'].indexOf(notification.type) > -1 ? plainText(notification.content_detail) : richText(notification.content_detail);\n      return h(\"div\", {\n        class: \"content mdui-typo\",\n        key: \"richtext\",\n        oncreate: contentFunc,\n        onupdate: contentFunc\n      });\n    }\n\n    return h(\"div\", {\n      class: \"content\",\n      key: \"loading\"\n    }, h(Loading, {\n      show: true\n    }));\n  };\n\n  const More = () => h(\"div\", {\n    class: \"mdui-btn mdui-btn-icon more\",\n    title: notification.is_show_detail ? '隐藏详细信息' : '显示详细信息',\n    onclick: () => actions.toggleDetail(notification)\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons\"\n  }, notification.is_show_detail ? 'arrow_drop_up' : 'arrow_drop_down'));\n\n  const Delete = () => h(\"div\", {\n    class: \"mdui-btn mdui-btn-icon delete\",\n    title: \"\\u5220\\u9664\\u8BE5\\u901A\\u77E5\",\n    onclick: () => actions.deleteOne(notification)\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons\"\n  }, \"close\")); // eslint-disable-next-line no-empty-pattern\n\n\n  const Item = ({}, children) => h(\"div\", {\n    class: \"item\"\n  }, h(Delete, null), children, h(More, null)); // eslint-disable-next-line no-empty-pattern\n\n\n  const ReplyWrapper = ({}, children) => h(Item, null, children, h(Content, {\n    content: notification.relationships.reply.content_summary\n  })); // eslint-disable-next-line no-empty-pattern\n\n\n  const CommentDeletedWrapper = ({}, children) => h(Item, null, children, h(Content, {\n    content: notification.content_deleted.content\n  }));\n\n  const UserLink = () => h(Link, {\n    to: fullPath(`/users/${notification.sender_id}`),\n    class: \"user\"\n  }, notification.relationships.sender.username);\n\n  const QuestionLink = () => h(Link, {\n    to: fullPath(`/questions/${notification.question_id}`),\n    class: \"question\"\n  }, notification.relationships.question ? notification.relationships.question.title : notification.content_deleted.title);\n\n  const ArticleLink = () => h(Link, {\n    to: fullPath(`/articles/${notification.article_id}`),\n    class: \"article\"\n  }, notification.relationships.article ? notification.relationships.article.title : notification.content_deleted.title);\n\n  switch (notification.type) {\n    case 'question_answered':\n      return h(Item, null, h(Title, null, h(UserLink, null), \" \\u56DE\\u7B54\\u4E86\\u4F60\\u7684\\u63D0\\u95EE \", h(QuestionLink, null)), h(Content, {\n        content: notification.relationships.answer.content_summary\n      }));\n\n    case 'question_commented':\n      return h(Item, null, h(Title, null, h(UserLink, null), \" \\u8BC4\\u8BBA\\u4E86\\u4F60\\u7684\\u63D0\\u95EE \", h(QuestionLink, null)), h(Content, {\n        content: notification.relationships.comment.content_summary\n      }));\n\n    case 'question_deleted':\n      return h(Item, null, h(Title, null, \"\\u4F60\\u7684\\u63D0\\u95EE\", ' ', h(\"span\", {\n        class: \"question deleted\"\n      }, notification.content_deleted.title), ' ', \"\\u5DF2\\u88AB\\u5220\\u9664\"), h(Content, {\n        content: notification.content_deleted.content_rendered\n      }));\n\n    case 'article_commented':\n      return h(Item, null, h(Title, null, h(UserLink, null), \" \\u8BC4\\u8BBA\\u4E86\\u4F60\\u7684\\u6587\\u7AE0 \", h(ArticleLink, null)), h(Content, {\n        content: notification.relationships.comment.content_summary\n      }));\n\n    case 'article_deleted':\n      return h(Item, null, h(Title, null, \"\\u4F60\\u7684\\u6587\\u7AE0\", ' ', h(\"span\", {\n        class: \"article deleted\"\n      }, notification.content_deleted.title), ' ', \"\\u5DF2\\u88AB\\u5220\\u9664\"), h(Content, {\n        content: notification.content_deleted.content_rendered\n      }));\n\n    case 'answer_commented':\n      return h(Item, null, h(Title, null, h(UserLink, null), \" \\u8BC4\\u8BBA\\u4E86\\u4F60\\u5728\\u63D0\\u95EE \", h(QuestionLink, null), \" \\u4E2D\\u7684\\u56DE\\u7B54\"), h(Content, {\n        content: notification.relationships.comment.content_summary\n      }));\n\n    case 'answer_deleted':\n      return h(Item, null, h(Title, null, \"\\u4F60\\u5728\\u63D0\\u95EE \", h(QuestionLink, null), \" \\u4E2D\\u7684\\u56DE\\u7B54\\u5DF2\\u88AB\\u5220\\u9664\"), h(Content, {\n        content: notification.content_deleted.content_rendered\n      }));\n\n    case 'comment_replied':\n      if (notification.answer_id && notification.question_id) {\n        return h(ReplyWrapper, null, h(Title, null, h(UserLink, null), \" \\u56DE\\u590D\\u4E86\\u4F60\\u5728\\u63D0\\u95EE \", h(QuestionLink, null), \" \\u7684\\u56DE\\u7B54\\u4E2D\\u7684\\u8BC4\\u8BBA\"));\n      }\n\n      if (notification.question_id) {\n        return h(ReplyWrapper, null, h(Title, null, h(UserLink, null), \" \\u56DE\\u590D\\u4E86\\u4F60\\u5728\\u63D0\\u95EE \", h(QuestionLink, null), \" \\u4E2D\\u7684\\u8BC4\\u8BBA\"));\n      }\n\n      if (notification.article_id) {\n        return h(ReplyWrapper, null, h(Title, null, h(UserLink, null), \" \\u56DE\\u590D\\u4E86\\u4F60\\u5728\\u6587\\u7AE0 \", h(ArticleLink, null), \" \\u4E2D\\u7684\\u8BC4\\u8BBA\"));\n      }\n\n      return null;\n\n    case 'comment_deleted':\n      if (notification.answer_id && notification.question_id) {\n        return h(CommentDeletedWrapper, null, h(Title, null, \"\\u4F60\\u5728\\u63D0\\u95EE \", h(QuestionLink, null), \" \\u7684\\u56DE\\u7B54\\u4E2D\\u7684\\u8BC4\\u8BBA\\u5DF2\\u88AB\\u5220\\u9664\"));\n      }\n\n      if (notification.question_id) {\n        return h(CommentDeletedWrapper, null, h(Title, null, \"\\u4F60\\u5728\\u63D0\\u95EE \", h(QuestionLink, null), \" \\u4E2D\\u7684\\u8BC4\\u8BBA\\u5DF2\\u88AB\\u5220\\u9664\"));\n      }\n\n      if (notification.article_id) {\n        return h(CommentDeletedWrapper, null, h(Title, null, \"\\u4F60\\u5728\\u6587\\u7AE0 \", h(ArticleLink, null), \" \\u4E2D\\u7684\\u8BC4\\u8BBA\\u5DF2\\u88AB\\u5220\\u9664\"));\n      }\n\n      return null;\n\n    default:\n      return null;\n  }\n});","import { h } from 'hyperapp';\nimport currentUser from '~/utils/currentUser';\nimport { emit } from '~/utils/pubsub';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Item from './components/item/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => {\n  const isEmpty = !state.loading && !state.data.length && state.pagination;\n  const isLoaded = !state.loading && state.pagination && state.pagination.page === state.pagination.pages;\n  const isLoading = state.loading;\n  return h(\"div\", {\n    oncreate: actions.onCreate,\n    ondestroy: actions.onDestroy,\n    key: match.url,\n    id: \"page-notifications\",\n    class: \"mdui-container\"\n  }, currentUser() ? [h(Empty, {\n    show: isEmpty,\n    title: \"\\u6CA1\\u6709\\u4F60\\u7684\\u901A\\u77E5\",\n    description: \"\\u6B64\\u5904\\u4F1A\\u663E\\u793A\\u4F60\\u6240\\u6709\\u7684\\u5DF2\\u8BFB\\u548C\\u672A\\u8BFB\\u901A\\u77E5\",\n    key: \"0\"\n  }), state.data.length ? h(\"div\", {\n    class: \"item-list mdui-card mdui-card-shadow\",\n    key: \"1\"\n  }, state.data.map(notification => h(Item, {\n    notification: notification,\n    actions: actions\n  }))) : null, !currentUser() ? h(Empty, {\n    show: true,\n    title: \"\\u767B\\u9646\\u540E\\u624D\\u80FD\\u67E5\\u770B\\u901A\\u77E5\",\n    description: \"\\u767B\\u9646\\u540E\\uFF0C\\u4F60\\u7684\\u901A\\u77E5\\u6D88\\u606F\\u5C06\\u4F1A\\u663E\\u793A\\u5728\\u6B64\\u5904\",\n    action: () => {\n      emit('login_open');\n    },\n    action_text: \"\\u767B\\u5F55\",\n    key: \"2\"\n  }) : null, h(Loading, {\n    show: isLoading,\n    key: \"3\"\n  }), h(Loaded, {\n    show: isLoaded,\n    key: \"4\"\n  })] : null);\n});","import { h } from 'hyperapp';\nimport { Link } from 'hyperapp-router';\nimport { fullPath } from '~/utils/path';\nimport './index.less';\nexport default (({\n  count\n}) => h(Link, {\n  to: fullPath('/notifications'),\n  class: \"notification mdui-btn mdui-btn-icon\",\n  title: `${count ? `${count} 条` : '没有'}未读通知`\n}, count ? h(\"span\", {\n  class: \"count\"\n}) : null, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"notifications\")));","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport './index.less';\n\nconst onClick = e => {\n  const $toolbar = $(e.target).parents('.toolbar');\n  $toolbar.addClass('mobile');\n  $toolbar.find('.search-bar input')[0].focus();\n};\n\nexport default (() => h(\"div\", {\n  class: \"search-icon mdui-btn mdui-btn-icon\",\n  onclick: onClick\n}, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"search\")));","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport { Link } from 'hyperapp-router';\nimport { fullPath, isPathArticle, isPathArticles, isPathInbox, isPathIndex, isPathNotifications, isPathQuestion, isPathQuestions, isPathTopic, isPathTopics, isPathUser, isPathUsers } from '~/utils/path';\nimport { emit } from '~/utils/pubsub';\nimport './index.less';\nimport Avatar from './components/avatar/view.jsx';\nimport Notification from './components/notification/view.jsx';\nimport SearchBar from './components/search-bar/view.jsx';\nimport SearchIcon from './components/search-icon/view.jsx';\n\nconst Title = ({\n  interviewee\n}) => h(\"div\", {\n  class: \"title\"\n}, isPathIndex() ? \"\\u9996\\u9875\" : isPathQuestions() || isPathQuestion() ? \"\\u95EE\\u7B54\" : isPathArticles() || isPathArticle() ? \"\\u6587\\u7AE0\" : isPathTopics() || isPathTopic() ? \"\\u8BDD\\u9898\" : isPathUsers() ? \"\\u4EBA\\u8109\" : isPathUser() && interviewee ? interviewee.username : isPathInbox() ? \"\\u79C1\\u4FE1\" : isPathNotifications() ? \"\\u901A\\u77E5\" : null);\n\nconst LoginBtn = () => h(\"div\", {\n  class: \"login mdui-btn mdui-btn-dense\",\n  onclick: () => emit('login_open')\n}, \"\\u767B\\u5F55\");\n\nconst RegisterBtn = () => h(\"div\", {\n  class: \"register mdui-btn mdui-btn-dense\",\n  onclick: () => emit('register_open')\n}, \"\\u6CE8\\u518C\");\n\nexport default (({\n  user,\n  interviewee,\n  notifications\n}) => h(\"div\", {\n  class: \"toolbar mdui-toolbar\"\n}, h(\"button\", {\n  class: \"drawer mdui-btn mdui-btn-icon mdui-ripple\",\n  oncreate: element => {\n    const $drawer = $('.mc-drawer');\n    const drawer = new mdui.Drawer($drawer, {\n      swipe: true\n    });\n    $drawer.data('drawerInstance', drawer);\n    $(element).on('click', () => drawer.toggle());\n  }\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"menu\")), h(Link, {\n  class: \"headline\",\n  to: fullPath('/')\n}, window.G_OPTIONS.site_name), h(Title, {\n  interviewee: interviewee\n}), h(SearchBar, null), h(\"div\", {\n  class: \"mdui-toolbar-spacer\"\n}), h(SearchIcon, null), user ? [h(Notification, {\n  count: notifications.count,\n  key: \"0\"\n}), h(Avatar, {\n  user: user,\n  key: \"1\"\n})] : null, !user ? [h(LoginBtn, {\n  key: \"0\"\n}), h(RegisterBtn, {\n  key: \"1\"\n})] : null));","import { h } from 'hyperapp';\nimport { isPathArticles, isPathQuestions, isPathTopics, isPathUsers } from '~/utils/path';\nimport Tab from '~/components/tab/view.jsx';\nexport default (({\n  user\n}) => isPathQuestions() ? h(Tab, {\n  key: \"questions\",\n  centered: true,\n  items: [{\n    name: '最新',\n    hash: 'recent'\n  }, {\n    name: '近期热门',\n    hash: 'popular'\n  }].concat(user ? {\n    name: '已关注',\n    hash: 'following'\n  } : null)\n}) : isPathArticles() ? h(Tab, {\n  key: \"articles\",\n  centered: true,\n  items: [{\n    name: '最新',\n    hash: 'recent'\n  }, {\n    name: '近期热门',\n    hash: 'popular'\n  }].concat(user ? {\n    name: '已关注',\n    hash: 'following'\n  } : null)\n}) : user && isPathTopics() ? h(Tab, {\n  key: \"topics\",\n  centered: true,\n  items: [{\n    name: '已关注',\n    hash: 'following'\n  }, {\n    name: '精选',\n    hash: 'recommended'\n  }]\n}) : user && isPathUsers() ? h(Tab, {\n  key: \"users\",\n  centered: true,\n  items: [{\n    name: '已关注',\n    hash: 'followees'\n  }, {\n    name: '关注者',\n    hash: 'followers'\n  }, {\n    name: '找人',\n    hash: 'recommended'\n  }]\n}) : null);","import { h } from 'hyperapp';\nimport $ from 'mdui.jq';\nimport mdui from 'mdui';\nimport { $window } from 'mdui/es/utils/dom';\nimport { scrollToTop } from '~/utils/scroll';\nimport './index.less';\nimport Toolbar from './components/toolbar/view.jsx';\nimport Tabbar from './components/tabbar/view.jsx';\n\nconst onCreate = element => {\n  const $appbar = $(element).mutation(); // 移动端自动隐藏工具栏\n\n  const headroom = new mdui.Headroom($appbar, {\n    pinnedClass: 'mdui-headroom-pinned-toolbar',\n    unpinnedClass: 'mdui-headroom-unpinned-toolbar'\n  });\n\n  const updateHeadroom = () => {\n    if ($window.width() < 600) {\n      headroom.enable();\n    } else {\n      headroom.disable();\n    }\n  };\n\n  $window.on('resize', updateHeadroom);\n  updateHeadroom(); // 点击应用栏回到页面顶部\n\n  $appbar.on('click', e => {\n    if (!window.pageYOffset) {\n      return;\n    }\n\n    const $target = $(e.target);\n\n    if ($target.is('.mdui-toolbar') || $target.is('mdui-tab')) {\n      scrollToTop();\n    }\n  });\n};\n\nexport default (({\n  user,\n  interviewee,\n  notifications\n}) => h(\"div\", {\n  class: \"mc-appbar mdui-appbar mdui-appbar-fixed\",\n  oncreate: element => onCreate(element)\n}, h(Toolbar, {\n  user: user,\n  interviewee: interviewee,\n  notifications: notifications\n}), h(Tabbar, {\n  user: user\n})));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport { Link } from 'hyperapp-router';\nimport { fullPath, isPathArticle, isPathArticles, isPathInbox, isPathIndex, isPathNotifications, isPathQuestion, isPathQuestions, isPathTopic, isPathTopics, isPathUser, isPathUsers } from '~/utils/path';\nimport './index.less';\nconst {\n  site_name,\n  site_icp_beian,\n  site_gongan_beian\n} = window.G_OPTIONS;\nconst site_gongan_beian_code = site_gongan_beian ? site_gongan_beian.match(/\\d+/)[0] : '';\n\nconst Item = ({\n  url,\n  icon,\n  title,\n  active\n}) => h(Link, {\n  to: fullPath(url),\n  class: cc(['mdui-list-item', 'mdui-ripple', {\n    'mdui-list-item-active': active\n  }])\n}, h(\"i\", {\n  class: \"mdui-list-item-icon mdui-icon material-icons\"\n}, icon), h(\"div\", {\n  class: \"mdui-list-item-content\"\n}, title));\n\nexport default (({\n  user,\n  interviewee\n}) => h(\"div\", {\n  class: \"mc-drawer mdui-drawer\"\n}, h(\"div\", {\n  class: \"mdui-list\"\n}, h(Item, {\n  url: \"/\",\n  icon: \"home\",\n  title: \"\\u9996\\u9875\",\n  active: isPathIndex()\n}), h(Item, {\n  url: \"/topics\",\n  icon: \"class\",\n  title: \"\\u8BDD\\u9898\",\n  active: isPathTopics() || isPathTopic()\n}), h(Item, {\n  url: \"/questions\",\n  icon: \"forum\",\n  title: \"\\u95EE\\u7B54\",\n  active: isPathQuestions() || isPathQuestion()\n}), h(Item, {\n  url: \"/articles\",\n  icon: \"description\",\n  title: \"\\u6587\\u7AE0\",\n  active: isPathArticles() || isPathArticle()\n}), h(\"div\", {\n  class: \"mdui-divider\"\n}), user ? h(Item, {\n  url: `/users/${user.user_id}`,\n  icon: \"account_circle\",\n  title: \"\\u4E2A\\u4EBA\\u8D44\\u6599\",\n  active: isPathUser() && interviewee && user.user_id === interviewee.user_id\n}) : null, h(Item, {\n  url: \"/users\",\n  icon: \"people\",\n  title: \"\\u4EBA\\u8109\",\n  active: isPathUsers() || isPathUser() && (!user || interviewee && user.user_id !== interviewee.user_id)\n}), user ? h(Item, {\n  url: \"/notifications\",\n  icon: \"notifications\",\n  title: \"\\u901A\\u77E5\",\n  active: isPathNotifications()\n}) : null), h(\"div\", {\n  class: \"copyright\"\n}, site_icp_beian ? h(\"p\", null, h(\"a\", {\n  href: \"http://www.beian.miit.gov.cn/\",\n  target: \"_blank\"\n}, site_icp_beian)) : null, site_gongan_beian ? h(\"p\", null, h(\"a\", {\n  href: `http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=${site_gongan_beian_code}`,\n  target: \"_blank\"\n}, site_gongan_beian)) : null, h(\"p\", null, \"\\xA9 \", new Date().getFullYear(), \" \", site_name), h(\"p\", null, \"Powered by\", ' ', h(\"a\", {\n  href: \"https://mdui.org\",\n  target: \"_blank\"\n}, \"MDUI\"), ' ', \"&\", ' ', h(\"a\", {\n  href: \"https://mdclub.org\",\n  target: \"_blank\"\n}, \"MDClub\")))));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nexport default (({\n  onClick,\n  icon\n}) => h(\"button\", {\n  onclick: onClick,\n  class: cc(['mdui-btn', 'mdui-btn-icon', icon])\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, icon)));","import { h } from 'hyperapp';\nexport default (({\n  text\n}) => h(\"div\", {\n  class: \"mdui-dialog-title\"\n}, text));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nexport default (({\n  value,\n  message,\n  label,\n  name,\n  error,\n  onInput\n}) => h(\"div\", {\n  class: cc(['mdui-textfield', 'mdui-textfield-floating-label', 'mdui-textfield-has-bottom', {\n    'mdui-textfield-invalid': message,\n    'mdui-textfield-not-empty': value\n  }])\n}, h(\"label\", {\n  class: \"mdui-textfield-label\"\n}, label), h(\"input\", {\n  oninput: onInput,\n  value: value,\n  class: \"mdui-textfield-input\",\n  name: name,\n  type: \"text\",\n  required: \"required\"\n}), h(\"div\", {\n  class: \"mdui-textfield-error\"\n}, error)));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nexport default (({\n  value,\n  message,\n  label,\n  name,\n  onInput\n}) => h(\"div\", {\n  class: cc(['mdui-textfield', 'mdui-textfield-floating-label', 'mdui-textfield-has-bottom', {\n    'mdui-textfield-invalid': message,\n    'mdui-textfield-not-empty': value\n  }])\n}, h(\"label\", {\n  class: \"mdui-textfield-label\"\n}, label), h(\"input\", {\n  oninput: onInput,\n  value: value,\n  class: \"mdui-textfield-input\",\n  name: name,\n  type: \"password\",\n  required: \"required\"\n}), h(\"div\", {\n  class: \"mdui-textfield-error\"\n}, message || '密码不能为空')));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nexport default (({\n  value,\n  message,\n  image,\n  hide,\n  onInput,\n  onRefresh\n}) => h(\"div\", {\n  class: cc(['mdui-textfield', 'mdui-textfield-floating-label', 'mdui-textfield-has-bottom', 'captcha-field', {\n    'mdui-textfield-invalid': message,\n    'mdui-textfield-not-empty': value,\n    'mdui-hidden': hide\n  }])\n}, h(\"label\", {\n  class: \"mdui-textfield-label\"\n}, \"\\u56FE\\u5F62\\u9A8C\\u8BC1\\u7801\"), h(\"input\", {\n  oninput: onInput,\n  value: value,\n  class: \"mdui-textfield-input\",\n  name: \"captcha_code\",\n  type: \"text\",\n  autocomplete: \"off\",\n  required: !hide\n}), h(\"div\", {\n  class: \"mdui-textfield-error\"\n}, message || '请输入图形验证码'), h(\"img\", {\n  class: \"captcha-image\",\n  src: image,\n  title: \"\\u70B9\\u51FB\\u5237\\u65B0\\u9A8C\\u8BC1\\u7801\",\n  onclick: onRefresh\n})));","import { h } from 'hyperapp';\nexport default (({\n  disabled,\n  text\n}) => h(\"button\", {\n  type: \"submit\",\n  class: \"mdui-btn mdui-btn-raised mdui-color-theme action-btn\",\n  disabled: disabled\n}, text));","import { h } from 'hyperapp';\nimport Submit from '~/common/account/components/submit.jsx';\n\nconst Button = () => h(\"button\", {\n  class: \"mdui-btn mdui-ripple more-option\",\n  type: \"button\",\n  \"mdui-menu\": \"{target: '#mc-login-menu', position: 'top', covered: true}\"\n}, \"\\u66F4\\u591A\\u9009\\u9879\", h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"arrow_drop_down\"));\n\nconst Menu = ({\n  actions\n}) => h(\"ul\", {\n  class: \"mdui-menu\",\n  id: \"mc-login-menu\"\n}, h(\"li\", {\n  class: \"mdui-menu-item\"\n}, h(\"a\", {\n  onclick: actions.toReset,\n  class: \"mdui-ripple\"\n}, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\")), h(\"li\", {\n  class: \"mdui-menu-item\"\n}, h(\"a\", {\n  onclick: actions.toRegister,\n  class: \"mdui-ripple\"\n}, \"\\u521B\\u5EFA\\u65B0\\u8D26\\u53F7\")));\n\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  class: \"actions mdui-clearfix\"\n}, h(Button, null), h(Menu, {\n  actions: actions\n}), h(Submit, {\n  disabled: state.submitting,\n  text: state.submitting ? '登录中…' : '登录'\n})));","import { h } from 'hyperapp';\nimport './index.less';\nimport Close from '~/common/account/components/close.jsx';\nimport Title from '~/common/account/components/title.jsx';\nimport FieldName from '~/common/account/components/field-name.jsx';\nimport FieldPassword from '~/common/account/components/field-password.jsx';\nimport FieldCaptcha from '~/common/account/components/field-captcha.jsx';\nimport Actions from './components/actions.jsx';\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  oncreate: element => actions.onCreate({\n    element\n  }),\n  key: \"login\",\n  class: \"mc-account mc-login mdui-dialog\"\n}, h(Close, {\n  onClick: actions.close,\n  icon: \"close\"\n}), h(Title, {\n  text: \"\\u767B\\u5F55\"\n}), h(\"form\", {\n  onsubmit: actions.login\n}, h(FieldName, {\n  value: state.name,\n  message: state.name_msg,\n  label: \"\\u7528\\u6237\\u540D\\u6216\\u90AE\\u7BB1\",\n  name: \"name\",\n  error: state.name_msg || '账号不能为空',\n  onInput: actions.onInput\n}), h(FieldPassword, {\n  value: state.password,\n  message: state.password_msg,\n  label: \"\\u5BC6\\u7801\",\n  name: \"password\",\n  onInput: actions.onInput\n}), h(FieldCaptcha, {\n  value: state.captcha_code,\n  message: state.captcha_code_msg,\n  image: state.captcha_image,\n  hide: !state.captcha_token,\n  onInput: actions.onInput,\n  onRefresh: actions.refreshCaptcha\n}), h(Actions, {\n  state: state,\n  actions: actions\n}))));","import { h } from 'hyperapp';\nexport default (() => h(\"i\", {\n  class: \"mdui-icon material-icons avatar\"\n}, \"account_circle\"));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nexport default (({\n  value,\n  message,\n  onInput\n}) => h(\"div\", {\n  class: cc(['mdui-textfield', 'mdui-textfield-floating-label', 'mdui-textfield-has-bottom', {\n    'mdui-textfield-invalid': message,\n    'mdui-textfield-not-empty': value\n  }])\n}, h(\"label\", {\n  class: \"mdui-textfield-label\"\n}, \"\\u90AE\\u7BB1\"), h(\"input\", {\n  oninput: onInput,\n  value: value,\n  class: \"mdui-textfield-input\",\n  name: \"email\",\n  type: \"email\",\n  required: \"required\"\n}), h(\"div\", {\n  class: \"mdui-textfield-error\"\n}, message || '邮箱格式错误')));","import { h } from 'hyperapp';\nimport cc from 'classcat';\n\nconst sendText = sending => sending ? '发送中…' : '发送验证码';\n\nexport default (({\n  value,\n  message,\n  sending,\n  show_resend_countdown,\n  resend_countdown,\n  onInput,\n  onSend\n}) => h(\"div\", {\n  class: cc(['mdui-textfield', 'mdui-textfield-floating-label', 'mdui-textfield-has-bottom', 'send-email-field', {\n    'mdui-textfield-invalid': message,\n    'mdui-textfield-not-empty': value\n  }])\n}, h(\"labe\", {\n  class: \"mdui-textfield-label\"\n}, \"\\u90AE\\u4EF6\\u9A8C\\u8BC1\\u7801\"), h(\"input\", {\n  oninput: onInput,\n  value: value,\n  class: \"mdui-textfield-input\",\n  name: \"email_code\",\n  type: \"text\",\n  autocomplete: \"off\",\n  required: \"required\"\n}), h(\"div\", {\n  class: \"mdui-textfield-error\"\n}, message || '验证码不能为空'), h(\"button\", {\n  onclick: onSend,\n  class: \"mdui-btn send-email\",\n  type: \"button\",\n  disabled: sending || show_resend_countdown\n}, show_resend_countdown ? `${resend_countdown}s` : sendText(sending))));","import { h } from 'hyperapp';\nimport Submit from '~/common/account/components/submit.jsx';\n\nconst Button = ({\n  actions\n}) => h(\"div\", {\n  class: \"mdui-btn mdui-ripple more-option\",\n  onclick: actions.toLogin\n}, \"\\u5DF2\\u6709\\u8D26\\u53F7\\uFF1F\");\n\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  class: \"actions\"\n}, h(Button, {\n  actions: actions\n}), h(Submit, {\n  disabled: state.verifying,\n  text: state.verifying ? '正在验证…' : '下一步'\n})));","import { h } from 'hyperapp';\nimport Submit from '~/common/account/components/submit.jsx';\nexport default (({\n  state\n}) => h(\"div\", {\n  class: \"actions mdui-clearfix\"\n}, h(Submit, {\n  disabled: state.submitting,\n  text: state.submitting ? '注册中…' : '注册'\n})));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\nimport Close from '~/common/account/components/close.jsx';\nimport Avatar from '~/common/account/components/avatar.jsx';\nimport Title from '~/common/account/components/title.jsx';\nimport FieldEmail from '~/common/account/components/field-email.jsx';\nimport FieldCaptcha from '~/common/account/components/field-captcha.jsx';\nimport FieldEmailCode from '~/common/account/components/field-email-code.jsx';\nimport FieldName from '~/common/account/components/field-name.jsx';\nimport FieldPassword from '~/common/account/components/field-password.jsx';\nimport SendActions from './components/send-actions.jsx';\nimport RegisterActions from './components/register-actions.jsx';\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  oncreate: element => actions.onCreate({\n    element\n  }),\n  key: \"register\",\n  class: \"mc-account mc-register mdui-dialog\"\n}, h(Close, {\n  onClick: state.email_valid ? actions.prevStep : actions.close,\n  icon: state.email_valid ? 'arrow_back' : 'close'\n}), state.email_valid ? h(Avatar, null) : null, h(Title, {\n  text: state.email_valid ? state.email : '创建新账号'\n}), h(\"form\", {\n  onsubmit: actions.nextStep,\n  class: cc([{\n    'mdui-hidden': state.email_valid\n  }]),\n  key: \"send\"\n}, h(FieldEmail, {\n  value: state.email,\n  message: state.email_msg,\n  onInput: actions.onInput\n}), h(FieldCaptcha, {\n  value: state.captcha_code,\n  message: state.captcha_code_msg,\n  image: state.captcha_image,\n  hide: !state.captcha_token,\n  onInput: actions.onInput,\n  onRefresh: actions.refreshCaptcha\n}), h(FieldEmailCode, {\n  value: state.email_code,\n  message: state.email_code_msg,\n  sending: state.sending,\n  show_resend_countdown: state.show_resend_countdown,\n  resend_countdown: state.resend_countdown,\n  onInput: actions.onInput,\n  onSend: actions.sendEmail\n}), h(SendActions, {\n  state: state,\n  actions: actions\n})), h(\"form\", {\n  onsubmit: actions.register,\n  class: cc([{\n    'mdui-hidden': !state.email_valid\n  }]),\n  key: \"submit\"\n}, h(FieldName, {\n  value: state.username,\n  message: state.username_msg,\n  label: \"\\u7528\\u6237\\u540D\",\n  name: \"username\",\n  error: state.username_msg || '用户名不能为空',\n  onInput: actions.onInput\n}), h(FieldPassword, {\n  value: state.password,\n  message: state.password_msg,\n  label: \"\\u5BC6\\u7801\",\n  name: \"password\",\n  onInput: actions.onInput\n}), h(RegisterActions, {\n  state: state\n}))));","import { h } from 'hyperapp';\nimport Submit from '~/common/account/components/submit.jsx';\n\nconst Button = () => h(\"button\", {\n  type: \"button\",\n  class: \"mdui-btn mdui-ripple more-option\",\n  \"mdui-menu\": \"{target: '#mc-password-reset-menu', position: 'top', covered: true}\"\n}, \"\\u66F4\\u591A\\u9009\\u9879\", h(\"i\", {\n  className: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"arrow_drop_down\"));\n\nconst Menu = ({\n  actions\n}) => h(\"ul\", {\n  class: \"mdui-menu\",\n  id: \"mc-password-reset-menu\"\n}, h(\"li\", {\n  class: \"mdui-menu-item\"\n}, h(\"a\", {\n  onclick: actions.toLogin,\n  class: \"mdui-ripple\"\n}, \"\\u767B\\u5F55\\u8D26\\u53F7\")), h(\"li\", {\n  class: \"mdui-menu-item\"\n}, h(\"a\", {\n  onclick: actions.toRegister,\n  class: \"mdui-ripple\"\n}, \"\\u521B\\u5EFA\\u65B0\\u8D26\\u53F7\")));\n\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  class: \"actions\"\n}, h(Button, null), h(Menu, {\n  actions: actions\n}), h(Submit, {\n  disabled: state.verifying,\n  text: state.verifying ? '正在验证…' : '下一步'\n})));","import { h } from 'hyperapp';\nimport Submit from '~/common/account/components/submit.jsx';\nexport default (({\n  state\n}) => h(\"div\", {\n  class: \"actions mdui-clearfix\"\n}, h(Submit, {\n  disabled: state.submitting,\n  text: state.submitting ? '提交中…' : '提交'\n})));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\nimport Close from '~/common/account/components/close.jsx';\nimport Avatar from '~/common/account/components/avatar.jsx';\nimport Title from '~/common/account/components/title.jsx';\nimport FieldEmail from '~/common/account/components/field-email.jsx';\nimport FieldEmailCode from '~/common/account/components/field-email-code.jsx';\nimport FieldCaptcha from '~/common/account/components/field-captcha.jsx';\nimport FieldPassword from '~/common/account/components/field-password.jsx';\nimport VerifyActions from './components/verify-actions.jsx';\nimport ResetActions from './components/reset-actions.jsx';\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  oncreate: element => actions.onCreate({\n    element\n  }),\n  key: \"reset\",\n  class: \"mc-account mc-reset mdui-dialog\"\n}, h(Close, {\n  onClick: state.email_valid ? actions.prevStep : actions.close,\n  icon: state.email_valid ? 'arrow_back' : 'close'\n}), state.email_valid ? h(Avatar, null) : null, h(Title, {\n  text: state.email_valid ? state.email : '重置密码'\n}), h(\"form\", {\n  onsubmit: actions.nextStep,\n  class: cc([{\n    'mdui-hidden': state.email_valid\n  }]),\n  key: \"verify\"\n}, h(FieldEmail, {\n  value: state.email,\n  message: state.email_msg,\n  onInput: actions.onInput\n}), h(FieldCaptcha, {\n  value: state.captcha_code,\n  message: state.captcha_code_msg,\n  image: state.captcha_image,\n  hide: !state.captcha_token,\n  onInput: actions.onInput,\n  onRefresh: actions.refreshCaptcha\n}), h(FieldEmailCode, {\n  value: state.email_code,\n  message: state.email_code_msg,\n  sending: state.sending,\n  show_resend_countdown: state.show_resend_countdown,\n  resend_countdown: state.resend_countdown,\n  onInput: actions.onInput,\n  onSend: actions.sendEmail\n}), h(VerifyActions, {\n  state: state,\n  actions: actions\n})), h(\"form\", {\n  onsubmit: actions.submit,\n  class: cc([{\n    'mdui-hidden': !state.email_valid\n  }]),\n  key: \"submit\"\n}, h(FieldPassword, {\n  value: state.password,\n  message: state.password_msg,\n  label: \"\\u65B0\\u5BC6\\u7801\",\n  name: \"password\",\n  onInput: actions.onInput\n}), h(FieldPassword, {\n  value: state.password_repeat,\n  message: state.password_repeat_msg,\n  label: \"\\u91CD\\u590D\\u65B0\\u5BC6\\u7801\",\n  name: \"password_repeat\",\n  onInput: actions.onInput\n}), h(ResetActions, {\n  state: state\n}))));","import { h } from 'hyperapp';\nimport './index.less';\nimport Loading from '~/components/loading/view.jsx';\nimport Loaded from '~/components/loaded/view.jsx';\nimport Empty from '~/components/empty/view.jsx';\nimport Follow from '~/components/follow/view.jsx';\n\nconst Title = ({\n  state\n}) => h(\"div\", {\n  class: \"mdui-dialog-title\"\n}, h(\"button\", {\n  class: \"close mdui-btn mdui-btn-icon mdui-ripple\",\n  \"mdui-dialog-close\": true\n}, h(\"i\", {\n  class: \"mdui-icon material-icons\"\n}, \"close\")), state.pagination ? state.type === 'followees' ? [\"\\u5173\\u6CE8\\u4E86 \", state.pagination.total, \" \\u4EBA\"] : [state.pagination.total, \" \\u4F4D\\u5173\\u6CE8\\u8005\"] : null);\n\nconst Item = ({\n  item,\n  actions\n}) => h(\"div\", {\n  class: \"item\"\n}, h(\"div\", {\n  class: \"mdui-list-item mdui-ripple\",\n  key: item.user_id,\n  onclick: () => actions.onItemClick(item.user_id)\n}, h(\"div\", {\n  class: \"mdui-list-item-avatar\"\n}, h(\"img\", {\n  src: item.avatar.middle\n})), h(\"div\", {\n  class: \"mdui-list-item-content\"\n}, item.username)), !item.relationships.is_me ? h(Follow, {\n  item: item,\n  type: \"users_dialog\",\n  id: item.user_id,\n  actions: actions\n}) : null);\n\nexport default (({\n  state,\n  actions\n}) => {\n  const isEmpty = !state.loading && !state.data.length && state.pagination;\n  const isLoading = state.loading;\n  const isLoaded = !state.loading && state.pagination && state.pagination.page === state.pagination.pages;\n  return h(\"div\", {\n    key: \"users-dialog\",\n    class: \"mdui-dialog mc-users-dialog\",\n    oncreate: element => actions.onCreate({\n      element\n    })\n  }, h(Title, {\n    state: state\n  }), h(\"div\", {\n    class: \"mdui-dialog-content\"\n  }, h(\"div\", {\n    class: \"mdui-list\"\n  }, state.data.map(item => h(Item, {\n    item: item,\n    actions: actions\n  }))), h(Empty, {\n    show: isEmpty,\n    title: state.type === 'followees' ? '尚未关注任何用户' : '没有任何关注者'\n  }), h(Loading, {\n    show: isLoading\n  }), h(Loaded, {\n    show: isLoaded\n  })));\n});","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './index.less';\nexport default (({\n  state,\n  actions\n}) => {\n  const Item = ({\n    reason\n  }) => h(\"label\", {\n    class: \"mdui-list-item\"\n  }, h(\"div\", {\n    class: \"mdui-radio\"\n  }, h(\"input\", {\n    type: \"radio\",\n    name: \"reason\",\n    value: reason,\n    checked: reason === state.reason,\n    onchange: event => actions.onChange(event)\n  }), h(\"i\", {\n    class: \"mdui-radio-icon\"\n  })), h(\"div\", {\n    class: \"mdui-list-item-content\"\n  }, reason));\n\n  return h(\"div\", {\n    oncreate: element => actions.onCreate({\n      element\n    }),\n    key: \"report-dialog\",\n    class: \"mc-report-dialog mdui-dialog\"\n  }, h(\"div\", {\n    class: \"mdui-dialog-title\"\n  }, h(\"span\", null, \"\\u4E3E\\u62A5\"), h(\"button\", {\n    class: \"mdui-btn mdui-btn-icon mdui-ripple\",\n    onclick: actions.close\n  }, h(\"i\", {\n    class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n  }, \"close\"))), h(\"form\", {\n    class: \"mdui-dialog-content\",\n    method: \"post\"\n  }, h(\"div\", {\n    class: \"mdui-list\"\n  }, h(Item, {\n    reason: \"\\u5783\\u573E\\u5E7F\\u544A\\u4FE1\\u606F\"\n  }), h(Item, {\n    reason: \"\\u4E0D\\u53CB\\u5584\\u884C\\u4E3A\"\n  }), h(Item, {\n    reason: \"\\u6709\\u5BB3\\u4FE1\\u606F\"\n  }), h(Item, {\n    reason: \"\\u6D89\\u5ACC\\u4FB5\\u6743\"\n  }), h(Item, {\n    reason: \"\\u8BF1\\u5BFC\\u8D5E\\u540C\\u3001\\u5173\\u6CE8\\u7B49\\u884C\\u4E3A\"\n  }), h(Item, {\n    reason: \"\\u5176\\u4ED6\\u539F\\u56E0\"\n  }), h(\"div\", {\n    class: cc(['mdui-textfield', {\n      'mdui-hidden': state.reason !== '其他原因'\n    }])\n  }, h(\"textarea\", {\n    class: \"custom-reason mdui-textfield-input\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u539F\\u56E0\"\n  })))), h(\"div\", {\n    class: \"mdui-dialog-actions\"\n  }, h(\"button\", {\n    class: \"mdui-btn mdui-ripple\",\n    \"mdui-dialog-cancel\": true\n  }, \"\\u53D6\\u6D88\"), h(\"button\", {\n    class: \"mdui-btn mdui-ripple\",\n    \"mdui-dialog-confirm\": true\n  }, \"\\u4E3E\\u62A5\")));\n});","import { h } from 'hyperapp';\nimport './index.less';\nimport WeiboSvg from '~/svg/weibo.svg';\nimport FacebookSvg from '~/svg/facebook.svg';\nimport TwitterSvg from '~/svg/twitter.svg';\n\nconst Item = ({\n  name,\n  svg,\n  onClick\n}) => h(\"div\", {\n  class: \"mdui-list-item mdui-ripple\",\n  onclick: onClick\n}, h(\"img\", {\n  src: `${window.G_ROOT}/static/theme/material/${svg}`\n}), h(\"div\", {\n  class: \"mdui-list-item-content\"\n}, name));\n\nexport default (({\n  actions\n}) => h(\"div\", {\n  oncreate: element => actions.onCreate({\n    element\n  }),\n  key: \"share-dialog\",\n  class: \"mc-share-dialog mdui-dialog\"\n}, h(\"div\", {\n  class: \"mdui-dialog-title\"\n}, h(\"span\", null, \"\\u5206\\u4EAB\"), h(\"button\", {\n  class: \"mdui-btn mdui-btn-icon mdui-ripple\",\n  onclick: actions.close\n}, h(\"i\", {\n  class: \"mdui-icon material-icons mdui-text-color-theme-icon\"\n}, \"close\"))), h(\"div\", {\n  class: \"mdui-dialog-content\"\n}, h(\"div\", {\n  class: \"mdui-list\"\n}, h(Item, {\n  name: \"\\u5FAE\\u535A\",\n  svg: WeiboSvg,\n  onClick: actions.shareToWeibo\n}), h(Item, {\n  name: \"Facebook\",\n  svg: FacebookSvg,\n  onClick: actions.shareToFacebook\n}), h(Item, {\n  name: \"Twitter\",\n  svg: TwitterSvg,\n  onClick: actions.shareToTwitter\n})))));","export default \"./4a718302573d384b438fc47f8a3c5031.svg\";","export default \"./4fb701ba006326e351298a120baa1284.svg\";","export default \"./0a3424f1a2cc42d9637f8ab1f9d55733.svg\";","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport './dialog.less';\nimport Comments from './view.jsx';\n/**\n * 评论放在模态框中\n */\n\nexport default (({\n  state,\n  actions\n}) => h(\"div\", {\n  class: cc(['mc-comments-dialog', 'mdui-dialog', {\n    'mdui-dialog-open': state.open_dialog\n  }])\n}, h(Comments, {\n  commentable_type: \"\",\n  commentable_id: 0,\n  isInDialog: true,\n  state: state,\n  actions: actions\n})));","import { h } from 'hyperapp';\nimport cc from 'classcat';\nimport { Route } from 'hyperapp-router';\nimport { $body } from 'mdui/es/utils/dom';\nimport { isUndefined } from 'mdui.jq/es/utils';\nimport { getCount } from 'mdclub-sdk-js/es/NotificationApi';\nimport { fullPath, isPathArticles, isPathQuestions, isPathTopics, isPathUsers } from '~/utils/path';\nimport { emit } from '~/utils/pubsub';\nimport Index from '~/pages/index/view.jsx';\nimport Questions from '~/pages/questions/view.jsx';\nimport QuestionAndAnswer from '~/pages/question/view.jsx';\nimport Articles from '~/pages/articles/view.jsx';\nimport Article from '../pages/article/view.jsx';\nimport Topics from '~/pages/topics/view.jsx';\nimport Topic from '../pages/topic/view.jsx';\nimport Users from '~/pages/users/view.jsx';\nimport User from '~/pages/user/view.jsx';\nimport Notifications from '~/pages/notifications/view.jsx'; // import Inbox from '../pages/inbox/view';\n\nimport Appbar from '~/components/appbar/view.jsx';\nimport Drawer from '~/components/drawer/view.jsx';\nimport Login from '~/components/login/view.jsx';\nimport Register from '~/components/register/view.jsx';\nimport Reset from '~/components/reset/view.jsx';\nimport UsersDialog from '~/components/users-dialog/view.jsx';\nimport ReportDialog from '~/components/report-dialog/view.jsx';\nimport ShareDialog from '~/components/share-dialog/view.jsx';\nimport CommentsDialog from '~/components/comments/dialog.jsx';\n\nconst onCreate = user => {\n  // 根据操作系统的暗色模式设置主题\n  const layoutMedia = window.matchMedia('(prefers-color-scheme: dark)');\n\n  const changeLayout = e => emit('layout_update', e.matches ? 'dark' : 'light');\n\n  emit('layout_update', layoutMedia.matches ? 'dark' : 'light'); // IE 的 matchMedia 中不存在 addEventListener 方法\n\n  if (!isUndefined(layoutMedia.addEventListener)) {\n    layoutMedia.addEventListener('change', changeLayout);\n  } else if (!isUndefined(layoutMedia.addListener)) {\n    // safari 不支持 addEventListener，支持 addListener\n    layoutMedia.addListener(changeLayout);\n  } // 轮询加载未读通知数量，每 30 秒加载一次\n\n\n  const loadNotificationCount = () => {\n    getCount().then(({\n      data: {\n        notification_count\n      }\n    }) => {\n      emit('notification_count_update', notification_count);\n    });\n  };\n\n  if (user) {\n    setInterval(loadNotificationCount, 30000);\n    loadNotificationCount();\n  }\n};\n\nexport default ((globalState, globalActions) => {\n  const classList = ['mdui-appbar-with-toolbar', 'mg-app']; // 应用栏中包含 tab 时\n\n  if (isPathQuestions() || isPathArticles() || isPathTopics() && globalState.user.user || isPathUsers() && globalState.user.user) {\n    classList.push('mdui-appbar-with-tab');\n  } // 暗色模式\n\n\n  $body[globalState.theme.layout === 'dark' ? 'addClass' : 'removeClass']('mdui-theme-layout-dark');\n  return h(\"div\", {\n    class: cc(classList),\n    oncreate: () => {\n      onCreate(globalState.user.user);\n    }\n  }, h(Appbar, {\n    user: globalState.user.user,\n    interviewee: globalState.user.interviewee,\n    notifications: globalState.notifications\n  }), h(Drawer, {\n    user: globalState.user.user,\n    interviewee: globalState.user.interviewee\n  }), h(Route, {\n    path: fullPath('/'),\n    render: Index(globalState.index, globalActions.index)\n  }), h(Route, {\n    path: fullPath('/questions'),\n    render: Questions(globalState.questions, globalActions.questions)\n  }), h(Route, {\n    path: fullPath('/questions/:question_id'),\n    render: QuestionAndAnswer(globalState.question, globalActions.question)\n  }), h(Route, {\n    path: fullPath('/questions/:question_id/answers/:answer_id'),\n    render: QuestionAndAnswer(globalState.answer, globalActions.answer)\n  }), h(Route, {\n    path: fullPath('/articles'),\n    render: Articles(globalState.articles, globalActions.articles)\n  }), h(Route, {\n    path: fullPath('/articles/:article_id'),\n    render: Article(globalState.article, globalActions.article)\n  }), h(Route, {\n    path: fullPath('/topics'),\n    render: Topics(globalState.topics, globalActions.topics)\n  }), h(Route, {\n    path: fullPath('/topics/:topic_id'),\n    render: Topic(globalState.topic, globalActions.topic)\n  }), h(Route, {\n    path: fullPath('/users'),\n    render: Users(globalState.users, globalActions.users)\n  }), h(Route, {\n    path: fullPath('/users/:user_id'),\n    render: User(globalState.user, globalActions.user)\n  }), h(Route, {\n    path: fullPath('/notifications'),\n    render: Notifications(globalState.notifications, globalActions.notifications)\n  }), !globalState.user.user ? [h(Login, {\n    state: globalState.login,\n    actions: globalActions.login,\n    key: \"0\"\n  }), h(Register, {\n    state: globalState.register,\n    actions: globalActions.register,\n    key: \"1\"\n  }), h(Reset, {\n    state: globalState.reset,\n    actions: globalActions.reset,\n    key: \"2\"\n  })] : null, h(UsersDialog, {\n    state: globalState.usersDialog,\n    actions: globalActions.usersDialog\n  }), h(ReportDialog, {\n    state: globalState.reportDialog,\n    actions: globalActions.reportDialog\n  }), h(ShareDialog, {\n    state: globalState.shareDialog,\n    actions: globalActions.shareDialog\n  }), h(CommentsDialog, {\n    state: globalState.comments,\n    actions: globalActions.comments\n  }));\n});","import { h } from 'hyperapp';\nimport './index.less';\nimport Header from './components/header/view.jsx';\nimport Topics from './components/topics/view.jsx';\nimport Items from './components/items/view.jsx';\nexport default ((state, actions) => ({\n  match\n}) => h(\"div\", {\n  oncreate: actions.onCreate,\n  ondestroy: actions.onDestroy,\n  key: match.url,\n  id: \"page-index\",\n  class: \"mdui-container\"\n}, h(Header, {\n  title: \"\\u63A8\\u8350\\u8BDD\\u9898\",\n  url: \"/topics#recommended\"\n}), h(Topics, {\n  state: state,\n  actions: actions\n}), h(\"div\", {\n  class: \"items-wrapper\"\n}, h(Items, {\n  title: \"\\u6700\\u8FD1\\u66F4\\u65B0\\u63D0\\u95EE\",\n  items: state.questions_recent_data,\n  primaryKey: \"question_id\",\n  dataName: \"questions_recent_data\",\n  loading: state.questions_recent_loading,\n  url: \"/questions\",\n  actions: actions\n}), h(Items, {\n  title: \"\\u6700\\u8FD1\\u70ED\\u95E8\\u63D0\\u95EE\",\n  items: state.questions_popular_data,\n  primaryKey: \"question_id\",\n  dataName: \"questions_popular_data\",\n  loading: state.questions_popular_loading,\n  url: \"/questions#popular\",\n  actions: actions\n})), h(\"div\", {\n  class: \"items-wrapper\"\n}, h(Items, {\n  title: \"\\u6700\\u65B0\\u6587\\u7AE0\",\n  items: state.articles_recent_data,\n  primaryKey: \"article_id\",\n  dataName: \"articles_recent_data\",\n  loading: state.articles_recent_loading,\n  url: \"/articles\",\n  actions: actions\n}), h(Items, {\n  title: \"\\u6700\\u8FD1\\u70ED\\u95E8\\u6587\\u7AE0\",\n  items: state.articles_popular_data,\n  primaryKey: \"article_id\",\n  dataName: \"articles_popular_data\",\n  loading: state.articles_popular_loading,\n  url: \"/articles#popular\",\n  actions: actions\n}))));","import $ from 'mdui.jq';\nimport { subscribe } from '~/utils/pubsub';\n/**\n * 全局事件监听\n * 需要在子组件中操作父组件时，只能通过触发这里指定的事件来实现\n * @param app\n */\n\nfunction listener(app) {\n  // 更新当前登录用户信息\n  subscribe('user_update', user => {\n    app.user.setState({\n      user\n    });\n  }); // 设置布局色\n\n  subscribe('layout_update', layout => {\n    app.theme.setLayout(layout);\n  }); // 更新路由事件\n\n  subscribe('route_update', () => {\n    // 回到页面顶部\n    window.scrollTo(0, 0); // 移除 tooltip 元素\n\n    $('.mdui-tooltip').remove(); // 在手机和平板时，切换路由后关闭抽屉导航\n\n    if (window.innerWidth < 1024) {\n      const drawerInstance = $('.mc-drawer').data('drawerInstance');\n\n      if (drawerInstance) {\n        drawerInstance.close();\n      }\n    }\n\n    app.login.close();\n    app.register.close();\n    app.reset.close();\n    app.usersDialog.close();\n    app.comments.closeDialog();\n    app.reportDialog.close();\n    app.shareDialog.close();\n  }); // 打开登录对话框\n\n  subscribe('login_open', () => {\n    app.login.open();\n  }); // 打开注册对话框\n\n  subscribe('register_open', () => {\n    app.register.open();\n  }); // 打开重置密码对话框\n\n  subscribe('reset_open', () => {\n    app.reset.open();\n  }); // 打开用户列表对话框\n\n  subscribe('users_dialog_open', props => {\n    app.usersDialog.open(props);\n  });\n  /**\n   * 打开分享对话框\n   */\n\n  subscribe('share_dialog_open', props => {\n    app.shareDialog.open(props);\n  });\n  /**\n   * 打开举报对话框\n   */\n\n  subscribe('report_dialog_open', props => {\n    app.reportDialog.open(props);\n  }); // 关注或取消关注用户后，下次打开关注列表页面时，需要重新加载关注列表\n\n  subscribe('users_follow_updated', () => {\n    app.users.followUpdate();\n  }); // 关注或取消关注话题后，下次打开关注列表页面时，需要重新加载关注列表\n\n  subscribe('topics_follow_updated', () => {\n    app.topics.followUpdate();\n  }); // 关注或取消关注提问后，下次打开关注列表页面时，需要重新加载关注列表\n\n  subscribe('questions_follow_updated', () => {\n    app.questions.followUpdate();\n  }); // 关注或取消关注文章后，下次打开关注列表页面时，需要重新加载关注列表\n\n  subscribe('articles_follow_updated', () => {\n    app.articles.followUpdate();\n  }); // 更新提问详情后，需要更新列表中对应的提问\n\n  subscribe('question_updated', question => {\n    app.questions.questionUpdate(question);\n  }); // 更新未读通知数量\n\n  subscribe('notification_count_update', count => {\n    app.notifications.updateCount(count);\n  }); // 点击评论按钮，打开评论模态框\n\n  subscribe('comments_dialog_open', props => {\n    app.comments.openDialog(props);\n  });\n}\n\nexport default listener;","import '~/initializer/polyfill';\nimport { app } from 'hyperapp';\nimport { location } from 'hyperapp-router';\nimport $ from 'mdui.jq';\nimport { emit } from '~/utils/pubsub';\nimport '~/initializer/index';\nimport actions from '~/initializer/actions';\nimport state from '~/initializer/state';\nimport view from '~/initializer/view.jsx';\nimport listener from '~/initializer/listener'; // import { withLogger } from '@hyperapp/logger';\n\n$(() => {\n  document.body.innerHTML = ''; // window.app = withLogger(app)(state, actions, view, document.body);\n\n  window.app = app(state, actions, view, document.body);\n  listener(window.app);\n  location.subscribe(window.app.location); // 读取当前登陆用户\n\n  const user = window.G_USER;\n\n  if (user) {\n    emit('user_update', user);\n    window.G_USER = null;\n  }\n});"],"sourceRoot":""}